<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>前端问题整合 | 木可生森</title>
    <meta name="generator" content="VuePress 1.9.2">
    <link rel="icon" href="/docs/img/logo.jpg">
    <meta name="description" content="瞧一瞧，看一看">
    
    <link rel="preload" href="/docs/assets/css/0.styles.1fca6052.css" as="style"><link rel="preload" href="/docs/assets/js/app.9351438b.js" as="script"><link rel="preload" href="/docs/assets/js/2.4eec09cd.js" as="script"><link rel="preload" href="/docs/assets/js/1177.30974d7f.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.e01ca1a3.js"><link rel="prefetch" href="/docs/assets/js/100.c46df915.js"><link rel="prefetch" href="/docs/assets/js/1000.c783124f.js"><link rel="prefetch" href="/docs/assets/js/1001.a37e0ca3.js"><link rel="prefetch" href="/docs/assets/js/1002.fba979d1.js"><link rel="prefetch" href="/docs/assets/js/1003.985c1713.js"><link rel="prefetch" href="/docs/assets/js/1004.3bf496c2.js"><link rel="prefetch" href="/docs/assets/js/1005.d8e92759.js"><link rel="prefetch" href="/docs/assets/js/1006.ac2f448a.js"><link rel="prefetch" href="/docs/assets/js/1007.e94d814d.js"><link rel="prefetch" href="/docs/assets/js/1008.30e56b91.js"><link rel="prefetch" href="/docs/assets/js/1009.8b8c1bbf.js"><link rel="prefetch" href="/docs/assets/js/101.63ed5b82.js"><link rel="prefetch" href="/docs/assets/js/1010.bc6e611b.js"><link rel="prefetch" href="/docs/assets/js/1011.c383ed0e.js"><link rel="prefetch" href="/docs/assets/js/1012.0b9a5099.js"><link rel="prefetch" href="/docs/assets/js/1013.7e842d1d.js"><link rel="prefetch" href="/docs/assets/js/1014.d9c9cd4b.js"><link rel="prefetch" href="/docs/assets/js/1015.51347c1a.js"><link rel="prefetch" href="/docs/assets/js/1016.9b1397c9.js"><link rel="prefetch" href="/docs/assets/js/1017.11f23546.js"><link rel="prefetch" href="/docs/assets/js/1018.593a14af.js"><link rel="prefetch" href="/docs/assets/js/1019.1f683ac2.js"><link rel="prefetch" href="/docs/assets/js/102.236793de.js"><link rel="prefetch" href="/docs/assets/js/1020.5115d101.js"><link rel="prefetch" href="/docs/assets/js/1021.e440fd5c.js"><link rel="prefetch" href="/docs/assets/js/1022.d2e8ef3e.js"><link rel="prefetch" href="/docs/assets/js/1023.9ed138e1.js"><link rel="prefetch" href="/docs/assets/js/1024.41c64cd0.js"><link rel="prefetch" href="/docs/assets/js/1025.1bb8fab3.js"><link rel="prefetch" href="/docs/assets/js/1026.c1c7ecbc.js"><link rel="prefetch" href="/docs/assets/js/1027.801c4d62.js"><link rel="prefetch" href="/docs/assets/js/1028.908dbc45.js"><link rel="prefetch" href="/docs/assets/js/1029.027e11d6.js"><link rel="prefetch" href="/docs/assets/js/103.7f0f3f5c.js"><link rel="prefetch" href="/docs/assets/js/1030.614dc5cb.js"><link rel="prefetch" href="/docs/assets/js/1031.6bf622b4.js"><link rel="prefetch" href="/docs/assets/js/1032.b984395c.js"><link rel="prefetch" href="/docs/assets/js/1033.6fdcbddf.js"><link rel="prefetch" href="/docs/assets/js/1034.c9d346bb.js"><link rel="prefetch" href="/docs/assets/js/1035.9e214225.js"><link rel="prefetch" href="/docs/assets/js/1036.244451eb.js"><link rel="prefetch" href="/docs/assets/js/1037.ded6c19b.js"><link rel="prefetch" href="/docs/assets/js/1038.5854bf5a.js"><link rel="prefetch" href="/docs/assets/js/1039.8e5d8b03.js"><link rel="prefetch" href="/docs/assets/js/104.1b550121.js"><link rel="prefetch" href="/docs/assets/js/1040.c0ba78b6.js"><link rel="prefetch" href="/docs/assets/js/1041.9118ae65.js"><link rel="prefetch" href="/docs/assets/js/1042.9eb58334.js"><link rel="prefetch" href="/docs/assets/js/1043.e206c726.js"><link rel="prefetch" href="/docs/assets/js/1044.43c496a5.js"><link rel="prefetch" href="/docs/assets/js/1045.a1dddf09.js"><link rel="prefetch" href="/docs/assets/js/1046.267c671d.js"><link rel="prefetch" href="/docs/assets/js/1047.90e84c4d.js"><link rel="prefetch" href="/docs/assets/js/1048.9c76ad24.js"><link rel="prefetch" href="/docs/assets/js/1049.aa0ac9e5.js"><link rel="prefetch" href="/docs/assets/js/105.2b4a0516.js"><link rel="prefetch" href="/docs/assets/js/1050.d49198fd.js"><link rel="prefetch" href="/docs/assets/js/1051.0d72e913.js"><link rel="prefetch" href="/docs/assets/js/1052.bcc68b38.js"><link rel="prefetch" href="/docs/assets/js/1053.021c138e.js"><link rel="prefetch" href="/docs/assets/js/1054.24ea7aae.js"><link rel="prefetch" href="/docs/assets/js/1055.26f58eaa.js"><link rel="prefetch" href="/docs/assets/js/1056.bc398217.js"><link rel="prefetch" href="/docs/assets/js/1057.28186de5.js"><link rel="prefetch" href="/docs/assets/js/1058.14672a6c.js"><link rel="prefetch" href="/docs/assets/js/1059.221915df.js"><link rel="prefetch" href="/docs/assets/js/106.90a1bd05.js"><link rel="prefetch" href="/docs/assets/js/1060.4b236c9d.js"><link rel="prefetch" href="/docs/assets/js/1061.574039e6.js"><link rel="prefetch" href="/docs/assets/js/1062.bc9dc3e5.js"><link rel="prefetch" href="/docs/assets/js/1063.10b23ab2.js"><link rel="prefetch" href="/docs/assets/js/1064.081934ea.js"><link rel="prefetch" href="/docs/assets/js/1065.6b24e6a7.js"><link rel="prefetch" href="/docs/assets/js/1066.e51cfaa2.js"><link rel="prefetch" href="/docs/assets/js/1067.3ea8e62d.js"><link rel="prefetch" href="/docs/assets/js/1068.689b4d2c.js"><link rel="prefetch" href="/docs/assets/js/1069.786aa39b.js"><link rel="prefetch" href="/docs/assets/js/107.eecad668.js"><link rel="prefetch" href="/docs/assets/js/1070.779a45e8.js"><link rel="prefetch" href="/docs/assets/js/1071.c4977bbd.js"><link rel="prefetch" href="/docs/assets/js/1072.045a4078.js"><link rel="prefetch" href="/docs/assets/js/1073.af258b6d.js"><link rel="prefetch" href="/docs/assets/js/1074.069f93d8.js"><link rel="prefetch" href="/docs/assets/js/1075.75a96250.js"><link rel="prefetch" href="/docs/assets/js/1076.ed6f6816.js"><link rel="prefetch" href="/docs/assets/js/1077.173cf90f.js"><link rel="prefetch" href="/docs/assets/js/1078.b2592702.js"><link rel="prefetch" href="/docs/assets/js/1079.0a876b80.js"><link rel="prefetch" href="/docs/assets/js/108.dcd2ed04.js"><link rel="prefetch" href="/docs/assets/js/1080.8cd85d80.js"><link rel="prefetch" href="/docs/assets/js/1081.5ba849b9.js"><link rel="prefetch" href="/docs/assets/js/1082.15132811.js"><link rel="prefetch" href="/docs/assets/js/1083.6af09561.js"><link rel="prefetch" href="/docs/assets/js/1084.255a65e9.js"><link rel="prefetch" href="/docs/assets/js/1085.fb6c4bcb.js"><link rel="prefetch" href="/docs/assets/js/1086.9ad515f0.js"><link rel="prefetch" href="/docs/assets/js/1087.d4960acd.js"><link rel="prefetch" href="/docs/assets/js/1088.8dd28a3d.js"><link rel="prefetch" href="/docs/assets/js/1089.e3bf9538.js"><link rel="prefetch" href="/docs/assets/js/109.4faa1afc.js"><link rel="prefetch" href="/docs/assets/js/1090.47ac564d.js"><link rel="prefetch" href="/docs/assets/js/1091.584365c2.js"><link rel="prefetch" href="/docs/assets/js/1092.6c76691c.js"><link rel="prefetch" href="/docs/assets/js/1093.1d7d7f87.js"><link rel="prefetch" href="/docs/assets/js/1094.76461963.js"><link rel="prefetch" href="/docs/assets/js/1095.0eb8570e.js"><link rel="prefetch" href="/docs/assets/js/1096.e7989c54.js"><link rel="prefetch" href="/docs/assets/js/1097.8ec71ba3.js"><link rel="prefetch" href="/docs/assets/js/1098.1d0595b6.js"><link rel="prefetch" href="/docs/assets/js/1099.f4fb478f.js"><link rel="prefetch" href="/docs/assets/js/11.ab3ac22d.js"><link rel="prefetch" href="/docs/assets/js/110.07f637cc.js"><link rel="prefetch" href="/docs/assets/js/1100.d5dd278b.js"><link rel="prefetch" href="/docs/assets/js/1101.65e1bdee.js"><link rel="prefetch" href="/docs/assets/js/1102.3cc3fb95.js"><link rel="prefetch" href="/docs/assets/js/1103.c12f31f0.js"><link rel="prefetch" href="/docs/assets/js/1104.a240aa5e.js"><link rel="prefetch" href="/docs/assets/js/1105.6a5e7b9a.js"><link rel="prefetch" href="/docs/assets/js/1106.d4007c0f.js"><link rel="prefetch" href="/docs/assets/js/1107.a3b5738f.js"><link rel="prefetch" href="/docs/assets/js/1108.6a3227ef.js"><link rel="prefetch" href="/docs/assets/js/1109.7ff26a5e.js"><link rel="prefetch" href="/docs/assets/js/111.7164167b.js"><link rel="prefetch" href="/docs/assets/js/1110.40be73cb.js"><link rel="prefetch" href="/docs/assets/js/1111.696ef598.js"><link rel="prefetch" href="/docs/assets/js/1112.2a077f9b.js"><link rel="prefetch" href="/docs/assets/js/1113.7127a1bd.js"><link rel="prefetch" href="/docs/assets/js/1114.ba799891.js"><link rel="prefetch" href="/docs/assets/js/1115.dcd97c6e.js"><link rel="prefetch" href="/docs/assets/js/1116.8e2d996f.js"><link rel="prefetch" href="/docs/assets/js/1117.3a9c4cc7.js"><link rel="prefetch" href="/docs/assets/js/1118.f875ccfb.js"><link rel="prefetch" href="/docs/assets/js/1119.d6c91b46.js"><link rel="prefetch" href="/docs/assets/js/112.8744fef8.js"><link rel="prefetch" href="/docs/assets/js/1120.2924617f.js"><link rel="prefetch" href="/docs/assets/js/1121.ca6cd9bf.js"><link rel="prefetch" href="/docs/assets/js/1122.0b4c1a4d.js"><link rel="prefetch" href="/docs/assets/js/1123.be76ba87.js"><link rel="prefetch" href="/docs/assets/js/1124.e6f9c429.js"><link rel="prefetch" href="/docs/assets/js/1125.d44f07d2.js"><link rel="prefetch" href="/docs/assets/js/1126.6b01260f.js"><link rel="prefetch" href="/docs/assets/js/1127.c0263086.js"><link rel="prefetch" href="/docs/assets/js/1128.ca7e8dab.js"><link rel="prefetch" href="/docs/assets/js/1129.178b6122.js"><link rel="prefetch" href="/docs/assets/js/113.b2dfdd3f.js"><link rel="prefetch" href="/docs/assets/js/1130.a07d4530.js"><link rel="prefetch" href="/docs/assets/js/1131.eb2205e9.js"><link rel="prefetch" href="/docs/assets/js/1132.eb3f0942.js"><link rel="prefetch" href="/docs/assets/js/1133.f8fcc199.js"><link rel="prefetch" href="/docs/assets/js/1134.6ada7d1b.js"><link rel="prefetch" href="/docs/assets/js/1135.daa64c0b.js"><link rel="prefetch" href="/docs/assets/js/1136.926a723d.js"><link rel="prefetch" href="/docs/assets/js/1137.8db8e3a9.js"><link rel="prefetch" href="/docs/assets/js/1138.64dedf9e.js"><link rel="prefetch" href="/docs/assets/js/1139.650f8218.js"><link rel="prefetch" href="/docs/assets/js/114.4fd4960b.js"><link rel="prefetch" href="/docs/assets/js/1140.4747721d.js"><link rel="prefetch" href="/docs/assets/js/1141.c4785909.js"><link rel="prefetch" href="/docs/assets/js/1142.49596d0f.js"><link rel="prefetch" href="/docs/assets/js/1143.8950e995.js"><link rel="prefetch" href="/docs/assets/js/1144.015b0007.js"><link rel="prefetch" href="/docs/assets/js/1145.8fd19556.js"><link rel="prefetch" href="/docs/assets/js/1146.92412a60.js"><link rel="prefetch" href="/docs/assets/js/1147.89c804ea.js"><link rel="prefetch" href="/docs/assets/js/1148.897766d6.js"><link rel="prefetch" href="/docs/assets/js/1149.72d906f4.js"><link rel="prefetch" href="/docs/assets/js/115.89c6dc02.js"><link rel="prefetch" href="/docs/assets/js/1150.991114db.js"><link rel="prefetch" href="/docs/assets/js/1151.80bee007.js"><link rel="prefetch" href="/docs/assets/js/1152.d26fdeb3.js"><link rel="prefetch" href="/docs/assets/js/1153.5e8f3058.js"><link rel="prefetch" href="/docs/assets/js/1154.39235bf6.js"><link rel="prefetch" href="/docs/assets/js/1155.e0c9b8c9.js"><link rel="prefetch" href="/docs/assets/js/1156.606b532d.js"><link rel="prefetch" href="/docs/assets/js/1157.1678e480.js"><link rel="prefetch" href="/docs/assets/js/1158.bbfe8734.js"><link rel="prefetch" href="/docs/assets/js/1159.eacf13d7.js"><link rel="prefetch" href="/docs/assets/js/116.4e9cc0b6.js"><link rel="prefetch" href="/docs/assets/js/1160.b9554851.js"><link rel="prefetch" href="/docs/assets/js/1161.ec0cd485.js"><link rel="prefetch" href="/docs/assets/js/1162.912b7026.js"><link rel="prefetch" href="/docs/assets/js/1163.1805fd85.js"><link rel="prefetch" href="/docs/assets/js/1164.3a39c169.js"><link rel="prefetch" href="/docs/assets/js/1165.552d6ccf.js"><link rel="prefetch" href="/docs/assets/js/1166.84381c7a.js"><link rel="prefetch" href="/docs/assets/js/1167.aad33f24.js"><link rel="prefetch" href="/docs/assets/js/1168.34e74848.js"><link rel="prefetch" href="/docs/assets/js/1169.f74fd1da.js"><link rel="prefetch" href="/docs/assets/js/117.49e09d71.js"><link rel="prefetch" href="/docs/assets/js/1170.049e3211.js"><link rel="prefetch" href="/docs/assets/js/1171.0b91492c.js"><link rel="prefetch" href="/docs/assets/js/1172.338bd57a.js"><link rel="prefetch" href="/docs/assets/js/1173.c8e76553.js"><link rel="prefetch" href="/docs/assets/js/1174.cbb8c367.js"><link rel="prefetch" href="/docs/assets/js/1175.833cd7f4.js"><link rel="prefetch" href="/docs/assets/js/1176.794565cf.js"><link rel="prefetch" href="/docs/assets/js/1178.b475179c.js"><link rel="prefetch" href="/docs/assets/js/1179.b43eae08.js"><link rel="prefetch" href="/docs/assets/js/118.4414541d.js"><link rel="prefetch" href="/docs/assets/js/1180.87764bce.js"><link rel="prefetch" href="/docs/assets/js/1181.fcf015db.js"><link rel="prefetch" href="/docs/assets/js/1182.24bbda69.js"><link rel="prefetch" href="/docs/assets/js/1183.86796ae4.js"><link rel="prefetch" href="/docs/assets/js/1184.a63f47ed.js"><link rel="prefetch" href="/docs/assets/js/1185.3523fcc2.js"><link rel="prefetch" href="/docs/assets/js/1186.b04f727f.js"><link rel="prefetch" href="/docs/assets/js/1187.ee377bf5.js"><link rel="prefetch" href="/docs/assets/js/1188.80b995cf.js"><link rel="prefetch" href="/docs/assets/js/1189.ee63ac5d.js"><link rel="prefetch" href="/docs/assets/js/119.d5924c2b.js"><link rel="prefetch" href="/docs/assets/js/1190.374c051f.js"><link rel="prefetch" href="/docs/assets/js/12.ce485d8e.js"><link rel="prefetch" href="/docs/assets/js/120.14ff6d49.js"><link rel="prefetch" href="/docs/assets/js/121.533a5c45.js"><link rel="prefetch" href="/docs/assets/js/122.8bda29e6.js"><link rel="prefetch" href="/docs/assets/js/123.cf3090b5.js"><link rel="prefetch" href="/docs/assets/js/124.0f54a5b4.js"><link rel="prefetch" href="/docs/assets/js/125.7837117e.js"><link rel="prefetch" href="/docs/assets/js/126.2ab2e348.js"><link rel="prefetch" href="/docs/assets/js/127.557b2a8d.js"><link rel="prefetch" href="/docs/assets/js/128.8494f21d.js"><link rel="prefetch" href="/docs/assets/js/129.9d73a4c1.js"><link rel="prefetch" href="/docs/assets/js/13.7b96c158.js"><link rel="prefetch" href="/docs/assets/js/130.db3086ab.js"><link rel="prefetch" href="/docs/assets/js/131.8dcfb910.js"><link rel="prefetch" href="/docs/assets/js/132.1411b965.js"><link rel="prefetch" href="/docs/assets/js/133.b7fa6a58.js"><link rel="prefetch" href="/docs/assets/js/134.e50c0cce.js"><link rel="prefetch" href="/docs/assets/js/135.bdacf800.js"><link rel="prefetch" href="/docs/assets/js/136.a144241f.js"><link rel="prefetch" href="/docs/assets/js/137.721f1f46.js"><link rel="prefetch" href="/docs/assets/js/138.0ef7fce1.js"><link rel="prefetch" href="/docs/assets/js/139.7bfc0ae5.js"><link rel="prefetch" href="/docs/assets/js/14.0d6900b3.js"><link rel="prefetch" href="/docs/assets/js/140.1253c36b.js"><link rel="prefetch" href="/docs/assets/js/141.c6ce3688.js"><link rel="prefetch" href="/docs/assets/js/142.badfa322.js"><link rel="prefetch" href="/docs/assets/js/143.45b3cc5f.js"><link rel="prefetch" href="/docs/assets/js/144.10046567.js"><link rel="prefetch" href="/docs/assets/js/145.089debff.js"><link rel="prefetch" href="/docs/assets/js/146.6045cc41.js"><link rel="prefetch" href="/docs/assets/js/147.aaaba74b.js"><link rel="prefetch" href="/docs/assets/js/148.2647ef3e.js"><link rel="prefetch" href="/docs/assets/js/149.d83ce7d1.js"><link rel="prefetch" href="/docs/assets/js/15.cda55a78.js"><link rel="prefetch" href="/docs/assets/js/150.865e0eba.js"><link rel="prefetch" href="/docs/assets/js/151.d1a4d2c2.js"><link rel="prefetch" href="/docs/assets/js/152.bfd5f381.js"><link rel="prefetch" href="/docs/assets/js/153.3c5541d7.js"><link rel="prefetch" href="/docs/assets/js/154.2d86cecf.js"><link rel="prefetch" href="/docs/assets/js/155.8b80a7b9.js"><link rel="prefetch" href="/docs/assets/js/156.8f1d184f.js"><link rel="prefetch" href="/docs/assets/js/157.999f953c.js"><link rel="prefetch" href="/docs/assets/js/158.69b4dde7.js"><link rel="prefetch" href="/docs/assets/js/159.9073ff7b.js"><link rel="prefetch" href="/docs/assets/js/16.c0ccad98.js"><link rel="prefetch" href="/docs/assets/js/160.77f5a7f2.js"><link rel="prefetch" href="/docs/assets/js/161.617fd309.js"><link rel="prefetch" href="/docs/assets/js/162.a89f73af.js"><link rel="prefetch" href="/docs/assets/js/163.45d3e8f6.js"><link rel="prefetch" href="/docs/assets/js/164.de6bc84e.js"><link rel="prefetch" href="/docs/assets/js/165.49cb89d7.js"><link rel="prefetch" href="/docs/assets/js/166.674c3191.js"><link rel="prefetch" href="/docs/assets/js/167.284395e5.js"><link rel="prefetch" href="/docs/assets/js/168.f48ffb25.js"><link rel="prefetch" href="/docs/assets/js/169.bb6b1c77.js"><link rel="prefetch" href="/docs/assets/js/17.00caf44a.js"><link rel="prefetch" href="/docs/assets/js/170.1e8608f2.js"><link rel="prefetch" href="/docs/assets/js/171.ae758677.js"><link rel="prefetch" href="/docs/assets/js/172.1b524bfe.js"><link rel="prefetch" href="/docs/assets/js/173.b2703b89.js"><link rel="prefetch" href="/docs/assets/js/174.c034873b.js"><link rel="prefetch" href="/docs/assets/js/175.c72855c1.js"><link rel="prefetch" href="/docs/assets/js/176.e920477f.js"><link rel="prefetch" href="/docs/assets/js/177.bb082227.js"><link rel="prefetch" href="/docs/assets/js/178.05421952.js"><link rel="prefetch" href="/docs/assets/js/179.34c5e625.js"><link rel="prefetch" href="/docs/assets/js/18.011f9e4f.js"><link rel="prefetch" href="/docs/assets/js/180.0543f56f.js"><link rel="prefetch" href="/docs/assets/js/181.95fdc25b.js"><link rel="prefetch" href="/docs/assets/js/182.c6878bc3.js"><link rel="prefetch" href="/docs/assets/js/183.58bf7566.js"><link rel="prefetch" href="/docs/assets/js/184.bf213114.js"><link rel="prefetch" href="/docs/assets/js/185.924a53bf.js"><link rel="prefetch" href="/docs/assets/js/186.573e25e2.js"><link rel="prefetch" href="/docs/assets/js/187.1082e50c.js"><link rel="prefetch" href="/docs/assets/js/188.a3ef37db.js"><link rel="prefetch" href="/docs/assets/js/189.24190ded.js"><link rel="prefetch" href="/docs/assets/js/19.e9f171c2.js"><link rel="prefetch" href="/docs/assets/js/190.b7fa7463.js"><link rel="prefetch" href="/docs/assets/js/191.92cdc789.js"><link rel="prefetch" href="/docs/assets/js/192.0a88fe83.js"><link rel="prefetch" href="/docs/assets/js/193.702679d2.js"><link rel="prefetch" href="/docs/assets/js/194.1bd0b5f0.js"><link rel="prefetch" href="/docs/assets/js/195.f26aea68.js"><link rel="prefetch" href="/docs/assets/js/196.79b5e82a.js"><link rel="prefetch" href="/docs/assets/js/197.35833980.js"><link rel="prefetch" href="/docs/assets/js/198.d8a646ac.js"><link rel="prefetch" href="/docs/assets/js/199.d2027178.js"><link rel="prefetch" href="/docs/assets/js/20.b247c8d1.js"><link rel="prefetch" href="/docs/assets/js/200.88f48136.js"><link rel="prefetch" href="/docs/assets/js/201.e28c9d90.js"><link rel="prefetch" href="/docs/assets/js/202.0a8b770d.js"><link rel="prefetch" href="/docs/assets/js/203.8edd62fa.js"><link rel="prefetch" href="/docs/assets/js/204.4c6c3a41.js"><link rel="prefetch" href="/docs/assets/js/205.a20972a4.js"><link rel="prefetch" href="/docs/assets/js/206.8deef739.js"><link rel="prefetch" href="/docs/assets/js/207.29f65a14.js"><link rel="prefetch" href="/docs/assets/js/208.1b55a89b.js"><link rel="prefetch" href="/docs/assets/js/209.5bd0378e.js"><link rel="prefetch" href="/docs/assets/js/21.b944ad82.js"><link rel="prefetch" href="/docs/assets/js/210.653449eb.js"><link rel="prefetch" href="/docs/assets/js/211.e7723b23.js"><link rel="prefetch" href="/docs/assets/js/212.345fa3e7.js"><link rel="prefetch" href="/docs/assets/js/213.ade7cd1e.js"><link rel="prefetch" href="/docs/assets/js/214.b3f67d35.js"><link rel="prefetch" href="/docs/assets/js/215.9d46eb63.js"><link rel="prefetch" href="/docs/assets/js/216.e0794ee9.js"><link rel="prefetch" href="/docs/assets/js/217.f95f764a.js"><link rel="prefetch" href="/docs/assets/js/218.80ff01fd.js"><link rel="prefetch" href="/docs/assets/js/219.73350f31.js"><link rel="prefetch" href="/docs/assets/js/22.3619036a.js"><link rel="prefetch" href="/docs/assets/js/220.9774c92b.js"><link rel="prefetch" href="/docs/assets/js/221.85b9938e.js"><link rel="prefetch" href="/docs/assets/js/222.b1928d30.js"><link rel="prefetch" href="/docs/assets/js/223.1c9b08c7.js"><link rel="prefetch" href="/docs/assets/js/224.1f8d839d.js"><link rel="prefetch" href="/docs/assets/js/225.9df6e5cb.js"><link rel="prefetch" href="/docs/assets/js/226.83a18766.js"><link rel="prefetch" href="/docs/assets/js/227.1fd2ee53.js"><link rel="prefetch" href="/docs/assets/js/228.d19d389c.js"><link rel="prefetch" href="/docs/assets/js/229.87db821f.js"><link rel="prefetch" href="/docs/assets/js/23.34037f6d.js"><link rel="prefetch" href="/docs/assets/js/230.903c800b.js"><link rel="prefetch" href="/docs/assets/js/231.6a01aed9.js"><link rel="prefetch" href="/docs/assets/js/232.1e7d935a.js"><link rel="prefetch" href="/docs/assets/js/233.230602f6.js"><link rel="prefetch" href="/docs/assets/js/234.93a95bea.js"><link rel="prefetch" href="/docs/assets/js/235.c84c98c1.js"><link rel="prefetch" href="/docs/assets/js/236.f9821e17.js"><link rel="prefetch" href="/docs/assets/js/237.ab4f0c44.js"><link rel="prefetch" href="/docs/assets/js/238.135ba397.js"><link rel="prefetch" href="/docs/assets/js/239.d491f958.js"><link rel="prefetch" href="/docs/assets/js/24.cce728f0.js"><link rel="prefetch" href="/docs/assets/js/240.25ae2db0.js"><link rel="prefetch" href="/docs/assets/js/241.0a06c413.js"><link rel="prefetch" href="/docs/assets/js/242.f2060d08.js"><link rel="prefetch" href="/docs/assets/js/243.dfe1117f.js"><link rel="prefetch" href="/docs/assets/js/244.7f92987f.js"><link rel="prefetch" href="/docs/assets/js/245.30e38417.js"><link rel="prefetch" href="/docs/assets/js/246.9e693b62.js"><link rel="prefetch" href="/docs/assets/js/247.052e63d5.js"><link rel="prefetch" href="/docs/assets/js/248.c46ff4a8.js"><link rel="prefetch" href="/docs/assets/js/249.429bbbe0.js"><link rel="prefetch" href="/docs/assets/js/25.faad963b.js"><link rel="prefetch" href="/docs/assets/js/250.48d59456.js"><link rel="prefetch" href="/docs/assets/js/251.0560367d.js"><link rel="prefetch" href="/docs/assets/js/252.987385b3.js"><link rel="prefetch" href="/docs/assets/js/253.e117fc2d.js"><link rel="prefetch" href="/docs/assets/js/254.375a0d19.js"><link rel="prefetch" href="/docs/assets/js/255.e2d3b397.js"><link rel="prefetch" href="/docs/assets/js/256.85b20928.js"><link rel="prefetch" href="/docs/assets/js/257.f69ccbd1.js"><link rel="prefetch" href="/docs/assets/js/258.3ac52b6a.js"><link rel="prefetch" href="/docs/assets/js/259.4a8e8dad.js"><link rel="prefetch" href="/docs/assets/js/26.ebedf7f9.js"><link rel="prefetch" href="/docs/assets/js/260.7f0f89bf.js"><link rel="prefetch" href="/docs/assets/js/261.d8fbb591.js"><link rel="prefetch" href="/docs/assets/js/262.c80fae29.js"><link rel="prefetch" href="/docs/assets/js/263.3b5d21ed.js"><link rel="prefetch" href="/docs/assets/js/264.688f22de.js"><link rel="prefetch" href="/docs/assets/js/265.cd887654.js"><link rel="prefetch" href="/docs/assets/js/266.3607b374.js"><link rel="prefetch" href="/docs/assets/js/267.b69d1ba3.js"><link rel="prefetch" href="/docs/assets/js/268.9dbe0cd1.js"><link rel="prefetch" href="/docs/assets/js/269.527204df.js"><link rel="prefetch" href="/docs/assets/js/27.67dd7a4f.js"><link rel="prefetch" href="/docs/assets/js/270.46c380d9.js"><link rel="prefetch" href="/docs/assets/js/271.84eabbc9.js"><link rel="prefetch" href="/docs/assets/js/272.3aac95c0.js"><link rel="prefetch" href="/docs/assets/js/273.b03e8b49.js"><link rel="prefetch" href="/docs/assets/js/274.9a284e38.js"><link rel="prefetch" href="/docs/assets/js/275.48c9d81e.js"><link rel="prefetch" href="/docs/assets/js/276.ecc278d5.js"><link rel="prefetch" href="/docs/assets/js/277.11bc0a8b.js"><link rel="prefetch" href="/docs/assets/js/278.38883fac.js"><link rel="prefetch" href="/docs/assets/js/279.2dd72acf.js"><link rel="prefetch" href="/docs/assets/js/28.c55bf7b0.js"><link rel="prefetch" href="/docs/assets/js/280.6db90c32.js"><link rel="prefetch" href="/docs/assets/js/281.272fd123.js"><link rel="prefetch" href="/docs/assets/js/282.2e7f69c9.js"><link rel="prefetch" href="/docs/assets/js/283.7bcb30b6.js"><link rel="prefetch" href="/docs/assets/js/284.fb7798f7.js"><link rel="prefetch" href="/docs/assets/js/285.3b9c011f.js"><link rel="prefetch" href="/docs/assets/js/286.8978bbae.js"><link rel="prefetch" href="/docs/assets/js/287.2ccf0849.js"><link rel="prefetch" href="/docs/assets/js/288.121a6d2f.js"><link rel="prefetch" href="/docs/assets/js/289.0d1e4536.js"><link rel="prefetch" href="/docs/assets/js/29.a30e96d9.js"><link rel="prefetch" href="/docs/assets/js/290.865386e0.js"><link rel="prefetch" href="/docs/assets/js/291.48c917fe.js"><link rel="prefetch" href="/docs/assets/js/292.821e8713.js"><link rel="prefetch" href="/docs/assets/js/293.077f0141.js"><link rel="prefetch" href="/docs/assets/js/294.e5eb280a.js"><link rel="prefetch" href="/docs/assets/js/295.2a823a84.js"><link rel="prefetch" href="/docs/assets/js/296.d1db0071.js"><link rel="prefetch" href="/docs/assets/js/297.19e336f3.js"><link rel="prefetch" href="/docs/assets/js/298.944d0878.js"><link rel="prefetch" href="/docs/assets/js/299.c745be8d.js"><link rel="prefetch" href="/docs/assets/js/3.1568a32f.js"><link rel="prefetch" href="/docs/assets/js/30.83667da9.js"><link rel="prefetch" href="/docs/assets/js/300.13dd4816.js"><link rel="prefetch" href="/docs/assets/js/301.2f4494b6.js"><link rel="prefetch" href="/docs/assets/js/302.1c207c4e.js"><link rel="prefetch" href="/docs/assets/js/303.91c0fc53.js"><link rel="prefetch" href="/docs/assets/js/304.3e4a8d34.js"><link rel="prefetch" href="/docs/assets/js/305.727c8133.js"><link rel="prefetch" href="/docs/assets/js/306.ececb6be.js"><link rel="prefetch" href="/docs/assets/js/307.c7f91360.js"><link rel="prefetch" href="/docs/assets/js/308.b7e53617.js"><link rel="prefetch" href="/docs/assets/js/309.9d7600b3.js"><link rel="prefetch" href="/docs/assets/js/31.ddefb20d.js"><link rel="prefetch" href="/docs/assets/js/310.174ef0aa.js"><link rel="prefetch" href="/docs/assets/js/311.b125f67e.js"><link rel="prefetch" href="/docs/assets/js/312.aecd6b51.js"><link rel="prefetch" href="/docs/assets/js/313.0cc1236f.js"><link rel="prefetch" href="/docs/assets/js/314.82fb8504.js"><link rel="prefetch" href="/docs/assets/js/315.43facff7.js"><link rel="prefetch" href="/docs/assets/js/316.bd15deb5.js"><link rel="prefetch" href="/docs/assets/js/317.613fd5a3.js"><link rel="prefetch" href="/docs/assets/js/318.85a18baa.js"><link rel="prefetch" href="/docs/assets/js/319.fa7aa1c9.js"><link rel="prefetch" href="/docs/assets/js/32.2bdd0c2a.js"><link rel="prefetch" href="/docs/assets/js/320.8d31f6ce.js"><link rel="prefetch" href="/docs/assets/js/321.235589a4.js"><link rel="prefetch" href="/docs/assets/js/322.f0b023e2.js"><link rel="prefetch" href="/docs/assets/js/323.02b5cf1c.js"><link rel="prefetch" href="/docs/assets/js/324.43975957.js"><link rel="prefetch" href="/docs/assets/js/325.0f1fb335.js"><link rel="prefetch" href="/docs/assets/js/326.bff908dc.js"><link rel="prefetch" href="/docs/assets/js/327.f3dc388f.js"><link rel="prefetch" href="/docs/assets/js/328.85b74c7c.js"><link rel="prefetch" href="/docs/assets/js/329.634c6081.js"><link rel="prefetch" href="/docs/assets/js/33.ef1b4ec4.js"><link rel="prefetch" href="/docs/assets/js/330.b70d01db.js"><link rel="prefetch" href="/docs/assets/js/331.a627fd1a.js"><link rel="prefetch" href="/docs/assets/js/332.32cd51f6.js"><link rel="prefetch" href="/docs/assets/js/333.9590fd85.js"><link rel="prefetch" href="/docs/assets/js/334.f11e2f6c.js"><link rel="prefetch" href="/docs/assets/js/335.320c05f4.js"><link rel="prefetch" href="/docs/assets/js/336.919879c2.js"><link rel="prefetch" href="/docs/assets/js/337.098c0178.js"><link rel="prefetch" href="/docs/assets/js/338.8d47980e.js"><link rel="prefetch" href="/docs/assets/js/339.af7df32e.js"><link rel="prefetch" href="/docs/assets/js/34.cc594137.js"><link rel="prefetch" href="/docs/assets/js/340.b40403e2.js"><link rel="prefetch" href="/docs/assets/js/341.27924e48.js"><link rel="prefetch" href="/docs/assets/js/342.6b1ed863.js"><link rel="prefetch" href="/docs/assets/js/343.6c449bf7.js"><link rel="prefetch" href="/docs/assets/js/344.d784b524.js"><link rel="prefetch" href="/docs/assets/js/345.119f37d0.js"><link rel="prefetch" href="/docs/assets/js/346.c21c0e93.js"><link rel="prefetch" href="/docs/assets/js/347.c70c45e3.js"><link rel="prefetch" href="/docs/assets/js/348.9e814b11.js"><link rel="prefetch" href="/docs/assets/js/349.e5590ba6.js"><link rel="prefetch" href="/docs/assets/js/35.4a5b2595.js"><link rel="prefetch" href="/docs/assets/js/350.1ff4a813.js"><link rel="prefetch" href="/docs/assets/js/351.c3151e3d.js"><link rel="prefetch" href="/docs/assets/js/352.c56ef90f.js"><link rel="prefetch" href="/docs/assets/js/353.d4b0b2dc.js"><link rel="prefetch" href="/docs/assets/js/354.43b9b2f3.js"><link rel="prefetch" href="/docs/assets/js/355.28cf46e1.js"><link rel="prefetch" href="/docs/assets/js/356.02480643.js"><link rel="prefetch" href="/docs/assets/js/357.92bd78bb.js"><link rel="prefetch" href="/docs/assets/js/358.78eb51df.js"><link rel="prefetch" href="/docs/assets/js/359.a70f915d.js"><link rel="prefetch" href="/docs/assets/js/36.52c215d2.js"><link rel="prefetch" href="/docs/assets/js/360.5db8b55c.js"><link rel="prefetch" href="/docs/assets/js/361.f7a3627e.js"><link rel="prefetch" href="/docs/assets/js/362.8d16caee.js"><link rel="prefetch" href="/docs/assets/js/363.83c228bc.js"><link rel="prefetch" href="/docs/assets/js/364.13bbf20a.js"><link rel="prefetch" href="/docs/assets/js/365.f718e869.js"><link rel="prefetch" href="/docs/assets/js/366.8ab7c140.js"><link rel="prefetch" href="/docs/assets/js/367.b9179bab.js"><link rel="prefetch" href="/docs/assets/js/368.00397f74.js"><link rel="prefetch" href="/docs/assets/js/369.2e53db79.js"><link rel="prefetch" href="/docs/assets/js/37.d3416b0e.js"><link rel="prefetch" href="/docs/assets/js/370.d2170ce3.js"><link rel="prefetch" href="/docs/assets/js/371.c100c845.js"><link rel="prefetch" href="/docs/assets/js/372.188dd188.js"><link rel="prefetch" href="/docs/assets/js/373.b2777f34.js"><link rel="prefetch" href="/docs/assets/js/374.395969d1.js"><link rel="prefetch" href="/docs/assets/js/375.db014891.js"><link rel="prefetch" href="/docs/assets/js/376.ee761f7a.js"><link rel="prefetch" href="/docs/assets/js/377.6b7204be.js"><link rel="prefetch" href="/docs/assets/js/378.b2a9c6b0.js"><link rel="prefetch" href="/docs/assets/js/379.31c8a65c.js"><link rel="prefetch" href="/docs/assets/js/38.f013117e.js"><link rel="prefetch" href="/docs/assets/js/380.22c1df18.js"><link rel="prefetch" href="/docs/assets/js/381.02fc2a4e.js"><link rel="prefetch" href="/docs/assets/js/382.92fcf2bf.js"><link rel="prefetch" href="/docs/assets/js/383.e1ef43ad.js"><link rel="prefetch" href="/docs/assets/js/384.f78553c3.js"><link rel="prefetch" href="/docs/assets/js/385.7a775f89.js"><link rel="prefetch" href="/docs/assets/js/386.e66e41dd.js"><link rel="prefetch" href="/docs/assets/js/387.2cf72c55.js"><link rel="prefetch" href="/docs/assets/js/388.6ef56db3.js"><link rel="prefetch" href="/docs/assets/js/389.386c1209.js"><link rel="prefetch" href="/docs/assets/js/39.507ded33.js"><link rel="prefetch" href="/docs/assets/js/390.cd49089b.js"><link rel="prefetch" href="/docs/assets/js/391.c967b6a6.js"><link rel="prefetch" href="/docs/assets/js/392.6bd11990.js"><link rel="prefetch" href="/docs/assets/js/393.1cb31fa8.js"><link rel="prefetch" href="/docs/assets/js/394.c1d615d3.js"><link rel="prefetch" href="/docs/assets/js/395.64b55b2c.js"><link rel="prefetch" href="/docs/assets/js/396.3255695c.js"><link rel="prefetch" href="/docs/assets/js/397.d2f8df92.js"><link rel="prefetch" href="/docs/assets/js/398.47f4b9dd.js"><link rel="prefetch" href="/docs/assets/js/399.1e9c6c54.js"><link rel="prefetch" href="/docs/assets/js/4.2c05b10b.js"><link rel="prefetch" href="/docs/assets/js/40.a09c7e32.js"><link rel="prefetch" href="/docs/assets/js/400.911a3bba.js"><link rel="prefetch" href="/docs/assets/js/401.71bd4c8f.js"><link rel="prefetch" href="/docs/assets/js/402.56573c8c.js"><link rel="prefetch" href="/docs/assets/js/403.3e8d5855.js"><link rel="prefetch" href="/docs/assets/js/404.a5e3bdca.js"><link rel="prefetch" href="/docs/assets/js/405.f969ec60.js"><link rel="prefetch" href="/docs/assets/js/406.7402cbc1.js"><link rel="prefetch" href="/docs/assets/js/407.ca81491e.js"><link rel="prefetch" href="/docs/assets/js/408.bcb4c908.js"><link rel="prefetch" href="/docs/assets/js/409.085fb47e.js"><link rel="prefetch" href="/docs/assets/js/41.e262c14a.js"><link rel="prefetch" href="/docs/assets/js/410.f1d37beb.js"><link rel="prefetch" href="/docs/assets/js/411.80b60096.js"><link rel="prefetch" href="/docs/assets/js/412.6a30ecd7.js"><link rel="prefetch" href="/docs/assets/js/413.3ee5d371.js"><link rel="prefetch" href="/docs/assets/js/414.ca59c53a.js"><link rel="prefetch" href="/docs/assets/js/415.82616ce5.js"><link rel="prefetch" href="/docs/assets/js/416.569c1979.js"><link rel="prefetch" href="/docs/assets/js/417.621d01ee.js"><link rel="prefetch" href="/docs/assets/js/418.da57dcae.js"><link rel="prefetch" href="/docs/assets/js/419.a2d423ca.js"><link rel="prefetch" href="/docs/assets/js/42.b6b6e2d3.js"><link rel="prefetch" href="/docs/assets/js/420.2c2178ae.js"><link rel="prefetch" href="/docs/assets/js/421.e70b5b1f.js"><link rel="prefetch" href="/docs/assets/js/422.6f35655b.js"><link rel="prefetch" href="/docs/assets/js/423.2f0cea18.js"><link rel="prefetch" href="/docs/assets/js/424.128e7163.js"><link rel="prefetch" href="/docs/assets/js/425.861d4dfe.js"><link rel="prefetch" href="/docs/assets/js/426.9aea92a0.js"><link rel="prefetch" href="/docs/assets/js/427.af581d15.js"><link rel="prefetch" href="/docs/assets/js/428.a218ea46.js"><link rel="prefetch" href="/docs/assets/js/429.065b5ac1.js"><link rel="prefetch" href="/docs/assets/js/43.63957427.js"><link rel="prefetch" href="/docs/assets/js/430.e767f1f4.js"><link rel="prefetch" href="/docs/assets/js/431.540150d6.js"><link rel="prefetch" href="/docs/assets/js/432.a1ddbbd1.js"><link rel="prefetch" href="/docs/assets/js/433.c7f7981f.js"><link rel="prefetch" href="/docs/assets/js/434.cffb48e9.js"><link rel="prefetch" href="/docs/assets/js/435.491baaf0.js"><link rel="prefetch" href="/docs/assets/js/436.0d652c26.js"><link rel="prefetch" href="/docs/assets/js/437.5bfcab8f.js"><link rel="prefetch" href="/docs/assets/js/438.68d2335b.js"><link rel="prefetch" href="/docs/assets/js/439.c6297ce6.js"><link rel="prefetch" href="/docs/assets/js/44.d8d04da9.js"><link rel="prefetch" href="/docs/assets/js/440.f33b43c5.js"><link rel="prefetch" href="/docs/assets/js/441.94af4046.js"><link rel="prefetch" href="/docs/assets/js/442.1d1cfe2e.js"><link rel="prefetch" href="/docs/assets/js/443.3a9f8a23.js"><link rel="prefetch" href="/docs/assets/js/444.36ca831d.js"><link rel="prefetch" href="/docs/assets/js/445.91622551.js"><link rel="prefetch" href="/docs/assets/js/446.45c815f0.js"><link rel="prefetch" href="/docs/assets/js/447.5d417e2d.js"><link rel="prefetch" href="/docs/assets/js/448.42abd591.js"><link rel="prefetch" href="/docs/assets/js/449.6c21256c.js"><link rel="prefetch" href="/docs/assets/js/45.49c1a866.js"><link rel="prefetch" href="/docs/assets/js/450.b9b1a490.js"><link rel="prefetch" href="/docs/assets/js/451.35fa3d3e.js"><link rel="prefetch" href="/docs/assets/js/452.513b0cce.js"><link rel="prefetch" href="/docs/assets/js/453.2792e570.js"><link rel="prefetch" href="/docs/assets/js/454.987f083a.js"><link rel="prefetch" href="/docs/assets/js/455.122cc5e2.js"><link rel="prefetch" href="/docs/assets/js/456.1dda02bd.js"><link rel="prefetch" href="/docs/assets/js/457.4beb203a.js"><link rel="prefetch" href="/docs/assets/js/458.ab405ce8.js"><link rel="prefetch" href="/docs/assets/js/459.ad2f065a.js"><link rel="prefetch" href="/docs/assets/js/46.be09a393.js"><link rel="prefetch" href="/docs/assets/js/460.89954fa3.js"><link rel="prefetch" href="/docs/assets/js/461.7018216b.js"><link rel="prefetch" href="/docs/assets/js/462.4d4ad00b.js"><link rel="prefetch" href="/docs/assets/js/463.baad8239.js"><link rel="prefetch" href="/docs/assets/js/464.190f3c23.js"><link rel="prefetch" href="/docs/assets/js/465.5c953a3e.js"><link rel="prefetch" href="/docs/assets/js/466.ad70fe73.js"><link rel="prefetch" href="/docs/assets/js/467.67bfc834.js"><link rel="prefetch" href="/docs/assets/js/468.f19aa8aa.js"><link rel="prefetch" href="/docs/assets/js/469.7cc42528.js"><link rel="prefetch" href="/docs/assets/js/47.f26d6bb6.js"><link rel="prefetch" href="/docs/assets/js/470.c0d409f2.js"><link rel="prefetch" href="/docs/assets/js/471.b84e0ea4.js"><link rel="prefetch" href="/docs/assets/js/472.6b8b1d7f.js"><link rel="prefetch" href="/docs/assets/js/473.f93754fe.js"><link rel="prefetch" href="/docs/assets/js/474.cd934b70.js"><link rel="prefetch" href="/docs/assets/js/475.792f8b22.js"><link rel="prefetch" href="/docs/assets/js/476.c1c92b32.js"><link rel="prefetch" href="/docs/assets/js/477.f5a9a42c.js"><link rel="prefetch" href="/docs/assets/js/478.1ab0b4d7.js"><link rel="prefetch" href="/docs/assets/js/479.5452fc68.js"><link rel="prefetch" href="/docs/assets/js/48.f384117a.js"><link rel="prefetch" href="/docs/assets/js/480.261723ff.js"><link rel="prefetch" href="/docs/assets/js/481.69c308bf.js"><link rel="prefetch" href="/docs/assets/js/482.2f954883.js"><link rel="prefetch" href="/docs/assets/js/483.bd6d2964.js"><link rel="prefetch" href="/docs/assets/js/484.8747dd46.js"><link rel="prefetch" href="/docs/assets/js/485.259a2a6b.js"><link rel="prefetch" href="/docs/assets/js/486.0f986781.js"><link rel="prefetch" href="/docs/assets/js/487.fe5e34fe.js"><link rel="prefetch" href="/docs/assets/js/488.f51c09c4.js"><link rel="prefetch" href="/docs/assets/js/489.c57b330a.js"><link rel="prefetch" href="/docs/assets/js/49.68d8968b.js"><link rel="prefetch" href="/docs/assets/js/490.813ea9fd.js"><link rel="prefetch" href="/docs/assets/js/491.630a22a2.js"><link rel="prefetch" href="/docs/assets/js/492.b97cc3da.js"><link rel="prefetch" href="/docs/assets/js/493.39c0cb23.js"><link rel="prefetch" href="/docs/assets/js/494.8274d531.js"><link rel="prefetch" href="/docs/assets/js/495.426dfbf4.js"><link rel="prefetch" href="/docs/assets/js/496.37b2211b.js"><link rel="prefetch" href="/docs/assets/js/497.1be9f612.js"><link rel="prefetch" href="/docs/assets/js/498.c3062f23.js"><link rel="prefetch" href="/docs/assets/js/499.4b3687d9.js"><link rel="prefetch" href="/docs/assets/js/5.7e332b2d.js"><link rel="prefetch" href="/docs/assets/js/50.64eac5e7.js"><link rel="prefetch" href="/docs/assets/js/500.f9ff19bc.js"><link rel="prefetch" href="/docs/assets/js/501.f65b2840.js"><link rel="prefetch" href="/docs/assets/js/502.60c23683.js"><link rel="prefetch" href="/docs/assets/js/503.e3eac5e5.js"><link rel="prefetch" href="/docs/assets/js/504.ab971aae.js"><link rel="prefetch" href="/docs/assets/js/505.c8129b89.js"><link rel="prefetch" href="/docs/assets/js/506.f772fc40.js"><link rel="prefetch" href="/docs/assets/js/507.f70951cf.js"><link rel="prefetch" href="/docs/assets/js/508.25cc8be9.js"><link rel="prefetch" href="/docs/assets/js/509.65dfbf21.js"><link rel="prefetch" href="/docs/assets/js/51.01f3110a.js"><link rel="prefetch" href="/docs/assets/js/510.ac159aa9.js"><link rel="prefetch" href="/docs/assets/js/511.3c411759.js"><link rel="prefetch" href="/docs/assets/js/512.2d4a937f.js"><link rel="prefetch" href="/docs/assets/js/513.717f6b15.js"><link rel="prefetch" href="/docs/assets/js/514.20fea45c.js"><link rel="prefetch" href="/docs/assets/js/515.36261571.js"><link rel="prefetch" href="/docs/assets/js/516.03f6f640.js"><link rel="prefetch" href="/docs/assets/js/517.d28e06bf.js"><link rel="prefetch" href="/docs/assets/js/518.211ac5b3.js"><link rel="prefetch" href="/docs/assets/js/519.e0576033.js"><link rel="prefetch" href="/docs/assets/js/52.78391078.js"><link rel="prefetch" href="/docs/assets/js/520.dfd2104a.js"><link rel="prefetch" href="/docs/assets/js/521.c0c195b8.js"><link rel="prefetch" href="/docs/assets/js/522.c70b23ea.js"><link rel="prefetch" href="/docs/assets/js/523.2e32d373.js"><link rel="prefetch" href="/docs/assets/js/524.dc30f013.js"><link rel="prefetch" href="/docs/assets/js/525.c7e74848.js"><link rel="prefetch" href="/docs/assets/js/526.2aa4467e.js"><link rel="prefetch" href="/docs/assets/js/527.d4865c4a.js"><link rel="prefetch" href="/docs/assets/js/528.87ef62a6.js"><link rel="prefetch" href="/docs/assets/js/529.e8adf60e.js"><link rel="prefetch" href="/docs/assets/js/53.ba4442c1.js"><link rel="prefetch" href="/docs/assets/js/530.8155d09c.js"><link rel="prefetch" href="/docs/assets/js/531.ef9f8a62.js"><link rel="prefetch" href="/docs/assets/js/532.e2d63979.js"><link rel="prefetch" href="/docs/assets/js/533.52be2a10.js"><link rel="prefetch" href="/docs/assets/js/534.1632b8ff.js"><link rel="prefetch" href="/docs/assets/js/535.1a22682f.js"><link rel="prefetch" href="/docs/assets/js/536.317add4c.js"><link rel="prefetch" href="/docs/assets/js/537.a9876966.js"><link rel="prefetch" href="/docs/assets/js/538.47ef8244.js"><link rel="prefetch" href="/docs/assets/js/539.c85fd8d8.js"><link rel="prefetch" href="/docs/assets/js/54.3b5666f4.js"><link rel="prefetch" href="/docs/assets/js/540.989842fa.js"><link rel="prefetch" href="/docs/assets/js/541.41f03fe7.js"><link rel="prefetch" href="/docs/assets/js/542.89e2be8c.js"><link rel="prefetch" href="/docs/assets/js/543.a3ad7d54.js"><link rel="prefetch" href="/docs/assets/js/544.26df925d.js"><link rel="prefetch" href="/docs/assets/js/545.3f06eefc.js"><link rel="prefetch" href="/docs/assets/js/546.c2697d2c.js"><link rel="prefetch" href="/docs/assets/js/547.403732e3.js"><link rel="prefetch" href="/docs/assets/js/548.8fdc36d8.js"><link rel="prefetch" href="/docs/assets/js/549.f535039f.js"><link rel="prefetch" href="/docs/assets/js/55.c70259cd.js"><link rel="prefetch" href="/docs/assets/js/550.44dca448.js"><link rel="prefetch" href="/docs/assets/js/551.09698fe6.js"><link rel="prefetch" href="/docs/assets/js/552.b87d8bdb.js"><link rel="prefetch" href="/docs/assets/js/553.18df4e68.js"><link rel="prefetch" href="/docs/assets/js/554.4b4d8ff0.js"><link rel="prefetch" href="/docs/assets/js/555.aebbab34.js"><link rel="prefetch" href="/docs/assets/js/556.08111e0a.js"><link rel="prefetch" href="/docs/assets/js/557.71f09c80.js"><link rel="prefetch" href="/docs/assets/js/558.10d550f5.js"><link rel="prefetch" href="/docs/assets/js/559.a242b5ac.js"><link rel="prefetch" href="/docs/assets/js/56.7bceb0cd.js"><link rel="prefetch" href="/docs/assets/js/560.89b5bb73.js"><link rel="prefetch" href="/docs/assets/js/561.c3cc7a4c.js"><link rel="prefetch" href="/docs/assets/js/562.d26a674b.js"><link rel="prefetch" href="/docs/assets/js/563.c87833fe.js"><link rel="prefetch" href="/docs/assets/js/564.e3e494f0.js"><link rel="prefetch" href="/docs/assets/js/565.b15376ae.js"><link rel="prefetch" href="/docs/assets/js/566.33572c2d.js"><link rel="prefetch" href="/docs/assets/js/567.21a9191c.js"><link rel="prefetch" href="/docs/assets/js/568.e118c126.js"><link rel="prefetch" href="/docs/assets/js/569.cf6762c5.js"><link rel="prefetch" href="/docs/assets/js/57.d970a53c.js"><link rel="prefetch" href="/docs/assets/js/570.9092596b.js"><link rel="prefetch" href="/docs/assets/js/571.f6f98009.js"><link rel="prefetch" href="/docs/assets/js/572.efe936bf.js"><link rel="prefetch" href="/docs/assets/js/573.7663f0f2.js"><link rel="prefetch" href="/docs/assets/js/574.69422327.js"><link rel="prefetch" href="/docs/assets/js/575.21edf531.js"><link rel="prefetch" href="/docs/assets/js/576.f889bc97.js"><link rel="prefetch" href="/docs/assets/js/577.05c97749.js"><link rel="prefetch" href="/docs/assets/js/578.3ddeb9b7.js"><link rel="prefetch" href="/docs/assets/js/579.30ab9a6f.js"><link rel="prefetch" href="/docs/assets/js/58.cdace39d.js"><link rel="prefetch" href="/docs/assets/js/580.5ee1443b.js"><link rel="prefetch" href="/docs/assets/js/581.57b2e5bc.js"><link rel="prefetch" href="/docs/assets/js/582.017b54dd.js"><link rel="prefetch" href="/docs/assets/js/583.b9b9cce9.js"><link rel="prefetch" href="/docs/assets/js/584.bc5ea254.js"><link rel="prefetch" href="/docs/assets/js/585.4d2659b8.js"><link rel="prefetch" href="/docs/assets/js/586.b384e0a0.js"><link rel="prefetch" href="/docs/assets/js/587.e1a93ba2.js"><link rel="prefetch" href="/docs/assets/js/588.2b967457.js"><link rel="prefetch" href="/docs/assets/js/589.53f5d127.js"><link rel="prefetch" href="/docs/assets/js/59.995216a6.js"><link rel="prefetch" href="/docs/assets/js/590.49173e30.js"><link rel="prefetch" href="/docs/assets/js/591.043f1145.js"><link rel="prefetch" href="/docs/assets/js/592.d5dc2ec0.js"><link rel="prefetch" href="/docs/assets/js/593.7e5c8e4a.js"><link rel="prefetch" href="/docs/assets/js/594.b4595395.js"><link rel="prefetch" href="/docs/assets/js/595.be9bef9f.js"><link rel="prefetch" href="/docs/assets/js/596.1e4a4520.js"><link rel="prefetch" href="/docs/assets/js/597.d9c69d5c.js"><link rel="prefetch" href="/docs/assets/js/598.2fbe0fbd.js"><link rel="prefetch" href="/docs/assets/js/599.8376ff1a.js"><link rel="prefetch" href="/docs/assets/js/6.eedf5cbf.js"><link rel="prefetch" href="/docs/assets/js/60.0047f859.js"><link rel="prefetch" href="/docs/assets/js/600.82185e66.js"><link rel="prefetch" href="/docs/assets/js/601.f0e1f279.js"><link rel="prefetch" href="/docs/assets/js/602.38d0e9c6.js"><link rel="prefetch" href="/docs/assets/js/603.7b69bbf9.js"><link rel="prefetch" href="/docs/assets/js/604.e2b4b86b.js"><link rel="prefetch" href="/docs/assets/js/605.40bb113c.js"><link rel="prefetch" href="/docs/assets/js/606.5bf5d2be.js"><link rel="prefetch" href="/docs/assets/js/607.27f38a78.js"><link rel="prefetch" href="/docs/assets/js/608.4c061219.js"><link rel="prefetch" href="/docs/assets/js/609.06809f4f.js"><link rel="prefetch" href="/docs/assets/js/61.2862fb6a.js"><link rel="prefetch" href="/docs/assets/js/610.acde6577.js"><link rel="prefetch" href="/docs/assets/js/611.23c4975a.js"><link rel="prefetch" href="/docs/assets/js/612.60f730f4.js"><link rel="prefetch" href="/docs/assets/js/613.9d1b7929.js"><link rel="prefetch" href="/docs/assets/js/614.559beacf.js"><link rel="prefetch" href="/docs/assets/js/615.1f9be7be.js"><link rel="prefetch" href="/docs/assets/js/616.eedac43e.js"><link rel="prefetch" href="/docs/assets/js/617.2ed2bcb2.js"><link rel="prefetch" href="/docs/assets/js/618.f425c18f.js"><link rel="prefetch" href="/docs/assets/js/619.3cb0569a.js"><link rel="prefetch" href="/docs/assets/js/62.9ef63b76.js"><link rel="prefetch" href="/docs/assets/js/620.f744636e.js"><link rel="prefetch" href="/docs/assets/js/621.8c6656a1.js"><link rel="prefetch" href="/docs/assets/js/622.685e3c9f.js"><link rel="prefetch" href="/docs/assets/js/623.a11c9e23.js"><link rel="prefetch" href="/docs/assets/js/624.52f36d48.js"><link rel="prefetch" href="/docs/assets/js/625.d3fb4805.js"><link rel="prefetch" href="/docs/assets/js/626.11e73330.js"><link rel="prefetch" href="/docs/assets/js/627.43d6477c.js"><link rel="prefetch" href="/docs/assets/js/628.c187b568.js"><link rel="prefetch" href="/docs/assets/js/629.0126df5c.js"><link rel="prefetch" href="/docs/assets/js/63.fbbf15ab.js"><link rel="prefetch" href="/docs/assets/js/630.db329275.js"><link rel="prefetch" href="/docs/assets/js/631.09cf74e9.js"><link rel="prefetch" href="/docs/assets/js/632.21b85ace.js"><link rel="prefetch" href="/docs/assets/js/633.9eeeec5d.js"><link rel="prefetch" href="/docs/assets/js/634.96af7409.js"><link rel="prefetch" href="/docs/assets/js/635.242baa30.js"><link rel="prefetch" href="/docs/assets/js/636.a80304b3.js"><link rel="prefetch" href="/docs/assets/js/637.3679d316.js"><link rel="prefetch" href="/docs/assets/js/638.bcdb8fac.js"><link rel="prefetch" href="/docs/assets/js/639.cc50ef8b.js"><link rel="prefetch" href="/docs/assets/js/64.8e274e7a.js"><link rel="prefetch" href="/docs/assets/js/640.06de7ca9.js"><link rel="prefetch" href="/docs/assets/js/641.bffa4bdc.js"><link rel="prefetch" href="/docs/assets/js/642.00162379.js"><link rel="prefetch" href="/docs/assets/js/643.92d66e56.js"><link rel="prefetch" href="/docs/assets/js/644.4e84bee2.js"><link rel="prefetch" href="/docs/assets/js/645.7c42c9b3.js"><link rel="prefetch" href="/docs/assets/js/646.7add21ea.js"><link rel="prefetch" href="/docs/assets/js/647.ff6c2981.js"><link rel="prefetch" href="/docs/assets/js/648.56a31c9c.js"><link rel="prefetch" href="/docs/assets/js/649.38e92cff.js"><link rel="prefetch" href="/docs/assets/js/65.d0b04ff8.js"><link rel="prefetch" href="/docs/assets/js/650.8375ae86.js"><link rel="prefetch" href="/docs/assets/js/651.5202b8b3.js"><link rel="prefetch" href="/docs/assets/js/652.0fe60d34.js"><link rel="prefetch" href="/docs/assets/js/653.ccb8a7fc.js"><link rel="prefetch" href="/docs/assets/js/654.f425ed00.js"><link rel="prefetch" href="/docs/assets/js/655.c33d409c.js"><link rel="prefetch" href="/docs/assets/js/656.9205e833.js"><link rel="prefetch" href="/docs/assets/js/657.0ca496ee.js"><link rel="prefetch" href="/docs/assets/js/658.27a73bfd.js"><link rel="prefetch" href="/docs/assets/js/659.54059cc6.js"><link rel="prefetch" href="/docs/assets/js/66.625eb510.js"><link rel="prefetch" href="/docs/assets/js/660.f147b1eb.js"><link rel="prefetch" href="/docs/assets/js/661.ec2e96c6.js"><link rel="prefetch" href="/docs/assets/js/662.43457746.js"><link rel="prefetch" href="/docs/assets/js/663.f41b3c2b.js"><link rel="prefetch" href="/docs/assets/js/664.3a394909.js"><link rel="prefetch" href="/docs/assets/js/665.4150abc4.js"><link rel="prefetch" href="/docs/assets/js/666.901f75af.js"><link rel="prefetch" href="/docs/assets/js/667.4fbcd769.js"><link rel="prefetch" href="/docs/assets/js/668.a7cbba5c.js"><link rel="prefetch" href="/docs/assets/js/669.bc5ba701.js"><link rel="prefetch" href="/docs/assets/js/67.d38e8cd3.js"><link rel="prefetch" href="/docs/assets/js/670.15121176.js"><link rel="prefetch" href="/docs/assets/js/671.3f73f40d.js"><link rel="prefetch" href="/docs/assets/js/672.564f3bb0.js"><link rel="prefetch" href="/docs/assets/js/673.0ae7eaf4.js"><link rel="prefetch" href="/docs/assets/js/674.fb3029ee.js"><link rel="prefetch" href="/docs/assets/js/675.42685a5a.js"><link rel="prefetch" href="/docs/assets/js/676.5abd26c5.js"><link rel="prefetch" href="/docs/assets/js/677.3fe1755c.js"><link rel="prefetch" href="/docs/assets/js/678.1650dbb6.js"><link rel="prefetch" href="/docs/assets/js/679.7babb708.js"><link rel="prefetch" href="/docs/assets/js/68.d401e2c4.js"><link rel="prefetch" href="/docs/assets/js/680.46b95bcf.js"><link rel="prefetch" href="/docs/assets/js/681.d770d29a.js"><link rel="prefetch" href="/docs/assets/js/682.d5171f01.js"><link rel="prefetch" href="/docs/assets/js/683.797145d8.js"><link rel="prefetch" href="/docs/assets/js/684.2a7193f2.js"><link rel="prefetch" href="/docs/assets/js/685.f64c5026.js"><link rel="prefetch" href="/docs/assets/js/686.16cbbadb.js"><link rel="prefetch" href="/docs/assets/js/687.0adcbabb.js"><link rel="prefetch" href="/docs/assets/js/688.b0136fbe.js"><link rel="prefetch" href="/docs/assets/js/689.f2dcc4d1.js"><link rel="prefetch" href="/docs/assets/js/69.270c7ff8.js"><link rel="prefetch" href="/docs/assets/js/690.fdb7a815.js"><link rel="prefetch" href="/docs/assets/js/691.b8e911c0.js"><link rel="prefetch" href="/docs/assets/js/692.92afbc12.js"><link rel="prefetch" href="/docs/assets/js/693.ff405580.js"><link rel="prefetch" href="/docs/assets/js/694.53fdf7c5.js"><link rel="prefetch" href="/docs/assets/js/695.0a3d15a8.js"><link rel="prefetch" href="/docs/assets/js/696.581418ac.js"><link rel="prefetch" href="/docs/assets/js/697.04895a58.js"><link rel="prefetch" href="/docs/assets/js/698.70e4d954.js"><link rel="prefetch" href="/docs/assets/js/699.b3576e9e.js"><link rel="prefetch" href="/docs/assets/js/7.69699b46.js"><link rel="prefetch" href="/docs/assets/js/70.8802986c.js"><link rel="prefetch" href="/docs/assets/js/700.40eedc90.js"><link rel="prefetch" href="/docs/assets/js/701.711a24c4.js"><link rel="prefetch" href="/docs/assets/js/702.f64689a3.js"><link rel="prefetch" href="/docs/assets/js/703.55c3857c.js"><link rel="prefetch" href="/docs/assets/js/704.ec3ffff5.js"><link rel="prefetch" href="/docs/assets/js/705.3c015979.js"><link rel="prefetch" href="/docs/assets/js/706.93359feb.js"><link rel="prefetch" href="/docs/assets/js/707.3a5d8ab1.js"><link rel="prefetch" href="/docs/assets/js/708.140b3b9f.js"><link rel="prefetch" href="/docs/assets/js/709.65ff829f.js"><link rel="prefetch" href="/docs/assets/js/71.86283f6b.js"><link rel="prefetch" href="/docs/assets/js/710.ea492f6c.js"><link rel="prefetch" href="/docs/assets/js/711.190b2e31.js"><link rel="prefetch" href="/docs/assets/js/712.c84633f7.js"><link rel="prefetch" href="/docs/assets/js/713.3a581fed.js"><link rel="prefetch" href="/docs/assets/js/714.2f11bd17.js"><link rel="prefetch" href="/docs/assets/js/715.875cff3d.js"><link rel="prefetch" href="/docs/assets/js/716.d0949dfd.js"><link rel="prefetch" href="/docs/assets/js/717.f1449650.js"><link rel="prefetch" href="/docs/assets/js/718.943a841a.js"><link rel="prefetch" href="/docs/assets/js/719.f17feed2.js"><link rel="prefetch" href="/docs/assets/js/72.f5731a1e.js"><link rel="prefetch" href="/docs/assets/js/720.6d39135e.js"><link rel="prefetch" href="/docs/assets/js/721.e45d6d53.js"><link rel="prefetch" href="/docs/assets/js/722.a06e5300.js"><link rel="prefetch" href="/docs/assets/js/723.0b0a8a28.js"><link rel="prefetch" href="/docs/assets/js/724.00efa468.js"><link rel="prefetch" href="/docs/assets/js/725.f5d426df.js"><link rel="prefetch" href="/docs/assets/js/726.9a505a77.js"><link rel="prefetch" href="/docs/assets/js/727.2d7b1cf8.js"><link rel="prefetch" href="/docs/assets/js/728.03bd3983.js"><link rel="prefetch" href="/docs/assets/js/729.1449d1b1.js"><link rel="prefetch" href="/docs/assets/js/73.5fbf43d0.js"><link rel="prefetch" href="/docs/assets/js/730.78a73426.js"><link rel="prefetch" href="/docs/assets/js/731.7782dd14.js"><link rel="prefetch" href="/docs/assets/js/732.c07e31e2.js"><link rel="prefetch" href="/docs/assets/js/733.5260b376.js"><link rel="prefetch" href="/docs/assets/js/734.e97adfef.js"><link rel="prefetch" href="/docs/assets/js/735.4d160b58.js"><link rel="prefetch" href="/docs/assets/js/736.84ee3892.js"><link rel="prefetch" href="/docs/assets/js/737.a5bda87f.js"><link rel="prefetch" href="/docs/assets/js/738.576329ef.js"><link rel="prefetch" href="/docs/assets/js/739.da891839.js"><link rel="prefetch" href="/docs/assets/js/74.17d19004.js"><link rel="prefetch" href="/docs/assets/js/740.caa1c5ea.js"><link rel="prefetch" href="/docs/assets/js/741.f0045c10.js"><link rel="prefetch" href="/docs/assets/js/742.d8e9ce9e.js"><link rel="prefetch" href="/docs/assets/js/743.300c7fda.js"><link rel="prefetch" href="/docs/assets/js/744.273140e6.js"><link rel="prefetch" href="/docs/assets/js/745.7024e286.js"><link rel="prefetch" href="/docs/assets/js/746.e9337443.js"><link rel="prefetch" href="/docs/assets/js/747.feba5d9c.js"><link rel="prefetch" href="/docs/assets/js/748.32a76b49.js"><link rel="prefetch" href="/docs/assets/js/749.b409d96d.js"><link rel="prefetch" href="/docs/assets/js/75.e31c5664.js"><link rel="prefetch" href="/docs/assets/js/750.d8454ae2.js"><link rel="prefetch" href="/docs/assets/js/751.14613305.js"><link rel="prefetch" href="/docs/assets/js/752.a16566a5.js"><link rel="prefetch" href="/docs/assets/js/753.e974a53c.js"><link rel="prefetch" href="/docs/assets/js/754.7194a972.js"><link rel="prefetch" href="/docs/assets/js/755.9ec7b833.js"><link rel="prefetch" href="/docs/assets/js/756.50f5b75c.js"><link rel="prefetch" href="/docs/assets/js/757.423f4628.js"><link rel="prefetch" href="/docs/assets/js/758.41daf4af.js"><link rel="prefetch" href="/docs/assets/js/759.50d726bc.js"><link rel="prefetch" href="/docs/assets/js/76.a6d2d020.js"><link rel="prefetch" href="/docs/assets/js/760.a3cbe13c.js"><link rel="prefetch" href="/docs/assets/js/761.845cb4df.js"><link rel="prefetch" href="/docs/assets/js/762.e429fc39.js"><link rel="prefetch" href="/docs/assets/js/763.228d5e64.js"><link rel="prefetch" href="/docs/assets/js/764.9e9450c9.js"><link rel="prefetch" href="/docs/assets/js/765.a6b0cf34.js"><link rel="prefetch" href="/docs/assets/js/766.dd40bcc6.js"><link rel="prefetch" href="/docs/assets/js/767.1827c029.js"><link rel="prefetch" href="/docs/assets/js/768.bc7f549d.js"><link rel="prefetch" href="/docs/assets/js/769.c37c9184.js"><link rel="prefetch" href="/docs/assets/js/77.2c84b5e7.js"><link rel="prefetch" href="/docs/assets/js/770.120427ac.js"><link rel="prefetch" href="/docs/assets/js/771.28cf4d9c.js"><link rel="prefetch" href="/docs/assets/js/772.1c2567f9.js"><link rel="prefetch" href="/docs/assets/js/773.2de14a63.js"><link rel="prefetch" href="/docs/assets/js/774.3f2d1a5c.js"><link rel="prefetch" href="/docs/assets/js/775.c2eee57b.js"><link rel="prefetch" href="/docs/assets/js/776.ce01a240.js"><link rel="prefetch" href="/docs/assets/js/777.e43ff443.js"><link rel="prefetch" href="/docs/assets/js/778.dbdabeda.js"><link rel="prefetch" href="/docs/assets/js/779.84ca9a40.js"><link rel="prefetch" href="/docs/assets/js/78.de150a39.js"><link rel="prefetch" href="/docs/assets/js/780.7d4ea451.js"><link rel="prefetch" href="/docs/assets/js/781.2ef05752.js"><link rel="prefetch" href="/docs/assets/js/782.f8d1af06.js"><link rel="prefetch" href="/docs/assets/js/783.61f5d695.js"><link rel="prefetch" href="/docs/assets/js/784.68643b3f.js"><link rel="prefetch" href="/docs/assets/js/785.0eeb40fc.js"><link rel="prefetch" href="/docs/assets/js/786.46929670.js"><link rel="prefetch" href="/docs/assets/js/787.27aea701.js"><link rel="prefetch" href="/docs/assets/js/788.8734555f.js"><link rel="prefetch" href="/docs/assets/js/789.a56056e7.js"><link rel="prefetch" href="/docs/assets/js/79.0b0c8741.js"><link rel="prefetch" href="/docs/assets/js/790.8cf272c1.js"><link rel="prefetch" href="/docs/assets/js/791.d5232aff.js"><link rel="prefetch" href="/docs/assets/js/792.cc9262da.js"><link rel="prefetch" href="/docs/assets/js/793.cb4a9271.js"><link rel="prefetch" href="/docs/assets/js/794.8c086163.js"><link rel="prefetch" href="/docs/assets/js/795.8b0ec904.js"><link rel="prefetch" href="/docs/assets/js/796.e761d6c6.js"><link rel="prefetch" href="/docs/assets/js/797.3ba2d149.js"><link rel="prefetch" href="/docs/assets/js/798.ff6f48e1.js"><link rel="prefetch" href="/docs/assets/js/799.b62e9085.js"><link rel="prefetch" href="/docs/assets/js/8.dfcc4cab.js"><link rel="prefetch" href="/docs/assets/js/80.2380eda8.js"><link rel="prefetch" href="/docs/assets/js/800.c971d246.js"><link rel="prefetch" href="/docs/assets/js/801.fba40151.js"><link rel="prefetch" href="/docs/assets/js/802.2156ce08.js"><link rel="prefetch" href="/docs/assets/js/803.c72e03ad.js"><link rel="prefetch" href="/docs/assets/js/804.ab14c057.js"><link rel="prefetch" href="/docs/assets/js/805.73d81c62.js"><link rel="prefetch" href="/docs/assets/js/806.a692ad02.js"><link rel="prefetch" href="/docs/assets/js/807.0c33e152.js"><link rel="prefetch" href="/docs/assets/js/808.b6a97586.js"><link rel="prefetch" href="/docs/assets/js/809.2c3637d7.js"><link rel="prefetch" href="/docs/assets/js/81.b4bc4383.js"><link rel="prefetch" href="/docs/assets/js/810.5766dcdd.js"><link rel="prefetch" href="/docs/assets/js/811.2893da77.js"><link rel="prefetch" href="/docs/assets/js/812.c63730fb.js"><link rel="prefetch" href="/docs/assets/js/813.a610df43.js"><link rel="prefetch" href="/docs/assets/js/814.dbf6628f.js"><link rel="prefetch" href="/docs/assets/js/815.abcef43d.js"><link rel="prefetch" href="/docs/assets/js/816.e842428d.js"><link rel="prefetch" href="/docs/assets/js/817.95dd19de.js"><link rel="prefetch" href="/docs/assets/js/818.a1efc42c.js"><link rel="prefetch" href="/docs/assets/js/819.05ff670b.js"><link rel="prefetch" href="/docs/assets/js/82.e7930bc4.js"><link rel="prefetch" href="/docs/assets/js/820.32cb4e92.js"><link rel="prefetch" href="/docs/assets/js/821.df9233bb.js"><link rel="prefetch" href="/docs/assets/js/822.aa4205df.js"><link rel="prefetch" href="/docs/assets/js/823.277fde07.js"><link rel="prefetch" href="/docs/assets/js/824.2b949a80.js"><link rel="prefetch" href="/docs/assets/js/825.9d33d9c0.js"><link rel="prefetch" href="/docs/assets/js/826.e8c8f61f.js"><link rel="prefetch" href="/docs/assets/js/827.3ef34c1e.js"><link rel="prefetch" href="/docs/assets/js/828.ddc3ac0b.js"><link rel="prefetch" href="/docs/assets/js/829.a6cdb412.js"><link rel="prefetch" href="/docs/assets/js/83.fc7e126a.js"><link rel="prefetch" href="/docs/assets/js/830.4ea95ba7.js"><link rel="prefetch" href="/docs/assets/js/831.ae0440b5.js"><link rel="prefetch" href="/docs/assets/js/832.17b620d0.js"><link rel="prefetch" href="/docs/assets/js/833.cd7045b3.js"><link rel="prefetch" href="/docs/assets/js/834.2fb2649a.js"><link rel="prefetch" href="/docs/assets/js/835.27439aab.js"><link rel="prefetch" href="/docs/assets/js/836.2080123e.js"><link rel="prefetch" href="/docs/assets/js/837.996f2c7d.js"><link rel="prefetch" href="/docs/assets/js/838.498403f6.js"><link rel="prefetch" href="/docs/assets/js/839.048d86d4.js"><link rel="prefetch" href="/docs/assets/js/84.fc5de171.js"><link rel="prefetch" href="/docs/assets/js/840.053bd885.js"><link rel="prefetch" href="/docs/assets/js/841.53a01594.js"><link rel="prefetch" href="/docs/assets/js/842.4f3eb7b5.js"><link rel="prefetch" href="/docs/assets/js/843.caae9187.js"><link rel="prefetch" href="/docs/assets/js/844.6fd18438.js"><link rel="prefetch" href="/docs/assets/js/845.2c902f2b.js"><link rel="prefetch" href="/docs/assets/js/846.6597c1f1.js"><link rel="prefetch" href="/docs/assets/js/847.9c04cf32.js"><link rel="prefetch" href="/docs/assets/js/848.c3a3684e.js"><link rel="prefetch" href="/docs/assets/js/849.6dcbb2db.js"><link rel="prefetch" href="/docs/assets/js/85.af8d2a92.js"><link rel="prefetch" href="/docs/assets/js/850.90239a01.js"><link rel="prefetch" href="/docs/assets/js/851.102a0322.js"><link rel="prefetch" href="/docs/assets/js/852.e652a448.js"><link rel="prefetch" href="/docs/assets/js/853.f4d2b825.js"><link rel="prefetch" href="/docs/assets/js/854.6bb06b12.js"><link rel="prefetch" href="/docs/assets/js/855.c41511ec.js"><link rel="prefetch" href="/docs/assets/js/856.bac0af57.js"><link rel="prefetch" href="/docs/assets/js/857.dfc83bd1.js"><link rel="prefetch" href="/docs/assets/js/858.1cee10a2.js"><link rel="prefetch" href="/docs/assets/js/859.511decf8.js"><link rel="prefetch" href="/docs/assets/js/86.76b77201.js"><link rel="prefetch" href="/docs/assets/js/860.8d26e878.js"><link rel="prefetch" href="/docs/assets/js/861.c6e8cd79.js"><link rel="prefetch" href="/docs/assets/js/862.9b4e8cfc.js"><link rel="prefetch" href="/docs/assets/js/863.b7e8f9da.js"><link rel="prefetch" href="/docs/assets/js/864.b7ae0a6d.js"><link rel="prefetch" href="/docs/assets/js/865.c4d6788c.js"><link rel="prefetch" href="/docs/assets/js/866.e47bf462.js"><link rel="prefetch" href="/docs/assets/js/867.a1688b10.js"><link rel="prefetch" href="/docs/assets/js/868.dc685dae.js"><link rel="prefetch" href="/docs/assets/js/869.8c7be1e3.js"><link rel="prefetch" href="/docs/assets/js/87.5fd4f2ce.js"><link rel="prefetch" href="/docs/assets/js/870.7cec79d2.js"><link rel="prefetch" href="/docs/assets/js/871.a8910b22.js"><link rel="prefetch" href="/docs/assets/js/872.1062b445.js"><link rel="prefetch" href="/docs/assets/js/873.d0260d6c.js"><link rel="prefetch" href="/docs/assets/js/874.117faf2e.js"><link rel="prefetch" href="/docs/assets/js/875.61161f75.js"><link rel="prefetch" href="/docs/assets/js/876.d8dda88a.js"><link rel="prefetch" href="/docs/assets/js/877.bed17928.js"><link rel="prefetch" href="/docs/assets/js/878.12cc970b.js"><link rel="prefetch" href="/docs/assets/js/879.f0c46f93.js"><link rel="prefetch" href="/docs/assets/js/88.a9326a7c.js"><link rel="prefetch" href="/docs/assets/js/880.157427f1.js"><link rel="prefetch" href="/docs/assets/js/881.9c0da1f9.js"><link rel="prefetch" href="/docs/assets/js/882.6461ef8f.js"><link rel="prefetch" href="/docs/assets/js/883.90c002d8.js"><link rel="prefetch" href="/docs/assets/js/884.4acc2abe.js"><link rel="prefetch" href="/docs/assets/js/885.7e72b9e9.js"><link rel="prefetch" href="/docs/assets/js/886.2db6682c.js"><link rel="prefetch" href="/docs/assets/js/887.30d8299e.js"><link rel="prefetch" href="/docs/assets/js/888.14f88192.js"><link rel="prefetch" href="/docs/assets/js/889.6b4b394b.js"><link rel="prefetch" href="/docs/assets/js/89.5f25c45f.js"><link rel="prefetch" href="/docs/assets/js/890.88242d66.js"><link rel="prefetch" href="/docs/assets/js/891.705598af.js"><link rel="prefetch" href="/docs/assets/js/892.d5112333.js"><link rel="prefetch" href="/docs/assets/js/893.f047a16d.js"><link rel="prefetch" href="/docs/assets/js/894.e8038193.js"><link rel="prefetch" href="/docs/assets/js/895.4f559c6f.js"><link rel="prefetch" href="/docs/assets/js/896.7e552c35.js"><link rel="prefetch" href="/docs/assets/js/897.61632210.js"><link rel="prefetch" href="/docs/assets/js/898.8c635c4e.js"><link rel="prefetch" href="/docs/assets/js/899.646bcafd.js"><link rel="prefetch" href="/docs/assets/js/9.051f2e4b.js"><link rel="prefetch" href="/docs/assets/js/90.63904893.js"><link rel="prefetch" href="/docs/assets/js/900.56de8114.js"><link rel="prefetch" href="/docs/assets/js/901.1df8d385.js"><link rel="prefetch" href="/docs/assets/js/902.1078e067.js"><link rel="prefetch" href="/docs/assets/js/903.eaab3260.js"><link rel="prefetch" href="/docs/assets/js/904.ac9efd3e.js"><link rel="prefetch" href="/docs/assets/js/905.f1397c44.js"><link rel="prefetch" href="/docs/assets/js/906.e1d3ab12.js"><link rel="prefetch" href="/docs/assets/js/907.5f6baa09.js"><link rel="prefetch" href="/docs/assets/js/908.0d4c29d0.js"><link rel="prefetch" href="/docs/assets/js/909.f2cd4ac6.js"><link rel="prefetch" href="/docs/assets/js/91.5ce7f0c3.js"><link rel="prefetch" href="/docs/assets/js/910.6fcdebc8.js"><link rel="prefetch" href="/docs/assets/js/911.6777957c.js"><link rel="prefetch" href="/docs/assets/js/912.192ae00e.js"><link rel="prefetch" href="/docs/assets/js/913.001e2b14.js"><link rel="prefetch" href="/docs/assets/js/914.f42662fc.js"><link rel="prefetch" href="/docs/assets/js/915.cac4fcbb.js"><link rel="prefetch" href="/docs/assets/js/916.17096861.js"><link rel="prefetch" href="/docs/assets/js/917.5d3aa2cd.js"><link rel="prefetch" href="/docs/assets/js/918.067ca6c4.js"><link rel="prefetch" href="/docs/assets/js/919.96b3dd13.js"><link rel="prefetch" href="/docs/assets/js/92.03afd5f0.js"><link rel="prefetch" href="/docs/assets/js/920.c75da0a5.js"><link rel="prefetch" href="/docs/assets/js/921.de79d8a6.js"><link rel="prefetch" href="/docs/assets/js/922.0f1918f7.js"><link rel="prefetch" href="/docs/assets/js/923.4b394cbf.js"><link rel="prefetch" href="/docs/assets/js/924.60cd234f.js"><link rel="prefetch" href="/docs/assets/js/925.39a12e0e.js"><link rel="prefetch" href="/docs/assets/js/926.c81ddd59.js"><link rel="prefetch" href="/docs/assets/js/927.9ccb47e4.js"><link rel="prefetch" href="/docs/assets/js/928.2b34630c.js"><link rel="prefetch" href="/docs/assets/js/929.6683f400.js"><link rel="prefetch" href="/docs/assets/js/93.a9b56f5a.js"><link rel="prefetch" href="/docs/assets/js/930.098e3a4a.js"><link rel="prefetch" href="/docs/assets/js/931.7fcfc095.js"><link rel="prefetch" href="/docs/assets/js/932.15375ce8.js"><link rel="prefetch" href="/docs/assets/js/933.d3eebeb5.js"><link rel="prefetch" href="/docs/assets/js/934.54978a6f.js"><link rel="prefetch" href="/docs/assets/js/935.c91e4f22.js"><link rel="prefetch" href="/docs/assets/js/936.a8735ceb.js"><link rel="prefetch" href="/docs/assets/js/937.85182e4c.js"><link rel="prefetch" href="/docs/assets/js/938.a93039f9.js"><link rel="prefetch" href="/docs/assets/js/939.eec54478.js"><link rel="prefetch" href="/docs/assets/js/94.755cb533.js"><link rel="prefetch" href="/docs/assets/js/940.4740eaea.js"><link rel="prefetch" href="/docs/assets/js/941.3b89acaf.js"><link rel="prefetch" href="/docs/assets/js/942.1f5a7556.js"><link rel="prefetch" href="/docs/assets/js/943.5dc97c29.js"><link rel="prefetch" href="/docs/assets/js/944.9961bf92.js"><link rel="prefetch" href="/docs/assets/js/945.71197478.js"><link rel="prefetch" href="/docs/assets/js/946.911f5769.js"><link rel="prefetch" href="/docs/assets/js/947.2d677338.js"><link rel="prefetch" href="/docs/assets/js/948.7517f60b.js"><link rel="prefetch" href="/docs/assets/js/949.d5a72238.js"><link rel="prefetch" href="/docs/assets/js/95.b9022c5c.js"><link rel="prefetch" href="/docs/assets/js/950.2a566f7c.js"><link rel="prefetch" href="/docs/assets/js/951.4ed58b1a.js"><link rel="prefetch" href="/docs/assets/js/952.2c11c1a2.js"><link rel="prefetch" href="/docs/assets/js/953.92888b69.js"><link rel="prefetch" href="/docs/assets/js/954.0310924b.js"><link rel="prefetch" href="/docs/assets/js/955.81a20420.js"><link rel="prefetch" href="/docs/assets/js/956.d4ffd582.js"><link rel="prefetch" href="/docs/assets/js/957.44f1ecbf.js"><link rel="prefetch" href="/docs/assets/js/958.e34debbc.js"><link rel="prefetch" href="/docs/assets/js/959.e097670d.js"><link rel="prefetch" href="/docs/assets/js/96.ee73e6c4.js"><link rel="prefetch" href="/docs/assets/js/960.0cc1a18c.js"><link rel="prefetch" href="/docs/assets/js/961.9b321ce4.js"><link rel="prefetch" href="/docs/assets/js/962.eb3e7815.js"><link rel="prefetch" href="/docs/assets/js/963.47c3cb4c.js"><link rel="prefetch" href="/docs/assets/js/964.6e1a2f57.js"><link rel="prefetch" href="/docs/assets/js/965.c5ad05e3.js"><link rel="prefetch" href="/docs/assets/js/966.964bbdad.js"><link rel="prefetch" href="/docs/assets/js/967.24ae6747.js"><link rel="prefetch" href="/docs/assets/js/968.c80e898b.js"><link rel="prefetch" href="/docs/assets/js/969.a00ccb6b.js"><link rel="prefetch" href="/docs/assets/js/97.b44fac77.js"><link rel="prefetch" href="/docs/assets/js/970.8533ba87.js"><link rel="prefetch" href="/docs/assets/js/971.67278162.js"><link rel="prefetch" href="/docs/assets/js/972.c2fa6219.js"><link rel="prefetch" href="/docs/assets/js/973.1fe23483.js"><link rel="prefetch" href="/docs/assets/js/974.d2ff44fe.js"><link rel="prefetch" href="/docs/assets/js/975.2d4bc6e6.js"><link rel="prefetch" href="/docs/assets/js/976.a6c7f38a.js"><link rel="prefetch" href="/docs/assets/js/977.3635a676.js"><link rel="prefetch" href="/docs/assets/js/978.f46b4826.js"><link rel="prefetch" href="/docs/assets/js/979.1353cba7.js"><link rel="prefetch" href="/docs/assets/js/98.9c54769a.js"><link rel="prefetch" href="/docs/assets/js/980.cdfc802c.js"><link rel="prefetch" href="/docs/assets/js/981.94cf3fc9.js"><link rel="prefetch" href="/docs/assets/js/982.a6814225.js"><link rel="prefetch" href="/docs/assets/js/983.cfb42e21.js"><link rel="prefetch" href="/docs/assets/js/984.51f5d4ab.js"><link rel="prefetch" href="/docs/assets/js/985.1ea79184.js"><link rel="prefetch" href="/docs/assets/js/986.e0a2d63d.js"><link rel="prefetch" href="/docs/assets/js/987.e02525b3.js"><link rel="prefetch" href="/docs/assets/js/988.700902ac.js"><link rel="prefetch" href="/docs/assets/js/989.22f1560b.js"><link rel="prefetch" href="/docs/assets/js/99.df60c60f.js"><link rel="prefetch" href="/docs/assets/js/990.e5fb2404.js"><link rel="prefetch" href="/docs/assets/js/991.e7ebadf0.js"><link rel="prefetch" href="/docs/assets/js/992.4e1043b2.js"><link rel="prefetch" href="/docs/assets/js/993.c91aef48.js"><link rel="prefetch" href="/docs/assets/js/994.69c3d38e.js"><link rel="prefetch" href="/docs/assets/js/995.91000ab4.js"><link rel="prefetch" href="/docs/assets/js/996.9a58e9f4.js"><link rel="prefetch" href="/docs/assets/js/997.db9b9d32.js"><link rel="prefetch" href="/docs/assets/js/998.1b6526a0.js"><link rel="prefetch" href="/docs/assets/js/999.3f137356.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.1fca6052.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">木可生森</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/node/html5/HTML基础/1 基本结构.html" class="nav-link">
  HTML5
</a></li><li class="dropdown-item"><!----> <a href="/docs/node/css3/css初级/CSS简介.html" class="nav-link">
  CSS3
</a></li><li class="dropdown-item"><!----> <a href="/docs/node/javaScript/js基础教程/变量声明.html" class="nav-link">
  javaScript
</a></li><li class="dropdown-item"><!----> <a href="/docs/node/调试/调试/ChromeDevTools.html" class="nav-link">
  调试
</a></li><li class="dropdown-item"><!----> <a href="/docs/node/typeScript/环境配置/介绍.html" class="nav-link">
  typeScript
</a></li><li class="dropdown-item"><!----> <a href="/docs/node/git/基本使用.html" class="nav-link">
  git
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue学习路线" class="dropdown-title"><span class="title">Vue学习路线</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue学习路线" class="mobile-dropdown-title"><span class="title">Vue学习路线</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/vue/npm/notes/npm.html" class="nav-link">
  NPM
</a></li><li class="dropdown-item"><!----> <a href="/docs/vue/模拟数据/json-server.html" class="nav-link">
  模拟数据
</a></li><li class="dropdown-item"><!----> <a href="/docs/vue/vite/vite.html" class="nav-link">
  vite
</a></li><li class="dropdown-item"><!----> <a href="/docs/vue/vue/vue基础/数据绑定渲染.html" class="nav-link">
  Vue2基础
</a></li><li class="dropdown-item"><!----> <a href="/docs/vue/nodejs/快速上手/认识nodejs.html" class="nav-link">
  nodejs
</a></li><li class="dropdown-item"><!----> <a href="/docs/vue/webpack/webpack.html" class="nav-link">
  webpack
</a></li></ul></div></div><div class="nav-item"><a href="/docs/数据结构/二叉树/二叉树基本操作.html" class="nav-link">
  数据结构
</a></div><div class="nav-item"><a href="/docs/算法/二分查找/二维数组查找.html" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/docs/手撕/call.html" class="nav-link">
  手撕
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面经" class="dropdown-title"><span class="title">面经</span> <span class="arrow down"></span></button> <button type="button" aria-label="面经" class="mobile-dropdown-title"><span class="title">面经</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/面经/牛客网/html/标签/日历.html" class="nav-link">
  牛客网
</a></li><li class="dropdown-item"><!----> <a href="/docs/面经/腾讯面经/HTML.html" class="nav-link">
  面经
</a></li></ul></div></div><div class="nav-item"><a href="/docs/蓝桥杯/模拟题/实现搜一搜.html" class="nav-link">
  蓝桥杯
</a></div><div class="nav-item"><a href="/docs/项目/作家/小程序问题.html" class="nav-link">
  项目笔记
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具箱" class="mobile-dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          在线编辑
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tinypng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片压缩
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          在线服务
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.aliyun.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阿里云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://cloud.tencent.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  腾讯云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          博客指南
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://juejin.im/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://blog.csdn.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://v3.cn.vuejs.org/guide/introduction.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue3
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://cn.vuejs.org/v2/guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/node/html5/HTML基础/1 基本结构.html" class="nav-link">
  HTML5
</a></li><li class="dropdown-item"><!----> <a href="/docs/node/css3/css初级/CSS简介.html" class="nav-link">
  CSS3
</a></li><li class="dropdown-item"><!----> <a href="/docs/node/javaScript/js基础教程/变量声明.html" class="nav-link">
  javaScript
</a></li><li class="dropdown-item"><!----> <a href="/docs/node/调试/调试/ChromeDevTools.html" class="nav-link">
  调试
</a></li><li class="dropdown-item"><!----> <a href="/docs/node/typeScript/环境配置/介绍.html" class="nav-link">
  typeScript
</a></li><li class="dropdown-item"><!----> <a href="/docs/node/git/基本使用.html" class="nav-link">
  git
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue学习路线" class="dropdown-title"><span class="title">Vue学习路线</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue学习路线" class="mobile-dropdown-title"><span class="title">Vue学习路线</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/vue/npm/notes/npm.html" class="nav-link">
  NPM
</a></li><li class="dropdown-item"><!----> <a href="/docs/vue/模拟数据/json-server.html" class="nav-link">
  模拟数据
</a></li><li class="dropdown-item"><!----> <a href="/docs/vue/vite/vite.html" class="nav-link">
  vite
</a></li><li class="dropdown-item"><!----> <a href="/docs/vue/vue/vue基础/数据绑定渲染.html" class="nav-link">
  Vue2基础
</a></li><li class="dropdown-item"><!----> <a href="/docs/vue/nodejs/快速上手/认识nodejs.html" class="nav-link">
  nodejs
</a></li><li class="dropdown-item"><!----> <a href="/docs/vue/webpack/webpack.html" class="nav-link">
  webpack
</a></li></ul></div></div><div class="nav-item"><a href="/docs/数据结构/二叉树/二叉树基本操作.html" class="nav-link">
  数据结构
</a></div><div class="nav-item"><a href="/docs/算法/二分查找/二维数组查找.html" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/docs/手撕/call.html" class="nav-link">
  手撕
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面经" class="dropdown-title"><span class="title">面经</span> <span class="arrow down"></span></button> <button type="button" aria-label="面经" class="mobile-dropdown-title"><span class="title">面经</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/面经/牛客网/html/标签/日历.html" class="nav-link">
  牛客网
</a></li><li class="dropdown-item"><!----> <a href="/docs/面经/腾讯面经/HTML.html" class="nav-link">
  面经
</a></li></ul></div></div><div class="nav-item"><a href="/docs/蓝桥杯/模拟题/实现搜一搜.html" class="nav-link">
  蓝桥杯
</a></div><div class="nav-item"><a href="/docs/项目/作家/小程序问题.html" class="nav-link">
  项目笔记
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具箱" class="mobile-dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          在线编辑
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tinypng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片压缩
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          在线服务
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.aliyun.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阿里云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://cloud.tencent.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  腾讯云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          博客指南
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://juejin.im/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://blog.csdn.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://v3.cn.vuejs.org/guide/introduction.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue3
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://cn.vuejs.org/v2/guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>小说社区项目</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/项目/作家/小程序问题.html" class="sidebar-link">前端问题整合</a></li><li><a href="/docs/项目/作家/Web前端.html" class="sidebar-link">Web前端问题</a></li><li><a href="/docs/项目/作家/后端问题.html" class="sidebar-link">后端问题</a></li><li><a href="/docs/项目/作家/问题整合.html" class="active sidebar-link">前端问题整合</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#重点" class="sidebar-link">重点</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_1-image图片问题" class="sidebar-link">1.image图片问题</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_2-微信小程序导航栏字体大小无法调整" class="sidebar-link">2.微信小程序导航栏字体大小无法调整</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_3-view与div" class="sidebar-link">3.view与div</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_4-根据文本长度决定盒子大小" class="sidebar-link">4.根据文本长度决定盒子大小</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_5-隐藏滚动条" class="sidebar-link">5.隐藏滚动条</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_6-文字省略" class="sidebar-link">6 文字省略</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_7-padding右边没效果" class="sidebar-link">7 padding右边没效果</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_8-使用flex布局后子元素定义宽度无效" class="sidebar-link">8 使用flex布局后子元素定义宽度无效</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_9-滚动导航栏" class="sidebar-link">9 滚动导航栏</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_10-获取dom更新后的数据" class="sidebar-link">10 获取dom更新后的数据</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_11-cannot-read-property-mark-of-undefined" class="sidebar-link">11 Cannot read property 'mark' of undefined</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_12-微信小程序不支持动态组件" class="sidebar-link">12 微信小程序不支持动态组件</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_13-使用uni-app编译后在小程序上点击真机调试报错" class="sidebar-link">13 使用uni-app编译后在小程序上点击真机调试报错</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_14-前端滚动时固定导航栏-吸顶效果" class="sidebar-link">14 前端滚动时固定导航栏(吸顶效果)</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_15-小程序onpagescroll-监听滚动事件" class="sidebar-link">15 小程序onpageScroll 监听滚动事件</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_16-uniapp写span标签小程序不认识" class="sidebar-link">16 uniapp写span标签小程序不认识</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_17css获取状态栏的高度var-status-bar-height" class="sidebar-link">17css获取状态栏的高度var(–status-bar-height)</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_18-吸顶效果" class="sidebar-link">18 吸顶效果</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_19-uniapp-的-swiper-无法被子元素撑开" class="sidebar-link">19 uniapp 的 swiper 无法被子元素撑开</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_20-让文字可以复制" class="sidebar-link">20 让文字可以复制</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_21-es6语法糖-在对象里属性是函数时-可以简化" class="sidebar-link">21 es6语法糖，在对象里属性是函数时，可以简化</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_22-margin-right-失效" class="sidebar-link">22 margin-right 失效</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_23-uniapp的textarea默认值使用v-model显示" class="sidebar-link">23 uniapp的textarea默认值使用v-model显示</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_24-更新用户信息后返回上一级页面-没有重新执行onload获取userinfo" class="sidebar-link">24 更新用户信息后返回上一级页面，没有重新执行onload获取userInfo</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_25-addeventlistener取消问题" class="sidebar-link">25 addeventListener取消问题</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_26-localstorage存储问题" class="sidebar-link">26 localStorage存储问题</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_27-使用scroll-view-重构横向导航栏" class="sidebar-link">27 使用scroll-view 重构横向导航栏</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_28-退出登陆和登陆跳转" class="sidebar-link">28 退出登陆和登陆跳转</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_29-box-shadow可以制作一个发光效果" class="sidebar-link">29 box-shadow可以制作一个发光效果</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_30-正则校验密码" class="sidebar-link">30 正则校验密码</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_31-判断对象为空" class="sidebar-link">31.判断对象为空</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_1-将json对象转化为json字符串-再判断该字符串是否为" class="sidebar-link">1.将json对象转化为json字符串，再判断该字符串是否为&quot;{}&quot;</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_2-for-in-循环判断" class="sidebar-link">2.for in 循环判断</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_3-jquery的isemptyobject方法" class="sidebar-link">3.jquery的isEmptyObject方法</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_4-object-getownpropertynames-方法" class="sidebar-link">4.Object.getOwnPropertyNames()方法</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_5-使用es6的object-keys-方法" class="sidebar-link">5.使用ES6的Object.keys()方法</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_32-图片验证码" class="sidebar-link">32 图片验证码</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#工具" class="sidebar-link">工具</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#session生成的cookie保存到h5" class="sidebar-link">session生成的cookie保存到H5</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#小程序中如何携带cookie呢" class="sidebar-link">小程序中如何携带cookie呢？</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_33-session和cookie使用" class="sidebar-link">33 Session和Cookie使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#基本用法" class="sidebar-link">基本用法</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#我的用法" class="sidebar-link">我的用法</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_1、服务器如何判断客户端发送过来的请求属于同一个会话" class="sidebar-link">1、服务器如何判断客户端发送过来的请求属于同一个会话？</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_2、服务器、客户端如何获取sessionid-sessionid在期间是如何传输的" class="sidebar-link">2、服务器、客户端如何获取sessionID?SessionID在期间是如何传输的？</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_3、session是保存在服务端的-为什么后续请求会读取到session" class="sidebar-link">3、Session是保存在服务端的，为什么后续请求会读取到session？</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_4-为什么关闭浏览器后-好像session就过期了" class="sidebar-link">4 为什么关闭浏览器后，好像session就过期了？</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_5-jwt生成token也可以用来完成前后端校验" class="sidebar-link">5 jwt生成token也可以用来完成前后端校验</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_34-解决跨域" class="sidebar-link">34 解决跨域</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#uniapp配置跨域" class="sidebar-link">uniapp配置跨域</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#关于rewrite" class="sidebar-link">关于rewrite</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#关于res-header-access-control-allow-origin" class="sidebar-link">关于res.header(&quot;Access-Control-Allow-Origin&quot;;</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#允许多个域名跨域" class="sidebar-link">允许多个域名跨域</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_34-因absolute导致的高低塌陷只能用js解决" class="sidebar-link">34 因absolute导致的高低塌陷只能用js解决</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_35-onload时调用接口更新data但是视图不变化" class="sidebar-link">35 onLoad时调用接口更新data但是视图不变化</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_36-使用iconfont" class="sidebar-link">36.使用iconfont</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_37-uniapp-editor富文本编辑器使用" class="sidebar-link">37 uniapp editor富文本编辑器使用</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_38-uniapp-picker组件" class="sidebar-link">38 uniapp picker组件</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_39-监听器进入页面不会执行" class="sidebar-link">39 监听器进入页面不会执行</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_40-vue给子组件上加-click事件不生效问题" class="sidebar-link">40 vue给子组件上加@click事件不生效问题</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_41-uni-navigateto-跳转页面后触发指定事件" class="sidebar-link">41 uni.navigateTo 跳转页面后触发指定事件</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_42-刷新当前页面" class="sidebar-link">42 刷新当前页面</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_43-实现小程序底部弹框带动画以及隐藏底部栏tab" class="sidebar-link">43 实现小程序底部弹框带动画以及隐藏底部栏tab</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_44-每行显示五个元素" class="sidebar-link">44 每行显示五个元素</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_45-uni-showmodal被挡住的解决方案" class="sidebar-link">45 uni.showModal被挡住的解决方案</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_46-使用promise解决异步问题" class="sidebar-link">46 使用promise解决异步问题</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_47-一个警告-vue-warn-avoid-mutating-a-prop-directly-since-the-value-will-be-overwritt" class="sidebar-link">47 一个警告 [Vue warn]: Avoid mutating a prop directly since the value will be overwritt</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_48-字母换行" class="sidebar-link">48 字母换行</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_49-插槽样式无效" class="sidebar-link">49 插槽样式无效</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_50-真机调试图片不显示" class="sidebar-link">50 真机调试图片不显示</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_51-虚拟化表格" class="sidebar-link">51 虚拟化表格</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_52-使用-clamp-替代媒体查询" class="sidebar-link">52 使用 clamp 替代媒体查询</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_1-post请求接受不到-req-body" class="sidebar-link">1.post请求接受不到 req.body</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_2-uni-request" class="sidebar-link">2.uni.request</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_3-uni-setstoragesync" class="sidebar-link">3 uni.setStorageSync</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_4-mongodb-findbyidandupdate" class="sidebar-link">4.mongodb findByIdAndUpdate</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_5-查询对象内数据" class="sidebar-link">5.查询对象内数据</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_6-不建议在async函数内嵌套async函数" class="sidebar-link">6.不建议在async函数内嵌套async函数</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_7-返回数据设计" class="sidebar-link">7 返回数据设计</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_8-数据库分类集合设计的一个意外错误" class="sidebar-link">8 数据库分类集合设计的一个意外错误</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_9-token校验" class="sidebar-link">9 token校验</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_10-moogose-schema" class="sidebar-link">10 moogose.Schema</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_11-密码加密" class="sidebar-link">11 密码加密</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_1-注册部分" class="sidebar-link">1.注册部分</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_2-登录部分" class="sidebar-link">2.登录部分</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_12-如果用户在另外一个设备改动了userinfo-之前登陆的设备如何处理" class="sidebar-link">12.如果用户在另外一个设备改动了userInfo，之前登陆的设备如何处理</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_13-状态码" class="sidebar-link">13 状态码</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_14-mongodb-对象数组crub" class="sidebar-link">14 mongodb 对象数组CRUB</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_15-mongodb-更新子文档某一列值" class="sidebar-link">15 mongodb 更新子文档某一列值</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_1-微信小程序端tab-item无法点击后滑动到指定位置" class="sidebar-link">1.微信小程序端tab-item无法点击后滑动到指定位置</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_2-把icontab改造为弹窗蒙层-禁止滚动" class="sidebar-link">2.把icontab改造为弹窗蒙层，禁止滚动</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_4-下拉刷新没做" class="sidebar-link">4.下拉刷新没做</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_6-小程序uni-request还没有进行封装" class="sidebar-link">6.小程序uni.request还没有进行封装</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_7-虚拟列表优化" class="sidebar-link">7.虚拟列表优化</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_8-防抖节流" class="sidebar-link">8.防抖节流</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_9-图片懒加载" class="sidebar-link">9 图片懒加载</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_10-提高首屏加载速度-减少白屏时间" class="sidebar-link">10 提高首屏加载速度，减少白屏时间</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_11-seo" class="sidebar-link">11.SEO</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_12-预渲染" class="sidebar-link">12.预渲染</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_13-离线状态编辑" class="sidebar-link">13.离线状态编辑</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_14-注册账号时需要获取手机验证码" class="sidebar-link">14.注册账号时需要获取手机验证码</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_15-小程序富文本编辑器字体颜色选择" class="sidebar-link">15.小程序富文本编辑器字体颜色选择</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_16-编辑个人信息应该进行字数限制" class="sidebar-link">16.编辑个人信息应该进行字数限制</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_17-计算时间戳的时间差转换为日期差" class="sidebar-link">17 计算时间戳的时间差转换为日期差</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_18-文字环绕" class="sidebar-link">18 文字环绕</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_19-点赞box内评论图片滚动到文章评论区" class="sidebar-link">19 点赞box内评论图片滚动到文章评论区</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_20-navigateto动画效果不生效" class="sidebar-link">20 navigateTo动画效果不生效</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_21-改变数组后触发计算属性-h5不行-小程序可以" class="sidebar-link">21 改变数组后触发计算属性，H5不行，小程序可以</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_22-浏览器端再commentdetail内评论commenttime显示错误" class="sidebar-link">22 浏览器端再commentDetail内评论commentTime显示错误</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_23-uniapp打包文件优化" class="sidebar-link">23.uniapp打包文件优化</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_24-页面加载进度条效果" class="sidebar-link">24 页面加载进度条效果</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_1-编辑个人信息页面手机端接不到后台还没进行测试" class="sidebar-link">1.编辑个人信息页面手机端接不到后台还没进行测试</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_3-查询文章" class="sidebar-link">3.查询文章</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_4-图片压缩" class="sidebar-link">4.图片压缩</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_5-前后端分页" class="sidebar-link">5.前后端分页</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_6-ssr服务端渲染" class="sidebar-link">6 SSR服务端渲染</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_7-使用jwt" class="sidebar-link">7 使用JWT</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_8-判断用户登陆是否过期没处理好" class="sidebar-link">8 判断用户登陆是否过期没处理好</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_9-如何对子文档的子文档进行增删改查" class="sidebar-link">9 如何对子文档的子文档进行增删改查</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_1-按需elementplus引入组件" class="sidebar-link">1.按需elementplus引入组件</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_2-引入组件不生效" class="sidebar-link">2.引入组件不生效</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_3-axios" class="sidebar-link">3. axios</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#前提-类型支持如何配置取决于你后台返回类型是怎么配置的" class="sidebar-link">前提：类型支持如何配置取决于你后台返回类型是怎么配置的</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#axios官网" class="sidebar-link">axios官网</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#配置mock" class="sidebar-link">配置mock</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#没有类型支持的接口请求弊端" class="sidebar-link">没有类型支持的接口请求弊端</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#axios基本配置与接口类型声明" class="sidebar-link">axios基本配置与接口类型声明</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#接口文件结构分析" class="sidebar-link">接口文件结构分析</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#使用没有类型支持的axios发送请求" class="sidebar-link">使用没有类型支持的axios发送请求</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#优化处理promise类型支持" class="sidebar-link">优化处理Promise类型支持</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_4-markdown编辑器" class="sidebar-link">4 markdown编辑器</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_5-v-model的值也可以用props传递" class="sidebar-link">5.v-model的值也可以用props传递</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_6-vue3中响应式数据无法正常渲染" class="sidebar-link">6.vue3中响应式数据无法正常渲染</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_7-表单数据" class="sidebar-link">7.表单数据</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_8-ref响应式变量可以自定义其类型" class="sidebar-link">8.ref响应式变量可以自定义其类型</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_9-vue3-监听器" class="sidebar-link">9 vue3 监听器</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_10-分页" class="sidebar-link">10 分页</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_11-自定义命名空间" class="sidebar-link">11 自定义命名空间</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_12-动画库" class="sidebar-link">12  动画库</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_13-router-view" class="sidebar-link">13 router-view</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_14-路由权限校验" class="sidebar-link">14 路由权限校验</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_15-sass配置全局样式" class="sidebar-link">15 Sass配置全局样式</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_16-vite生产环境图片处理" class="sidebar-link">16 Vite生产环境图片处理</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_17-配置不同环境base-url" class="sidebar-link">17 配置不同环境Base_URL</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_18-构建表单类-封装element-plus表单所有操作" class="sidebar-link">18 构建表单类，封装Element-plus表单所有操作</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_19-mitt插件进行非父子组件间通信" class="sidebar-link">19 mitt插件进行非父子组件间通信</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_20-suspense插槽等待页面加载完成" class="sidebar-link">20 Suspense插槽等待页面加载完成</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_21-使用svg画一个圆" class="sidebar-link">21 使用SVG画一个圆</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_22-使用echart图表" class="sidebar-link">22 使用echart图表</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_23-element-plus表格" class="sidebar-link">23 Element-plus表格</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_24-使用svg图标" class="sidebar-link">24 使用Svg图标</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_25-elemnt-plus格式化表格数据" class="sidebar-link">25 elemnt-plus格式化表格数据</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_26-预览图片" class="sidebar-link">26 预览图片</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_27-splice小点" class="sidebar-link">27  splice小点</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_28-vue3-vue2-ref区别" class="sidebar-link">28 vue3 vue2 ref区别</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_29-el-pagination-实现分页" class="sidebar-link">29 el-pagination 实现分页</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_30-使用element-plus引入组件实例问题" class="sidebar-link">30 使用element-plus引入组件实例问题</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_31-搜索框搜索指定内容" class="sidebar-link">31 搜索框搜索指定内容</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#_32-深度选择器使用" class="sidebar-link">32 深度选择器使用</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#axios-get与post请求" class="sidebar-link">axios get与post请求</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#富文本编辑器上传图片到后端保存" class="sidebar-link">富文本编辑器上传图片到后端保存</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#配置mongodb环境" class="sidebar-link">配置mongodb环境</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#服务端部署到宝塔面板" class="sidebar-link">服务端部署到宝塔面板</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#前后端上线问题" class="sidebar-link">前后端上线问题</a></li><li class="sidebar-sub-header"><a href="/docs/项目/作家/问题整合.html#跨域cookie失效问题" class="sidebar-link">跨域cookie失效问题</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端脚手架项目</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数字图像处理课程网站</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue3组件库开发</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>浏览器插件开发</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="前端问题整合"><a href="#前端问题整合" class="header-anchor">#</a> 前端问题整合</h1> <h2 id="重点"><a href="#重点" class="header-anchor">#</a> 重点</h2> <p>尽量不要在html里进行js操作，不然改起Bug来得浪费一天</p> <h2 id="_1-image图片问题"><a href="#_1-image图片问题" class="header-anchor">#</a> 1.image图片问题</h2> <p>小程序只认识 image</p> <p>浏览器认识image 和 img</p> <h2 id="_2-微信小程序导航栏字体大小无法调整"><a href="#_2-微信小程序导航栏字体大小无法调整" class="header-anchor">#</a> 2.微信小程序导航栏字体大小无法调整</h2> <h2 id="_3-view与div"><a href="#_3-view与div" class="header-anchor">#</a> 3.view与div</h2> <p>uniapp里写<code>div</code> 编译到小程序会变成 <code>view</code> 因此，建议uniapp的div全部换为view，防止样式不生效</p> <h2 id="_4-根据文本长度决定盒子大小"><a href="#_4-根据文本长度决定盒子大小" class="header-anchor">#</a> 4.根据文本长度决定盒子大小</h2> <p>①在flex盒子中:</p> <p><code>flex-basis: auto</code> 表示项目的本来大小，当设置为 <code>auto</code> 时会根据主轴方向检索该 <code>flex-item</code> 的 <code>width</code> 或 <code>height</code> 值作为 <code>flex-basis</code> 的值</p> <p>②普通文本中</p> <p>width：设置为auto即可</p> <h2 id="_5-隐藏滚动条"><a href="#_5-隐藏滚动条" class="header-anchor">#</a> 5.隐藏滚动条</h2> <p>&amp;为容器</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">&amp;::-webkit-scrollbar</span> <span class="token punctuation">{</span> //隐藏滚动条
    <span class="token property">width</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/*每个页面公共css */</span>
	<span class="token comment">/* 解决小程序和app滚动条的问题 */</span>
	<span class="token comment">/* #ifdef MP-WEIXIN || APP-PLUS */</span>
	<span class="token operator">:</span><span class="token operator">:</span><span class="token operator">-</span>webkit<span class="token operator">-</span>scrollbar <span class="token punctuation">{</span>
		<span class="token literal-property property">display</span><span class="token operator">:</span> none<span class="token punctuation">;</span>
		<span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token operator">!</span>important<span class="token punctuation">;</span>
		<span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token operator">!</span>important<span class="token punctuation">;</span>
		<span class="token operator">-</span>webkit<span class="token operator">-</span>appearance<span class="token operator">:</span> none<span class="token punctuation">;</span>
		<span class="token literal-property property">background</span><span class="token operator">:</span> transparent<span class="token punctuation">;</span>
		<span class="token literal-property property">color</span><span class="token operator">:</span> transparent<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">/* #endif */</span>

	<span class="token comment">/* 解决H5 的问题 */</span>
	<span class="token comment">/* #ifdef H5 */</span>
	uni<span class="token operator">-</span>scroll<span class="token operator">-</span>view <span class="token punctuation">.</span>uni<span class="token operator">-</span>scroll<span class="token operator">-</span>view<span class="token operator">:</span><span class="token operator">:</span><span class="token operator">-</span>webkit<span class="token operator">-</span>scrollbar <span class="token punctuation">{</span>
		<span class="token comment">/* 隐藏滚动条，但依旧具备可以滚动的功能 */</span>
		<span class="token literal-property property">display</span><span class="token operator">:</span> none<span class="token punctuation">;</span>
		<span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token operator">!</span>important<span class="token punctuation">;</span>
		<span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token operator">!</span>important<span class="token punctuation">;</span>
		<span class="token operator">-</span>webkit<span class="token operator">-</span>appearance<span class="token operator">:</span> none<span class="token punctuation">;</span>
		<span class="token literal-property property">background</span><span class="token operator">:</span> transparent<span class="token punctuation">;</span>
		<span class="token literal-property property">color</span><span class="token operator">:</span> transparent<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">/* #endif */</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h2 id="_6-文字省略"><a href="#_6-文字省略" class="header-anchor">#</a> 6 文字省略</h2> <p><strong>显示一行文字，多余的文字省略</strong></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>.title {
  white-space: nowrap;
  text-overflow: ellipsis;
  overflow: hidden;
  word-break: break-all;
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>显示两行文字，多余的文字省略</strong>，<font color="red" size="3">必须要给容器设置高度才能生效</font></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>.title {
  overflow: hidden;
  text-overflow: ellipsis;
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  display: -moz-box;
  -moz-line-clamp: 2;
  -moz-box-orient: vertical;
  word-wrap: break-word;
  word-break: break-all;
  white-space: normal;    
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">overflow</span><span class="token operator">:</span> hidden<span class="token punctuation">;</span> <span class="token comment">//一定要写</span>
text<span class="token operator">-</span>overflow<span class="token operator">:</span> ellipsis<span class="token punctuation">;</span> <span class="token comment">//超出省略号</span>
<span class="token literal-property property">display</span><span class="token operator">:</span> <span class="token operator">-</span>webkit<span class="token operator">-</span>box<span class="token punctuation">;</span> <span class="token comment">//一定要写</span>
<span class="token operator">-</span>webkit<span class="token operator">-</span>line<span class="token operator">-</span>clamp<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">//控制行数</span>
<span class="token operator">-</span>webkit<span class="token operator">-</span>box<span class="token operator">-</span>orient<span class="token operator">:</span> vertical<span class="token punctuation">;</span> <span class="token comment">//一定要写</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_7-padding右边没效果"><a href="#_7-padding右边没效果" class="header-anchor">#</a> 7 padding右边没效果</h2> <p>设置为包含内边距和盒子就可以了</p> <p><code>box-sizing: border-box;</code></p> <h2 id="_8-使用flex布局后子元素定义宽度无效"><a href="#_8-使用flex布局后子元素定义宽度无效" class="header-anchor">#</a> 8 使用flex布局后子元素定义宽度无效</h2> <p>直接让子元素使用 flex: 0 0 1 这种方式</p> <h2 id="_9-滚动导航栏"><a href="#_9-滚动导航栏" class="header-anchor">#</a> 9 滚动导航栏</h2> <p>明白dom元素的一些属性</p> <p><code>element.offsetHeight</code>： 返回任何一个元素的高度包括边框（border）和内边距（padding），但不包含外边距（margin）</p> <p><code>element.offsetWidth</code>: 返回元素的宽度，包括边框（border）和内边距（padding），但不包含外边距（margin）</p> <p><code>element.offsetLeft</code>: 返回当前元素的相对水平偏移位置的偏移容器</p> <p><code>element.offsetTop</code>:返回当前元素的相对垂直偏移位置的偏移容器</p> <p><code>element.scrollHeight</code>:返回整个元素的高度（包括带滚动条的隐蔽的地方）</p> <p><code>element.scrollWidth</code>:返回元素的整个宽度（包括带滚动条的隐蔽的地方）</p> <p><code>element.scrollLeft</code>:返回当前视图中的实际元素的左边缘和左边缘之间的距离</p> <p><code>element.scrollTop</code>:返回当前视图中的实际元素的顶部边缘和顶部边缘之间的距离</p> <p>对于我们的横向滚动条来说，可以通过获取<code>tab-list</code>整个滚动区间，依据<code>element.offsetLeft</code>调用<code>scrollTo(x轴位置，y轴位置)</code>到达指定位置</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">&gt;=</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//从大于第三个tab-item开始滚动</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>scroll_item <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.active'</span><span class="token punctuation">)</span>
        <span class="token comment">//计算要滚动到的位置，随便搞了一条公式</span>
        <span class="token keyword">let</span> offsetLeft <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>scroll_item<span class="token punctuation">.</span>offsetLeft <span class="token operator">*</span> <span class="token number">0.25</span> <span class="token operator">*</span> <span class="token punctuation">(</span>index<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> 
        <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>scroll<span class="token punctuation">.</span>$el<span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">left</span><span class="token operator">:</span> offsetLeft<span class="token punctuation">,</span>
            <span class="token literal-property property">behavior</span><span class="token operator">:</span> <span class="token string">&quot;smooth&quot;</span> <span class="token comment">//平滑滚动</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="_10-获取dom更新后的数据"><a href="#_10-获取dom更新后的数据" class="header-anchor">#</a> 10 获取dom更新后的数据</h2> <p>数据获取有延迟时使用：<code>setTimeout(() =&gt; {}, 500);</code>
DOM加载有延迟时使用：<code>this.$nextTick(() =&gt; {});</code></p> <p>使用<code>this.$nextTick</code>时，想要等待dom更新完再获取数据，只能写成带function的形式，直接调用methods中的方法是无效的</p> <p><strong>有效</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>scroll <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.active'</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>scroll<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>scroll<span class="token punctuation">.</span>scrollTop<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>scroll<span class="token punctuation">.</span>offsetHeight<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>scroll<span class="token punctuation">.</span>scrollLeft<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>scroll<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>无效</strong>,调用methods内方法</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">scrollToElem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>不过可以这样，在函数内再去调用methods</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">scrollToElem</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_11-cannot-read-property-mark-of-undefined"><a href="#_11-cannot-read-property-mark-of-undefined" class="header-anchor">#</a> 11 Cannot read property 'mark' of undefined</h2> <p>我这边问题如图：使用ES7异步网络请求方法：<code>async getGoodgsList(){ const res=await request({</code>}）
<img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/20201210131326392.png" alt="这是出现的问题">
解决方法：
<img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/2020121013150970.png" alt="在这里插入图片描述">
打开界面右边的。。。选择其中的设置-—&gt;项目设置,将增强编译勾选上。如下图。
<img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220707220027021.png" alt="image-20220707220027021" style="zoom:50%;">
此时再运行小程序，完美解决。</p> <h2 id="_12-微信小程序不支持动态组件"><a href="#_12-微信小程序不支持动态组件" class="header-anchor">#</a> 12 微信小程序不支持动态组件</h2> <p><code>&lt;!-- &lt;component v-bind:is=&quot;item.comp&quot;&gt;&lt;/component&gt; --&gt;</code></p> <p>替代方案 <code>v-if</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>view v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;item.comp === 'findmore'&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>findmore<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>findmore<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>view v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;item.comp === 'hotlist'&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>hotlist<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>hotlist<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>view v<span class="token operator">-</span><span class="token keyword">if</span><span class="token operator">=</span><span class="token string">&quot;item.comp === 'icontab'&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>icontab<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>icontab<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="_13-使用uni-app编译后在小程序上点击真机调试报错"><a href="#_13-使用uni-app编译后在小程序上点击真机调试报错" class="header-anchor">#</a> 13 使用uni-app编译后在小程序上点击真机调试报错</h2> <p><code>desc of [scope](https://so.csdn.net/so/search?q=scope&amp;spm=1001.2101.3001.7020).userLocation is empty</code></p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/20191021143455645.png" alt="img"></p> <p>2.位置接口设置为不勾选即可</p> <h2 id="_14-前端滚动时固定导航栏-吸顶效果"><a href="#_14-前端滚动时固定导航栏-吸顶效果" class="header-anchor">#</a> 14 前端滚动时固定导航栏(吸顶效果)</h2> <p>https://blog.csdn.net/HWJBJ/article/details/119448511</p> <p>主要思路是在mounted方法下监听window滚动事件，计算当前页面滚动的距离，当页面滚动距离到达导航栏时，给导航栏动态添加固定属性</p> <h4 id="html部分"><a href="#html部分" class="header-anchor">#</a> html部分</h4> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- 上面有一些其他显示的东西--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>yj_bot<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token comment">&lt;!-- 需固定区--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{<span class="token punctuation">'</span>fixed<span class="token punctuation">'</span>: isFixed, <span class="token punctuation">'</span>main_bg_color<span class="token punctuation">'</span>: true}<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tabs</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>active<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">:background</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>background<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tab</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>全部<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tab</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tab</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>卡片<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tab</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>van-tab</span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>收款<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tab</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>van-tabs</span><span class="token punctuation">&gt;</span></span>  
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
   <span class="token comment">&lt;!-- 内容区--&gt;</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>内容区<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="js部分"><a href="#js部分" class="header-anchor">#</a> js部分</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">{</span>
	    <span class="token literal-property property">active</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
		<span class="token literal-property property">isFixed</span><span class="token operator">:</span> <span class="token boolean">false</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
	<span class="token function">handleScroll</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> scrollY <span class="token operator">=</span> window<span class="token punctuation">.</span>pageYOffset <span class="token operator">||</span>
          document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop <span class="token operator">||</span>
          document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop
      <span class="token keyword">let</span> scrollObj <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#yj_bot'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>offsetTop
      <span class="token keyword">if</span> <span class="token punctuation">(</span>scrollY <span class="token operator">&gt;=</span> scrollObj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>isFixed <span class="token operator">=</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>isFixed <span class="token operator">=</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleScroll<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>css</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">&lt;style scoped&gt;
  .fixed</span><span class="token punctuation">{</span><span class="token property">position</span><span class="token punctuation">:</span> fixed<span class="token punctuation">;</span><span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><span class="token property">z-index</span><span class="token punctuation">:</span> 99<span class="token punctuation">;</span><span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><span class="token punctuation">}</span>
&lt;style&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_15-小程序onpagescroll-监听滚动事件"><a href="#_15-小程序onpagescroll-监听滚动事件" class="header-anchor">#</a> 15 小程序onpageScroll 监听滚动事件</h2> <p>必须注意onpageScroll必须放到page页面上才能生效</p> <p>放到组件内是不生效的</p> <h2 id="_16-uniapp写span标签小程序不认识"><a href="#_16-uniapp写span标签小程序不认识" class="header-anchor">#</a> 16 uniapp写span标签小程序不认识</h2> <p>建议盒子只用view</p> <h2 id="_17css获取状态栏的高度var-status-bar-height"><a href="#_17css获取状态栏的高度var-status-bar-height" class="header-anchor">#</a> 17css获取状态栏的高度var(–status-bar-height)</h2> <p>小程序中是固定25px;；5+app是真实状态栏高度；H5是0；</p> <h2 id="_18-吸顶效果"><a href="#_18-吸顶效果" class="header-anchor">#</a> 18 吸顶效果</h2> <p>计算当前屏幕滚动到的位置是否已经超过导航栏距离顶部的位置了</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>toptool<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{<span class="token punctuation">'</span>fixed<span class="token punctuation">'</span>: isFixed}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goback()<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>../../static/common/返回.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showMenu()<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>operator<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>· · ·<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">onReady</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//顶部操作栏滚动计算</span>
    <span class="token keyword">let</span> query <span class="token operator">=</span> uni<span class="token punctuation">.</span><span class="token function">createSelectorQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">in</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//选取dom元素,使用boundingClientRect方法查询dom信息</span>
    query<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'.toptool'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boundingClientRect</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>offsettop <span class="token operator">=</span> data<span class="token punctuation">.</span>top <span class="token comment">//更新导航栏到顶部的距离</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token function-variable function">onPageScroll</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//获取页面滚动距离</span>
    <span class="token keyword">let</span> scrollY <span class="token operator">=</span> e<span class="token punctuation">.</span>scrollTop
    <span class="token keyword">if</span><span class="token punctuation">(</span>scrollY <span class="token operator">&gt;=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">.</span>offsettop<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>isFixed <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>isFixed <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>如果是的话给导航栏添加样式</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">//动态添加导航栏固定效果
.fixed</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> fixed <span class="token important">!important</span><span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> 55rpx<span class="token punctuation">;</span>
    <span class="token comment">/*  #ifdef  MP-WEIXIN */</span>
    <span class="token property">top</span><span class="token punctuation">:</span> -20rpx<span class="token punctuation">;</span>
    <span class="token comment">/*  #endif  */</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_19-uniapp-的-swiper-无法被子元素撑开"><a href="#_19-uniapp-的-swiper-无法被子元素撑开" class="header-anchor">#</a> 19 uniapp 的 swiper 无法被子元素撑开</h2> <p>解决方法，获取子元素的高度，再动态赋值给swipper</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>swiper</span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{<span class="token punctuation">'</span>height<span class="token punctuation">'</span>: swiperheight}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>swiper</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">swiperheight</span><span class="token operator">:</span> <span class="token string">&quot;0px&quot;</span><span class="token punctuation">,</span> <span class="token comment">//滑块的高度，只能计算获得了，设置100%是无法撑开的</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function">setSwiperHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> sortHeight <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//获取子元素高度</span>
            <span class="token keyword">let</span> saysayHeight <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//获取子元素高度</span>
            <span class="token keyword">let</span> query <span class="token operator">=</span> uni<span class="token punctuation">.</span><span class="token function">createSelectorQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">in</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            query<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;.sort&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            query<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&quot;.say&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            query<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                sortHeight <span class="token operator">=</span> res<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>height<span class="token punctuation">;</span>
                saysayHeight <span class="token operator">=</span> res<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>height<span class="token punctuation">;</span>
                <span class="token comment">//sortHeight*3是我为了美观凑数的</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>swiperheight <span class="token operator">=</span> sortHeight<span class="token operator">*</span><span class="token number">3</span> <span class="token operator">+</span> saysayHeight <span class="token operator">+</span> <span class="token string">'px'</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setSwiperHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h2 id="_20-让文字可以复制"><a href="#_20-让文字可以复制" class="header-anchor">#</a> 20 让文字可以复制</h2> <p>方法一：将需要复制的文本放在<text></text>标签中，将text标签的属性 user-select的值为true。通过手机对文本的复制功能实现复制。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;text  user-select=\'true\'&gt;{{item.bookCode}}&lt;/text&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这个方法实现比较简单，也可以灵活选择需要复制的字段。缺点在于text的样式和功能设计有限制。</p> <p><strong>但是使用了user-select后文字省略就失效了</strong></p> <p>方法二：小程序提供了设置剪切板内容的API复制（wx.setClipboardData）和粘贴（wx.getClipboardData），可以将复制方法绑定在按钮上，长按或点击按钮触发事件来为剪切板设定值。</p> <p>wxml代码：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;button bindlongpress =\'copy\' data-copy=\'{{value}}\'&gt;{{value}}&lt;/button&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_21-es6语法糖-在对象里属性是函数时-可以简化"><a href="#_21-es6语法糖-在对象里属性是函数时-可以简化" class="header-anchor">#</a> 21 es6语法糖，在对象里属性是函数时，可以简化</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://localhost:3400/toRegister'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">phone</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>phone<span class="token punctuation">,</span>
        <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>password
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">timeout</span><span class="token operator">:</span> <span class="token number">2000</span><span class="token punctuation">,</span>
    <span class="token comment">// es6语法糖，在对象里属性是函数，就可以简化 success(res) {}</span>
    <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data <span class="token operator">===</span> <span class="token string">'success'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            uni<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'注册成功'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">mask</span><span class="token operator">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data <span class="token operator">===</span> <span class="token string">'fail'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            uni<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'账号已存在'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">mask</span><span class="token operator">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">fail</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>success可以更改为</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_22-margin-right-失效"><a href="#_22-margin-right-失效" class="header-anchor">#</a> 22 margin-right 失效</h2> <p>我们在设置盒子样式或者位置的时候会遇到margin-right没有效果。要怎么解决呢？首先要观察一下设置margin-right的元素有没有设置width属性，width的属性值是什么。</p> <p>当没有设置width时，width默认为auto：
这时的margin-right是正常显示的；</p> <p>当width设置为固定值或者百分比时：
margin-right在默认文档标准流中是无效的，要想显示出效果，必须要脱离文档标准流，可以用下面的方法恢复margin-right的效果：</p> <p>float：left | right；
设置position；
设置display；</p> <h2 id="_23-uniapp的textarea默认值使用v-model显示"><a href="#_23-uniapp的textarea默认值使用v-model显示" class="header-anchor">#</a> 23 uniapp的textarea默认值使用v-model显示</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>textarea name<span class="token operator">=</span><span class="token string">&quot;&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;&quot;</span> cols<span class="token operator">=</span><span class="token string">&quot;30&quot;</span> rows<span class="token operator">=</span><span class="token string">&quot;10&quot;</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;temp&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>textarea<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_24-更新用户信息后返回上一级页面-没有重新执行onload获取userinfo"><a href="#_24-更新用户信息后返回上一级页面-没有重新执行onload获取userinfo" class="header-anchor">#</a> 24 更新用户信息后返回上一级页面，没有重新执行onload获取userInfo</h2> <p>在onload里监听更新用户信息</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>userInfo <span class="token operator">=</span> uni<span class="token punctuation">.</span><span class="token function">getStorageSync</span><span class="token punctuation">(</span><span class="token string">'userInfo'</span><span class="token punctuation">)</span>
    uni<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'updateInfo'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>userInfo <span class="token operator">=</span> uni<span class="token punctuation">.</span><span class="token function">getStorageSync</span><span class="token punctuation">(</span><span class="token string">'userInfo'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>		
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>在更新用户信息后触发updateInfo</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    uni<span class="token punctuation">.</span><span class="token function">setStorageSync</span><span class="token punctuation">(</span><span class="token string">'userInfo'</span><span class="token punctuation">,</span> res<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>userInfo <span class="token operator">=</span> uni<span class="token punctuation">.</span><span class="token function">getStorageSync</span><span class="token punctuation">(</span><span class="token string">'userInfo'</span><span class="token punctuation">)</span>
    uni<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'updateInfo'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_25-addeventlistener取消问题"><a href="#_25-addeventlistener取消问题" class="header-anchor">#</a> 25 addeventListener取消问题</h2> <p>在切换tabBar页面后，还在监听前一个页面的滚动事件，</p> <p>因此需要在前一个页面的生命周期onHide中去取消监听事件，(注意组件没有onHide事件，只有页面有)</p> <p>如果监听事件是写在页面的组件中，那么可以在onHide生命周期里触发<code>uni.$emit('取消监听事件')</code>,在组件里通过<code>uni.$on('取消监听事件','函数名')</code>来执行<code>removeEventListener</code></p> <p>示例</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">mounted</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//#ifndef MP-WEIXIN</span>
    window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>handleScroll<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span>
    uni<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'removeListener'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        window<span class="token punctuation">.</span><span class="token function">removeEventListener</span><span class="token punctuation">(</span><span class="token string">'scroll'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleScroll<span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">//#endif</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">onHide</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//#ifndef MP-WEIXIN</span>
    uni<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'removeListener'</span><span class="token punctuation">)</span>
    <span class="token comment">//#endif</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>后面我没用addEventListener了，在page页面可以用onPageScroll() API监听滚动</p> <h2 id="_26-localstorage存储问题"><a href="#_26-localstorage存储问题" class="header-anchor">#</a> 26 localStorage存储问题</h2> <p>JSON.stringify转为json字符串存入</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>uni<span class="token punctuation">.</span><span class="token function">setStorageSync</span><span class="token punctuation">(</span><span class="token string">'userInfo'</span><span class="token punctuation">,</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>JSON.parse转为JSON对象取出</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>userInfo <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>uni<span class="token punctuation">.</span><span class="token function">getStorageSync</span><span class="token punctuation">(</span><span class="token string">'userInfo'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_27-使用scroll-view-重构横向导航栏"><a href="#_27-使用scroll-view-重构横向导航栏" class="header-anchor">#</a> 27 使用scroll-view 重构横向导航栏</h2> <ul><li>隐藏导航条，在App.vue中统一解决</li></ul> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token comment">/* 解决小程序和app滚动条的问题 */</span>
	<span class="token comment">/* #ifdef MP-WEIXIN || APP-PLUS */</span>
	<span class="token selector">::-webkit-scrollbar</span> <span class="token punctuation">{</span>
		<span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
		<span class="token property">width</span><span class="token punctuation">:</span> 0 <span class="token important">!important</span><span class="token punctuation">;</span>
		<span class="token property">height</span><span class="token punctuation">:</span> 0 <span class="token important">!important</span><span class="token punctuation">;</span>
		<span class="token property">-webkit-appearance</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
		<span class="token property">background</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>
		<span class="token property">color</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token comment">/* #endif */</span>

	<span class="token comment">/* 解决H5 的问题 */</span>
	<span class="token comment">/* #ifdef H5 */</span>
	<span class="token selector">uni-scroll-view .uni-scroll-view::-webkit-scrollbar</span> <span class="token punctuation">{</span>
		<span class="token comment">/* 隐藏滚动条，但依旧具备可以滚动的功能 */</span>
		<span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
		<span class="token property">width</span><span class="token punctuation">:</span> 0 <span class="token important">!important</span><span class="token punctuation">;</span>
		<span class="token property">height</span><span class="token punctuation">:</span> 0 <span class="token important">!important</span><span class="token punctuation">;</span>
		<span class="token property">-webkit-appearance</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
		<span class="token property">background</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>
		<span class="token property">color</span><span class="token punctuation">:</span> transparent<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">/* #endif */</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><ul><li>scroll-x 无效，解决方法 https://blog.csdn.net/zwtank/article/details/110049144 ,其实最好就是在uniapp原样式底下修改，但我还是用自己之前手写的横向滚动条样式，所以较难发现这个问题</li> <li>利用 scroll-into-view 属性，横向滚动变得特别简单</li></ul> <table><thead><tr><th>scroll-into-view</th> <th>String</th> <th></th> <th>值应为某子元素id（id不能以数字开头）。设置哪个方向可滚动，则在哪个方向滚动到该元素</th></tr></thead> <tbody><tr><td></td> <td></td> <td></td> <td></td></tr></tbody></table> <div class="language-html line-numbers-mode"><pre class="language-html"><code>&lt;scroll-view 
    ref=&quot;scroll&quot; 
    class=&quot;tab-list&quot; 
    scroll-x=&quot;true&quot; 
    @scroll=&quot;scroll&quot;
    :scroll-into-view = &quot;scrollView&quot; //值为某个子元素的id
&gt;
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> 
          <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tab-item<span class="token punctuation">&quot;</span></span> 
          <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{active: item.category === channelNow ? true : false}<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>(item,index) in channelList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>index<span class="token punctuation">&quot;</span></span> 
          <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>selectChannel(item,index)<span class="token punctuation">&quot;</span></span>
          <span class="token attr-name">:id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">'</span>po<span class="token punctuation">'</span>+index<span class="token punctuation">&quot;</span></span>
          <span class="token punctuation">&gt;</span></span>
        {{ item.category }}
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scroll-view</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">selectChannel</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">.</span>channelNow <span class="token operator">=</span> item<span class="token punctuation">.</span>category<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>$data<span class="token punctuation">.</span>scrollView <span class="token operator">=</span> <span class="token string">'po'</span> <span class="token operator">+</span> <span class="token punctuation">(</span>index <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//滚动被点击标签的前一个标签处</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_28-退出登陆和登陆跳转"><a href="#_28-退出登陆和登陆跳转" class="header-anchor">#</a> 28 退出登陆和登陆跳转</h2> <p>使用uni.reLaunch跳转到某个页面，关闭所有页面，打开到应用内的某个页面。</p> <p>如果使用uni.navigatorTo，会优先读取之前的缓存加载页面，所以视图还是不会变化</p> <h2 id="_29-box-shadow可以制作一个发光效果"><a href="#_29-box-shadow可以制作一个发光效果" class="header-anchor">#</a> 29 box-shadow可以制作一个发光效果</h2> <p>​				box-shadow: 0rpx 0rpx 50rpx  0rpx #ffffff;</p> <p>水平不移动</p> <p>垂直不移动</p> <p>模拟距离50rpx</p> <p>阴影大小0</p> <p>再添加上白色</p> <p>就能发光了</p> <p>单边阴影与多边阴影</p> <p>https://blog.csdn.net/weixin_56025182/article/details/126153625</p> <h2 id="_30-正则校验密码"><a href="#_30-正则校验密码" class="header-anchor">#</a> 30 正则校验密码</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> testpassword <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>password<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^(?=.*[0-9])(?=.*[a-zA-Z])(?=.*[!@#$\%\^\&amp;\*\(\)])[0-9a-zA-Z!@#$\%\^\&amp;\*\(\)]{8,16}$</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>密码必须包含数字加英文字母加特殊字符并且长度在8-16之间</p> <ul><li><p><code>(?=exp)</code> 是肯定顺序环视，不在匹配结果中记录,环视不占位，可以当成是一种条件判定，满足才能匹配</p></li> <li><p><code>.*</code> .表示匹配除了换行的任意字符，*是量词，表示0~n个，结合起来就是0~n个除了换行符的任意字符
<code>[a-z]</code> 表示从a到z的集合里匹配一个字母，因为[a-z]后面没加量词，因此默认是一个。</p></li> <li><p><code>(?=.*[0-9])</code>匹配至少一个数字，不然不匹配 , 详细说：必须有0-n个除换行符字符，并且必须有数字结尾，不然整串不匹配，直接返回null</p></li> <li><p><code>?=.*[a-zA-Z]</code>匹配至少一个字母，不然不匹配  ,详细说: 必须有0-n个除换行符字符，并且必须有字母结尾，不然整串不匹配，直接返回null</p></li> <li><p><code>?=.*[!@#$\%\^\&amp;\*\(\)]</code>匹配特殊字符</p></li> <li><p><code>0-9a-zA-Z!@#$\%\^\&amp;\*\(\)</code> 匹配非空格</p></li> <li><p><code>[0-9a-zA-Z!@#$\%\^\&amp;\*\(\)]{8,16}</code> 规定只能有8-16个字符，前面的<code>?=exp</code>可以理解为只是if语句，最后匹配多个看这里</p></li></ul> <h2 id="_31-判断对象为空"><a href="#_31-判断对象为空" class="header-anchor">#</a> 31.判断对象为空</h2> <h3 id="_1-将json对象转化为json字符串-再判断该字符串是否为"><a href="#_1-将json对象转化为json字符串-再判断该字符串是否为" class="header-anchor">#</a> 1.将json对象转化为json字符串，再判断该字符串是否为&quot;{}&quot;</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>var data = {};
var b = (JSON.stringify(data) == &quot;{}&quot;);
alert(b);//true

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_2-for-in-循环判断"><a href="#_2-for-in-循环判断" class="header-anchor">#</a> 2.for in 循环判断</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>var obj = {};
var b = function() {
    for(var key in obj) {
        return false;
    }
    return true;
}
alert(b());//true

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_3-jquery的isemptyobject方法"><a href="#_3-jquery的isemptyobject方法" class="header-anchor">#</a> 3.jquery的isEmptyObject方法</h3> <p>此方法是jquery将2方法(for in)进行封装，使用时需要依赖jquery</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var data = {};
var b = $.isEmptyObject(data);
alert(b);//true

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_4-object-getownpropertynames-方法"><a href="#_4-object-getownpropertynames-方法" class="header-anchor">#</a> 4.Object.getOwnPropertyNames()方法</h3> <p>此方法是使用Object对象的getOwnPropertyNames方法，获取到对象中的属性名，存到一个数组中，返回数组对象，我们可以通过判断数组的length来判断此对象是否为空
注意：此方法不兼容ie8，其余浏览器没有测试</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var data = {};
var arr = Object.getOwnPropertyNames(data);
alert(arr.length == 0);//true

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_5-使用es6的object-keys-方法"><a href="#_5-使用es6的object-keys-方法" class="header-anchor">#</a> 5.使用ES6的Object.keys()方法</h3> <p>与4方法类似，是ES6的新方法, 返回值也是对象中属性名组成的数组</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>var data = {};
var arr = Object.keys(data);
alert(arr.length == 0);//true

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_32-图片验证码"><a href="#_32-图片验证码" class="header-anchor">#</a> 32 图片验证码</h2> <h3 id="工具"><a href="#工具" class="header-anchor">#</a> 工具</h3> <p>生成svg图片验证码 https://github.com/produck/svg-captcha/blob/HEAD/README_CN.md</p> <p>小程序不能直接使用svg标签，需要将svg图片进行转换</p> <p>所有的验证逻辑都要在服务端进行，不然这个验证码就没什么卵用了，所以正确的逻辑应该是，当去请求敏感接口的时候，把客户端输入的验证码连同接口需要的参数一块传给node层，在node里判断用户输入的验证码是不是跟之前存到session里的验证码一致，如果不一致，则验证不通过，直接返回数据，不请求后台；如果一致，则验证通过，再由node发起请求，去调用后台接口。</p> <h3 id="session生成的cookie保存到h5"><a href="#session生成的cookie保存到h5" class="header-anchor">#</a> session生成的cookie保存到H5</h3> <p>后端返回消息头设置允许携带cookie才能把cookie发给浏览器保存</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>res<span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Credentials'</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//允许携带cookie，设置这个的话上一条的设置不能为'*'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>前端校验图形验证码时需要校验session内数据，因此前端发送axios请求时需要携带上cookie</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//后端逻辑代码需要用到session内数据，需要携带cookie</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>session<span class="token punctuation">.</span>VerificationCode <span class="token operator">&amp;&amp;</span> code<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> req<span class="token punctuation">.</span>session<span class="token punctuation">.</span>VerificationCode<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
            <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'验证通过'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'success'</span><span class="token punctuation">,</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		<span class="token keyword">throw</span> <span class="token string">&quot;验证码错误&quot;</span>
	<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>uniapp中req.request携带cookie的方法</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:3400/consumer/checkValidationCode&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">withCredentials</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">//重点是这里，但是仅对H5有效</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>checkvalidation
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>axios携带cookie的方法类似</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> axio<span class="token operator">=</span>axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">withCredentials</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">baseURL</span> <span class="token operator">:</span> <span class="token string">'/域名'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">timeout</span><span class="token operator">:</span><span class="token number">4000</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="小程序中如何携带cookie呢"><a href="#小程序中如何携带cookie呢" class="header-anchor">#</a> 小程序中如何携带cookie呢？</h3> <p>微信小程序是没有cookie机制的 ，也就是说，当<a href="https://so.csdn.net/so/search?q=uniapp&amp;spm=1001.2101.3001.7020" target="_blank" rel="noopener noreferrer">uniapp<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>运行在微信端是没有cookie供后台认证，但是我们可以在获取图形验证码时将后端响应头内的<code>Set-cookie</code>保存到localStorge中，在验证验证码时在请求头header上加上cookie</p> <p>保存cookie</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// #ifdef MP-WEIXIN</span>
	uni<span class="token punctuation">.</span><span class="token function">setStorageSync</span><span class="token punctuation">(</span><span class="token string">&quot;cookieKey&quot;</span><span class="token punctuation">,</span>res<span class="token punctuation">.</span>header<span class="token punctuation">[</span><span class="token string">'Set-Cookie'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// #endif</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220801141633004.png" alt="image-20220801141633004"></p> <p>请求时带上cookie</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:3400/consumer/checkValidationCode&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span>
    <span class="token literal-property property">withCredentials</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token comment">// #ifdef MP-WEIXIN</span>
    <span class="token literal-property property">header</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;Cookie&quot;</span><span class="token operator">:</span> uni<span class="token punctuation">.</span><span class="token function">getStorageSync</span><span class="token punctuation">(</span><span class="token string">&quot;cookieKey&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// #endif</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_33-session和cookie使用"><a href="#_33-session和cookie使用" class="header-anchor">#</a> 33 Session和Cookie使用</h2> <h3 id="基本用法"><a href="#基本用法" class="header-anchor">#</a> 基本用法</h3> <ul><li>express使用 express-session 使用session保存会话数据，并传cookie给前端进行保存，前端以后每次请求带上cookie，可以通过cookie内的sessionID找到之前的会话，获取session内的值</li> <li>express使用 cookie-parser,可以创建多个cookie给前端，可以当localStorage用，但是内存很小,不如直接用localStorage</li></ul> <p>express-session使用教程 https://blog.csdn.net/weixin_44827418/article/details/115738852</p> <p>session与cookie配合来完成后端校验 https://www.bbsmax.com/A/Gkz11BbrzR/</p> <p>session与cookie配合https://juejin.cn/post/7011327714254651428</p> <ul><li><p>session是另一种记录客户状态的机制，与cookie保存在客户端浏览器不同，session保存在服务器当中；
当客户端访问服务器时，服务器会生成一个session对象，对象中保存的是key:value值，同时服务器会将key传回给客户端的cookie当中；当用户第二次访问服务器时，就会把cookie当中的key传回到服务器中，最后服务器会吧value值返回给客户端。
因此上面的key则是全局唯一的标识，客户端和服务端依靠这个全局唯一的标识来访问会话信息数据。</p></li> <li><p>session也是“会话状态”的一种形式，但是它是将“会话状态”保持在服务器上。而借助cookie保存SESSION_ID（一个唯一id），然后在服务器上获取到该SESSION_ID所映射的会话状态的数据，这就是我们常说的session。cookie 是session一种通用性较好的实现方式，但并不是唯一方式</p></li> <li><p>在session(option)中对session进行设置，它的主要参数是：</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">1.</span> name <span class="token operator">-</span> cookie的名字（原属性名为 key）。（默认：’connect<span class="token punctuation">.</span>sid’）
<span class="token number">2.</span> store <span class="token operator">-</span> session存储实例
<span class="token number">3.</span> secret <span class="token operator">-</span> 用它来对session cookie签名，防止篡改
<span class="token number">4.</span> cookie <span class="token operator">-</span> session cookie设置 （默认：<span class="token punctuation">{</span> <span class="token literal-property property">path</span><span class="token operator">:</span> ‘<span class="token operator">/</span>‘<span class="token punctuation">,</span> <span class="token literal-property property">httpOnly</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token literal-property property">secure</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token literal-property property">maxAge</span><span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span>）
<span class="token number">5.</span> genid <span class="token operator">-</span> 生成新session <span class="token constant">ID</span>的函数 （默认使用uid2库）
<span class="token number">6.</span> rolling <span class="token operator">-</span> 在每次请求时强行设置cookie，这将重置cookie过期时间（默认：<span class="token boolean">false</span>）
<span class="token number">7.</span> resave <span class="token operator">-</span> 强制保存session即使它并没有变化 （默认： <span class="token boolean">true</span><span class="token punctuation">,</span> 建议设为：<span class="token boolean">false</span>）
<span class="token number">8.</span> proxy <span class="token operator">-</span> 当设置了secure cookies（通过”x<span class="token operator">-</span>forwarded<span class="token operator">-</span>proto” header ）时信任反向代理。当设定为<span class="token boolean">true</span>时，
”x<span class="token operator">-</span>forwarded<span class="token operator">-</span>proto” header 将被使用。当设定为<span class="token boolean">false</span>时，所有headers将被忽略。当该属性没有被设定时，将使用Express的trust proxy。
<span class="token number">9.</span> saveUninitialized <span class="token operator">-</span> 强制将未初始化的session存储。当新建了一个session且未设定属性或值时，它就处于未初始化状态。在设定一个cookie前，这对于登陆验证，减轻服务端存储压力，权限控制是有帮助的。（默认：<span class="token boolean">true</span>）
<span class="token number">10.</span> unset <span class="token operator">-</span> 控制req<span class="token punctuation">.</span>session是否取消（例如通过 <span class="token keyword">delete</span>，或者将它的值设置为<span class="token keyword">null</span>）。这可以使session保持存储状态但忽略修改或删除的请求（默认：keep）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>cookie参数</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token literal-property property">cookie</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// Cookie Options</span>
  <span class="token comment">// 默认为{ path: '/', httpOnly: true, secure: false, maxAge: null }</span>
   <span class="token comment">/** maxAge: 设置给定过期时间的毫秒数（date）
  * expires: 设定一个utc过期时间，默认不设置，http&gt;=1.1的时代请使用maxAge代替之（string）
  * path: cookie的路径（默认为/）（string）
  * domain: 设置域名，默认为当前域（String）
  * sameSite: 是否为同一站点的cookie（默认为false）（可以设置为['lax', 'none', 'none']或 true）
  * secure: 是否以https的形式发送cookie（false以http的形式。true以https的形式）true 是默认选项。 但是，它需要启用 https 的网站。 如果通过 HTTP 访问您的站点，则不会设置 cookie。 如果使用的是 secure: true，则需要在 express 中设置“trust proxy”。
  * httpOnly: 是否只以http(s)的形式发送cookie，对客户端js不可用（默认为true，也就是客户端不能以document.cookie查看cookie）
  * signed: 是否对cookie包含签名（默认为true）
  * overwrite: 是否可以覆盖先前的同名cookie（默认为true）*/</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="我的用法"><a href="#我的用法" class="header-anchor">#</a> 我的用法</h3> <h4 id="引入session"><a href="#引入session" class="header-anchor">#</a> 引入session,</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> session <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;express-session&quot;</span><span class="token punctuation">)</span>
<span class="token comment">//使用session</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">secret</span><span class="token operator">:</span> <span class="token string">'keyboard cat'</span><span class="token punctuation">,</span> <span class="token comment">// 服务器端生成session的签名</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;cookiename&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 修改session对应的cookie的名称</span>
    <span class="token literal-property property">resave</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 强制保存 session ，即使它并没有变化</span>
    <span class="token literal-property property">saveUninitialized</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 强制将未初始化的session存储</span>
    <span class="token literal-property property">cookie</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">//用来存放sessionid，后面再请求通过sessionid找到session内对应的会话</span>
        <span class="token literal-property property">maxAge</span><span class="token operator">:</span> <span class="token number">1000</span> <span class="token operator">*</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token comment">// 设置过期时间为一分钟</span>
        <span class="token literal-property property">secure</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// true 表示只有https协议才能访问cookie</span>
        <span class="token literal-property property">signed</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">//是否对cookie包含签名（默认为true）</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">rolling</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token comment">// 在每次请求时强行设置cookie，这将重置cookie的过期时间（默认值为false）</span>
    <span class="token comment">// store: MongoStore.create({</span>
    <span class="token comment">//     mongoUrl: 'mongodb://admin:admin@localhost/itying?authSource=admin&amp;w=1',</span>
    <span class="token comment">//     // mongoOptions: advancedOptions ,</span>
    <span class="token comment">//     touchAfter: 24 * 3600 // 不管发出了多少请求，在24小时内，只更新一次session，除非你改变了这个session</span>
    <span class="token comment">// })</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>到目前为止，我们的session都是保存在内存上的，在开发调试阶段可以这么做，但是在真实的生产环节决不能将session保存在内存上。因为这意味着一旦我们重启了应用，所有的用户的“会话状态”都会消失。通常的做法是将session数据放在Redis这类的内存数据库中。</p> <p>在<code>express-session</code>的官方文档上，罗列了很多持久化session的存储方案。例如<code>connect-mongo</code>、<code>connect-redis</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//设置session</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/a&quot;</span><span class="token punctuation">,</span><span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    req<span class="token punctuation">.</span>session<span class="token punctuation">.</span>userinfo<span class="token operator">=</span><span class="token string">'张三'</span><span class="token punctuation">;</span>
	res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;登陆成功！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//查看session</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>session<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//注销session</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/loginOut'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    req<span class="token punctuation">.</span>session<span class="token punctuation">.</span><span class="token constant">XXX</span><span class="token operator">=</span><span class="token keyword">undefined</span><span class="token punctuation">;</span>
	req<span class="token punctuation">.</span>session<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;退出登录！&quot;</span><span class="token operator">+</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>当访问服务器时，express-session会为我们设置cookie，cookie的名字是上面所配置的</p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220731165541174.png" alt="image-20220731165541174"></p> <p>可以在存储内看见cookie</p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220731165810399.png" alt="image-20220731165810399"></p> <p>当执行完设置session请求后重新获取session信息，可以看见已经附加在session里了</p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220731165925312.png" alt="image-20220731165925312"></p> <p>当达到cookie的过期时间时(过期时间上面设置为60秒),获取到的session内数据就清空了</p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220731170906626.png" alt="image-20220731170906626"></p> <h3 id="_1、服务器如何判断客户端发送过来的请求属于同一个会话"><a href="#_1、服务器如何判断客户端发送过来的请求属于同一个会话" class="header-anchor">#</a> 1、服务器如何判断客户端发送过来的请求属于同一个会话？</h3> <p>用session id区分；session id 相同即认为是同一个会话；</p> <p>在tomcat中session id中用JSESSIONID来表示；</p> <h3 id="_2、服务器、客户端如何获取sessionid-sessionid在期间是如何传输的"><a href="#_2、服务器、客户端如何获取sessionid-sessionid在期间是如何传输的" class="header-anchor">#</a> 2、服务器、客户端如何获取sessionID?SessionID在期间是如何传输的？</h3> <p>服务器第一次接收到请求时，开辟了一块Session空间（创建了Session对象），同时生成一个Session id，并通过响应头的Set-Cookie：“JSESSIONID=XXXXXXX”命令，向客户端发送要求设置cookie的响应； 客户端收到响应后，在本机客户端设置了一个JSESSIONID=XXXXXXX的cookie信息，一般来讲后端为设置的情况下，该cookie的过期时间为浏览器会话结束；</p> <p>接下来客户端每次向同一个网站发送请求时，请求头都会带上该cookie信息（包含Session id）； 然后，服务器通过读取请求头中的Cookie信息，获取名称为JSESSIONID的值，得到此次请求的Session id；</p> <h3 id="_3、session是保存在服务端的-为什么后续请求会读取到session"><a href="#_3、session是保存在服务端的-为什么后续请求会读取到session" class="header-anchor">#</a> 3、Session是保存在服务端的，为什么后续请求会读取到session？</h3> <p>因为请求会包含一个sessionId，该值存储在cookie中，服务器通过这个sessionId找到对应的session（之前讲过session底层是map结构的）。</p> <p>注意：服务器只会在客户端第一次请求响应的时候，在响应头上添加Set-Cookie：“JSESSIONID=XXXXXXX”信息，接下来在同一个会话的第二第三次响应头里，是不会添加Set- Cookie：“JSESSIONID=XXXXXXX”信息的； 而客户端是会在每次请求头的cookie中带上JSESSIONID信息；</p> <h3 id="_4-为什么关闭浏览器后-好像session就过期了"><a href="#_4-为什么关闭浏览器后-好像session就过期了" class="header-anchor">#</a> 4 为什么关闭浏览器后，好像session就过期了？</h3> <p>其实并不会，如果设置了cookie过期时间，那么只要没过过期时间，重新打开浏览器还是会有cookie保存着，还能访问到之前的session会话，但是如果没设置过期时间，可能一关闭浏览器cookie就过期了，之前session会话自然就访问不到了</p> <p>服务端产生session后，会把session的id传回客户端，这样每个客户端就有了一个唯一的 ID，客户端只要传回这个 ID 就行了，这个 ID 通常是 NANE 为 JSESIONID 的一个 Cookie，value为session的id。</p> <p>session在服务端保存信息，是否关闭浏览器和session销毁无关，即：即使关闭浏览器，session还是存在的。但是为什么关闭浏览器后，好像session就不存在了。 这就是上文提到的，sessionID是通过cookie存再客户端的，并且存储的这个cookie的key为“JSESIONID”，value为sessionID的值。但是cookie的key(JSESIONID)的生存周期一般是浏览器关闭后消失，浏览器关闭后，JSESIONID消失。正常流程是前端请求服务端时会把cookie带过去，但是现在，因为浏览器关闭，JSESIONID为null。服务端再想通过JSESIONID获取session，就无法获取，这也是为什么关闭浏览器后，好像session就过期了。</p> <p><strong>解决办法：修改浏览器关闭后JSESIONID消失的默认设置，手动设置JSESSION的过期时间。</strong></p> <p>即以下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>HttpSession session = request.getSession();
session.setAttribute(“aa”, “bb”);
session.setMaxInactiveInterval(2 * 60); // Session保存两分钟
Cookie cookie = new Cookie(&quot;JSESSIONID&quot;, session.getId());
cookie.setMaxAge(2 * 60); // 客户端的JSESSIONID保存两分钟
cookie.setPath(&quot;/&quot;);
response.addCookie(cookie);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>这样即使浏览器关闭，服务端仍然可以通过request.getSession().getAttribute(&quot;aa&quot;)获取值。</p> <h3 id="_5-jwt生成token也可以用来完成前后端校验"><a href="#_5-jwt生成token也可以用来完成前后端校验" class="header-anchor">#</a> <strong>5 jwt生成token也可以用来完成前后端校验</strong></h3> <h2 id="_34-解决跨域"><a href="#_34-解决跨域" class="header-anchor">#</a> 34 解决跨域</h2> <h3 id="uniapp配置跨域"><a href="#uniapp配置跨域" class="header-anchor">#</a> uniapp配置跨域</h3> <p>报跨域是有很多种可能的，有可能是前端没设置对，也可能是后端没设置对</p> <p>因为图形验证码是session结合cookie做的，因此以后请求建议都带上cookie，所以我需要在服务端开启允许携带cookie，但是允许携带cookie开启后就不能设置允许任何域名跨域了，并且<strong>允许的请求头类型</strong>也得细写,比如你header中带了token，那么请求头允许的内容也必须加上Token，最终后端的跨域配置如下</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// CORS,允许跨域配置</span>
app<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token string">'*'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//设置允许跨域的域名，*代表允许任意域名跨域</span>
    res<span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">&quot;Access-Control-Allow-Origin&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://localhost:8080&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//允许携带cookie，设置这个的话上一条的设置不能为'*'</span>
    res<span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Credentials'</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//允许携带cookie，设置这个的话上一条的设置不能为'*'</span>
    <span class="token comment">//允许的header类型</span>
    res<span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">&quot;Access-Control-Allow-Headers&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Origin, X-Requested-With, Content-Type, Accept, Token&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//跨域允许的请求方式</span>
    res<span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">&quot;Access-Control-Allow-Methods&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;DELETE,PUT,POST,GET,OPTIONS&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>后端设置好允许跨域后，前端也需要设置一下跨域，uniapp在manifest.json文件中设置H5支持跨域</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token string-property property">&quot;h5&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;title&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;！！！&quot;</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;devServer&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token string-property property">&quot;port&quot;</span> <span class="token operator">:</span> <span class="token number">8080</span><span class="token punctuation">,</span> <span class="token comment">//端口号</span>
			<span class="token string-property property">&quot;disableHostCheck&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
			<span class="token string-property property">&quot;proxy&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token string-property property">&quot;/&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
				  <span class="token string-property property">&quot;target&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;http://localhost:3400/&quot;</span><span class="token punctuation">,</span> <span class="token comment">//自己项目接口域名</span>
				  <span class="token string-property property">&quot;changeOrigin&quot;</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>  <span class="token comment">//是否跨域</span>
				  <span class="token comment">// &quot;secure&quot; : true,  // 设置支持https协议的代理</span>
				  <span class="token string-property property">&quot;pathRewrite&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string-property property">&quot;^/&quot;</span><span class="token operator">:</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">}</span>   <span class="token comment">//api路径重定向，根据具体情况调整，也可不写</span>
				<span class="token punctuation">}</span>	
			<span class="token punctuation">}</span>
			
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token string-property property">&quot;optimization&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token string-property property">&quot;treeShaking&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span>
				<span class="token string-property property">&quot;enable&quot;</span> <span class="token operator">:</span> <span class="token boolean">false</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>有一种情况是配置跨域后浏览器的url路径变成请求后端资源</p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220803223206794.png" alt="image-20220803223206794"></p> <p>有可能是前端的路由api和后端的接口api重名了，这也是为什么前端接口很多都带上api用来重定向，防止重名,</p> <p>还有人说可以用hash路由，: <strong>敲黑板，history 会关联后端，hash不是，两者最大差别就是多了个#</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> Axios <span class="token keyword">from</span> <span class="token string">'./Axios'</span>
<span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">baseURL</span><span class="token operator">:</span> <span class="token string">'http://127.0.0.1:3400/api'</span><span class="token punctuation">,</span> <span class="token comment">//基础路径,带上api，防止与后端冲突</span>
    <span class="token literal-property property">timeout</span><span class="token operator">:</span> <span class="token number">1000000</span><span class="token punctuation">,</span> <span class="token comment">//超时时间</span>
    <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment">//头信息</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">server</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">5173</span><span class="token punctuation">,</span>
    <span class="token literal-property property">open</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">'/api'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:3400/&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token function-variable function">rewrite</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">path</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> path<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\/api</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">&quot;/&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="关于rewrite"><a href="#关于rewrite" class="header-anchor">#</a> 关于rewrite</h3> <p>前端基础路径带上api,请求路径拼接起来就是<code>http://localhost:3400/api/consumer/toRegister</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> Axios <span class="token keyword">from</span> <span class="token string">'./Axios'</span>
<span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">baseURL</span><span class="token operator">:</span> <span class="token string">'http://localhost:3400/api/'</span><span class="token punctuation">,</span> <span class="token comment">//基础路径带上api</span>
    <span class="token literal-property property">timeout</span><span class="token operator">:</span> <span class="token number">1000000</span><span class="token punctuation">,</span> <span class="token comment">//超时时间</span>
    <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment">//头信息</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>后端,接口路径带上api ，拼接起来就是<code>http://localhost:3400/api/consumer/toRegister</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&quot;/api/consumer&quot;</span><span class="token punctuation">,</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./routers/ConsumerRouter&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>


router<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/toRegister'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> <span class="token punctuation">{</span> phone <span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>body
        <span class="token keyword">const</span> repeat <span class="token operator">=</span> <span class="token keyword">await</span> Consumer<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token string-property property">&quot;phone&quot;</span><span class="token operator">:</span> phone
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>repeat<span class="token punctuation">.</span>length <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//如果账号存在,返回值长度不为0</span>
            <span class="token keyword">throw</span> <span class="token string">'异常，账号已存在'</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//创建用户表，目前只有账号，密码两条数据</span>
        <span class="token keyword">await</span> Consumer<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
        res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'success'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
        res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'fail'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>使用rewrite去掉api前后端的api前缀，就可以正常跨域了</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">server</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">8080</span><span class="token punctuation">,</span>
    <span class="token literal-property property">open</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">'/api'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:3400&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">secure</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token function-variable function">rewrite</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">path</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> path<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\/api</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>或者前后端url上都不要带api前缀，这样就省事多了</strong>，如下</p> <p>前端</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">baseURL</span><span class="token operator">:</span> <span class="token string">'http://localhost:3400/'</span><span class="token punctuation">,</span> <span class="token comment">//基础路径</span>
    <span class="token literal-property property">timeout</span><span class="token operator">:</span> <span class="token number">1000000</span><span class="token punctuation">,</span> <span class="token comment">//超时时间</span>
    <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment">//头信息</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>后端</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">&quot;/consumer&quot;</span><span class="token punctuation">,</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./routers/ConsumerRouter&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>proxy ，<strong>这里'/api'如果写成&quot;/&quot; 下面rewrite写为rewrite: (path) =&gt; path.replace(/^//, &quot;&quot;),浏览器url就会直接访问后端接口了，不知道为啥,在uniapp里不会有这种情况</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">server</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">port</span><span class="token operator">:</span> <span class="token number">8080</span><span class="token punctuation">,</span>
    <span class="token literal-property property">open</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">proxy</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">'/api'</span><span class="token operator">:</span> <span class="token punctuation">{</span> 
        <span class="token literal-property property">target</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:3400&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">changeOrigin</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token literal-property property">secure</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        <span class="token function-variable function">rewrite</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">path</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> path<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">^\/api</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="关于res-header-access-control-allow-origin"><a href="#关于res-header-access-control-allow-origin" class="header-anchor">#</a> 关于res.header(&quot;Access-Control-Allow-Origin&quot;;</h3> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220804145433410.png" alt="image-20220804145433410"></p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220804145514389.png" alt="image-20220804145514389"></p> <p>允许跨域的域名必须和前端启动后域名一致，127.0.0.1不可以用localhost替代</p> <h3 id="允许多个域名跨域"><a href="#允许多个域名跨域" class="header-anchor">#</a> 允许多个域名跨域</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token string">'*'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   <span class="token comment">//设置允许跨域的域名，*代表允许任意域名跨域</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>origin <span class="token operator">==</span><span class="token string">&quot;http://127.0.0.1:8080&quot;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      res<span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">&quot;Access-Control-Allow-Origin&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://127.0.0.1:8080&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token keyword">if</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>origin <span class="token operator">==</span><span class="token string">&quot;http://localhost:8070&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      res<span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">&quot;Access-Control-Allow-Origin&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;http://localhost:8070&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
   <span class="token comment">//允许携带cookie，设置这个的话上一条的设置不能为'*'</span>
   res<span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">'Access-Control-Allow-Credentials'</span><span class="token punctuation">,</span> <span class="token string">'true'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//允许携带cookie，设置这个的话上一条的设置不能为'*'</span>
   <span class="token comment">//允许的header类型</span>
   res<span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">&quot;Access-Control-Allow-Headers&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Origin, X-Requested-With, Content-Type, Accept, Token&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token comment">//跨域允许的请求方式</span>
   res<span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">&quot;Access-Control-Allow-Methods&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;DELETE,PUT,POST,GET,OPTIONS&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   res<span class="token punctuation">.</span><span class="token function">header</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span><span class="token string">'application/json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="_34-因absolute导致的高低塌陷只能用js解决"><a href="#_34-因absolute导致的高低塌陷只能用js解决" class="header-anchor">#</a> 34 因absolute导致的高低塌陷只能用js解决</h2> <p>https://blog.csdn.net/weixin_44066534/article/details/107117133</p> <h2 id="_35-onload时调用接口更新data但是视图不变化"><a href="#_35-onload时调用接口更新data但是视图不变化" class="header-anchor">#</a> 35 onLoad时调用接口更新data但是视图不变化</h2> <p>onLoad时使用下面这个函数,渲染图形验证码</p> <p>具体分析一下原因： 太傻逼了，我在success()里用了this，但是这里得this指向是uni，</p> <p>使用箭头函数或者that改变指向就可以了</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>view v<span class="token operator">-</span>html<span class="token operator">=</span><span class="token string">&quot;validationSvg&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;svg&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>view<span class="token operator">&gt;</span>

<span class="token function">getVerificationCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> that <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:3400/consumer/getVerificationCode&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span>
        <span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//验证码</span>
                that<span class="token punctuation">.</span>validation <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>text
                <span class="token comment">//验证码图片矢量图</span>
                that<span class="token punctuation">.</span>validationSvg <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">fail</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getVerificationCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    uni<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">&quot;updatevalidationSvg&quot;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>validationSvg <span class="token operator">=</span> data<span class="token punctuation">.</span>validationSvg
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="_36-使用iconfont"><a href="#_36-使用iconfont" class="header-anchor">#</a> 36.使用iconfont</h2> <p>在阿里矢量库内添加图标到购物车</p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220801195907548.png" alt="image-20220801195907548"></p> <p>下载到本地后将整个文件夹拉入项目内使用</p> <p>原来的引用路径改为绝对路径</p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220801200009878.png" alt="image-20220801200009878"></p> <h2 id="_37-uniapp-editor富文本编辑器使用"><a href="#_37-uniapp-editor富文本编辑器使用" class="header-anchor">#</a> 37 uniapp editor富文本编辑器使用</h2> <p>https://uniapp.dcloud.net.cn/api/media/editor-context.html</p> <p>https://www.cnblogs.com/pansidong/p/16213577.html</p> <p>https://blog.csdn.net/weixin_42483208/article/details/124116170</p> <p>选择字体颜色还没做</p> <p>//避免图片超过屏幕
that.post.content = that.post.content.replace(/img/gi, 'img style=&quot;width:100%;height:auto&quot;')</p> <h2 id="_38-uniapp-picker组件"><a href="#_38-uniapp-picker组件" class="header-anchor">#</a> 38 uniapp picker组件</h2> <p>感觉这组件用着巨垃圾，琢磨好久才把功能做好</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>picker</span> 
    <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>multiSelector<span class="token punctuation">&quot;</span></span> 
    <span class="token attr-name">@columnchange</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>categoryChange<span class="token punctuation">&quot;</span></span> 
    <span class="token attr-name">:value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>[firIdx,secIdx]<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">:range</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>multiArray<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">:range-key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">'</span>category<span class="token punctuation">'</span><span class="token punctuation">&quot;</span></span>
<span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">background-color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
        {{ multiArray[0][firIdx].category }}
            - - - - 
    	{{ multiArray[1][secIdx].category }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>picker</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ul><li><p>当value内对应数组索引下标发生改变时，会重新渲染选中的标签,因此我在请求到数据后直接让数据改变，渲染上第一项数据</p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220802171053281.png" alt="image-20220802171053281"></p></li> <li><p>range-key 是要渲染的数据的键值</p></li> <li><p>滑动picker时触发categoryChange判断是哪一列滑动了，更新数组对应索引的值进行渲染</p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220802171257542.png" alt="image-20220802171257542"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">categoryChange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>column <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//现在e.detail.value是第一列的</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>firIdx <span class="token operator">=</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>value <span class="token comment">//第一列改变，第二列直接从0开始</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>secIdx <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>multiArray<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>multiArray<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>firIdx<span class="token punctuation">]</span><span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">el</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">//更新第二列的值</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">category</span><span class="token operator">:</span> el
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>column <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//现在e.detail.value是第二列的</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>secIdx <span class="token operator">=</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>value
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li></ul> <h2 id="_39-监听器进入页面不会执行"><a href="#_39-监听器进入页面不会执行" class="header-anchor">#</a> 39 监听器进入页面不会执行</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token string-property property">'name'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">immediate</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//第一次进入页面渲染数据不会执行,改为true就可以立刻执行</span>
    <span class="token function-variable function">handler</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>changeFlag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_40-vue给子组件上加-click事件不生效问题"><a href="#_40-vue给子组件上加-click事件不生效问题" class="header-anchor">#</a> 40 vue给子组件上加@click事件不生效问题</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>About <span class="token operator">:</span>msg<span class="token operator">=</span><span class="token string">&quot;msg&quot;</span> @click<span class="token punctuation">.</span>native<span class="token operator">=</span><span class="token string">&quot;show()&quot;</span> ref<span class="token operator">=</span><span class="token string">&quot;child&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>About<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>给<a href="https://so.csdn.net/so/search?from=pc_blog_highlight&amp;q=vue" target="_blank" rel="noopener noreferrer">vue<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>组件绑定事件时候，必须加上<a href="https://so.csdn.net/so/search?q=native&amp;spm=1001.2101.3001.7020" target="_blank" rel="noopener noreferrer">native<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> ，否则会认为监听的是来自Item组件自定义的事件。</p> <h2 id="_41-uni-navigateto-跳转页面后触发指定事件"><a href="#_41-uni-navigateto-跳转页面后触发指定事件" class="header-anchor">#</a> 41 uni.navigateTo 跳转页面后触发指定事件</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>uni<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;/pages/postDetail/postDetail&quot;</span><span class="token punctuation">,</span>
    <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span>eventChannel<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'acceptDataFromOpenerPage'</span><span class="token punctuation">,</span>pid<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">fail</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">onLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// #ifdef APP-NVUE</span>
    <span class="token keyword">const</span> eventChannel <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$scope<span class="token punctuation">.</span>eventChannel<span class="token punctuation">;</span> <span class="token comment">// 兼容APP-NVUE</span>
    <span class="token comment">// #endif</span>
    <span class="token comment">// #ifndef APP-NVUE</span>
    <span class="token keyword">const</span> eventChannel <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getOpenerEventChannel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// #endif</span>
    <span class="token keyword">var</span> that <span class="token operator">=</span> <span class="token keyword">this</span>

    eventChannel<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'acceptDataFromOpenerPage'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">pid</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>pid <span class="token operator">=</span> pid
        <span class="token keyword">let</span> <span class="token punctuation">{</span>
            token
        <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>uni<span class="token punctuation">.</span><span class="token function">getStorageSync</span><span class="token punctuation">(</span><span class="token string">&quot;userInfo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:3400/post/_token/getPostByPid&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">header</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token string-property property">&quot;token&quot;</span><span class="token operator">:</span> token
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token string-property property">'pid'</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>pid
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    that<span class="token punctuation">.</span>post <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>data
                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>that<span class="token punctuation">.</span>post<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function-variable function">fail</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><h2 id="_42-刷新当前页面"><a href="#_42-刷新当前页面" class="header-anchor">#</a> 42 刷新当前页面</h2> <p>小程序端需要单独处理</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>
<span class="token comment">// #ifndef MP-WEIXIN</span>
location<span class="token punctuation">.</span><span class="token function">reload</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// #endif</span>
<span class="token comment">// #ifdef MP-WEIXIN</span>
uni<span class="token punctuation">.</span><span class="token function">reLaunch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span><span class="token string">&quot;/pages/curriculum/curriculum&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// #endif</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="_43-实现小程序底部弹框带动画以及隐藏底部栏tab"><a href="#_43-实现小程序底部弹框带动画以及隐藏底部栏tab" class="header-anchor">#</a> 43 实现小程序底部弹框带动画以及隐藏底部栏tab</h2> <p>https://uniapp.dcloud.net.cn/api/ui/animation.html#createanimation</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>toptool<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>goback()<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>../../static/common/返回.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showMenu()<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>operator<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>· · ·<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hideMenu()<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mask<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showMaskStatus<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">:animation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>animationData<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>bottom_box<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showMaskStatus<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//显示遮罩层</span>
			<span class="token function">showMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// var animation = uni.createAnimation({</span>
				<span class="token comment">// 	transformOrigin: &quot;50% 50%&quot;,//transform-origin属性时,CSS变形进行的旋转、移位、缩放等操作都是以元素自己中心</span>
				<span class="token comment">// 	duration: 1000,</span>
				<span class="token comment">// 	timingFunction: &quot;ease&quot;,</span>
				<span class="token comment">// 	delay: 0</span>
				<span class="token comment">// })</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>showMaskStatus <span class="token operator">=</span> <span class="token boolean">true</span>
				<span class="token keyword">let</span> animation <span class="token operator">=</span> uni<span class="token punctuation">.</span><span class="token function">createAnimation</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
					<span class="token comment">//duration	Integer 动画持续时间，单位ms</span>
					<span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
					<span class="token comment">//timingFunction	String  默认&quot;linear&quot;（动画从头到尾的速度是相同的）	定义动画的效果</span>
					<span class="token literal-property property">timingFunction</span><span class="token operator">:</span> <span class="token string">'ease'</span><span class="token punctuation">,</span>
					<span class="token comment">//delay	Integer		默认 0	动画延迟时间，单位 ms</span>
					<span class="token literal-property property">delay</span><span class="token operator">:</span> <span class="token number">0</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span>
				<span class="token comment">//刚进来时移动0rpx,最后上移420rpx</span>
				animation<span class="token punctuation">.</span><span class="token function">translateY</span><span class="token punctuation">(</span><span class="token string">'0rpx'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>animationData <span class="token operator">=</span> animation<span class="token punctuation">.</span><span class="token function">export</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
					<span class="token comment">//隐藏底部栏</span>
					uni<span class="token punctuation">.</span><span class="token function">hideTabBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token comment">//刚进来时移动0rpx,最后上移420rpx</span>
					animation<span class="token punctuation">.</span><span class="token function">translateY</span><span class="token punctuation">(</span><span class="token string">'-420rpx'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
					<span class="token keyword">this</span><span class="token punctuation">.</span>animationData <span class="token operator">=</span> animation<span class="token punctuation">.</span><span class="token function">export</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token comment">// 隐藏遮罩层</span>
			<span class="token function">hideMenu</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">let</span> animation <span class="token operator">=</span> uni<span class="token punctuation">.</span><span class="token function">createAnimation</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
					<span class="token comment">//duration	Integer 动画持续时间，单位ms</span>
					<span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">2200</span><span class="token punctuation">,</span>
					<span class="token comment">//timingFunction	String  默认&quot;linear&quot;（动画从头到尾的速度是相同的）	定义动画的效果</span>
					<span class="token literal-property property">timingFunction</span><span class="token operator">:</span> <span class="token string">'linear'</span><span class="token punctuation">,</span>
					<span class="token comment">//delay	Integer		默认 0	动画延迟时间，单位 ms</span>
					<span class="token literal-property property">delay</span><span class="token operator">:</span> <span class="token number">0</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token comment">//刚进来时移动下移420rpx,最后移动0rpx</span>
				animation<span class="token punctuation">.</span><span class="token function">translateY</span><span class="token punctuation">(</span><span class="token string">'420rpx'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>animationData <span class="token operator">=</span> animation<span class="token punctuation">.</span><span class="token function">export</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
				<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
					<span class="token comment">// 显示底部栏</span>
					uni<span class="token punctuation">.</span><span class="token function">showTabBar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token comment">//刚进来时移动下移420rpx,最后移动0rpx</span>
					animation<span class="token punctuation">.</span><span class="token function">translateY</span><span class="token punctuation">(</span><span class="token string">'0rpx'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">step</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
						<span class="token keyword">this</span><span class="token punctuation">.</span>showMaskStatus <span class="token operator">=</span> <span class="token boolean">false</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div><h2 id="_44-每行显示五个元素"><a href="#_44-每行显示五个元素" class="header-anchor">#</a> 44 每行显示五个元素</h2> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220806212714581.png" alt="image-20220806212714581"></p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>choices<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconBox<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>../../static/common/收藏.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>收藏<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconBox<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>../../static/common/删除.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>删除<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconBox<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>../../static/common/字号.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>字号设置<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconBox<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>../../static/common/月亮.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>夜间模式<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconBox<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>../../static/common/链接.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>链接<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconBox<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>../../static/common/浏览器.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>浏览器<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconBox<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>image</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>../../static/common/举报.png<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>image</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>举报<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 占位元素 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconBox<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconBox<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>iconBox<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><p>每个image元素最好都用view包裹起来，方便操作，使用calc 计算每个元素宽度</p> <p><code>justify-content: space-around;</code></p> <p><code>flex-wrap: wrap;</code></p> <p>这两个样式一起用，第二行无法左对齐</p> <p>解决方案有两个：</p> <ol><li>通过js或者css中的calc()动态的计算cell的margin等属性，算就行了，这里不展开讨论；</li> <li>通过插入占位元素解决问题</li></ol> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.choices</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">justify-content</span><span class="token punctuation">:</span> space-around<span class="token punctuation">;</span>
    <span class="token property">padding-bottom</span><span class="token punctuation">:</span> 20rpx<span class="token punctuation">;</span>
    <span class="token property">border-bottom</span><span class="token punctuation">:</span> 2rpx solid #8f9095<span class="token punctuation">;</span>
    <span class="token property">margin-top</span><span class="token punctuation">:</span> 6rpx<span class="token punctuation">;</span>
    <span class="token property">flex-wrap</span><span class="token punctuation">:</span> wrap<span class="token punctuation">;</span>
    <span class="token selector">.iconBox</span> <span class="token punctuation">{</span>
        <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
        <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span>
        <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
        <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
        <span class="token property">font-size</span><span class="token punctuation">:</span> 30rpx<span class="token punctuation">;</span>
        <span class="token property">color</span><span class="token punctuation">:</span> #474747<span class="token punctuation">;</span>
        <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token punctuation">(</span>100% - 120rpx<span class="token punctuation">)</span>/5<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token selector">view</span> <span class="token punctuation">{</span>
            <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span>100% - 40rpx<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token property">padding</span><span class="token punctuation">:</span> 22rpx 12rpx<span class="token punctuation">;</span>
            <span class="token property">border</span><span class="token punctuation">:</span> 2rpx solid #fff<span class="token punctuation">;</span>
            <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
            <span class="token property">border-radius</span><span class="token punctuation">:</span> 16rpx<span class="token punctuation">;</span>
            <span class="token property">margin-top</span><span class="token punctuation">:</span> 24rpx<span class="token punctuation">;</span>
            <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
            <span class="token property">justify-content</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
            <span class="token property">align-items</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
            <span class="token selector">image</span> <span class="token punctuation">{</span>
                <span class="token property">width</span><span class="token punctuation">:</span> 60rpx<span class="token punctuation">;</span>
                <span class="token property">height</span><span class="token punctuation">:</span> 60rpx<span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token selector">text</span> <span class="token punctuation">{</span>
            <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
            <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
            <span class="token property">margin-top</span><span class="token punctuation">:</span> 8rpx<span class="token punctuation">;</span>
            <span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>	
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h2 id="_45-uni-showmodal被挡住的解决方案"><a href="#_45-uni-showmodal被挡住的解决方案" class="header-anchor">#</a> 45 uni.showModal被挡住的解决方案</h2> <p>解决方案很简单，在App.vue中设置css样式：</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code>	<span class="token selector">uni-modal</span><span class="token punctuation">{</span>
		<span class="token property">z-index</span><span class="token punctuation">:</span> 19999 <span class="token important">!important</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>或者让别的元素的z-index不要超过999</p> <h2 id="_46-使用promise解决异步问题"><a href="#_46-使用promise解决异步问题" class="header-anchor">#</a> 46 使用promise解决异步问题</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">checkValidationCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">&quot;http://localhost:3400/consumer/checkValidationCode&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span>
            <span class="token literal-property property">withCredentials</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token comment">// #ifdef MP-WEIXIN</span>
            <span class="token literal-property property">header</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token string-property property">&quot;Cookie&quot;</span><span class="token operator">:</span> uni<span class="token punctuation">.</span><span class="token function">getStorageSync</span><span class="token punctuation">(</span><span class="token string">&quot;cookieKey&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token comment">// #endif</span>
            <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>checkvalidation
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>code<span class="token punctuation">)</span>
                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>errors <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>errors<span class="token punctuation">,</span> <span class="token punctuation">{</span>
                        <span class="token string-property property">&quot;validationerror&quot;</span><span class="token operator">:</span> <span class="token string">&quot;验证码输入错误&quot;</span>
                    <span class="token punctuation">}</span><span class="token punctuation">)</span>
                    <span class="token comment">//重新获取验证码</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getVerificationCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>checkvalidation <span class="token operator">=</span> <span class="token string">&quot;&quot;</span>
                    <span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>code<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token function-variable function">fail</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
                <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
    
    
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">checkValidationCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>resolve <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">===</span> <span class="token string">&quot;登录&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">formSubmit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">formRegesite</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br></div></div><h2 id="_47-一个警告-vue-warn-avoid-mutating-a-prop-directly-since-the-value-will-be-overwritt"><a href="#_47-一个警告-vue-warn-avoid-mutating-a-prop-directly-since-the-value-will-be-overwritt" class="header-anchor">#</a> 47 一个警告 [Vue warn]: Avoid mutating a prop directly since the value will be overwritt</h2> <p>父组件向子组件传入一个值，在子组件中想要改变这个值，不是直接在子组件中直接修改， 而是让应该这个组件提交个事件给父组件，可以用$emit，向父组件传递你改的值，在父组件中修改传递变量，</p> <h2 id="_48-字母换行"><a href="#_48-字母换行" class="header-anchor">#</a> 48 字母换行</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>p <span class="token punctuation">{</span>
    <span class="token literal-property property">width</span><span class="token operator">:</span> 538rpx<span class="token punctuation">;</span>
    word<span class="token operator">-</span><span class="token keyword">break</span><span class="token operator">:</span> <span class="token keyword">break</span><span class="token operator">-</span>all<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_49-插槽样式无效"><a href="#_49-插槽样式无效" class="header-anchor">#</a> 49 插槽样式无效</h2> <p>正确给插槽赋样式的方法是在外层套一个div加样式</p> <p>直接在插槽上加class是无效的，因为插槽会被替换掉</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">1</span> <span class="token operator">&lt;</span>template<span class="token operator">&gt;</span>
 <span class="token number">3</span> <span class="token operator">&lt;</span>slot name<span class="token operator">=</span><span class="token string">&quot;item&quot;</span> <span class="token keyword">class</span> <span class="token operator">=</span> <span class="token string">&quot;home-nav&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">&gt;</span>
 <span class="token number">6</span> <span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
 <span class="token number">7</span> 
 <span class="token number">8</span> <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
 <span class="token number">9</span> 
<span class="token number">10</span> <span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>
<span class="token number">11</span> <span class="token punctuation">.</span>home<span class="token operator">-</span>nav<span class="token punctuation">{</span>
<span class="token number">12</span>　　 color<span class="token operator">:</span>pink19 <span class="token punctuation">}</span>
<span class="token number">21</span> <span class="token operator">&lt;</span><span class="token operator">/</span>style
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>当我调用组件，并在插槽插入内容时，发现并没有起效果，</p> <p>原来啊，我调用的插槽会被我插入的内容替换掉，所以css样式里没有指定的class名，样式当然不会生效喽</p> <p>为了解决这个问题，只要插槽外插入包一层 div 并改将class名写在这个div标签上，这样即使插入内容，组件里写的css也会生效了</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>div <span class="token keyword">class</span> <span class="token operator">=</span> <span class="token string">&quot;home-nav&quot;</span><span class="token operator">&gt;</span>
　　<span class="token operator">&lt;</span>slot name<span class="token operator">=</span><span class="token string">&quot;nav&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_50-真机调试图片不显示"><a href="#_50-真机调试图片不显示" class="header-anchor">#</a> 50 真机调试图片不显示</h2> <p>关于微信小程序不显示图片</p> <p>通病可能有以下几个可能性：</p> <div class="language- extra-class"><pre><code>非本地图片：确定图片资源存在，copy 图片url再浏览器打开，确定图片资源存在且能正常访问
本地图片：确定相对路径或者绝对路径正确
微信小程序图片路径，不可以存在中文，使用英文做路径和文件名
文件后缀文，小写。且保证正确
网络图片，必须确保域名已经备案
</code></pre></div><p>关于微信小程序安卓手机访问不到图片，而苹果手机正常</p> <p>排除以上通病5点之后，出现安卓手机访问不到图片，而苹果手机正常访问的情况，大概率是图片地址做了CDN转发，多数CDN会默认开启防盗链，
需要关闭CDN防盗链，因为防盗链会导致游览器能显示，而客户端不能显示。</p> <h2 id="_51-虚拟化表格"><a href="#_51-虚拟化表格" class="header-anchor">#</a> 51 虚拟化表格</h2> <h2 id="_52-使用-clamp-替代媒体查询"><a href="#_52-使用-clamp-替代媒体查询" class="header-anchor">#</a> 52 使用 clamp 替代媒体查询</h2> <h1 id="后端问题整合"><a href="#后端问题整合" class="header-anchor">#</a> 后端问题整合</h1> <h2 id="_1-post请求接受不到-req-body"><a href="#_1-post请求接受不到-req-body" class="header-anchor">#</a> 1.post请求接受不到 req.body</h2> <p>在使用post请求前请先进行配置</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**获取post请求配置 */</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">extended</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 允许所有人访问服务器静态资源    </span>
<span class="token comment">/*******************/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_2-uni-request"><a href="#_2-uni-request" class="header-anchor">#</a> 2.uni.request</h2> <p>只有在连接不上后端的时候会去调用fail,后端就算是catch中返回的内容，也是执行success,相当于promise中的resolve和reject，返回后uni.request都算你有东西返回，算成功</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/toRegister'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> repeat <span class="token operator">=</span> <span class="token keyword">await</span> Consumer<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">phone</span><span class="token operator">:</span> req<span class="token punctuation">.</span>body<span class="token punctuation">.</span>phone
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>repeat<span class="token punctuation">)</span> <span class="token comment">// []</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>repeat<span class="token punctuation">.</span>length <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//如果账号存在,返回值长度不为0</span>
            <span class="token keyword">throw</span> <span class="token string">'异常，账号已存在'</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//创建用户表，目前只有账号，密码两条数据</span>
        <span class="token keyword">await</span> Consumer<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span>
        res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'success'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
        res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">'fail'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>uni<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'http://localhost:3400/toRegister'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">phone</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>phone<span class="token punctuation">,</span>
        <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>password
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">timeout</span><span class="token operator">:</span> <span class="token number">2000</span><span class="token punctuation">,</span>
    <span class="token comment">// es6语法糖，在对象里属性是函数，就可以简化 success(res) {}</span>
    <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data <span class="token operator">===</span> <span class="token string">'success'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            uni<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'注册成功'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">mask</span><span class="token operator">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data <span class="token operator">===</span> <span class="token string">'fail'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            uni<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'账号已存在'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">mask</span><span class="token operator">:</span> <span class="token boolean">true</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">fail</span><span class="token operator">:</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="_3-uni-setstoragesync"><a href="#_3-uni-setstoragesync" class="header-anchor">#</a> 3 uni.setStorageSync</h2> <p>uni.setStorageSync 是同步接口</p> <p>uni.setStorage是异步接口</p> <h2 id="_4-mongodb-findbyidandupdate"><a href="#_4-mongodb-findbyidandupdate" class="header-anchor">#</a> 4.mongodb findByIdAndUpdate</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> Consumer<span class="token punctuation">.</span><span class="token function">findByIdAndUpdate</span><span class="token punctuation">(</span>_id<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    username<span class="token punctuation">,</span> 
    position<span class="token punctuation">,</span> 
    brief
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>这样写的result仍然是更新之前的result，</p> <p>想要获得更新之后的result需要再查一下<code>_id</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> Consumer<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    _id
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>这样就能返回更新后的数据</p> <h2 id="_5-查询对象内数据"><a href="#_5-查询对象内数据" class="header-anchor">#</a> 5.查询对象内数据</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> consumerSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongoose<span class="token punctuation">.</span>Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">code</span><span class="token operator">:</span> Number<span class="token punctuation">,</span>
    <span class="token literal-property property">message</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'success'</span> <span class="token operator">|</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">phone</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> String
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> String
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> repeat <span class="token operator">=</span> <span class="token keyword">await</span> Consumer<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token string-property property">&quot;data.phone&quot;</span><span class="token operator">:</span> phone
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_6-不建议在async函数内嵌套async函数"><a href="#_6-不建议在async函数内嵌套async函数" class="header-anchor">#</a> 6.不建议在async函数内嵌套async函数</h2> <p>await方法返回一个promise</p> <p>.then也是返回一个promise</p> <h2 id="_7-返回数据设计"><a href="#_7-返回数据设计" class="header-anchor">#</a> 7 返回数据设计</h2> <p>成功返回</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token comment">//成功状态码</span>
    <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'登陆成功'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'success'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> existence
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>失败返回</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token number">401</span><span class="token punctuation">,</span> <span class="token comment">//失败状态码</span>
    <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'登陆失败'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'fail'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_8-数据库分类集合设计的一个意外错误"><a href="#_8-数据库分类集合设计的一个意外错误" class="header-anchor">#</a> 8 数据库分类集合设计的一个意外错误</h2> <p>当我在标签集合内删除一个标签后，需要去更新分类集合内的tids，因为已经被删除了</p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220728230259568.png" alt="image-20220728230259568"></p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220728230421052.png" alt="image-20220728230421052"></p> <h2 id="_9-token校验"><a href="#_9-token校验" class="header-anchor">#</a> 9 token校验</h2> <p>每次登陆请求服务端重新生成token（之前的token过期，防止多个IP登陆，这样可以确保只有一个设备是登陆着的），保存在某个用户表内，客户端登陆成功后将token发送给客户端保存</p> <p>以后客户端在任何需要<strong>权限校验</strong>的请求上都必须带上token，<strong>在请求头header内添加token</strong></p> <p>服务端先在用户表内查询是否有这个token，再决定是否进行操作，没有token返回403，提醒用户登陆</p> <p><strong>使用中间件与接口规范来一次性处理权限校验</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//使用中间件进行权限校验，规定请求路径包含_token字段，需要进行权限校验</span>
<span class="token keyword">const</span> <span class="token constant">ADMIN_TOKEN_PATH</span> <span class="token operator">=</span> <span class="token string">&quot;/_token&quot;</span>
app<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>req<span class="token punctuation">.</span>path<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token constant">ADMIN_TOKEN_PATH</span><span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//需要权限校验</span>
            <span class="token comment">//权限校验</span>
            <span class="token keyword">let</span> <span class="token punctuation">{</span> token <span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>headers
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>token<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//没有传token</span>
                <span class="token keyword">throw</span> <span class="token string">&quot;没有访问权限，请先登陆&quot;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">const</span> existence <span class="token operator">=</span> <span class="token keyword">await</span> Consumer<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token string-property property">&quot;token&quot;</span><span class="token operator">:</span> token
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>existence<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">throw</span> <span class="token string">&quot;没有访问权限，请先登陆&quot;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">//不需要权限校验,进入下一个接口</span>
            <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token number">401</span><span class="token punctuation">,</span>
            <span class="token literal-property property">message</span><span class="token operator">:</span> error<span class="token punctuation">,</span>
            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'fail'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h2 id="_10-moogose-schema"><a href="#_10-moogose-schema" class="header-anchor">#</a> 10 moogose.Schema</h2> <p>https://mongoosejs.com/docs/schematypes.html</p> <p>https://www.runoob.com/mongodb/mongodb-create-collection.html</p> <h5 id="所有模式类型"><a href="#所有模式类型" class="header-anchor">#</a> 所有模式类型</h5> <ul><li><p><code>required</code>: 布尔值或函数，如果为 true，则为此属性添加<a href="https://mongoosejs.com/docs/validation.html#built-in-validators" target="_blank" rel="noopener noreferrer">必需的验证器<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><code>default</code>：任意或函数，设置路径的默认值。如果该值是一个函数，则该函数的返回值用作默认值。</p></li> <li><p><code>select</code>：布尔值，指定查询的默认<a href="https://docs.mongodb.com/manual/tutorial/project-fields-from-query-results/" target="_blank" rel="noopener noreferrer">投影<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>默认情况下，MongoDB 中的查询返回匹配文档中的所有字段。要限制 MongoDB 发送到应用程序的数据量，您可以包含一个<a href="https://www.mongodb.com/docs/manual/reference/glossary/#std-term-projection" target="_blank" rel="noopener noreferrer">投影<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>文档来指定或限制要返回的字段。</p> <p>可以在查询时通过.select(&quot;+xxx&quot;)来增加字段</p></li> <li><p><code>validate</code>: 函数，为这个属性添加一个<a href="https://mongoosejs.com/docs/validation.html#built-in-validators" target="_blank" rel="noopener noreferrer">验证器函数<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><code>get</code>: 函数，使用<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty" target="_blank" rel="noopener noreferrer"><code>Object.defineProperty()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></li> <li><p><code>set</code>: 函数，使用 . 定义此属性的自定义设置器<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty" target="_blank" rel="noopener noreferrer"><code>Object.defineProperty()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p></li> <li><p><code>alias</code>: 字符串，仅限猫鼬 &gt;= 4.10.0。定义一个具有给定名称的<a href="https://mongoosejs.com/docs/guide.html#virtuals" target="_blank" rel="noopener noreferrer">虚拟<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，获取/设置此路径。</p></li> <li><p><code>immutable</code>：布尔值，将路径定义为不可变。Mongoose 会阻止您更改不可变路径，除非父文档具有<code>isNew: true</code>.</p></li> <li><p><code>transform</code>:function，Mongoose在你调用function的时候调用这个函数<a href="https://mongoosejs.com/docs/api/document.html#document_Document-toJSON" target="_blank" rel="noopener noreferrer"><code>Document#toJSON()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，包括你<a href="https://thecodebarbarian.com/the-80-20-guide-to-json-stringify-in-javascript" target="_blank" rel="noopener noreferrer"><code>JSON.stringify()</code><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>一个文件的时候。</p></li></ul> <h2 id="_11-密码加密"><a href="#_11-密码加密" class="header-anchor">#</a> 11 密码加密</h2> <h3 id="_1-注册部分"><a href="#_1-注册部分" class="header-anchor">#</a> 1.注册部分</h3> <p>注册部分先由用户输入账号和密码，然后将用户名和密码发送到后台。为了保证用户数据的隐私性，数据库管理员不能看到用户所使用的密码，所以在将数据存入到数据库之前，先对密码进行一次<a href="https://so.csdn.net/so/search?q=%E5%8A%A0%E5%AF%86&amp;spm=1001.2101.3001.7020" target="_blank" rel="noopener noreferrer">加密<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，使用哈希进行散列，将得到的hash值作为用户的密码存入到数据库中。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> mongoose <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mongoose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token keyword">const</span> schema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongoose<span class="token punctuation">.</span>Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
 
    <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">type</span><span class="token operator">:</span> String <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
        <span class="token literal-property property">select</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//不映射</span>
        <span class="token function">set</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   			<span class="token comment">//val接收的是从前端传来的用户的密码</span>
            <span class="token keyword">const</span> bcrypt <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'bcryptjs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> hash <span class="token operator">=</span> bcrypt<span class="token punctuation">.</span><span class="token function">hashSync</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> hash
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'AdminUser'</span><span class="token punctuation">,</span> schema<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="_2-登录部分"><a href="#_2-登录部分" class="header-anchor">#</a> 2.登录部分</h3> <p>用户在前端输入了账号密码之后，在后端要对用户的登录进行校验，首先要判断是否存在该用户以及该用户输入的密码是否正确，如果不存在或者不正确，则向前端发送422状态码，并且附加上错误信息。</p> <p>校验密码的过程为：</p> <p>根据用户名从数据库查询出响应的用户信息，包括用户名和散列之后的密码，然后再使用相应的方法来比较用户输入的密码和散列的密码的值是否相同，不同则发送422，附加错误信息。这里使用的是bcryptjs的api来进行密码的加密和验证。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'/admin/api/login'</span><span class="token punctuation">,</span> <span class="token keyword">async</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> <span class="token punctuation">{</span> username<span class="token punctuation">,</span> password <span class="token punctuation">}</span> <span class="token operator">=</span> req<span class="token punctuation">.</span>body<span class="token punctuation">;</span>
        <span class="token comment">//1 根据用户名找用户</span>
        <span class="token keyword">const</span> User <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../../models/AdminUser'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token keyword">await</span> User<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token comment">//</span>
            <span class="token literal-property property">username</span><span class="token operator">:</span> username
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'+password'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
        <span class="token comment">//如果用户不存在，则向前端返回一个422的代码，并且返回信息</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>user<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">422</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'用户不存在'</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        
        <span class="token comment">//2 校验密码</span>
        <span class="token comment">// const bcrybt = require('bcryptjs');</span>
        <span class="token keyword">const</span> isValid <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'bcryptjs'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">compareSync</span><span class="token punctuation">(</span>password<span class="token punctuation">,</span> user<span class="token punctuation">.</span>password<span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>isValid<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isValid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">422</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'用户密码错误'</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
       
       ·<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>·
       				以下代码先省略
       ·<span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span>·
 
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>返回的422状态码可以使用中间件来进行处理，而不需要在前端的页面中进行单独的代码处理</p> <h2 id="_12-如果用户在另外一个设备改动了userinfo-之前登陆的设备如何处理"><a href="#_12-如果用户在另外一个设备改动了userinfo-之前登陆的设备如何处理" class="header-anchor">#</a> 12.如果用户在另外一个设备改动了userInfo，之前登陆的设备如何处理</h2> <p>因为信息都是保存在localstorage中的，可能每次登陆应用都该拿localstorge去数据库校验一次，如果发生了改变就重新更新localstorage</p> <p>我的解决方法是每次登陆用户表的token也更新，之前的token过期了另一个设备就要重新登陆，重新更新localStorge</p> <h2 id="_13-状态码"><a href="#_13-状态码" class="header-anchor">#</a> 13 状态码</h2> <p>HTTP 状态码分类</p> <p>HTTP 状态码由三个十进制数字组成，第一个十进制数字定义了状态码的类型。响应分为五类：信息响应(100–199)，成功响应(200–299)，重定向(300–399)，客户端错误(400–499)和服务器错误 (500–599)：</p> <table><thead><tr><th>分类</th> <th>分类描述</th></tr></thead> <tbody><tr><td>1**</td> <td>信息，服务器收到请求，需要请求者继续执行操作</td></tr> <tr><td>2**</td> <td>成功，操作被成功接收并处理</td></tr> <tr><td>3**</td> <td>重定向，需要进一步的操作以完成请求</td></tr> <tr><td>4**</td> <td>客户端错误，请求包含语法错误或无法完成请求</td></tr> <tr><td>5**</td> <td>服务器错误，服务器在处理请求的过程中发生了错误</td></tr></tbody></table> <p>HTTP状态码列表:</p> <table><thead><tr><th>状态码</th> <th>状态码英文名称</th> <th>中文描述</th></tr></thead> <tbody><tr><td>100</td> <td>Continue</td> <td>继续。客户端应继续其请求</td></tr> <tr><td>101</td> <td>Switching Protocols</td> <td>切换协议。服务器根据客户端的请求切换协议。只能切换到更高级的协议，例如，切换到HTTP的新版本协议</td></tr> <tr><td></td> <td></td> <td></td></tr> <tr><td>200</td> <td>OK</td> <td>请求成功。一般用于GET与POST请求</td></tr> <tr><td>201</td> <td>Created</td> <td>已创建。成功请求并创建了新的资源</td></tr> <tr><td>202</td> <td>Accepted</td> <td>已接受。已经接受请求，但未处理完成</td></tr> <tr><td>203</td> <td>Non-Authoritative Information</td> <td>非授权信息。请求成功。但返回的meta信息不在原始的服务器，而是一个副本</td></tr> <tr><td>204</td> <td>No Content</td> <td>无内容。服务器成功处理，但未返回内容。在未更新网页的情况下，可确保浏览器继续显示当前文档</td></tr> <tr><td>205</td> <td>Reset Content</td> <td>重置内容。服务器处理成功，用户终端（例如：浏览器）应重置文档视图。可通过此返回码清除浏览器的表单域</td></tr> <tr><td>206</td> <td>Partial Content</td> <td>部分内容。服务器成功处理了部分GET请求</td></tr> <tr><td></td> <td></td> <td></td></tr> <tr><td>300</td> <td>Multiple Choices</td> <td>多种选择。请求的资源可包括多个位置，相应可返回一个资源特征与地址的列表用于用户终端（例如：浏览器）选择</td></tr> <tr><td>301</td> <td>Moved Permanently</td> <td>永久移动。请求的资源已被永久的移动到新URI，返回信息会包括新的URI，浏览器会自动定向到新URI。今后任何新的请求都应使用新的URI代替</td></tr> <tr><td>302</td> <td>Found</td> <td>临时移动。与301类似。但资源只是临时被移动。客户端应继续使用原有URI</td></tr> <tr><td>303</td> <td>See Other</td> <td>查看其它地址。与301类似。使用GET和POST请求查看</td></tr> <tr><td>304</td> <td>Not Modified</td> <td>未修改。所请求的资源未修改，服务器返回此状态码时，不会返回任何资源。客户端通常会缓存访问过的资源，通过提供一个头信息指出客户端希望只返回在指定日期之后修改的资源</td></tr> <tr><td>305</td> <td>Use Proxy</td> <td>使用代理。所请求的资源必须通过代理访问</td></tr> <tr><td>306</td> <td>Unused</td> <td>已经被废弃的HTTP状态码</td></tr> <tr><td>307</td> <td>Temporary Redirect</td> <td>临时重定向。与302类似。使用GET请求重定向</td></tr> <tr><td></td> <td></td> <td></td></tr> <tr><td>400</td> <td>Bad Request</td> <td>客户端请求的语法错误，服务器无法理解</td></tr> <tr><td>401</td> <td>Unauthorized</td> <td>请求要求用户的身份认证</td></tr> <tr><td>402</td> <td>Payment Required</td> <td>保留，将来使用</td></tr> <tr><td>403</td> <td>Forbidden</td> <td>服务器理解请求客户端的请求，但是拒绝执行此请求</td></tr> <tr><td>404</td> <td>Not Found</td> <td>服务器无法根据客户端的请求找到资源（网页）。通过此代码，网站设计人员可设置&quot;您所请求的资源无法找到&quot;的个性页面</td></tr> <tr><td>405</td> <td>Method Not Allowed</td> <td>客户端请求中的方法被禁止</td></tr> <tr><td>406</td> <td>Not Acceptable</td> <td>服务器无法根据客户端请求的内容特性完成请求</td></tr> <tr><td>407</td> <td>Proxy Authentication Required</td> <td>请求要求代理的身份认证，与401类似，但请求者应当使用代理进行授权</td></tr> <tr><td>408</td> <td>Request Time-out</td> <td>服务器等待客户端发送的请求时间过长，超时</td></tr> <tr><td>409</td> <td>Conflict</td> <td>服务器完成客户端的 PUT 请求时可能返回此代码，服务器处理请求时发生了冲突</td></tr> <tr><td>410</td> <td>Gone</td> <td>客户端请求的资源已经不存在。410不同于404，如果资源以前有现在被永久删除了可使用410代码，网站设计人员可通过301代码指定资源的新位置</td></tr> <tr><td>411</td> <td>Length Required</td> <td>服务器无法处理客户端发送的不带Content-Length的请求信息</td></tr> <tr><td>412</td> <td>Precondition Failed</td> <td>客户端请求信息的先决条件错误</td></tr> <tr><td>413</td> <td>Request Entity Too Large</td> <td>由于请求的实体过大，服务器无法处理，因此拒绝请求。为防止客户端的连续请求，服务器可能会关闭连接。如果只是服务器暂时无法处理，则会包含一个Retry-After的响应信息</td></tr> <tr><td>414</td> <td>Request-URI Too Large</td> <td>请求的URI过长（URI通常为网址），服务器无法处理</td></tr> <tr><td>415</td> <td>Unsupported Media Type</td> <td>服务器无法处理请求附带的媒体格式</td></tr> <tr><td>416</td> <td>Requested range not satisfiable</td> <td>客户端请求的范围无效</td></tr> <tr><td>417</td> <td>Expectation Failed</td> <td>服务器无法满足Expect的请求头信息</td></tr> <tr><td></td> <td></td> <td></td></tr> <tr><td>500</td> <td>Internal Server Error</td> <td>服务器内部错误，无法完成请求</td></tr> <tr><td>501</td> <td>Not Implemented</td> <td>服务器不支持请求的功能，无法完成请求</td></tr> <tr><td>502</td> <td>Bad Gateway</td> <td>作为网关或者代理工作的服务器尝试执行请求时，从远程服务器接收到了一个无效的响应</td></tr> <tr><td>503</td> <td>Service Unavailable</td> <td>由于超载或系统维护，服务器暂时的无法处理客户端的请求。延时的长度可包含在服务器的Retry-After头信息中</td></tr> <tr><td>504</td> <td>Gateway Time-out</td> <td>充当网关或代理的服务器，未及时从远端服务器获取请求</td></tr> <tr><td>505</td> <td>HTTP Version not supported</td> <td>服务器不支持请求的HTTP协议的版本，无法完成处理</td></tr></tbody></table> <h2 id="_14-mongodb-对象数组crub"><a href="#_14-mongodb-对象数组crub" class="header-anchor">#</a> 14 mongodb 对象数组CRUB</h2> <p>我发现似乎无法直接删除对象数组内的一段数据,如下：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token string-property property">&quot;replies&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    <span class="token string-property property">&quot;created_on&quot;</span><span class="token operator">:</span> <span class="token function">ISODate</span><span class="token punctuation">(</span><span class="token string">&quot;2020-05-08T00:00:00.000Z&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;reported&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;a reply test&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;delete_password&quot;</span><span class="token operator">:</span> <span class="token string">&quot;111111&quot;</span>
  <span class="token punctuation">}</span>， <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;created_on&quot;</span><span class="token operator">:</span> <span class="token function">ISODate</span><span class="token punctuation">(</span><span class="token string">&quot;2020-05-10T00:00:00.000Z&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;reported&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;a reply test2&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;delete_password&quot;</span><span class="token operator">:</span> <span class="token string">&quot;111111&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;created_on&quot;</span><span class="token operator">:</span> <span class="token function">ISODate</span><span class="token punctuation">(</span><span class="token string">&quot;2020-05-09T12:27:15.015Z&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;reported&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;a reply4329781&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;delete_password&quot;</span><span class="token operator">:</span> <span class="token string">&quot;111111&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>解决方法是把对象数组内的每一段数据都作为一个子文档，直接删除文档</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//文章点赞表</span>
<span class="token keyword">const</span> likeSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongoose<span class="token punctuation">.</span>Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">pid</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> String
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">aid</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> String
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">aname</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> String
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">time</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//文章表</span>
<span class="token keyword">const</span> postSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongoose<span class="token punctuation">.</span>Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">aid</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> String <span class="token comment">//作者id,对应用户表里的_id</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">aname</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">//用户名</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> String
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> String <span class="token comment">//文章标题</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> String <span class="token comment">//文章内容html格式</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">content_text</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> String <span class="token comment">//文章内容text格式</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cid</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> String <span class="token comment">//分类id,对应分类表里的_id</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cname</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> String <span class="token comment">//分类名</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">tid</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> Array <span class="token comment">//分类底下的哪些标签</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">tname</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> Array <span class="token comment">//标签名</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">time</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> String <span class="token comment">//创建的时间</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">//审核状态</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
        <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">&quot;待审核&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">cover</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">//封面</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> String
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">likes</span><span class="token operator">:</span> <span class="token punctuation">[</span>likeSchema<span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token literal-property property">comments</span><span class="token operator">:</span><span class="token punctuation">[</span>commentSchema<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br></div></div><p>产生的子文档内会有子文档自己的_id</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token string-property property">&quot;replies&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
    <span class="token string-property property">&quot;created_on&quot;</span><span class="token operator">:</span> <span class="token function">ISODate</span><span class="token punctuation">(</span><span class="token string">&quot;2020-05-08T00:00:00.000Z&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;reported&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;5eb760bd318118007ff50e79&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;a reply test&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;delete_password&quot;</span><span class="token operator">:</span> <span class="token string">&quot;111111&quot;</span>
  <span class="token punctuation">}</span>， <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;created_on&quot;</span><span class="token operator">:</span> <span class="token function">ISODate</span><span class="token punctuation">(</span><span class="token string">&quot;2020-05-10T00:00:00.000Z&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;reported&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;5eb760d6318118007ff50e7a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;a reply test2&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;delete_password&quot;</span><span class="token operator">:</span> <span class="token string">&quot;111111&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token string-property property">&quot;created_on&quot;</span><span class="token operator">:</span> <span class="token function">ISODate</span><span class="token punctuation">(</span><span class="token string">&quot;2020-05-09T12:27:15.015Z&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;reported&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;_id&quot;</span><span class="token operator">:</span> <span class="token function">ObjectId</span><span class="token punctuation">(</span><span class="token string">&quot;5eb6a1a3786a112e2339f7ba&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;text&quot;</span><span class="token operator">:</span> <span class="token string">&quot;a reply4329781&quot;</span><span class="token punctuation">,</span>
    <span class="token string-property property">&quot;delete_password&quot;</span><span class="token operator">:</span> <span class="token string">&quot;111111&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>对象数组增删改查https://www.jianshu.com/p/9a21060f7ac2?u_atoken=e9465e7f-7f3c-4748-8578-8cc986ed715e&amp;u_asession=01HJzDC1HB9-hVgXZwiNttj7X20vbSuXp_hMi8bLGu6FMP1nlcZ4jURXAGeC1ZUP1AX0KNBwm7Lovlpxjd_P_q4JsKWYrT3W_NKPr8w6oU7K-025tzHwt2XYRwm2FHTjvwS_nntv0fnCqKMMYW1x5qJGBkFo3NEHBv0PZUm6pbxQU&amp;u_asig=053Ral_nnvzvuiyXdeEvpB7h2nWnbfDq6gEQFFSNcte6oSGZ-GjEymShEWpMHiEWN50ZfhM7Gn5VdSMKszCgG3C5B1WsPxcGknBsk7aZUqcbnljpPrcDLp-0Po7YSiA8vDIQXa5N8-YN3bNmpsGyMHLRjplYD9FFicCkVsQudTwZr9JS7q8ZD7Xtz2Ly-b0kmuyAKRFSVJkkdwVUnyHAIJzSAP7CA_ZBLQ8dKcag_VIO_w3mw_NI3-zT1yni7EbOXC4Nx7nJyT20ni5onZOBbfUe3h9VXwMyh6PgyDIVSG1W93WhczkHM-I5SNr_FQ1eso4SCiwcadFJVvu84nbKDsY9meMmyDQOakMg-hDXXWHrrUlFzqUYoq489scdIPuujKmWspDxyAEEo4kbsryBKb9Q&amp;u_aref=%2FwWiogY5L8260YmyGgMK4My2k2A%3D</p> <p>请记住，位置$操作符充当更新文档查询中第一个匹配的占位符。</p> <p><strong>注意：&quot;.$[].&quot;会更新数组内全部元素，可以多个。&quot;.$.&quot;只会更新符合查询条件的数组内的元素，有且只能有一个。</strong></p> <p>$占位符使用https://blog.csdn.net/yaomingyang/article/details/78696759</p> <p>$addToSet：向数组中添加元素，若数组本身含有该元素，则不添加，否则，添加，这样就避免了数组中的元素重复现象；</p> <p>$push：向<a href="https://so.csdn.net/so/search?q=%E6%95%B0%E7%BB%84&amp;spm=1001.2101.3001.7020" target="_blank" rel="noopener noreferrer">数组<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>尾部添加元素，但它不管数组中有没有该元素，都会添加。</p> <h2 id="_15-mongodb-更新子文档某一列值"><a href="#_15-mongodb-更新子文档某一列值" class="header-anchor">#</a> 15 mongodb 更新子文档某一列值</h2> <p>find要用子文档的id来找，这样返回结果虽然是整个post文档，但其实对comment文档进行操作时不会操作到comment内每一条数据，</p> <p>只会操作comment内对应id未commentid的那条数据</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">await</span> Post<span class="token punctuation">.</span><span class="token function">updateOne</span><span class="token punctuation">(</span>
    <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;comments&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string-property property">&quot;$elemMatch&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token string-property property">&quot;_id&quot;</span><span class="token operator">:</span> commentid
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
        <span class="token string-property property">&quot;$set&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token string-property property">&quot;comments.$.likeNum&quot;</span><span class="token operator">:</span> result2<span class="token punctuation">.</span>length
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h1 id="前端未解决问题"><a href="#前端未解决问题" class="header-anchor">#</a> 前端未解决问题</h1> <h2 id="_1-微信小程序端tab-item无法点击后滑动到指定位置"><a href="#_1-微信小程序端tab-item无法点击后滑动到指定位置" class="header-anchor">#</a> 1.微信小程序端tab-item无法点击后滑动到指定位置</h2> <p>已解决： 改用scroll-view</p> <p>为什么会有这个问题？</p> <p>答： 因为微信小程序不支持<code>document.getElementById</code>,又不支持<code>querySelector</code>，然后连vue的<code>this.$refs.xxx.$el</code>也不支持(<code>$el</code>表示获取xxx的dom),微信小程序只认自己取dom的一套方法，调用一堆的api，真的烦</p> <p>我的思路是</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//#ifdef MP-WEIXIN </span>
<span class="token comment">//获取整个页面</span>
<span class="token keyword">let</span> query <span class="token operator">=</span> uni<span class="token punctuation">.</span><span class="token function">createSelectorQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">in</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> offsetLeft <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token comment">//选取dom元素,使用boundingClientRect方法查询dom信息</span>
query<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'.active'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boundingClientRect</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    offsetLeft <span class="token operator">=</span> data<span class="token punctuation">.</span>left <span class="token comment">//这个是距离左边的绝对距离，不是滚动距离</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>offsetLeft<span class="token punctuation">)</span>
    <span class="token comment">// 这个 </span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
query<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'.tab-list'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fields</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">scrollOffset</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    data<span class="token punctuation">.</span>scrollLeft <span class="token operator">=</span> offsetLeft  
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//#endif</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>但是data.scrollLeft改变后并不能渲染出来</p> <p>看网上好像都是用<code>&lt;scroll-view&gt;</code>这种自带的组件来做</p> <p>上面的代码使用的api参考<code>https://uniapp.dcloud.io/api/ui/nodes-info.html#selectorquery</code></p> <p><code>nodesRef.fields</code>是综合了<code>nodesRef.boundingClientRect</code>和<code>nodesRef.scrollOffset</code>的api</p> <p>但是<code>nodesRef.scrollOffset</code>只对 节点<code>scroll-view</code>或者 <code>viewport</code>有效</p> <h2 id="_2-把icontab改造为弹窗蒙层-禁止滚动"><a href="#_2-把icontab改造为弹窗蒙层-禁止滚动" class="header-anchor">#</a> 2.把icontab改造为弹窗蒙层，禁止滚动</h2> <p>并且展开tab选项后还要滚动到指定位置，小程序还是无法搞定啊</p> <h2 id="_4-下拉刷新没做"><a href="#_4-下拉刷新没做" class="header-anchor">#</a> 4.下拉刷新没做</h2> <p>等改造完小程序导航栏滑动功能再来做吧</p> <h2 id="_6-小程序uni-request还没有进行封装"><a href="#_6-小程序uni-request还没有进行封装" class="header-anchor">#</a> 6.小程序uni.request还没有进行封装</h2> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220729174434264.png" alt="image-20220729174434264"></p> <p>要统一好返回值格式写success返回函数才方便</p> <p>在vue2中，我们知道vue2.x是使用Vue.prototype.$xxxx=xxx来定义全局变量，然后通过this.$xxx来获取全局变量。</p> <p>但是在vue3中，这种方法显然不行了。因为vue3中在setup里面我们是无法获取到this的，因此按照官方文档我们使用下面方法来定义全局变量：
首先在main.js里写一个我们要定义的全局变量，比如一个系统id吧</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>app<span class="token punctuation">.</span>config<span class="token punctuation">.</span>globalProperties<span class="token punctuation">.</span>$systemId <span class="token operator">=</span> <span class="token string">&quot;10&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>现在在页面里需要使用这个变量，只需要从vue中引入getCurrentInstance即可，注意不能在页面中使用this.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> getCurrentInstance <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> systemId <span class="token operator">=</span> <span class="token function">getCurrentInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?.</span>appContext<span class="token punctuation">.</span>config<span class="token punctuation">.</span>globalProperties<span class="token punctuation">.</span>$systemId
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>systemId<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//控制台可以看到输出了10</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_7-虚拟列表优化"><a href="#_7-虚拟列表优化" class="header-anchor">#</a> 7.虚拟列表优化</h2> <h2 id="_8-防抖节流"><a href="#_8-防抖节流" class="header-anchor">#</a> 8.防抖节流</h2> <h2 id="_9-图片懒加载"><a href="#_9-图片懒加载" class="header-anchor">#</a> 9 图片懒加载</h2> <h2 id="_10-提高首屏加载速度-减少白屏时间"><a href="#_10-提高首屏加载速度-减少白屏时间" class="header-anchor">#</a> 10 提高首屏加载速度，减少白屏时间</h2> <h2 id="_11-seo"><a href="#_11-seo" class="header-anchor">#</a> 11.SEO</h2> <h2 id="_12-预渲染"><a href="#_12-预渲染" class="header-anchor">#</a> 12.预渲染</h2> <h2 id="_13-离线状态编辑"><a href="#_13-离线状态编辑" class="header-anchor">#</a> 13.离线状态编辑</h2> <h2 id="_14-注册账号时需要获取手机验证码"><a href="#_14-注册账号时需要获取手机验证码" class="header-anchor">#</a> 14.注册账号时需要获取手机验证码</h2> <h2 id="_15-小程序富文本编辑器字体颜色选择"><a href="#_15-小程序富文本编辑器字体颜色选择" class="header-anchor">#</a> 15.小程序富文本编辑器字体颜色选择</h2> <h2 id="_16-编辑个人信息应该进行字数限制"><a href="#_16-编辑个人信息应该进行字数限制" class="header-anchor">#</a> 16.编辑个人信息应该进行字数限制</h2> <h2 id="_17-计算时间戳的时间差转换为日期差"><a href="#_17-计算时间戳的时间差转换为日期差" class="header-anchor">#</a> 17 计算时间戳的时间差转换为日期差</h2> <p>分钟，小时，天的差距比较容易算，但是月差距，年差距怎么算呢，每年每月的天数都不一定相等</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">computed</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">formatTime</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> d <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">let</span> minute <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token punctuation">(</span>d <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$props<span class="token punctuation">.</span>time<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">1000</span><span class="token operator">/</span><span class="token number">60</span><span class="token punctuation">)</span> <span class="token comment">//分钟数</span>
        <span class="token keyword">let</span> hour <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token punctuation">(</span>d <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$props<span class="token punctuation">.</span>time<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">1000</span><span class="token operator">/</span><span class="token number">60</span><span class="token operator">/</span><span class="token number">60</span><span class="token punctuation">)</span> <span class="token comment">//小时数</span>
        <span class="token keyword">let</span> day <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token punctuation">(</span>d <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$props<span class="token punctuation">.</span>time<span class="token punctuation">)</span><span class="token operator">/</span><span class="token number">1000</span><span class="token operator">/</span><span class="token number">60</span><span class="token operator">/</span><span class="token number">60</span><span class="token operator">/</span><span class="token number">24</span><span class="token punctuation">)</span> <span class="token comment">//天数</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>day <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> day <span class="token operator">+</span> <span class="token string">&quot;天前&quot;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>hour <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> hour <span class="token operator">+</span> <span class="token string">&quot;小时前&quot;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> minute <span class="token operator">+</span> <span class="token string">&quot;分钟前&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="_18-文字环绕"><a href="#_18-文字环绕" class="header-anchor">#</a> 18 文字环绕</h2> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>reply<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>username<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        小黑子：
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
            我有一头小猫路，我从来也不起，有一天我骑着毛驴急着去赶集
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.reply</span> <span class="token punctuation">{</span>
    <span class="token selector">.username</span> <span class="token punctuation">{</span>
        <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220809135234526.png" alt="image-20220809135234526"></p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220809135259300.png" alt="image-20220809135259300"></p> <p>我并没有清除浮动，但是为何 p 没有顶掉view的位置</p> <h2 id="_19-点赞box内评论图片滚动到文章评论区"><a href="#_19-点赞box内评论图片滚动到文章评论区" class="header-anchor">#</a> 19 点赞box内评论图片滚动到文章评论区</h2> <p>postDetail一直滚动不正常，不知道为社么</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">onReady</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>scrolltoComment<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//评论位置计算</span>
        <span class="token keyword">let</span> offsettop <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> query <span class="token operator">=</span> uni<span class="token punctuation">.</span><span class="token function">createSelectorQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">in</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//选取dom元素,使用boundingClientRect方法查询dom信息</span>
        query<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">'.commentBox'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">boundingClientRect</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            offsettop <span class="token operator">=</span> data<span class="token punctuation">.</span>top <span class="token comment">//更新导航栏到顶部的距离</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>offsettop<span class="token punctuation">)</span>
        uni<span class="token punctuation">.</span><span class="token function">pageScrollTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">scrollTop</span><span class="token operator">:</span> offsettop<span class="token punctuation">,</span> 
            <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="_20-navigateto动画效果不生效"><a href="#_20-navigateto动画效果不生效" class="header-anchor">#</a> 20 navigateTo动画效果不生效</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">toComment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    uni<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">url</span><span class="token operator">:</span><span class="token string">&quot;/pages/comment/comment&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">animationType</span><span class="token operator">:</span> <span class="token string">'pop-in'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">animationDuration</span><span class="token operator">:</span> <span class="token number">10000</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_21-改变数组后触发计算属性-h5不行-小程序可以"><a href="#_21-改变数组后触发计算属性-h5不行-小程序可以" class="header-anchor">#</a> 21 改变数组后触发计算属性，H5不行，小程序可以</h2> <p>没搞懂</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function-variable function">formatComment</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> temp <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>comments<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>parent_id <span class="token operator">===</span> <span class="token string">&quot;无&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> item
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> temp
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_22-浏览器端再commentdetail内评论commenttime显示错误"><a href="#_22-浏览器端再commentdetail内评论commenttime显示错误" class="header-anchor">#</a> 22 浏览器端再commentDetail内评论commentTime显示错误</h2> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220810193127490.png" alt=""></p> <h2 id="_23-uniapp打包文件优化"><a href="#_23-uniapp打包文件优化" class="header-anchor">#</a> 23.uniapp打包文件优化</h2> <p>webpack-bundle-analyzer插件打包优化</p> <p>项目中文件的打包后，首页js文件大小为600多k,尝试着将文件优化以下。</p> <p>以下是我找到的3种有效的优化方式
实现方式</p> <p>使用uniapp的摇树优化（treeShaking）https://uniapp.dcloud.io/collocation/manifest?id=optimization
使用gz压缩文件  https://github.com/vuejs/vue-cli/issues/978
splitChunks分包  https://www.jianshu.com/p/4f0600ea1c5f</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">chainWebpack</span><span class="token operator">:</span> <span class="token parameter">config</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    config<span class="token punctuation">.</span>optimization<span class="token punctuation">.</span><span class="token function">splitChunks</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">cacheGroups</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">vendors</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'chunk-vendors'</span><span class="token punctuation">,</span>
              <span class="token literal-property property">minChunks</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
              <span class="token literal-property property">test</span><span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">node_modules</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">,</span>
              <span class="token literal-property property">priority</span><span class="token operator">:</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">,</span>
              <span class="token literal-property property">chunks</span><span class="token operator">:</span> <span class="token string">'initial'</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token literal-property property">common</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
       <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>小声说话：（以我自己理解的方式）</p> <p>uniapp的摇树优化，只打包你用到的uniapp中的代码，从而减少（之前是一起包进去）
gz压缩文件，是让服务器请求压缩后的文件
splitChunks分包，配合webpack-bundle-analyzer插件（查看打包后的文件依赖），实现依赖分拆（很难搞</p> <h2 id="_24-页面加载进度条效果"><a href="#_24-页面加载进度条效果" class="header-anchor">#</a> 24 页面加载进度条效果</h2> <p>新月写的LoadingLine</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">const</span> vNode <span class="token operator">=</span> <span class="token function">createVNode</span><span class="token punctuation">(</span>LoadingLine<span class="token punctuation">)</span>
<span class="token function">render</span><span class="token punctuation">(</span>vNode<span class="token punctuation">,</span> document<span class="token punctuation">.</span>body<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h1 id="后端未解决问题"><a href="#后端未解决问题" class="header-anchor">#</a> 后端未解决问题</h1> <h2 id="_1-编辑个人信息页面手机端接不到后台还没进行测试"><a href="#_1-编辑个人信息页面手机端接不到后台还没进行测试" class="header-anchor">#</a> 1.编辑个人信息页面手机端接不到后台还没进行测试</h2> <p>textarea要浮在键盘上方，还没搞</p> <h2 id="_3-查询文章"><a href="#_3-查询文章" class="header-anchor">#</a> 3.查询文章</h2> <p>查询文章时如果是要显示在列表里，使用分页，并且传给前端的字数也不用太多，可以进行裁剪后发送给前端，减少带宽拥挤</p> <h2 id="_4-图片压缩"><a href="#_4-图片压缩" class="header-anchor">#</a> 4.图片压缩</h2> <h2 id="_5-前后端分页"><a href="#_5-前后端分页" class="header-anchor">#</a> 5.前后端分页</h2> <h2 id="_6-ssr服务端渲染"><a href="#_6-ssr服务端渲染" class="header-anchor">#</a> 6 SSR服务端渲染</h2> <h2 id="_7-使用jwt"><a href="#_7-使用jwt" class="header-anchor">#</a> 7 使用JWT</h2> <p>https://blog.csdn.net/jackyocheung/article/details/105832013</p> <p>JWT可以用来生成token</p> <p>使用JWT来改变token保存在数据库这种方式</p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220730232815576.png" alt="image-20220730232815576"></p> <p>Token验证流程</p> <ul><li>客户端提交账号和密码到服务端。</li> <li>通过登录验证后，服务端响应由 JWT 生成的 Token 令牌。</li> <li>客户端要访问服务器中其他资源，会在请求中带着 Token 到服务端。</li> <li>服务端接收到请求之后，从 Token 中拿出 header 和 payload ，然后通过HS256算法将 header 和 payload 和 “盐” 值 进行计算得出内容，让计算出的内容与Token中的第三部分，也就是Signature去比较，如果一致则验证通过，反之则失败。</li></ul> <h2 id="_8-判断用户登陆是否过期没处理好"><a href="#_8-判断用户登陆是否过期没处理好" class="header-anchor">#</a> 8 判断用户登陆是否过期没处理好</h2> <p>应该用jwt来做</p> <h2 id="_9-如何对子文档的子文档进行增删改查"><a href="#_9-如何对子文档的子文档进行增删改查" class="header-anchor">#</a> 9 如何对子文档的子文档进行增删改查</h2> <p>之前只是实现了对文章点赞数的增删改查，现在要实现对文章的评论的点赞数进行增删改查，</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//评论表</span>
<span class="token keyword">const</span> commentSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongoose<span class="token punctuation">.</span>Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">pid</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> String <span class="token comment">//文章对应的id</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">level</span><span class="token operator">:</span> Number<span class="token punctuation">,</span><span class="token comment">// 1为一级评论,2为二级评论</span>
    <span class="token literal-property property">f_id</span><span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token comment">//from 谁 to 谁 我 回复 你</span>
    <span class="token literal-property property">f_name</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token literal-property property">f_avatar</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token literal-property property">t_id</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token literal-property property">t_name</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token literal-property property">t_avatar</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token literal-property property">content</span><span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token comment">//回复内容</span>
    <span class="token literal-property property">time</span><span class="token operator">:</span> String<span class="token punctuation">,</span> <span class="token comment">//回复时间</span>
    <span class="token literal-property property">parent_id</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token comment">//二级评论的父级为某个一级评论,一级评论不给他父级</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">likes</span><span class="token operator">:</span> <span class="token punctuation">[</span>likeSchema<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h1 id="数据表"><a href="#数据表" class="header-anchor">#</a> 数据表</h1> <p>用户表</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> consumerSchema <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">mongoose<span class="token punctuation">.</span>Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">phone</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">//账号，打算用电话号码进行短信登陆</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> String
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">//登陆密码</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> String
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token punctuation">{</span>	<span class="token comment">//用户名，当还没有设置用户名时以电话号码当用户名，但是这样感觉不太好，最起码在发表文章什么时把用户名进行星号处理</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> String
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">position</span><span class="token operator">:</span> <span class="token punctuation">{</span>	<span class="token comment">//职位，新人作家，签约作者，大神作者</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> String  
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">brief</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">//简介，用户的自我描述</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> String
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">gender</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">//性别，还没用到</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> Number
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">userIDImg</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token comment">//</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> String
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">userInfo</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">type</span><span class="token operator">:</span> Object
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>文章表post</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">_id</span><span class="token operator">:</span> 自动生成
<span class="token literal-property property">aid</span><span class="token operator">:</span> 作者id  对应用户表里的_id
<span class="token literal-property property">title</span><span class="token operator">:</span> 标题
<span class="token literal-property property">content</span><span class="token operator">:</span> 内容
<span class="token literal-property property">cid</span><span class="token operator">:</span> 分类id
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>文章点赞表</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">_id</span><span class="token operator">:</span> 自动生成
<span class="token literal-property property">pid</span><span class="token operator">:</span> 文章id与文章表相关联
<span class="token literal-property property">aid</span><span class="token operator">:</span> <span class="token string">'点赞人的id'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>文章评论表</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">_id</span><span class="token operator">:</span> 自动生成
<span class="token literal-property property">pid</span><span class="token operator">:</span> 文章id与文章表相关联
<span class="token literal-property property">aid</span><span class="token operator">:</span> <span class="token string">'评论人id'</span>
<span class="token literal-property property">pinglun</span><span class="token operator">:</span> 评论人id对应的评论
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>文章分类表category（分类表对应tab，标签表对应icontab） (我规定标签是属于某个分类的,一个标签可能多个分类都有)</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>_id: 自动生成,与post表的cid相关联
name: 分类名
tid: 把标签名都写进来就行了
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>文章标签表tags</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">_id</span><span class="token operator">:</span> 自动生成
<span class="token literal-property property">name</span><span class="token operator">:</span> 标签名
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>标签与文章对应关系表,	为什么不直接在标签表里加入postid呢，之所有有这个表，是因为一篇文章可能有多个标签，会产生大量数据，不方便查找</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token literal-property property">_id</span><span class="token operator">:</span> 自动生成
<span class="token literal-property property">postid</span><span class="token operator">:</span> 文章id<span class="token punctuation">,</span> 与文章表的_id相关联
<span class="token literal-property property">tagid</span><span class="token operator">:</span> 标签id，与标签表的_id相关联
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h1 id="web前端问题整合"><a href="#web前端问题整合" class="header-anchor">#</a> web前端问题整合</h1> <h2 id="_1-按需elementplus引入组件"><a href="#_1-按需elementplus引入组件" class="header-anchor">#</a> 1.按需elementplus引入组件</h2> <p>elmentplus退出了两个插件极大方便了按需引入</p> <p><code>&quot;unplugin-auto-import&quot;: &quot;^0.9.2&quot;,</code>: 自动引入vue3 api</p> <p><code>&quot;unplugin-vue-components&quot;: &quot;^0.21.1&quot;,</code> 自动引入components目录下组件，并且可以直接使用elemntplus组件，不用注册</p> <p>只需要在vite.config.ts下进行插件注册</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vite'</span>
<span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">'@vitejs/plugin-vue'</span>
<span class="token keyword">import</span> AutoImport <span class="token keyword">from</span> <span class="token string">'unplugin-auto-import/vite'</span> <span class="token comment">//自动引入vue3的api</span>
<span class="token keyword">import</span> Components <span class="token keyword">from</span> <span class="token string">'unplugin-vue-components/vite'</span> <span class="token comment">//自动引入components组件，不需手动import</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ElementPlusResolver <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'unplugin-vue-components/resolvers'</span>

<span class="token comment">// https://vitejs.dev/config/</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">AutoImport</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">resolvers</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">ElementPlusResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function">Components</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">resolvers</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">ElementPlusResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token literal-property property">dts</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//获取自动导入组件typescript支持</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>配置完成后，运行代码，会在项目根目录自动生成一个components.d.ts文件;
需要在tsconfig.json的includes配置中加入此文件</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token comment">// tsconifg.json</span>
<span class="token punctuation">{</span>
    <span class="token property">&quot;include&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;src/**/*.ts&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;src/**/*.d.ts&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;src/**/*.tsx&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;src/**/*.vue&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;./auto-imports.d.ts&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;./components.d.ts&quot;</span>
      <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>配置完成后，antd组件和项目中src/components目录(可以通过dirs配置项修改目录)下的组件都可以直接使用，无需写import语句了</p> <h2 id="_2-引入组件不生效"><a href="#_2-引入组件不生效" class="header-anchor">#</a> 2.引入组件不生效</h2> <p>上面已经帮我们按需引入了，但是我写了一个nav组件引入就是不生效</p> <p>原因竟然是因为名</p> <p><strong>nav很可能就是h5的一个标签名</strong>，所以组件不能这样起名字</p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220714162918047.png" alt="image-20220714162918047"></p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220714163022117.png" alt="image-20220714163022117"></p> <p>在html中，nav标签是html5版本中新增的标签，是使用来定义导航链接的部分。nav标签只是用来表示该区域是导航链接，默认并没有什么显示效果。</p> <h2 id="_3-axios"><a href="#_3-axios" class="header-anchor">#</a> 3. axios</h2> <h3 id="前提-类型支持如何配置取决于你后台返回类型是怎么配置的"><a href="#前提-类型支持如何配置取决于你后台返回类型是怎么配置的" class="header-anchor">#</a> 前提：类型支持如何配置取决于你后台返回类型是怎么配置的</h3> <p>刚开始我的后端返回值没包含在data里，不使用下面这套配置</p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220715165747315.png" alt="image-20220715165747315"></p> <p>根本不需要<code>ResponseResult</code>二次封装,直接返回<code>Promise&lt;T[]&gt;</code>就行了</p> <p><strong>正确做法如下</strong>，</p> <p>确定后端返回类型结构</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">code</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token comment">//成功状态码</span>
    <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'登陆成功'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'success'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> existence
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>根据后端返回内容配置<code>ResponseResult</code>接口</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//axios返回数据类型</span>
<span class="token keyword">interface</span> <span class="token class-name">ResponseResult</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">code</span><span class="token operator">:</span>number<span class="token punctuation">,</span>
    <span class="token literal-property property">message</span><span class="token operator">:</span> string<span class="token punctuation">,</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'success'</span> <span class="token operator">|</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token comment">//返回数据不确定， 给一个泛型</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>封装Axios，最终返回一个<code>Promise&lt;ResponseResult&lt;T[]&gt;&gt;</code>，通过<code>.then</code>获得<code>ResponseResult&lt;T[]&gt;</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">public</span> <span class="token keyword">async</span> request<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">D</span> <span class="token operator">=</span> ResponseResult<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">(</span>config<span class="token operator">:</span> AxiosRequestConfig<span class="token punctuation">)</span><span class="token operator">:</span> Promise<span class="token operator">&lt;</span><span class="token constant">D</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span> <span class="token comment">//发送axios请求,请求的是T类型，返回的D类型</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token comment">// response 为 AxiosResponse&lt;D, any&gt;类型</span>
                <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>instance<span class="token punctuation">.</span>request<span class="token operator">&lt;</span><span class="token constant">D</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
                <span class="token comment">// response.data 为 D类型</span>
                <span class="token function">resolve</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//resolve给promise后返回promise&lt;D&gt;类型 就是 promise&lt;ResponseResult&lt;T[]&gt;&gt;  == promise&lt;ResponseResult&lt;User[]&gt;&gt;</span>

            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><strong>如果后端返回数据是包含在data里的，就适合这套配置了，而且很好，最好这么弄，还可以额外配置其它信息</strong></p> <h3 id="axios官网"><a href="#axios官网" class="header-anchor">#</a> axios官网</h3> <p>官网： https://www.axios-http.cn/docs/intro</p> <h3 id="配置mock"><a href="#配置mock" class="header-anchor">#</a> 配置mock</h3> <p>参考文档https://github.com/vbenjs/vite-plugin-mock</p> <p>--src</p> <p>--vite <code>//存放vite相关配置</code></p> <p>----plugins</p> <p>------mock.ts</p> <p>------index.ts</p> <p>mock.ts</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> viteMockServe <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vite-plugin-mock'</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">setupMokcPlugin</span><span class="token punctuation">(</span>isBuild<span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">viteMockServe</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token comment">// default</span>
        mockPath<span class="token operator">:</span> <span class="token string">'mock'</span><span class="token punctuation">,</span> <span class="token comment">//代指放mock接口的文件夹</span>
        localEnabled<span class="token operator">:</span> <span class="token operator">!</span>isBuild <span class="token comment">//开发环境的时候来请求接口</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>index.ts</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> vue <span class="token keyword">from</span> <span class="token string">'@vitejs/plugin-vue'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Plugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vite'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> setupMokcPlugin <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./mock'</span>
<span class="token comment">//插件不在vite.config.ts中写了，放到外部，方便扩展，以及处理所有插件</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">setupPlugins</span><span class="token punctuation">(</span>isBuild<span class="token operator">:</span><span class="token builtin">boolean</span><span class="token punctuation">,</span>env<span class="token operator">:</span> ViteEnv<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> plugins<span class="token operator">:</span> Plugin<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token function">vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    plugins<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token function">setupMokcPlugin</span><span class="token punctuation">(</span>isBuild<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//压入mock插件</span>
    <span class="token keyword">return</span> plugins<span class="token punctuation">;</span> 
<span class="token punctuation">}</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>--src</p> <p>--mock <code>//存放mock数据</code>   注意要在<code>tsconfig.json include</code> 中添加<code>&quot;mock/**/*.ts&quot;</code>来让ts管理文件</p> <p>----user.ts <code>//存放user相关数据</code></p> <p>--vite</p> <p>user.ts</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MockMethod <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vite-plugin-mock'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    url<span class="token operator">:</span> <span class="token string">'/api/get'</span><span class="token punctuation">,</span>
    method<span class="token operator">:</span> <span class="token string">'get'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">response</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        code<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        data<span class="token operator">:</span> <span class="token punctuation">{</span>
          name<span class="token operator">:</span> <span class="token string">'vben'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span> <span class="token keyword">as</span> MockMethod<span class="token punctuation">[</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>访问<code>localhost:3000/api/get</code> 会得到json数据</p> <h3 id="没有类型支持的接口请求弊端"><a href="#没有类型支持的接口请求弊端" class="header-anchor">#</a> 没有类型支持的接口请求弊端</h3> <p>使用ajax得到json文件后,传统js开发我们的返回结果只有只有打印了才知道，是any类型，这样很不方便，无法通过<code>res.</code> 点出来返回结果里面有什么，</p> <p>使用typescript可以解决这个烦恼</p> <h3 id="axios基本配置与接口类型声明"><a href="#axios基本配置与接口类型声明" class="header-anchor">#</a> axios基本配置与接口类型声明</h3> <p>参考文档:https://www.axios-http.cn/docs/intro</p> <p>--src</p> <p>----plugins //存放和页面有关插件</p> <p>------axios</p> <p>--------Axios.ts</p> <p>--types</p> <p>----ResponseResult.d.ts  接口类型声明(axios返回结果类型声明)</p> <p><code>ResponseResult.d.ts</code></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">//axios返回数据类型</span>
<span class="token keyword">interface</span> <span class="token class-name">ResponseResult<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span>
    code<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">,</span>
    message<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    type<span class="token operator">:</span> <span class="token string">'success'</span> <span class="token operator">|</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> <span class="token constant">T</span> <span class="token comment">//返回数据不确定， 给一个泛型</span>
<span class="token punctuation">}</span>

引用这个的时候可以声明泛型
ResponseResult<span class="token operator">&lt;</span><span class="token punctuation">{</span>name<span class="token operator">:</span> stirng<span class="token punctuation">;</span>age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>Axios.ts</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> axios<span class="token punctuation">,</span> <span class="token punctuation">{</span> AxiosRequestConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;axios&quot;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">Axios</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> instance <span class="token comment">//定义axios实例</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>config<span class="token operator">:</span> AxiosRequestConfig<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//config配置项</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>instance <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">//创建axios实例</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">interceptors</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//调用拦截器</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token generic-function"><span class="token function">request</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>config<span class="token operator">:</span> AxiosRequestConfig<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//发送axios请求,请求的是T类型，返回的也是T类型</span>
        <span class="token comment">// this.instance.request&lt;ResponseResult&lt;T&gt;&gt; ()</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//拦截器</span>
    <span class="token keyword">private</span> <span class="token function">interceptors</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">interceptorsRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">interceptorsResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 添加请求拦截器</span>
    <span class="token keyword">private</span> <span class="token function">interceptorsRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>instance<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
          config <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// 在发送请求之前做些什么</span>
            <span class="token keyword">return</span> config<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> 
          error <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// 对请求错误做些什么</span>
            <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//响应请求拦截器</span>
    <span class="token keyword">private</span> <span class="token function">interceptorsResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>instance<span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>
          response <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// 对响应数据做点什么</span>
            <span class="token keyword">return</span> response<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> 
          error <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// 对响应错误做点什么</span>
            <span class="token keyword">return</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br></div></div><h3 id="接口文件结构分析"><a href="#接口文件结构分析" class="header-anchor">#</a> 接口文件结构分析</h3> <p>--src</p> <p>----apis <code>//利用axios获取数据</code></p> <p>------userApi.ts <code>//获取用户数据</code></p> <p>----plugins</p> <p>------axios</p> <p>--------Axios.ts  <code>//Axios类</code></p> <p>--------index.ts <code>//注册Axios实例</code></p> <p>index.ts</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> Axios <span class="token keyword">from</span> <span class="token string">'./Axios'</span>
<span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Axios</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    baseURL<span class="token operator">:</span> <span class="token string">'/api'</span><span class="token punctuation">,</span> <span class="token comment">//基础路径</span>
    timeout<span class="token operator">:</span> <span class="token number">1000000</span><span class="token punctuation">,</span> <span class="token comment">//超时时间</span>
    headers<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>  <span class="token comment">//头信息</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span>http<span class="token punctuation">}</span> <span class="token comment">//导出Axios实例</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>userApi.ts</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> http <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../plugins/axios&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">info</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> http<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">info</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>


<span class="token keyword">function</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> http<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">info</span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span> info<span class="token punctuation">,</span> login<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>当使用info获取数据时，访问的路径就是	<code>/api/info</code></p> <h3 id="使用没有类型支持的axios发送请求"><a href="#使用没有类型支持的axios发送请求" class="header-anchor">#</a> 使用没有类型支持的axios发送请求</h3> <p>--src</p> <p>----plugins //存放和页面有关插件</p> <p>------axios</p> <p>--------Axios.ts</p> <p>在Axios.ts 的request先直接使用无类型声明的</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">private</span> instance <span class="token comment">//定义axios实例</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>config<span class="token operator">:</span> AxiosRequestConfig<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//config配置项</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>instance <span class="token operator">=</span> axios<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token comment">//创建axios实例</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">interceptors</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//调用拦截器</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token generic-function"><span class="token function">request</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>config<span class="token operator">:</span> AxiosRequestConfig<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//发送axios请求,请求的是T类型，返回的也是T类型</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span>   <span class="token comment">//无类型声明</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>在App.vue中使用,可以正常返回信息,但是没有类型提示,如<code>response.data.</code>后面有什么</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token operator">&lt;</span>script setup lang<span class="token operator">=</span><span class="token string">&quot;ts&quot;</span><span class="token operator">&gt;</span>
  <span class="token keyword">import</span> userApi <span class="token keyword">from</span> <span class="token string">'./api/userApi'</span>
  <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> userApi<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="优化处理promise类型支持"><a href="#优化处理promise类型支持" class="header-anchor">#</a> 优化处理Promise类型支持</h3> <p>分析一下axios实例中request的类型支持</p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220226145435197.png" alt="image-20220226145435197"></p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220226145516878.png" alt="image-20220226145516878"></p> <p>返回的是Promise，是R类型</p> <p>R类型 = <code>AxiosResonse&lt;T&gt;</code></p> <p>AxiosResonse接口要求接收T类型，data为T类型</p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220226150027466.png" alt="image-20220226150027466"></p> <p>现在要求Promise类型支持类似下方这整块数据<code>（resonse.data）</code></p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220226150942343.png" alt="image-20220226150942343"></p> <p>--src</p> <p>--api</p> <p>----userApi.ts <code>//获取用户数据</code></p> <p>----plugins <code>//存放和页面有关插件</code></p> <p>------axios</p> <p>--------Axios.ts <code>//Axios类</code></p> <p>--types</p> <p>----<code>ResponseResult.d.ts</code>  接口类型声明(axios返回结果类型声明)</p> <p><code>ResponseResult.d.ts</code> 之前在全局类型文件中声明了这个接口，用来作为请求返回类型的</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">ResponseResult<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token punctuation">{</span> <span class="token comment">//接口定义一个泛型T</span>
    code<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">,</span>
    message<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    type<span class="token operator">:</span> <span class="token string">'success'</span> <span class="token operator">|</span> <span class="token string">'error'</span><span class="token punctuation">,</span>
    data<span class="token operator">:</span> <span class="token constant">T</span> <span class="token comment">//返回数据不确定， 给一个泛型</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>userApi.ts</code> 中 使用上面的请求返回类型接口</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> http <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../plugins/axios&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>  <span class="token comment">// T的类型</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
    avatar<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">info</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> http<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">request</span><span class="token generic class-name"><span class="token operator">&lt;</span>ResponseResult<span class="token operator">&lt;</span>User<span class="token operator">&gt;&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">//请求的时候的返回类型接口，同时确认T类型</span>
        url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">info</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span> info<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>T的类型由模拟数据中我们定义的T类型决定</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> MockMethod <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vite-plugin-mock'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    url<span class="token operator">:</span> <span class="token string">'/api/info'</span><span class="token punctuation">,</span>
    method<span class="token operator">:</span> <span class="token string">'get'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">response</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        code<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        message<span class="token operator">:</span> <span class="token string">'请求成功'</span><span class="token punctuation">,</span>
        type<span class="token operator">:</span> <span class="token string">'success'</span><span class="token punctuation">,</span>
        data<span class="token operator">:</span> <span class="token punctuation">{</span>   		<span class="token comment">//T类型要对应的结构</span>
          name<span class="token operator">:</span> <span class="token string">'vben'</span><span class="token punctuation">,</span>
          age<span class="token operator">:</span> <span class="token number">18</span><span class="token punctuation">,</span>
          avatar<span class="token operator">:</span> <span class="token string">'/avatar/xj.jpg'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span> <span class="token keyword">as</span> MockMethod<span class="token punctuation">[</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>这样配置完在<code>Axios.ts</code> 的<code>request</code>中返回的数据就有类型支持了</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token generic-function"><span class="token function">request</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>config<span class="token operator">:</span> AxiosRequestConfig<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//这里的T就是对应上面userApi.ts中info函数的类型ResponseResult&lt;User&gt;</span>
    <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">request</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>config<span class="token punctuation">)</span> <span class="token comment">//把实例返回类型定义为T，可以向上翻</span>
    <span class="token keyword">return</span> response<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>在<code>APP.vue</code>中测试</p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220226154904244.png" alt="image-20220226154904244"></p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220226154945286.png" alt="image-20220226154945286"></p> <p><strong>优化promise类型支持</strong></p> <p><code>userApi.ts</code>中 <code>http.request</code>简化为接口User ，这样用户就直接传用户要的数据，商品就直接传商品要的数据</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> http <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;../plugins/axios&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>  <span class="token comment">// T的类型</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
    avatar<span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">info</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> http<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">request</span><span class="token generic class-name"><span class="token operator">&lt;</span>User<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">//请求的时候的返回类型接口，同时确认T类型</span>
        url<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">info</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span> info<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>在Axios.ts中给request再添加一个泛型D，就是原来的<code>ResponseResult&lt;T&gt;</code>,这样更好理解</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code> <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token generic-function"><span class="token function">request</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span><span class="token constant">D</span> <span class="token operator">=</span> ResponseResult<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;&gt;</span></span></span><span class="token punctuation">(</span>config<span class="token operator">:</span> AxiosRequestConfig<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//发送axios请求,请求的是T类型，返回的也是T类型</span>
        <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">request</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">D</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>config<span class="token punctuation">)</span> 
        <span class="token keyword">return</span> response<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><strong>优化Axios.ts reqeust结构</strong>,返回类型为D类型</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token generic-function"><span class="token function">request</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span><span class="token constant">D</span> <span class="token operator">=</span> ResponseResult<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;&gt;</span></span></span><span class="token punctuation">(</span>config<span class="token operator">:</span> AxiosRequestConfig<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">D</span><span class="token operator">&gt;</span> <span class="token punctuation">{</span> <span class="token comment">//发送axios请求,请求的是T类型，返回的也是T类型</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span>resolve<span class="token punctuation">,</span>reject<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>instance<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">request</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">D</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token function">resolve</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_4-markdown编辑器"><a href="#_4-markdown编辑器" class="header-anchor">#</a> 4 markdown编辑器</h2> <p>推荐：https://www.wangeditor.com/</p> <h2 id="_5-v-model的值也可以用props传递"><a href="#_5-v-model的值也可以用props传递" class="header-anchor">#</a> 5.v-model的值也可以用props传递</h2> <p>https://v3.cn.vuejs.org/guide/component-custom-events.html#v-model-%E5%8F%82%E6%95%B0</p> <p>需要配合自定义事件emits更新父组件值</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Editor</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>content<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>300<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Editor</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">interface</span> <span class="token class-name">Iprops</span> <span class="token punctuation">{</span>
    modelValue<span class="token operator">?</span><span class="token operator">:</span> string
    height<span class="token operator">?</span><span class="token operator">:</span> number
<span class="token punctuation">}</span>
<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">withDefaults</span><span class="token punctuation">(</span>defineProps<span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span>Iprops<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    <span class="token literal-property property">modelValue</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    <span class="token literal-property property">height</span><span class="token operator">:</span> <span class="token number">500</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> emit <span class="token operator">=</span> <span class="token function">defineEmits</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'update:modelValue'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'update:modelValue'</span><span class="token punctuation">,</span>content<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_6-vue3中响应式数据无法正常渲染"><a href="#_6-vue3中响应式数据无法正常渲染" class="header-anchor">#</a> 6.vue3中响应式数据无法正常渲染</h2> <p>https://blog.alipay168.cn/index/detail/item/700.html</p> <p>①在reacetive里面再加一层，然后在html使用data.info.xxx即可</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//错误用法！！！！</span>
  <span class="token keyword">let</span> info <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">//动态获取后赋值,这样无法动态赋值</span>
  <span class="token function">http</span><span class="token punctuation">(</span>xxxx<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        info <span class="token operator">=</span> res<span class="token punctuation">.</span>data
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
    
    
 <span class="token comment">//正确用法</span>
 <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">info</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    
 <span class="token comment">//动态获取后赋值,这样即可动态绑定</span>
 <span class="token function">http</span><span class="token punctuation">(</span>xxxx<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
   data<span class="token punctuation">.</span>info <span class="token operator">=</span> res<span class="token punctuation">.</span>data
 <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>②把reactive改成ref，这种方式更简单，赋值的使用加上.value即可，绑定是用info.xxx即可：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> info <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

 <span class="token function">http</span><span class="token punctuation">(</span>xxxx<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      info<span class="token punctuation">.</span>value <span class="token operator">=</span> res<span class="token punctuation">.</span>data

 <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_7-表单数据"><a href="#_7-表单数据" class="header-anchor">#</a> 7.表单数据</h2> <p>表单数据应当放到一起，方便后续提交</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>		<span class="token keyword">const</span> form <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
            <span class="token literal-property property">category</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
            <span class="token literal-property property">tags</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">as</span> String<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">''</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_8-ref响应式变量可以自定义其类型"><a href="#_8-ref响应式变量可以自定义其类型" class="header-anchor">#</a> 8.ref响应式变量可以自定义其类型</h2> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">let</span> categorys <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">as</span> Ref<span class="token operator">&lt;</span>category<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
    categoryApi<span class="token punctuation">.</span><span class="token function">getCategory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>res <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    categorys<span class="token punctuation">.</span>value <span class="token operator">=</span> res
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_9-vue3-监听器"><a href="#_9-vue3-监听器" class="header-anchor">#</a> 9 vue3 监听器</h2> <p>基本上只用两种 watchEffect 和 watch</p> <p>https://v3.cn.vuejs.org/guide/reactivity-computed-watchers.html#%E8%B0%83%E8%AF%95-computed</p> <p><strong>watchEffect 会监听所有函数内用到的依赖</strong></p> <p>为了根据响应式状态<em>自动应用</em>和<em>重新应用</em>副作用，我们可以使用 <code>watchEffect</code> 函数。它立即执行传入的一个函数，同时响应式追踪其依赖，并在其依赖变更时重新运行该函数。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

<span class="token function">watchEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>count<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// -&gt; logs 0</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  count<span class="token punctuation">.</span>value<span class="token operator">++</span>
  <span class="token comment">// -&gt; logs 1</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>watch需要自己选择监听哪一个依赖,可以监听单个或者多个数据源</strong></p> <p>侦听器数据源可以是返回值的 getter 函数，也可以直接是 <code>ref</code>：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 侦听一个 getter</span>
<span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">count</span><span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">watch</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>count<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">count<span class="token punctuation">,</span> prevCount</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">/* ... */</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span>

<span class="token comment">// 直接侦听ref</span>
<span class="token keyword">const</span> count <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token function">watch</span><span class="token punctuation">(</span>count<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">count<span class="token punctuation">,</span> prevCount</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">/* ... */</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>侦听器还可以使用数组同时侦听多个源：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> firstName <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> lastName <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>

<span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">[</span>firstName<span class="token punctuation">,</span> lastName<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">newValues<span class="token punctuation">,</span> prevValues</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>newValues<span class="token punctuation">,</span> prevValues<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

firstName<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'John'</span> <span class="token comment">// logs: [&quot;John&quot;, &quot;&quot;] [&quot;&quot;, &quot;&quot;]</span>
lastName<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token string">'Smith'</span> <span class="token comment">// logs: [&quot;John&quot;, &quot;Smith&quot;] [&quot;John&quot;, &quot;&quot;]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="_10-分页"><a href="#_10-分页" class="header-anchor">#</a> 10 分页</h2> <p>https://www.yuque.com/docs/share/56658195-26fc-4f75-abd0-930a70c4b8df</p> <h2 id="_11-自定义命名空间"><a href="#_11-自定义命名空间" class="header-anchor">#</a> 11 自定义命名空间</h2> <p>https://element-plus.gitee.io/zh-CN/guide/namespace.html</p> <h2 id="_12-动画库"><a href="#_12-动画库" class="header-anchor">#</a> 12  动画库</h2> <p>animate.css 库</p> <p>新月使用animate库做了一个进入的闪动效果</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">:enter-active-class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>`animate__animated ${route.meta.transition}`<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Component<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_13-router-view"><a href="#_13-router-view" class="header-anchor">#</a> 13 router-view</h2> <p>router-view可以获取路由信息，和路由对应组件</p> <p>路由</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>	<span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'index'</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/views/index.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token literal-property property">meta</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">'首页'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">transition</span><span class="token operator">:</span> <span class="token string">'animate__fadeIn'</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>获取路由信息</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span> <span class="token attr-name">#default</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ route, Component }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>transition</span> <span class="token attr-name">:enter-active-class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>`animate__animated ${route.meta.transition}`<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component</span> <span class="token attr-name">:is</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Component<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component</span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>transition</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_14-路由权限校验"><a href="#_14-路由权限校验" class="header-anchor">#</a> 14 路由权限校验</h2> <p>在main.ts内进行路由权限校验</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code>router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>to<span class="token punctuation">,</span>from<span class="token punctuation">,</span>next<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> token <span class="token operator">=</span> store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>token
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>token<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>path <span class="token operator">!==</span> <span class="token string">'/login'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">{</span>path<span class="token operator">:</span> <span class="token string">'/login'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>to<span class="token punctuation">.</span>path <span class="token operator">===</span> <span class="token string">'/login'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token comment">// const userInfo = localStorage.getItem('mxg-msm-user')</span>
            <span class="token keyword">const</span> userInfo <span class="token operator">=</span> store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>user<span class="token punctuation">.</span>user
            <span class="token comment">// console.log(&quot;userInfo&quot;,userInfo)</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>userInfo<span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'GetUserInfo'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>response <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span>
                    <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">{</span>path<span class="token operator">:</span><span class="token string">'/login'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>error <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h2 id="_15-sass配置全局样式"><a href="#_15-sass配置全局样式" class="header-anchor">#</a> 15 Sass配置全局样式</h2> <p>sass具体用法https://developer.mozilla.org/zh-CN/docs/Web/CSS/Using_CSS_custom_properties</p> <p><strong>全局配置样式实现换肤</strong></p> <p>var定义变量， $major_color = var(--major_color)</p> <div class="language-scss line-numbers-mode"><pre class="language-scss"><code><span class="token comment">// 主色调</span>
<span class="token property"><span class="token variable">$major_color</span></span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--major_color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 字体颜色</span>
<span class="token property"><span class="token variable">$word_color</span></span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--word_color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 内容区颜色</span>
<span class="token property"><span class="token variable">$content_bg_color</span></span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--content_bg_color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 卡片颜色</span>
<span class="token property"><span class="token variable">$card_bg_color</span></span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--card_bg_color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// echarts 表的颜色</span>
<span class="token property"><span class="token variable">$echart_bg_color</span></span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--echart_bg_color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 导航条的背景颜色</span>
<span class="token property"><span class="token variable">$freshFruit_bg_color</span></span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--freshFruit_bg_color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 个人中心页的背景颜色</span>
<span class="token property"><span class="token variable">$userInfo_bg_color</span></span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--userInfo_bg_color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 个人中心页的标题颜色</span>
<span class="token property"><span class="token variable">$userInfo_title_color</span></span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--userInfo_title_color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// dialog 的背景颜色</span>
<span class="token property"><span class="token variable">$dialog_bg_color</span></span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--dialog_bg_color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 供应商页的展开表格的标题</span>
<span class="token property"><span class="token variable">$supplier_extend_bg_color</span></span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--supplier_extend_bg_color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 按钮背景颜色</span>
<span class="token property"><span class="token variable">$btn_bg_color</span></span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--btn_bg_color<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token selector">:root </span><span class="token punctuation">{</span>
  <span class="token property">--major_color</span><span class="token punctuation">:</span> #409EFF<span class="token punctuation">;</span>
  <span class="token property">--word_color</span><span class="token punctuation">:</span> #333333<span class="token punctuation">;</span>
  <span class="token property">--content_bg_color</span><span class="token punctuation">:</span> #ffffff<span class="token punctuation">;</span>
  <span class="token property">--card_bg_color</span><span class="token punctuation">:</span> #ffffff<span class="token punctuation">;</span>
  <span class="token property">--echart_bg_color</span><span class="token punctuation">:</span> #ffffff<span class="token punctuation">;</span>
  <span class="token property">--freshFruit_bg_color</span><span class="token punctuation">:</span> #313234<span class="token punctuation">;</span>
  <span class="token property">--userInfo_bg_color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>177<span class="token punctuation">,</span> 179<span class="token punctuation">,</span> 184<span class="token punctuation">,</span> .9<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--userInfo_title_color</span><span class="token punctuation">:</span> #555<span class="token punctuation">;</span>
  <span class="token property">--dialog_bg_color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> 255<span class="token punctuation">,</span> .9<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--supplier_extend_bg_color</span><span class="token punctuation">:</span> #eeeeee<span class="token punctuation">;</span>
  <span class="token property">--btn_bg_color</span><span class="token punctuation">:</span> #ecf5ff<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">html.dark </span><span class="token punctuation">{</span>
  <span class="token property">--major_color</span><span class="token punctuation">:</span> #000000<span class="token punctuation">;</span>
  <span class="token property">--word_color</span><span class="token punctuation">:</span> #eeeeee<span class="token punctuation">;</span>
  <span class="token property">--content_bg_color</span><span class="token punctuation">:</span> #525457<span class="token punctuation">;</span>
  <span class="token property">--card_bg_color</span><span class="token punctuation">:</span> #333333<span class="token punctuation">;</span>
  <span class="token property">--echart_bg_color</span><span class="token punctuation">:</span> #333333<span class="token punctuation">;</span>
  <span class="token property">--freshFruit_bg_color</span><span class="token punctuation">:</span> #313234<span class="token punctuation">;</span>
  <span class="token property">--userInfo_bg_color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>7<span class="token punctuation">,</span> 17<span class="token punctuation">,</span> 27<span class="token punctuation">,</span> .9<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--userInfo_title_color</span><span class="token punctuation">:</span> #999<span class="token punctuation">;</span>
  <span class="token property">--dialog_bg_color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>35<span class="token punctuation">,</span> 35<span class="token punctuation">,</span> 35<span class="token punctuation">,</span> .9<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--supplier_extend_bg_color</span><span class="token punctuation">:</span> #333333<span class="token punctuation">;</span>
  <span class="token property">--btn_bg_color</span><span class="token punctuation">:</span> #111111<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div><p><strong>使用Element-plus 实现换肤</strong></p> <p>https://element-plus.gitee.io/zh-CN/guide/dark-mode.html#%E9%80%9A%E8%BF%87-scss</p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220821150915690.png" alt="image-20220821150915690"></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> useDark<span class="token punctuation">,</span> useToggle <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@vueuse/core'</span>

<span class="token comment">// 夜间模式实现</span>
<span class="token keyword">const</span> isDark <span class="token operator">=</span> <span class="token function">useDark</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> toggleDark <span class="token operator">=</span> <span class="token function">useToggle</span><span class="token punctuation">(</span>isDark<span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>vite配置自动引入sass文件</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code>css<span class="token operator">:</span> <span class="token punctuation">{</span>
    preprocessorOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
      scss<span class="token operator">:</span> <span class="token punctuation">{</span>
        additionalData<span class="token operator">:</span> <span class="token string">'@import &quot;@/scss/base.scss&quot;;'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_16-vite生产环境图片处理"><a href="#_16-vite生产环境图片处理" class="header-anchor">#</a> 16 Vite生产环境图片处理</h2> <p>https://vitejs.cn/guide/assets.html</p> <p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import.meta" target="_blank" rel="noopener noreferrer">import.meta.url<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 是一个 ESM 的原生功能，会暴露当前模块的 URL。将它与原生的 <a href="https://developer.mozilla.org/en-US/docs/Web/API/URL" target="_blank" rel="noopener noreferrer">URL 构造器<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 组合使用，在一个 JavaScript 模块中，通过相对路径我们就能得到一个被完整解析的静态资源 URL：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>const imgUrl = new URL('./img.png', import.meta.url).href

document.getElementById('hero-img').src = imgUrl
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>这在现代浏览器中能够原生使用 - 实际上，Vite 并不需要在开发阶段处理这些代码！</p> <p>这个模式同样还可以通过字符串模板支持动态 URL：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>function getImageUrl(name) {
  return new URL(`./dir/${name}.png`, import.meta.url).href
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>在生产构建时，Vite 才会进行必要的转换保证 URL 在打包和资源哈希后仍指向正确的地址。</p> <p>import.meta 的 url 属性都是一个非常有用的属性。</p> <p>在浏览器中，import.meta.url 包含了对于目前 ES 模块的绝对 URL 路径。</p> <p>例如，我们定义一个模块叫 main.mjs 来输出 import.meta.url 的内容。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// main.mjs</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_17-配置不同环境base-url"><a href="#_17-配置不同环境base-url" class="header-anchor">#</a> 17 配置不同环境Base_URL</h2> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">let</span> <span class="token constant">GLOBAL_URL</span><span class="token operator">:</span> <span class="token builtin">string</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">import</span><span class="token punctuation">.</span>meta<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">MODE</span> <span class="token operator">===</span> <span class="token string">'development'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token constant">GLOBAL_URL</span> <span class="token operator">=</span> <span class="token string">''</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token constant">GLOBAL_URL</span> <span class="token operator">=</span> <span class="token string">''</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_18-构建表单类-封装element-plus表单所有操作"><a href="#_18-构建表单类-封装element-plus表单所有操作" class="header-anchor">#</a> 18 构建表单类，封装Element-plus表单所有操作</h2> <p><font color="red" size="3">结构</font></p> <p>在定义了表单校验的方法时，对应的项要加上prop进行校验</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-form</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialog__form<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>formRef<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:rules</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>formService.rules<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>formService.formInline<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialog__form__title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>今日数据<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-form-item</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>今日订单数量<span class="token punctuation">&quot;</span></span> <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sellNum<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialog__form__input<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>formService.formInline.sellNum<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>今日订单数<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-input</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-form-item</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-form-item</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>目标订单数量<span class="token punctuation">&quot;</span></span> <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>target<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialog__form__input<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>formService.formInline.target<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>今日目标订单数<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-input</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-form-item</span><span class="token punctuation">&gt;</span></span>

          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-form-item</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>今日销售总额<span class="token punctuation">&quot;</span></span> <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sellMoney<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialog__form__input<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>formService.formInline.sellMoney<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>今日销售额<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-input</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-form-item</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-form-item</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>目标销售总额<span class="token punctuation">&quot;</span></span> <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sellMoneyTarget<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialog__form__input<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>formService.formInline.sellMoneyTarget<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>今日目标销售额<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-input</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-form-item</span><span class="token punctuation">&gt;</span></span>

          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-form-item</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>今日成交订单<span class="token punctuation">&quot;</span></span> <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sellNumFinished<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialog__form__input<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>formService.formInline.sellNumFinished<span class="token punctuation">&quot;</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>今日成交订单<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-input</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-form-item</span><span class="token punctuation">&gt;</span></span>

          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>hr</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">height</span><span class="token punctuation">:</span> 1px<span class="token punctuation">;</span> <span class="token property">border</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span> <span class="token property">border-top</span><span class="token punctuation">:</span> 1px solid #999<span class="token punctuation">;</span> <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span> <span class="token property">margin-bottom</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span> <span class="token punctuation">/&gt;</span></span>

          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialog__form__title<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>本月目标<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-form-item</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>本周目标销售额<span class="token punctuation">&quot;</span></span> <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>weekSellMoneyTarget<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialog__form__input<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>formService.formInline.weekSellMoneyTarget<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>本周目标销售额<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-input</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-form-item</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-form-item</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>本月目标销售额<span class="token punctuation">&quot;</span></span> <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>monthSellMoneyTarget<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-input</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialog__form__input<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>formService.formInline.monthSellMoneyTarget<span class="token punctuation">&quot;</span></span>
              <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>本月目标销售额<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>number<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-input</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-form-item</span><span class="token punctuation">&gt;</span></span>

          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialog__form__buttons<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-form-item</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialog__form_button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>info<span class="token punctuation">&quot;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>large<span class="token punctuation">&quot;</span></span> <span class="token attr-name">round</span>
                <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>formService.resetForm(formRef)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>清空表单<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-form-item</span><span class="token punctuation">&gt;</span></span>

            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-form-item</span><span class="token punctuation">&gt;</span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-button</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dialog__form__button<span class="token punctuation">&quot;</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>large<span class="token punctuation">&quot;</span></span> <span class="token attr-name">round</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>submitForm()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>提交表单
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-button</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-form-item</span><span class="token punctuation">&gt;</span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-form</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div><p><font color="red" size="3">表单实例</font></p> <p>formRef就是表单dom，因为后面提交表单和重设表单都需要表单验证，表单验证必须要dom</p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220821155131362.png" alt="image-20220821155131362"></p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token comment">// 清空表单和提交表单的逻辑</span>
<span class="token keyword">const</span> formRef <span class="token operator">=</span> <span class="token generic-function"><span class="token function">ref</span><span class="token generic class-name"><span class="token operator">&lt;</span>FormInstance<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">//表单实例</span>
<span class="token keyword">const</span> formService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HeaderFormService</span><span class="token punctuation">(</span>formRef<span class="token punctuation">)</span> <span class="token comment">//保存表单数据和表单操作类</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><font color="red" size="3">表单类,要接收表单实例</font></p> <p>rules为表单校验规则</p> <p>formInline为表单各项数据</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">class</span> <span class="token class-name">HeaderFormService</span> <span class="token punctuation">{</span>
  formInline<span class="token operator">:</span> userInfoType
  rules<span class="token operator">:</span> Partial<span class="token operator">&lt;</span>Record<span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">,</span> Arrayable<span class="token operator">&lt;</span>FormItemRule<span class="token operator">&gt;&gt;&gt;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token keyword">public</span> formRef<span class="token operator">:</span> Ref<span class="token operator">&lt;</span>FormInstance <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>formRef <span class="token operator">=</span> formRef
    <span class="token comment">// 校验规则</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>rules <span class="token operator">=</span> <span class="token generic-function"><span class="token function">reactive</span><span class="token generic class-name"><span class="token operator">&lt;</span>FormRules<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      sellNum<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          type<span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
          required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          message<span class="token operator">:</span> <span class="token string">'请输入今日订单数'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      target<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          type<span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
          required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          message<span class="token operator">:</span> <span class="token string">'请输入今日目标订单数'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      sellMoney<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          type<span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
          required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          message<span class="token operator">:</span> <span class="token string">'请输入今日销售额'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      sellMoneyTarget<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          type<span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
          required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          message<span class="token operator">:</span> <span class="token string">'请输入今日目标销售额'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      weekSellMoneyTarget<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          type<span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
          required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          message<span class="token operator">:</span> <span class="token string">'请输入本周目标销售额'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      monthSellMoneyTarget<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          type<span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
          required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          message<span class="token operator">:</span> <span class="token string">'请输入本月目标销售额'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      sellNumFinished<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          type<span class="token operator">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
          required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          message<span class="token operator">:</span> <span class="token string">'请输入今日成交订单数'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>formInline <span class="token operator">=</span> <span class="token generic-function"><span class="token function">reactive</span><span class="token generic class-name"><span class="token operator">&lt;</span>userInfoType<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      sellNum<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      target<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      sellMoney<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      sellMoneyTarget<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      weekSellMoneyTarget<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      monthSellMoneyTarget<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      sellNumFinished<span class="token operator">:</span> <span class="token string">''</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 清空表单</span>
  <span class="token keyword">async</span> <span class="token function">resetForm</span><span class="token punctuation">(</span>formRef<span class="token operator">:</span> FormInstance <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>formRef<span class="token punctuation">)</span> <span class="token keyword">return</span>
    <span class="token keyword">await</span> formRef<span class="token punctuation">.</span><span class="token function">resetFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 提交表单</span>
  <span class="token keyword">async</span> <span class="token function">submitForm</span><span class="token punctuation">(</span>formRef<span class="token operator">:</span> FormInstance <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>formRef<span class="token punctuation">)</span> <span class="token keyword">return</span>
    <span class="token keyword">await</span> formRef<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">(</span>valid<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>valid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'weekSellMoneyTarget'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>formInline<span class="token punctuation">.</span>weekSellMoneyTarget<span class="token punctuation">)</span>
        localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'monthSellMoneyTarget'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>formInline<span class="token punctuation">.</span>monthSellMoneyTarget<span class="token punctuation">)</span>
        <span class="token function">req</span><span class="token punctuation">(</span><span class="token string">'/api/home/submitForm'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
          sellNum<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>formInline<span class="token punctuation">.</span>sellNum<span class="token punctuation">,</span>
          sellMoney<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>formInline<span class="token punctuation">.</span>sellMoney<span class="token punctuation">,</span>
          target<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>formInline<span class="token punctuation">.</span>target<span class="token punctuation">,</span>
          sellMoneyTarget<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>formInline<span class="token punctuation">.</span>sellMoneyTarget<span class="token punctuation">,</span>
          weekSellMoneyTarget<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>formInline<span class="token punctuation">.</span>weekSellMoneyTarget<span class="token punctuation">,</span>
          monthSellMoneyTarget<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>formInline<span class="token punctuation">.</span>monthSellMoneyTarget<span class="token punctuation">,</span>
          sellNumFinished<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>formInline<span class="token punctuation">.</span>sellNumFinished
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'POST'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>returnMsg <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>returnMsg<span class="token punctuation">.</span>errno <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            ElMessage<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              duration<span class="token operator">:</span> <span class="token number">2000</span><span class="token punctuation">,</span>
              message<span class="token operator">:</span> <span class="token string">'提交成功'</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            ElMessage<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
              duration<span class="token operator">:</span> <span class="token number">2000</span><span class="token punctuation">,</span>
              message<span class="token operator">:</span> <span class="token string">'你不是管理员'</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br></div></div><h2 id="_19-mitt插件进行非父子组件间通信"><a href="#_19-mitt插件进行非父子组件间通信" class="header-anchor">#</a> 19 mitt插件进行非父子组件间通信</h2> <p>安装</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token string-property property">&quot;mitt&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.0.0&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_20-suspense插槽等待页面加载完成"><a href="#_20-suspense插槽等待页面加载完成" class="header-anchor">#</a> 20 Suspense插槽等待页面加载完成</h2> <p>https://cn.vuejs.org/guide/built-ins/suspense.html#loading-state</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Suspense</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#default</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>router-view</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>router-view</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name">#fallback</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>loading<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
            加载中...
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Suspense</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><code>&lt;Suspense&gt;</code> 组件有两个插槽：<code>#default</code> 和 <code>#fallback</code>。两个插槽都只允许<strong>一个</strong>直接子节点。在可能的时候都将显示默认槽中的节点。否则将显示后备槽中的节点。</p> <p>在初始渲染时，<code>&lt;Suspense&gt;</code> 将在内存中渲染其默认的插槽内容。如果在这个过程中遇到任何异步依赖，则会进入<strong>挂起</strong>状态。在挂起状态期间，展示的是后备内容。当所有遇到的异步依赖都完成后，<code>&lt;Suspense&gt;</code> 会进入<strong>完成</strong>状态，并将展示出默认插槽的内容。</p> <p>如果在初次渲染时没有遇到异步依赖，<code>&lt;Suspense&gt;</code> 会直接进入完成状态。</p> <p>进入完成状态后，只有当默认插槽的根节点被替换时，<code>&lt;Suspense&gt;</code> 才会回到挂起状态。组件树中新的更深层次的异步依赖<strong>不会</strong>造成 <code>&lt;Suspense&gt;</code> 回退到挂起状态。</p> <p>发生回退时，后备内容不会立即展示出来。相反，<code>&lt;Suspense&gt;</code> 在等待新内容和异步依赖完成时，会展示之前 <code>#default</code> 插槽的内容。这个行为可以通过一个 <code>timeout</code> prop 进行配置：在等待渲染新内容耗时超过 <code>timeout</code> 之后，<code>&lt;Suspense&gt;</code> 将会切换为展示后备内容。若 <code>timeout</code> 值为 <code>0</code> 将导致在替换默认内容时立即显示后备内容。</p> <h2 id="_21-使用svg画一个圆"><a href="#_21-使用svg画一个圆" class="header-anchor">#</a> 21 使用SVG画一个圆</h2> <p>https://juejin.cn/post/7021791239791968264</p> <h2 id="_22-使用echart图表"><a href="#_22-使用echart图表" class="header-anchor">#</a> 22 使用echart图表</h2> <p>确定渲染位置</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>chartBox<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>定义图表类</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> req <span class="token keyword">from</span> <span class="token string">'../../../server/request'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useHomeStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../../../store/index'</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> echarts <span class="token keyword">from</span> <span class="token string">'echarts'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ref<span class="token punctuation">,</span> Ref <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>

<span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">useHomeStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">HomeService</span> <span class="token punctuation">{</span>
  SellChart<span class="token operator">:</span> echarts<span class="token punctuation">.</span>ECharts <span class="token operator">|</span> <span class="token keyword">undefined</span>
  isWeekChartShow<span class="token operator">:</span> Ref<span class="token operator">&lt;</span><span class="token builtin">boolean</span><span class="token operator">&gt;</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>SellChart <span class="token operator">=</span> <span class="token keyword">undefined</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>isWeekChartShow <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 进入 home 时获取所有 charts 数据</span>
  <span class="token keyword">public</span> <span class="token keyword">async</span> <span class="token function">getHomeData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">req</span><span class="token punctuation">(</span><span class="token string">'/api/home/index'</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>errno <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      store<span class="token punctuation">.</span><span class="token function">$patch</span><span class="token punctuation">(</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        state<span class="token punctuation">.</span>reqObj <span class="token operator">=</span> result<span class="token punctuation">.</span>data
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 切换图例的 周/月 显示</span>
<span class="token keyword">public</span> <span class="token function">toggle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>isWeekChartShow<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    echarts<span class="token punctuation">.</span><span class="token function">getInstanceByDom</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.chartBox'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> HTMLElement<span class="token punctuation">)</span><span class="token operator">!</span><span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">showMonthChart</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>isWeekChartShow<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">false</span>
      <span class="token punctuation">;</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>HTMLElement<span class="token operator">&gt;</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.toggle'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'切换为周'</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    echarts<span class="token punctuation">.</span><span class="token function">getInstanceByDom</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.chartBox'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> HTMLElement<span class="token punctuation">)</span><span class="token operator">!</span><span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">showWeekChart</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>isWeekChartShow<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span>
      <span class="token punctuation">;</span> <span class="token punctuation">(</span><span class="token operator">&lt;</span>HTMLElement<span class="token operator">&gt;</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.toggle'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token string">'切换为月'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

  <span class="token comment">// 显示周销售图</span>
  <span class="token keyword">public</span> <span class="token function">showWeekChart</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>SellChart <span class="token operator">=</span> echarts<span class="token punctuation">.</span><span class="token function">getInstanceByDom</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.chartBox'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> HTMLElement<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>SellChart<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>SellChart<span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>SellChart <span class="token operator">=</span> echarts<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.chartBox'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> HTMLElement<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>SellChart<span class="token punctuation">.</span><span class="token function">setOption</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token punctuation">{</span>
        text<span class="token operator">:</span> <span class="token string">'订单数图示'</span><span class="token punctuation">,</span>
        textStyle<span class="token operator">:</span> <span class="token punctuation">{</span>
          color<span class="token operator">:</span> <span class="token string">'#888'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      tooltip<span class="token operator">:</span> <span class="token punctuation">{</span>
        trigger<span class="token operator">:</span> <span class="token string">'axis'</span><span class="token punctuation">,</span>
        axisPointer<span class="token operator">:</span> <span class="token punctuation">{</span>
          type<span class="token operator">:</span> <span class="token string">'cross'</span><span class="token punctuation">,</span>
          label<span class="token operator">:</span> <span class="token punctuation">{</span>
            backgroundColor<span class="token operator">:</span> <span class="token string">'#6a7985'</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      legend<span class="token operator">:</span> <span class="token punctuation">{</span>
        data<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'订单数量'</span><span class="token punctuation">,</span> <span class="token string">'成交订单'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        textStyle<span class="token operator">:</span> <span class="token punctuation">{</span>
          color<span class="token operator">:</span> <span class="token string">'#999'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      grid<span class="token operator">:</span> <span class="token punctuation">{</span>
        left<span class="token operator">:</span> <span class="token string">'3%'</span><span class="token punctuation">,</span>
        right<span class="token operator">:</span> <span class="token string">'4%'</span><span class="token punctuation">,</span>
        bottom<span class="token operator">:</span> <span class="token string">'3%'</span><span class="token punctuation">,</span>
        containLabel<span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      xAxis<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          type<span class="token operator">:</span> <span class="token string">'category'</span><span class="token punctuation">,</span>
          boundaryGap<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          data<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'周一'</span><span class="token punctuation">,</span> <span class="token string">'周二'</span><span class="token punctuation">,</span> <span class="token string">'周三'</span><span class="token punctuation">,</span> <span class="token string">'周四'</span><span class="token punctuation">,</span> <span class="token string">'周五'</span><span class="token punctuation">,</span> <span class="token string">'周六'</span><span class="token punctuation">,</span> <span class="token string">'周日'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      yAxis<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          type<span class="token operator">:</span> <span class="token string">'value'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      series<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          name<span class="token operator">:</span> <span class="token string">'订单数量'</span><span class="token punctuation">,</span>
          type<span class="token operator">:</span> <span class="token string">'line'</span><span class="token punctuation">,</span>
          areaStyle<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
          label<span class="token operator">:</span> <span class="token punctuation">{</span>
            show<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            position<span class="token operator">:</span> <span class="token string">'top'</span><span class="token punctuation">,</span>
            color<span class="token operator">:</span> <span class="token string">'#999'</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          emphasis<span class="token operator">:</span> <span class="token punctuation">{</span>
            focus<span class="token operator">:</span> <span class="token string">'series'</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          data<span class="token operator">:</span> store<span class="token punctuation">.</span>reqObj<span class="token punctuation">.</span>weekOrderNumTotal
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          name<span class="token operator">:</span> <span class="token string">'成交订单'</span><span class="token punctuation">,</span>
          type<span class="token operator">:</span> <span class="token string">'line'</span><span class="token punctuation">,</span>
          areaStyle<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
          label<span class="token operator">:</span> <span class="token punctuation">{</span>
            show<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            position<span class="token operator">:</span> <span class="token string">'top'</span><span class="token punctuation">,</span>
            color<span class="token operator">:</span> <span class="token string">'#999'</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          emphasis<span class="token operator">:</span> <span class="token punctuation">{</span>
            focus<span class="token operator">:</span> <span class="token string">'series'</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          data<span class="token operator">:</span> store<span class="token punctuation">.</span>reqObj<span class="token punctuation">.</span>weekOrderNumFinishedTotal
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 显示月销售图</span>
  <span class="token keyword">public</span> <span class="token function">showMonthChart</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>SellChart <span class="token operator">=</span> echarts<span class="token punctuation">.</span><span class="token function">getInstanceByDom</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.chartBox'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> HTMLElement<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>SellChart<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>SellChart<span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>SellChart <span class="token operator">=</span> echarts<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.chartBox'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> HTMLElement<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>SellChart<span class="token punctuation">.</span><span class="token function">setOption</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      title<span class="token operator">:</span> <span class="token punctuation">{</span>
        text<span class="token operator">:</span> <span class="token string">'订单数图示'</span><span class="token punctuation">,</span>
        textStyle<span class="token operator">:</span> <span class="token punctuation">{</span>
          color<span class="token operator">:</span> <span class="token string">'#888'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      tooltip<span class="token operator">:</span> <span class="token punctuation">{</span>
        trigger<span class="token operator">:</span> <span class="token string">'axis'</span><span class="token punctuation">,</span>
        axisPointer<span class="token operator">:</span> <span class="token punctuation">{</span>
          type<span class="token operator">:</span> <span class="token string">'cross'</span><span class="token punctuation">,</span>
          label<span class="token operator">:</span> <span class="token punctuation">{</span>
            backgroundColor<span class="token operator">:</span> <span class="token string">'#6a7985'</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      legend<span class="token operator">:</span> <span class="token punctuation">{</span>
        data<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'订单数量'</span><span class="token punctuation">,</span> <span class="token string">'成交订单'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        textStyle<span class="token operator">:</span> <span class="token punctuation">{</span>
          color<span class="token operator">:</span> <span class="token string">'#999'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      grid<span class="token operator">:</span> <span class="token punctuation">{</span>
        left<span class="token operator">:</span> <span class="token string">'3%'</span><span class="token punctuation">,</span>
        right<span class="token operator">:</span> <span class="token string">'4%'</span><span class="token punctuation">,</span>
        bottom<span class="token operator">:</span> <span class="token string">'3%'</span><span class="token punctuation">,</span>
        containLabel<span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      xAxis<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          type<span class="token operator">:</span> <span class="token string">'category'</span><span class="token punctuation">,</span>
          boundaryGap<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          data<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'1日'</span><span class="token punctuation">,</span> <span class="token string">'2日'</span><span class="token punctuation">,</span> <span class="token string">'3日'</span><span class="token punctuation">,</span> <span class="token string">'4日'</span><span class="token punctuation">,</span> <span class="token string">'5日'</span><span class="token punctuation">,</span> <span class="token string">'6日'</span><span class="token punctuation">,</span> <span class="token string">'7日'</span><span class="token punctuation">,</span> <span class="token string">'8日'</span><span class="token punctuation">,</span> <span class="token string">'9日'</span><span class="token punctuation">,</span> <span class="token string">'10日'</span><span class="token punctuation">,</span> <span class="token string">'11日'</span><span class="token punctuation">,</span> <span class="token string">'12日'</span><span class="token punctuation">,</span> <span class="token string">'13日'</span><span class="token punctuation">,</span> <span class="token string">'14日'</span><span class="token punctuation">,</span> <span class="token string">'15日'</span><span class="token punctuation">,</span> <span class="token string">'16日'</span><span class="token punctuation">,</span> <span class="token string">'17日'</span><span class="token punctuation">,</span> <span class="token string">'18日'</span><span class="token punctuation">,</span> <span class="token string">'19日'</span><span class="token punctuation">,</span> <span class="token string">'20日'</span><span class="token punctuation">,</span> <span class="token string">'21日'</span><span class="token punctuation">,</span> <span class="token string">'22日'</span><span class="token punctuation">,</span> <span class="token string">'23日'</span><span class="token punctuation">,</span> <span class="token string">'24日'</span><span class="token punctuation">,</span> <span class="token string">'25日'</span><span class="token punctuation">,</span> <span class="token string">'26日'</span><span class="token punctuation">,</span> <span class="token string">'27日'</span><span class="token punctuation">,</span> <span class="token string">'28日'</span><span class="token punctuation">,</span> <span class="token string">'29日'</span><span class="token punctuation">,</span> <span class="token string">'30日'</span><span class="token punctuation">,</span> <span class="token string">'31日'</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      yAxis<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          type<span class="token operator">:</span> <span class="token string">'value'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      series<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          name<span class="token operator">:</span> <span class="token string">'订单数量'</span><span class="token punctuation">,</span>
          type<span class="token operator">:</span> <span class="token string">'line'</span><span class="token punctuation">,</span>
          stack<span class="token operator">:</span> <span class="token string">'Total'</span><span class="token punctuation">,</span>
          areaStyle<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
          label<span class="token operator">:</span> <span class="token punctuation">{</span>
            show<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            position<span class="token operator">:</span> <span class="token string">'top'</span><span class="token punctuation">,</span>
            color<span class="token operator">:</span> <span class="token string">'#999'</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          emphasis<span class="token operator">:</span> <span class="token punctuation">{</span>
            focus<span class="token operator">:</span> <span class="token string">'series'</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          data<span class="token operator">:</span> store<span class="token punctuation">.</span>reqObj<span class="token punctuation">.</span>monthOrderNumTotal
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          name<span class="token operator">:</span> <span class="token string">'成交订单'</span><span class="token punctuation">,</span>
          type<span class="token operator">:</span> <span class="token string">'line'</span><span class="token punctuation">,</span>
          stack<span class="token operator">:</span> <span class="token string">'Total'</span><span class="token punctuation">,</span>
          areaStyle<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
          label<span class="token operator">:</span> <span class="token punctuation">{</span>
            show<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            position<span class="token operator">:</span> <span class="token string">'top'</span><span class="token punctuation">,</span>
            color<span class="token operator">:</span> <span class="token string">'#999'</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          emphasis<span class="token operator">:</span> <span class="token punctuation">{</span>
            focus<span class="token operator">:</span> <span class="token string">'series'</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          data<span class="token operator">:</span> store<span class="token punctuation">.</span>reqObj<span class="token punctuation">.</span>monthOrderNumFinishedTotal
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token punctuation">{</span>
  HomeService
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br></div></div><p>调用指定方法渲染图表</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// // 向服务端请求主页的所有数据，并将之保存到 pinia 中</span>
<span class="token keyword">const</span> homeService <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HomeService</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">await</span> homeService<span class="token punctuation">.</span><span class="token function">getHomeData</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  homeService<span class="token punctuation">.</span><span class="token function">showWeekChart</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  homeService<span class="token punctuation">.</span>isWeekChartShow<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_23-element-plus表格"><a href="#_23-element-plus表格" class="header-anchor">#</a> 23 Element-plus表格</h2> <blockquote><p>el表单中prop是校验，表格中prop是字段名</p></blockquote> <h2 id="_24-使用svg图标"><a href="#_24-使用svg图标" class="header-anchor">#</a> 24 使用Svg图标</h2> <p>定义svg组件,接收prop来决定显示什么图标，我传了上下箭头</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>svg</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>icon<span class="token punctuation">&quot;</span></span> <span class="token attr-name">aria-hidden</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>use</span> <span class="token attr-name">:xlink:href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>prop.xlinkHref<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>use</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>svg</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">'</span>ts<span class="token punctuation">'</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">const</span> prop <span class="token operator">=</span> defineProps<span class="token operator">&lt;</span><span class="token punctuation">{</span>
  <span class="token literal-property property">xlinkHref</span><span class="token operator">:</span> string
<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">scoped</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.icon</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 1em<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 1em<span class="token punctuation">;</span>
  <span class="token property">vertical-align</span><span class="token punctuation">:</span> -0.15em<span class="token punctuation">;</span>
  <span class="token property">fill</span><span class="token punctuation">:</span> currentColor<span class="token punctuation">;</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p><code>&lt;use&gt;</code>标记的作用是能从SVG文档内部取出一个节点，克隆它，并把它输出到别处。跟‘引用’很相似，但它是深度克隆。</p> <h2 id="_25-elemnt-plus格式化表格数据"><a href="#_25-elemnt-plus格式化表格数据" class="header-anchor">#</a> 25 elemnt-plus格式化表格数据</h2> <div class="language-html line-numbers-mode"><pre class="language-html"><code>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table-column</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>发布时间<span class="token punctuation">&quot;</span></span> <span class="token attr-name">min-width</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>150<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:formatter</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>formatTime<span class="token punctuation">&quot;</span></span> <span class="token attr-name">prop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>time<span class="token punctuation">&quot;</span></span> <span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table-column</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">let</span> <span class="token function-variable function">formatTime</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">row</span><span class="token operator">:</span>any<span class="token punctuation">,</span> <span class="token literal-property property">column</span><span class="token operator">:</span>any</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> time <span class="token operator">=</span> row<span class="token punctuation">[</span>column<span class="token punctuation">.</span>property<span class="token punctuation">]</span>
    <span class="token keyword">let</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token function">Number</span><span class="token punctuation">(</span>time<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> <span class="token constant">Y</span> <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'-'</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> <span class="token constant">M</span> <span class="token operator">=</span> <span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token operator">?</span> <span class="token string">'0'</span> <span class="token operator">+</span> <span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">:</span> date<span class="token punctuation">.</span><span class="token function">getMonth</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'-'</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> <span class="token constant">D</span> <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">getDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">' '</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> h <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">getHours</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">':'</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> m <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">getMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">':'</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> s <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">getSeconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token constant">Y</span> <span class="token operator">+</span> <span class="token constant">M</span> <span class="token operator">+</span> <span class="token constant">D</span> <span class="token operator">+</span> h <span class="token operator">+</span> m <span class="token operator">+</span> s<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="_26-预览图片"><a href="#_26-预览图片" class="header-anchor">#</a> 26 预览图片</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>:preview-teleported=&quot;true&quot; 可以将图片插入到body元素上，这样可以消除层叠问题
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>el<span class="token operator">-</span>image <span class="token operator">:</span>preview<span class="token operator">-</span>teleported<span class="token operator">=</span><span class="token string">&quot;true&quot;</span> style<span class="token operator">=</span><span class="token string">&quot;width: 100px; height: 100px&quot;</span> <span class="token operator">:</span>src<span class="token operator">=</span><span class="token string">&quot;getImgUrl(scope.$index, scope.row)&quot;</span> <span class="token operator">:</span>preview<span class="token operator">-</span>src<span class="token operator">-</span>list<span class="token operator">=</span><span class="token string">&quot;[getImgUrl(scope.$index, scope.row)!]&quot;</span>
                        <span class="token operator">:</span>initial<span class="token operator">-</span>index<span class="token operator">=</span><span class="token string">&quot;0&quot;</span> fit<span class="token operator">=</span><span class="token string">&quot;cover&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>el<span class="token operator">-</span>image<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_27-splice小点"><a href="#_27-splice小点" class="header-anchor">#</a> 27  splice小点</h2> <p>注意<code>Array.prototype.splice</code>方法返回的是切割出去的部分，会改变原数组</p> <h2 id="_28-vue3-vue2-ref区别"><a href="#_28-vue3-vue2-ref区别" class="header-anchor">#</a> 28 vue3 vue2 ref区别</h2> <p>vue2</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tab</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tab<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tab<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tab</span><span class="token punctuation">&gt;</span></span>
this.$refs.tab.isFixed = true;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>vue3</p> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tableRef<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:row-key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getRowKey<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>el-table</span><span class="token punctuation">&gt;</span></span>
const tableRef = ref&lt;InstanceType<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>typeof</span> <span class="token attr-name">ElTable</span><span class="token punctuation">&gt;</span></span>&gt;()

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_29-el-pagination-实现分页"><a href="#_29-el-pagination-实现分页" class="header-anchor">#</a> 29 el-pagination 实现分页</h2> <p>计算对应数据</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>postsData<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">(</span>currentPage <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> pageSize<span class="token punctuation">,</span> currentPage <span class="token operator">*</span> pageSize<span class="token punctuation">)</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-vue line-numbers-mode"><pre class="language-vue"><code>表单
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table</span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>postsData.slice((currentPage - 1) * pageSize, currentPage * pageSize)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">highlight-current-row</span>
                <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tableRef<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:row-key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getRowKey<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>

    分页组件
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-pagination</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pagination__content<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">v-model:</span>currentPage</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>currentPage<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:page-size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pageSize<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name">background</span> <span class="token attr-name">layout</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>prev, pager, next, jumper<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:total</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>postsData.length<span class="token punctuation">&quot;</span></span>
                <span class="token attr-name"><span class="token namespace">@update:</span>current-page</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleCurrentPageChange<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:pager-count</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>15<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_30-使用element-plus引入组件实例问题"><a href="#_30-使用element-plus引入组件实例问题" class="header-anchor">#</a> 30 使用element-plus引入组件实例问题</h2> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> ElTable <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'element-plus'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> tableRef <span class="token operator">=</span> <span class="token generic-function"><span class="token function">ref</span><span class="token generic class-name"><span class="token operator">&lt;</span>InstanceType<span class="token operator">&lt;</span><span class="token keyword">typeof</span> ElTable<span class="token operator">&gt;&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> FormInstance <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'element-plus'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> editFormRef <span class="token operator">=</span> <span class="token generic-function"><span class="token function">ref</span><span class="token generic class-name"><span class="token operator">&lt;</span>FormInstance<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>使用ElTable时引入的是ElTable的类型，不知道为啥要这样设计</p> <h2 id="_31-搜索框搜索指定内容"><a href="#_31-搜索框搜索指定内容" class="header-anchor">#</a> 31 搜索框搜索指定内容</h2> <p>使用computed计算属性配合filter方法</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//搜索指定分类标签</span>
<span class="token keyword">const</span> search <span class="token operator">=</span> ref<span class="token operator">&lt;</span>string<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> filterTableData <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>postsData<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//如果输入框有内容，也有对应的分类标签</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>search<span class="token punctuation">.</span>value <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>search<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>cname<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> search<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>tname<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> search<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>tname<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//如果输入框有内容，没有对应的分类标签</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>search<span class="token punctuation">.</span>value <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span><span class="token operator">!</span>search<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>cname<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token operator">!</span>search<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>tname<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token operator">!</span>search<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>tname<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//如果输入框没内容</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>search<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>el-table</span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>filterTableData.slice((currentPage - 1) * pageSize, currentPage * pageSize)<span class="token punctuation">&quot;</span></span> <span class="token attr-name">border</span>
            <span class="token attr-name">highlight-current-row</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>tableRef<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:row-key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getRowKey<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@current-change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleCurrentChange<span class="token punctuation">&quot;</span></span>
            <span class="token attr-name">@selection-change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleSelectionChange<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_32-深度选择器使用"><a href="#_32-深度选择器使用" class="header-anchor">#</a> 32 深度选择器使用</h2> <p>前言，组件使用了scope就会为样式添加唯一标识符</p> <p>这里想要修改<code>v-html</code>中<code>img</code>样式的方法,有两种</p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220826221216935.png" alt="image-20220826221216935"></p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220826220328382.png" alt="image-20220826220328382"></p> <p>写样式不仅仅是要看HTML文档结构，还要看Dom结构，观察唯一标识符</p> <p>方法一，在父组件中写，父组件本身虽然有两个唯一标识符，但是是可以通过deep改子组件样式的</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code>
<span class="token selector">.test</span> <span class="token punctuation">{</span>
    <span class="token selector">:deep(.form__content)</span> <span class="token punctuation">{</span>
        <span class="token property">background-color</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
        <span class="token selector">img</span> <span class="token punctuation">{</span>
            <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
            <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>方法二，在子组件中写,因为<code>form_content</code>的子元素唯一标识符不一样了，可以使用deep改</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code>   <span class="token selector">&amp;__content</span> <span class="token punctuation">{</span>
         <span class="token selector">:deep(img)</span> <span class="token punctuation">{</span>
             <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
            <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
     <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h1 id="web后端问题整合"><a href="#web后端问题整合" class="header-anchor">#</a> web后端问题整合</h1> <h2 id="axios-get与post请求"><a href="#axios-get与post请求" class="header-anchor">#</a> axios get与post请求</h2> <ul><li>get请求传请求参数用params</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code> http<span class="token punctuation">.</span>request<span class="token operator">&lt;</span>User<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token comment">//请求的时候的返回类型接口，同时确认T类型</span>
     <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'xxx'</span><span class="token punctuation">,</span>
     <span class="token literal-property property">params</span><span class="token operator">:</span> <span class="token punctuation">{</span>
         <span class="token literal-property property">phone</span><span class="token operator">:</span> <span class="token string">&quot;admin&quot;</span><span class="token punctuation">,</span>
         <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">&quot;123&quot;</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>express后端通过req.query 获取请求参数</p> <p>因为get请求参数是放在url上的，所以登录这种功能不要用get请求，这样会明文暴露登录账号密码</p> <ul><li>post请求传请求体用data，传请求参数用params</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">return</span> http<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'toRegister'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">phone</span><span class="token operator">:</span> <span class="token string">&quot;admin2&quot;</span><span class="token punctuation">,</span>
        <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">&quot;123&quot;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>express后端通过req.body获取请求体，req.params获取请求参数</p> <h2 id="富文本编辑器上传图片到后端保存"><a href="#富文本编辑器上传图片到后端保存" class="header-anchor">#</a> 富文本编辑器上传图片到后端保存</h2> <p>我使用express中的插件multer</p> <p>前端用的wangeditor富文本编辑器的上传图片功能，后端express使用了<code>multer</code>中间件，上传的时候一直报服务器500的错，反复检查代码查看<code>multer</code>文档，终于发现了问题。</p> <p><strong>一般上传图片都是要 使用form-data，把图片放入到form-data中上传</strong>，刚好wangeditor就内置好了，只需要简单设置一下属性名</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>editorConfig<span class="token punctuation">.</span><span class="token constant">MENU_CONF</span><span class="token punctuation">[</span><span class="token string">'uploadImage'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// form-data fieldName ，默认值 'wangeditor-uploaded-image'</span>
    <span class="token literal-property property">fieldName</span><span class="token operator">:</span> <span class="token string">'your-custom-name'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>关键点来了，在multer中接收图片时，属性名必须和这里一致</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&quot;/uploadImgWeb&quot;</span><span class="token punctuation">,</span> upload<span class="token punctuation">.</span><span class="token function">array</span><span class="token punctuation">(</span><span class="token string">'your-custom-name'</span><span class="token punctuation">,</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res<span class="token punctuation">,</span>err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h1 id="linux问题"><a href="#linux问题" class="header-anchor">#</a> Linux问题</h1> <h2 id="配置mongodb环境"><a href="#配置mongodb环境" class="header-anchor">#</a> 配置mongodb环境</h2> <p>参考文章：https://blog.csdn.net/qq_39314291/article/details/112561177</p> <p>参考文章：https://m.51sjk.com/b8b334833/</p> <p><strong>问题：not authorized on admin to execute command</strong></p> <p>没有给数据库得user添加权限，导致无法查看数据表</p> <p>https://blog.csdn.net/chongke5244/article/details/100736604</p> <p><strong>问题：创建数据库后不显示，</strong></p> <p>创建集合后就显示了，另外给每个数据库设置用户和密码，这样就可以防止别人登陆了</p> <p><strong>问题：连接不上自己创建得数据库</strong></p> <p>我们先给自创得数据库添加用户，权限就赋予一个数据库拥有者</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>test<span class="token operator">&gt;</span> use writersgang
switched to db writersgang
writersgang<span class="token operator">&gt;</span> db<span class="token punctuation">.</span><span class="token function">createUser</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">'kxz'</span><span class="token punctuation">,</span> <span class="token literal-property property">pwd</span><span class="token operator">:</span> <span class="token string">'oooooo'</span><span class="token punctuation">,</span> <span class="token literal-property property">roles</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">role</span><span class="token operator">:</span> <span class="token string">'dbOwner'</span><span class="token punctuation">,</span> <span class="token literal-property property">db</span><span class="token operator">:</span> <span class="token string">'writersgang'</span> <span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token literal-property property">ok</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
writersgang<span class="token operator">&gt;</span> db<span class="token punctuation">.</span><span class="token function">createCollection</span><span class="token punctuation">(</span><span class="token string">&quot;runoob&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span> <span class="token literal-property property">ok</span><span class="token operator">:</span> <span class="token number">1</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>然后就可以用mongodb拼接用户名密码连接</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>mongoose<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&quot;mongodb://kxz:oooooo@121.37.201.127:27017/writersgang&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;数据库连接成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;数据库连接失败&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="服务端部署到宝塔面板"><a href="#服务端部署到宝塔面板" class="header-anchor">#</a> 服务端部署到宝塔面板</h2> <p>参考文章：https://www.php.cn/topic/bt/497167.html</p> <h2 id="前后端上线问题"><a href="#前后端上线问题" class="header-anchor">#</a> 前后端上线问题</h2> <p>后端跨域只允许了127.0.0.1 和 我的电脑ip</p> <p>如果别人登陆我的小程序，那我需要先把小程序上线，拿到小程序的线上ip地址，在后端配置允许跨域</p> <p>如果前端拿到的数据库不对，记得要去服务端改一下</p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20221207212706422.png" alt="image-20221207212706422"></p> <h2 id="跨域cookie失效问题"><a href="#跨域cookie失效问题" class="header-anchor">#</a> 跨域cookie失效问题</h2> <p>https://blog.csdn.net/qq_61672548/article/details/127812833</p> <p>建议使用nginx，或者别用cookie了，jwt不香嘛？</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/项目/作家/后端问题.html" class="prev">
        后端问题
      </a></span> <span class="next"><a href="/docs/项目/前端脚手架项目/初始项目.html">
        初始项目
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.9351438b.js" defer></script><script src="/docs/assets/js/2.4eec09cd.js" defer></script><script src="/docs/assets/js/1177.30974d7f.js" defer></script>
  </body>
</html>
