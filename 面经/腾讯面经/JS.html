<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JS | 木可生森</title>
    <meta name="generator" content="VuePress 1.9.2">
    <link rel="icon" href="/docs/img/logo.jpg">
    <meta name="description" content="瞧一瞧，看一看">
    
    <link rel="preload" href="/docs/assets/css/0.styles.1fca6052.css" as="style"><link rel="preload" href="/docs/assets/js/app.9351438b.js" as="script"><link rel="preload" href="/docs/assets/js/2.4eec09cd.js" as="script"><link rel="preload" href="/docs/assets/js/1143.8950e995.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.e01ca1a3.js"><link rel="prefetch" href="/docs/assets/js/100.c46df915.js"><link rel="prefetch" href="/docs/assets/js/1000.c783124f.js"><link rel="prefetch" href="/docs/assets/js/1001.a37e0ca3.js"><link rel="prefetch" href="/docs/assets/js/1002.fba979d1.js"><link rel="prefetch" href="/docs/assets/js/1003.985c1713.js"><link rel="prefetch" href="/docs/assets/js/1004.3bf496c2.js"><link rel="prefetch" href="/docs/assets/js/1005.d8e92759.js"><link rel="prefetch" href="/docs/assets/js/1006.ac2f448a.js"><link rel="prefetch" href="/docs/assets/js/1007.e94d814d.js"><link rel="prefetch" href="/docs/assets/js/1008.30e56b91.js"><link rel="prefetch" href="/docs/assets/js/1009.8b8c1bbf.js"><link rel="prefetch" href="/docs/assets/js/101.63ed5b82.js"><link rel="prefetch" href="/docs/assets/js/1010.bc6e611b.js"><link rel="prefetch" href="/docs/assets/js/1011.c383ed0e.js"><link rel="prefetch" href="/docs/assets/js/1012.0b9a5099.js"><link rel="prefetch" href="/docs/assets/js/1013.7e842d1d.js"><link rel="prefetch" href="/docs/assets/js/1014.d9c9cd4b.js"><link rel="prefetch" href="/docs/assets/js/1015.51347c1a.js"><link rel="prefetch" href="/docs/assets/js/1016.9b1397c9.js"><link rel="prefetch" href="/docs/assets/js/1017.11f23546.js"><link rel="prefetch" href="/docs/assets/js/1018.593a14af.js"><link rel="prefetch" href="/docs/assets/js/1019.1f683ac2.js"><link rel="prefetch" href="/docs/assets/js/102.236793de.js"><link rel="prefetch" href="/docs/assets/js/1020.5115d101.js"><link rel="prefetch" href="/docs/assets/js/1021.e440fd5c.js"><link rel="prefetch" href="/docs/assets/js/1022.d2e8ef3e.js"><link rel="prefetch" href="/docs/assets/js/1023.9ed138e1.js"><link rel="prefetch" href="/docs/assets/js/1024.41c64cd0.js"><link rel="prefetch" href="/docs/assets/js/1025.1bb8fab3.js"><link rel="prefetch" href="/docs/assets/js/1026.c1c7ecbc.js"><link rel="prefetch" href="/docs/assets/js/1027.801c4d62.js"><link rel="prefetch" href="/docs/assets/js/1028.908dbc45.js"><link rel="prefetch" href="/docs/assets/js/1029.027e11d6.js"><link rel="prefetch" href="/docs/assets/js/103.7f0f3f5c.js"><link rel="prefetch" href="/docs/assets/js/1030.614dc5cb.js"><link rel="prefetch" href="/docs/assets/js/1031.6bf622b4.js"><link rel="prefetch" href="/docs/assets/js/1032.b984395c.js"><link rel="prefetch" href="/docs/assets/js/1033.6fdcbddf.js"><link rel="prefetch" href="/docs/assets/js/1034.c9d346bb.js"><link rel="prefetch" href="/docs/assets/js/1035.9e214225.js"><link rel="prefetch" href="/docs/assets/js/1036.244451eb.js"><link rel="prefetch" href="/docs/assets/js/1037.ded6c19b.js"><link rel="prefetch" href="/docs/assets/js/1038.5854bf5a.js"><link rel="prefetch" href="/docs/assets/js/1039.8e5d8b03.js"><link rel="prefetch" href="/docs/assets/js/104.1b550121.js"><link rel="prefetch" href="/docs/assets/js/1040.c0ba78b6.js"><link rel="prefetch" href="/docs/assets/js/1041.9118ae65.js"><link rel="prefetch" href="/docs/assets/js/1042.9eb58334.js"><link rel="prefetch" href="/docs/assets/js/1043.e206c726.js"><link rel="prefetch" href="/docs/assets/js/1044.43c496a5.js"><link rel="prefetch" href="/docs/assets/js/1045.a1dddf09.js"><link rel="prefetch" href="/docs/assets/js/1046.267c671d.js"><link rel="prefetch" href="/docs/assets/js/1047.90e84c4d.js"><link rel="prefetch" href="/docs/assets/js/1048.9c76ad24.js"><link rel="prefetch" href="/docs/assets/js/1049.aa0ac9e5.js"><link rel="prefetch" href="/docs/assets/js/105.2b4a0516.js"><link rel="prefetch" href="/docs/assets/js/1050.d49198fd.js"><link rel="prefetch" href="/docs/assets/js/1051.0d72e913.js"><link rel="prefetch" href="/docs/assets/js/1052.bcc68b38.js"><link rel="prefetch" href="/docs/assets/js/1053.021c138e.js"><link rel="prefetch" href="/docs/assets/js/1054.24ea7aae.js"><link rel="prefetch" href="/docs/assets/js/1055.26f58eaa.js"><link rel="prefetch" href="/docs/assets/js/1056.bc398217.js"><link rel="prefetch" href="/docs/assets/js/1057.28186de5.js"><link rel="prefetch" href="/docs/assets/js/1058.14672a6c.js"><link rel="prefetch" href="/docs/assets/js/1059.221915df.js"><link rel="prefetch" href="/docs/assets/js/106.90a1bd05.js"><link rel="prefetch" href="/docs/assets/js/1060.4b236c9d.js"><link rel="prefetch" href="/docs/assets/js/1061.574039e6.js"><link rel="prefetch" href="/docs/assets/js/1062.bc9dc3e5.js"><link rel="prefetch" href="/docs/assets/js/1063.10b23ab2.js"><link rel="prefetch" href="/docs/assets/js/1064.081934ea.js"><link rel="prefetch" href="/docs/assets/js/1065.6b24e6a7.js"><link rel="prefetch" href="/docs/assets/js/1066.e51cfaa2.js"><link rel="prefetch" href="/docs/assets/js/1067.3ea8e62d.js"><link rel="prefetch" href="/docs/assets/js/1068.689b4d2c.js"><link rel="prefetch" href="/docs/assets/js/1069.786aa39b.js"><link rel="prefetch" href="/docs/assets/js/107.eecad668.js"><link rel="prefetch" href="/docs/assets/js/1070.779a45e8.js"><link rel="prefetch" href="/docs/assets/js/1071.c4977bbd.js"><link rel="prefetch" href="/docs/assets/js/1072.045a4078.js"><link rel="prefetch" href="/docs/assets/js/1073.af258b6d.js"><link rel="prefetch" href="/docs/assets/js/1074.069f93d8.js"><link rel="prefetch" href="/docs/assets/js/1075.75a96250.js"><link rel="prefetch" href="/docs/assets/js/1076.ed6f6816.js"><link rel="prefetch" href="/docs/assets/js/1077.173cf90f.js"><link rel="prefetch" href="/docs/assets/js/1078.b2592702.js"><link rel="prefetch" href="/docs/assets/js/1079.0a876b80.js"><link rel="prefetch" href="/docs/assets/js/108.dcd2ed04.js"><link rel="prefetch" href="/docs/assets/js/1080.8cd85d80.js"><link rel="prefetch" href="/docs/assets/js/1081.5ba849b9.js"><link rel="prefetch" href="/docs/assets/js/1082.15132811.js"><link rel="prefetch" href="/docs/assets/js/1083.6af09561.js"><link rel="prefetch" href="/docs/assets/js/1084.255a65e9.js"><link rel="prefetch" href="/docs/assets/js/1085.fb6c4bcb.js"><link rel="prefetch" href="/docs/assets/js/1086.9ad515f0.js"><link rel="prefetch" href="/docs/assets/js/1087.d4960acd.js"><link rel="prefetch" href="/docs/assets/js/1088.8dd28a3d.js"><link rel="prefetch" href="/docs/assets/js/1089.e3bf9538.js"><link rel="prefetch" href="/docs/assets/js/109.4faa1afc.js"><link rel="prefetch" href="/docs/assets/js/1090.47ac564d.js"><link rel="prefetch" href="/docs/assets/js/1091.584365c2.js"><link rel="prefetch" href="/docs/assets/js/1092.6c76691c.js"><link rel="prefetch" href="/docs/assets/js/1093.1d7d7f87.js"><link rel="prefetch" href="/docs/assets/js/1094.76461963.js"><link rel="prefetch" href="/docs/assets/js/1095.0eb8570e.js"><link rel="prefetch" href="/docs/assets/js/1096.e7989c54.js"><link rel="prefetch" href="/docs/assets/js/1097.8ec71ba3.js"><link rel="prefetch" href="/docs/assets/js/1098.1d0595b6.js"><link rel="prefetch" href="/docs/assets/js/1099.f4fb478f.js"><link rel="prefetch" href="/docs/assets/js/11.ab3ac22d.js"><link rel="prefetch" href="/docs/assets/js/110.07f637cc.js"><link rel="prefetch" href="/docs/assets/js/1100.d5dd278b.js"><link rel="prefetch" href="/docs/assets/js/1101.65e1bdee.js"><link rel="prefetch" href="/docs/assets/js/1102.3cc3fb95.js"><link rel="prefetch" href="/docs/assets/js/1103.c12f31f0.js"><link rel="prefetch" href="/docs/assets/js/1104.a240aa5e.js"><link rel="prefetch" href="/docs/assets/js/1105.6a5e7b9a.js"><link rel="prefetch" href="/docs/assets/js/1106.d4007c0f.js"><link rel="prefetch" href="/docs/assets/js/1107.a3b5738f.js"><link rel="prefetch" href="/docs/assets/js/1108.6a3227ef.js"><link rel="prefetch" href="/docs/assets/js/1109.7ff26a5e.js"><link rel="prefetch" href="/docs/assets/js/111.7164167b.js"><link rel="prefetch" href="/docs/assets/js/1110.40be73cb.js"><link rel="prefetch" href="/docs/assets/js/1111.696ef598.js"><link rel="prefetch" href="/docs/assets/js/1112.2a077f9b.js"><link rel="prefetch" href="/docs/assets/js/1113.7127a1bd.js"><link rel="prefetch" href="/docs/assets/js/1114.ba799891.js"><link rel="prefetch" href="/docs/assets/js/1115.dcd97c6e.js"><link rel="prefetch" href="/docs/assets/js/1116.8e2d996f.js"><link rel="prefetch" href="/docs/assets/js/1117.3a9c4cc7.js"><link rel="prefetch" href="/docs/assets/js/1118.f875ccfb.js"><link rel="prefetch" href="/docs/assets/js/1119.d6c91b46.js"><link rel="prefetch" href="/docs/assets/js/112.8744fef8.js"><link rel="prefetch" href="/docs/assets/js/1120.2924617f.js"><link rel="prefetch" href="/docs/assets/js/1121.ca6cd9bf.js"><link rel="prefetch" href="/docs/assets/js/1122.0b4c1a4d.js"><link rel="prefetch" href="/docs/assets/js/1123.be76ba87.js"><link rel="prefetch" href="/docs/assets/js/1124.e6f9c429.js"><link rel="prefetch" href="/docs/assets/js/1125.d44f07d2.js"><link rel="prefetch" href="/docs/assets/js/1126.6b01260f.js"><link rel="prefetch" href="/docs/assets/js/1127.c0263086.js"><link rel="prefetch" href="/docs/assets/js/1128.ca7e8dab.js"><link rel="prefetch" href="/docs/assets/js/1129.178b6122.js"><link rel="prefetch" href="/docs/assets/js/113.b2dfdd3f.js"><link rel="prefetch" href="/docs/assets/js/1130.a07d4530.js"><link rel="prefetch" href="/docs/assets/js/1131.eb2205e9.js"><link rel="prefetch" href="/docs/assets/js/1132.eb3f0942.js"><link rel="prefetch" href="/docs/assets/js/1133.f8fcc199.js"><link rel="prefetch" href="/docs/assets/js/1134.6ada7d1b.js"><link rel="prefetch" href="/docs/assets/js/1135.daa64c0b.js"><link rel="prefetch" href="/docs/assets/js/1136.926a723d.js"><link rel="prefetch" href="/docs/assets/js/1137.8db8e3a9.js"><link rel="prefetch" href="/docs/assets/js/1138.64dedf9e.js"><link rel="prefetch" href="/docs/assets/js/1139.650f8218.js"><link rel="prefetch" href="/docs/assets/js/114.4fd4960b.js"><link rel="prefetch" href="/docs/assets/js/1140.4747721d.js"><link rel="prefetch" href="/docs/assets/js/1141.c4785909.js"><link rel="prefetch" href="/docs/assets/js/1142.49596d0f.js"><link rel="prefetch" href="/docs/assets/js/1144.015b0007.js"><link rel="prefetch" href="/docs/assets/js/1145.8fd19556.js"><link rel="prefetch" href="/docs/assets/js/1146.92412a60.js"><link rel="prefetch" href="/docs/assets/js/1147.89c804ea.js"><link rel="prefetch" href="/docs/assets/js/1148.897766d6.js"><link rel="prefetch" href="/docs/assets/js/1149.72d906f4.js"><link rel="prefetch" href="/docs/assets/js/115.89c6dc02.js"><link rel="prefetch" href="/docs/assets/js/1150.991114db.js"><link rel="prefetch" href="/docs/assets/js/1151.80bee007.js"><link rel="prefetch" href="/docs/assets/js/1152.d26fdeb3.js"><link rel="prefetch" href="/docs/assets/js/1153.5e8f3058.js"><link rel="prefetch" href="/docs/assets/js/1154.39235bf6.js"><link rel="prefetch" href="/docs/assets/js/1155.e0c9b8c9.js"><link rel="prefetch" href="/docs/assets/js/1156.606b532d.js"><link rel="prefetch" href="/docs/assets/js/1157.1678e480.js"><link rel="prefetch" href="/docs/assets/js/1158.bbfe8734.js"><link rel="prefetch" href="/docs/assets/js/1159.eacf13d7.js"><link rel="prefetch" href="/docs/assets/js/116.4e9cc0b6.js"><link rel="prefetch" href="/docs/assets/js/1160.b9554851.js"><link rel="prefetch" href="/docs/assets/js/1161.ec0cd485.js"><link rel="prefetch" href="/docs/assets/js/1162.912b7026.js"><link rel="prefetch" href="/docs/assets/js/1163.1805fd85.js"><link rel="prefetch" href="/docs/assets/js/1164.3a39c169.js"><link rel="prefetch" href="/docs/assets/js/1165.552d6ccf.js"><link rel="prefetch" href="/docs/assets/js/1166.84381c7a.js"><link rel="prefetch" href="/docs/assets/js/1167.aad33f24.js"><link rel="prefetch" href="/docs/assets/js/1168.34e74848.js"><link rel="prefetch" href="/docs/assets/js/1169.f74fd1da.js"><link rel="prefetch" href="/docs/assets/js/117.49e09d71.js"><link rel="prefetch" href="/docs/assets/js/1170.049e3211.js"><link rel="prefetch" href="/docs/assets/js/1171.0b91492c.js"><link rel="prefetch" href="/docs/assets/js/1172.338bd57a.js"><link rel="prefetch" href="/docs/assets/js/1173.c8e76553.js"><link rel="prefetch" href="/docs/assets/js/1174.cbb8c367.js"><link rel="prefetch" href="/docs/assets/js/1175.833cd7f4.js"><link rel="prefetch" href="/docs/assets/js/1176.794565cf.js"><link rel="prefetch" href="/docs/assets/js/1177.30974d7f.js"><link rel="prefetch" href="/docs/assets/js/1178.b475179c.js"><link rel="prefetch" href="/docs/assets/js/1179.b43eae08.js"><link rel="prefetch" href="/docs/assets/js/118.4414541d.js"><link rel="prefetch" href="/docs/assets/js/1180.87764bce.js"><link rel="prefetch" href="/docs/assets/js/1181.fcf015db.js"><link rel="prefetch" href="/docs/assets/js/1182.24bbda69.js"><link rel="prefetch" href="/docs/assets/js/1183.86796ae4.js"><link rel="prefetch" href="/docs/assets/js/1184.a63f47ed.js"><link rel="prefetch" href="/docs/assets/js/1185.3523fcc2.js"><link rel="prefetch" href="/docs/assets/js/1186.b04f727f.js"><link rel="prefetch" href="/docs/assets/js/1187.ee377bf5.js"><link rel="prefetch" href="/docs/assets/js/1188.80b995cf.js"><link rel="prefetch" href="/docs/assets/js/1189.ee63ac5d.js"><link rel="prefetch" href="/docs/assets/js/119.d5924c2b.js"><link rel="prefetch" href="/docs/assets/js/1190.374c051f.js"><link rel="prefetch" href="/docs/assets/js/12.ce485d8e.js"><link rel="prefetch" href="/docs/assets/js/120.14ff6d49.js"><link rel="prefetch" href="/docs/assets/js/121.533a5c45.js"><link rel="prefetch" href="/docs/assets/js/122.8bda29e6.js"><link rel="prefetch" href="/docs/assets/js/123.cf3090b5.js"><link rel="prefetch" href="/docs/assets/js/124.0f54a5b4.js"><link rel="prefetch" href="/docs/assets/js/125.7837117e.js"><link rel="prefetch" href="/docs/assets/js/126.2ab2e348.js"><link rel="prefetch" href="/docs/assets/js/127.557b2a8d.js"><link rel="prefetch" href="/docs/assets/js/128.8494f21d.js"><link rel="prefetch" href="/docs/assets/js/129.9d73a4c1.js"><link rel="prefetch" href="/docs/assets/js/13.7b96c158.js"><link rel="prefetch" href="/docs/assets/js/130.db3086ab.js"><link rel="prefetch" href="/docs/assets/js/131.8dcfb910.js"><link rel="prefetch" href="/docs/assets/js/132.1411b965.js"><link rel="prefetch" href="/docs/assets/js/133.b7fa6a58.js"><link rel="prefetch" href="/docs/assets/js/134.e50c0cce.js"><link rel="prefetch" href="/docs/assets/js/135.bdacf800.js"><link rel="prefetch" href="/docs/assets/js/136.a144241f.js"><link rel="prefetch" href="/docs/assets/js/137.721f1f46.js"><link rel="prefetch" href="/docs/assets/js/138.0ef7fce1.js"><link rel="prefetch" href="/docs/assets/js/139.7bfc0ae5.js"><link rel="prefetch" href="/docs/assets/js/14.0d6900b3.js"><link rel="prefetch" href="/docs/assets/js/140.1253c36b.js"><link rel="prefetch" href="/docs/assets/js/141.c6ce3688.js"><link rel="prefetch" href="/docs/assets/js/142.badfa322.js"><link rel="prefetch" href="/docs/assets/js/143.45b3cc5f.js"><link rel="prefetch" href="/docs/assets/js/144.10046567.js"><link rel="prefetch" href="/docs/assets/js/145.089debff.js"><link rel="prefetch" href="/docs/assets/js/146.6045cc41.js"><link rel="prefetch" href="/docs/assets/js/147.aaaba74b.js"><link rel="prefetch" href="/docs/assets/js/148.2647ef3e.js"><link rel="prefetch" href="/docs/assets/js/149.d83ce7d1.js"><link rel="prefetch" href="/docs/assets/js/15.cda55a78.js"><link rel="prefetch" href="/docs/assets/js/150.865e0eba.js"><link rel="prefetch" href="/docs/assets/js/151.d1a4d2c2.js"><link rel="prefetch" href="/docs/assets/js/152.bfd5f381.js"><link rel="prefetch" href="/docs/assets/js/153.3c5541d7.js"><link rel="prefetch" href="/docs/assets/js/154.2d86cecf.js"><link rel="prefetch" href="/docs/assets/js/155.8b80a7b9.js"><link rel="prefetch" href="/docs/assets/js/156.8f1d184f.js"><link rel="prefetch" href="/docs/assets/js/157.999f953c.js"><link rel="prefetch" href="/docs/assets/js/158.69b4dde7.js"><link rel="prefetch" href="/docs/assets/js/159.9073ff7b.js"><link rel="prefetch" href="/docs/assets/js/16.c0ccad98.js"><link rel="prefetch" href="/docs/assets/js/160.77f5a7f2.js"><link rel="prefetch" href="/docs/assets/js/161.617fd309.js"><link rel="prefetch" href="/docs/assets/js/162.a89f73af.js"><link rel="prefetch" href="/docs/assets/js/163.45d3e8f6.js"><link rel="prefetch" href="/docs/assets/js/164.de6bc84e.js"><link rel="prefetch" href="/docs/assets/js/165.49cb89d7.js"><link rel="prefetch" href="/docs/assets/js/166.674c3191.js"><link rel="prefetch" href="/docs/assets/js/167.284395e5.js"><link rel="prefetch" href="/docs/assets/js/168.f48ffb25.js"><link rel="prefetch" href="/docs/assets/js/169.bb6b1c77.js"><link rel="prefetch" href="/docs/assets/js/17.00caf44a.js"><link rel="prefetch" href="/docs/assets/js/170.1e8608f2.js"><link rel="prefetch" href="/docs/assets/js/171.ae758677.js"><link rel="prefetch" href="/docs/assets/js/172.1b524bfe.js"><link rel="prefetch" href="/docs/assets/js/173.b2703b89.js"><link rel="prefetch" href="/docs/assets/js/174.c034873b.js"><link rel="prefetch" href="/docs/assets/js/175.c72855c1.js"><link rel="prefetch" href="/docs/assets/js/176.e920477f.js"><link rel="prefetch" href="/docs/assets/js/177.bb082227.js"><link rel="prefetch" href="/docs/assets/js/178.05421952.js"><link rel="prefetch" href="/docs/assets/js/179.34c5e625.js"><link rel="prefetch" href="/docs/assets/js/18.011f9e4f.js"><link rel="prefetch" href="/docs/assets/js/180.0543f56f.js"><link rel="prefetch" href="/docs/assets/js/181.95fdc25b.js"><link rel="prefetch" href="/docs/assets/js/182.c6878bc3.js"><link rel="prefetch" href="/docs/assets/js/183.58bf7566.js"><link rel="prefetch" href="/docs/assets/js/184.bf213114.js"><link rel="prefetch" href="/docs/assets/js/185.924a53bf.js"><link rel="prefetch" href="/docs/assets/js/186.573e25e2.js"><link rel="prefetch" href="/docs/assets/js/187.1082e50c.js"><link rel="prefetch" href="/docs/assets/js/188.a3ef37db.js"><link rel="prefetch" href="/docs/assets/js/189.24190ded.js"><link rel="prefetch" href="/docs/assets/js/19.e9f171c2.js"><link rel="prefetch" href="/docs/assets/js/190.b7fa7463.js"><link rel="prefetch" href="/docs/assets/js/191.92cdc789.js"><link rel="prefetch" href="/docs/assets/js/192.0a88fe83.js"><link rel="prefetch" href="/docs/assets/js/193.702679d2.js"><link rel="prefetch" href="/docs/assets/js/194.1bd0b5f0.js"><link rel="prefetch" href="/docs/assets/js/195.f26aea68.js"><link rel="prefetch" href="/docs/assets/js/196.79b5e82a.js"><link rel="prefetch" href="/docs/assets/js/197.35833980.js"><link rel="prefetch" href="/docs/assets/js/198.d8a646ac.js"><link rel="prefetch" href="/docs/assets/js/199.d2027178.js"><link rel="prefetch" href="/docs/assets/js/20.b247c8d1.js"><link rel="prefetch" href="/docs/assets/js/200.88f48136.js"><link rel="prefetch" href="/docs/assets/js/201.e28c9d90.js"><link rel="prefetch" href="/docs/assets/js/202.0a8b770d.js"><link rel="prefetch" href="/docs/assets/js/203.8edd62fa.js"><link rel="prefetch" href="/docs/assets/js/204.4c6c3a41.js"><link rel="prefetch" href="/docs/assets/js/205.a20972a4.js"><link rel="prefetch" href="/docs/assets/js/206.8deef739.js"><link rel="prefetch" href="/docs/assets/js/207.29f65a14.js"><link rel="prefetch" href="/docs/assets/js/208.1b55a89b.js"><link rel="prefetch" href="/docs/assets/js/209.5bd0378e.js"><link rel="prefetch" href="/docs/assets/js/21.b944ad82.js"><link rel="prefetch" href="/docs/assets/js/210.653449eb.js"><link rel="prefetch" href="/docs/assets/js/211.e7723b23.js"><link rel="prefetch" href="/docs/assets/js/212.345fa3e7.js"><link rel="prefetch" href="/docs/assets/js/213.ade7cd1e.js"><link rel="prefetch" href="/docs/assets/js/214.b3f67d35.js"><link rel="prefetch" href="/docs/assets/js/215.9d46eb63.js"><link rel="prefetch" href="/docs/assets/js/216.e0794ee9.js"><link rel="prefetch" href="/docs/assets/js/217.f95f764a.js"><link rel="prefetch" href="/docs/assets/js/218.80ff01fd.js"><link rel="prefetch" href="/docs/assets/js/219.73350f31.js"><link rel="prefetch" href="/docs/assets/js/22.3619036a.js"><link rel="prefetch" href="/docs/assets/js/220.9774c92b.js"><link rel="prefetch" href="/docs/assets/js/221.85b9938e.js"><link rel="prefetch" href="/docs/assets/js/222.b1928d30.js"><link rel="prefetch" href="/docs/assets/js/223.1c9b08c7.js"><link rel="prefetch" href="/docs/assets/js/224.1f8d839d.js"><link rel="prefetch" href="/docs/assets/js/225.9df6e5cb.js"><link rel="prefetch" href="/docs/assets/js/226.83a18766.js"><link rel="prefetch" href="/docs/assets/js/227.1fd2ee53.js"><link rel="prefetch" href="/docs/assets/js/228.d19d389c.js"><link rel="prefetch" href="/docs/assets/js/229.87db821f.js"><link rel="prefetch" href="/docs/assets/js/23.34037f6d.js"><link rel="prefetch" href="/docs/assets/js/230.903c800b.js"><link rel="prefetch" href="/docs/assets/js/231.6a01aed9.js"><link rel="prefetch" href="/docs/assets/js/232.1e7d935a.js"><link rel="prefetch" href="/docs/assets/js/233.230602f6.js"><link rel="prefetch" href="/docs/assets/js/234.93a95bea.js"><link rel="prefetch" href="/docs/assets/js/235.c84c98c1.js"><link rel="prefetch" href="/docs/assets/js/236.f9821e17.js"><link rel="prefetch" href="/docs/assets/js/237.ab4f0c44.js"><link rel="prefetch" href="/docs/assets/js/238.135ba397.js"><link rel="prefetch" href="/docs/assets/js/239.d491f958.js"><link rel="prefetch" href="/docs/assets/js/24.cce728f0.js"><link rel="prefetch" href="/docs/assets/js/240.25ae2db0.js"><link rel="prefetch" href="/docs/assets/js/241.0a06c413.js"><link rel="prefetch" href="/docs/assets/js/242.f2060d08.js"><link rel="prefetch" href="/docs/assets/js/243.dfe1117f.js"><link rel="prefetch" href="/docs/assets/js/244.7f92987f.js"><link rel="prefetch" href="/docs/assets/js/245.30e38417.js"><link rel="prefetch" href="/docs/assets/js/246.9e693b62.js"><link rel="prefetch" href="/docs/assets/js/247.052e63d5.js"><link rel="prefetch" href="/docs/assets/js/248.c46ff4a8.js"><link rel="prefetch" href="/docs/assets/js/249.429bbbe0.js"><link rel="prefetch" href="/docs/assets/js/25.faad963b.js"><link rel="prefetch" href="/docs/assets/js/250.48d59456.js"><link rel="prefetch" href="/docs/assets/js/251.0560367d.js"><link rel="prefetch" href="/docs/assets/js/252.987385b3.js"><link rel="prefetch" href="/docs/assets/js/253.e117fc2d.js"><link rel="prefetch" href="/docs/assets/js/254.375a0d19.js"><link rel="prefetch" href="/docs/assets/js/255.e2d3b397.js"><link rel="prefetch" href="/docs/assets/js/256.85b20928.js"><link rel="prefetch" href="/docs/assets/js/257.f69ccbd1.js"><link rel="prefetch" href="/docs/assets/js/258.3ac52b6a.js"><link rel="prefetch" href="/docs/assets/js/259.4a8e8dad.js"><link rel="prefetch" href="/docs/assets/js/26.ebedf7f9.js"><link rel="prefetch" href="/docs/assets/js/260.7f0f89bf.js"><link rel="prefetch" href="/docs/assets/js/261.d8fbb591.js"><link rel="prefetch" href="/docs/assets/js/262.c80fae29.js"><link rel="prefetch" href="/docs/assets/js/263.3b5d21ed.js"><link rel="prefetch" href="/docs/assets/js/264.688f22de.js"><link rel="prefetch" href="/docs/assets/js/265.cd887654.js"><link rel="prefetch" href="/docs/assets/js/266.3607b374.js"><link rel="prefetch" href="/docs/assets/js/267.b69d1ba3.js"><link rel="prefetch" href="/docs/assets/js/268.9dbe0cd1.js"><link rel="prefetch" href="/docs/assets/js/269.527204df.js"><link rel="prefetch" href="/docs/assets/js/27.67dd7a4f.js"><link rel="prefetch" href="/docs/assets/js/270.46c380d9.js"><link rel="prefetch" href="/docs/assets/js/271.84eabbc9.js"><link rel="prefetch" href="/docs/assets/js/272.3aac95c0.js"><link rel="prefetch" href="/docs/assets/js/273.b03e8b49.js"><link rel="prefetch" href="/docs/assets/js/274.9a284e38.js"><link rel="prefetch" href="/docs/assets/js/275.48c9d81e.js"><link rel="prefetch" href="/docs/assets/js/276.ecc278d5.js"><link rel="prefetch" href="/docs/assets/js/277.11bc0a8b.js"><link rel="prefetch" href="/docs/assets/js/278.38883fac.js"><link rel="prefetch" href="/docs/assets/js/279.2dd72acf.js"><link rel="prefetch" href="/docs/assets/js/28.c55bf7b0.js"><link rel="prefetch" href="/docs/assets/js/280.6db90c32.js"><link rel="prefetch" href="/docs/assets/js/281.272fd123.js"><link rel="prefetch" href="/docs/assets/js/282.2e7f69c9.js"><link rel="prefetch" href="/docs/assets/js/283.7bcb30b6.js"><link rel="prefetch" href="/docs/assets/js/284.fb7798f7.js"><link rel="prefetch" href="/docs/assets/js/285.3b9c011f.js"><link rel="prefetch" href="/docs/assets/js/286.8978bbae.js"><link rel="prefetch" href="/docs/assets/js/287.2ccf0849.js"><link rel="prefetch" href="/docs/assets/js/288.121a6d2f.js"><link rel="prefetch" href="/docs/assets/js/289.0d1e4536.js"><link rel="prefetch" href="/docs/assets/js/29.a30e96d9.js"><link rel="prefetch" href="/docs/assets/js/290.865386e0.js"><link rel="prefetch" href="/docs/assets/js/291.48c917fe.js"><link rel="prefetch" href="/docs/assets/js/292.821e8713.js"><link rel="prefetch" href="/docs/assets/js/293.077f0141.js"><link rel="prefetch" href="/docs/assets/js/294.e5eb280a.js"><link rel="prefetch" href="/docs/assets/js/295.2a823a84.js"><link rel="prefetch" href="/docs/assets/js/296.d1db0071.js"><link rel="prefetch" href="/docs/assets/js/297.19e336f3.js"><link rel="prefetch" href="/docs/assets/js/298.944d0878.js"><link rel="prefetch" href="/docs/assets/js/299.c745be8d.js"><link rel="prefetch" href="/docs/assets/js/3.1568a32f.js"><link rel="prefetch" href="/docs/assets/js/30.83667da9.js"><link rel="prefetch" href="/docs/assets/js/300.13dd4816.js"><link rel="prefetch" href="/docs/assets/js/301.2f4494b6.js"><link rel="prefetch" href="/docs/assets/js/302.1c207c4e.js"><link rel="prefetch" href="/docs/assets/js/303.91c0fc53.js"><link rel="prefetch" href="/docs/assets/js/304.3e4a8d34.js"><link rel="prefetch" href="/docs/assets/js/305.727c8133.js"><link rel="prefetch" href="/docs/assets/js/306.ececb6be.js"><link rel="prefetch" href="/docs/assets/js/307.c7f91360.js"><link rel="prefetch" href="/docs/assets/js/308.b7e53617.js"><link rel="prefetch" href="/docs/assets/js/309.9d7600b3.js"><link rel="prefetch" href="/docs/assets/js/31.ddefb20d.js"><link rel="prefetch" href="/docs/assets/js/310.174ef0aa.js"><link rel="prefetch" href="/docs/assets/js/311.b125f67e.js"><link rel="prefetch" href="/docs/assets/js/312.aecd6b51.js"><link rel="prefetch" href="/docs/assets/js/313.0cc1236f.js"><link rel="prefetch" href="/docs/assets/js/314.82fb8504.js"><link rel="prefetch" href="/docs/assets/js/315.43facff7.js"><link rel="prefetch" href="/docs/assets/js/316.bd15deb5.js"><link rel="prefetch" href="/docs/assets/js/317.613fd5a3.js"><link rel="prefetch" href="/docs/assets/js/318.85a18baa.js"><link rel="prefetch" href="/docs/assets/js/319.fa7aa1c9.js"><link rel="prefetch" href="/docs/assets/js/32.2bdd0c2a.js"><link rel="prefetch" href="/docs/assets/js/320.8d31f6ce.js"><link rel="prefetch" href="/docs/assets/js/321.235589a4.js"><link rel="prefetch" href="/docs/assets/js/322.f0b023e2.js"><link rel="prefetch" href="/docs/assets/js/323.02b5cf1c.js"><link rel="prefetch" href="/docs/assets/js/324.43975957.js"><link rel="prefetch" href="/docs/assets/js/325.0f1fb335.js"><link rel="prefetch" href="/docs/assets/js/326.bff908dc.js"><link rel="prefetch" href="/docs/assets/js/327.f3dc388f.js"><link rel="prefetch" href="/docs/assets/js/328.85b74c7c.js"><link rel="prefetch" href="/docs/assets/js/329.634c6081.js"><link rel="prefetch" href="/docs/assets/js/33.ef1b4ec4.js"><link rel="prefetch" href="/docs/assets/js/330.b70d01db.js"><link rel="prefetch" href="/docs/assets/js/331.a627fd1a.js"><link rel="prefetch" href="/docs/assets/js/332.32cd51f6.js"><link rel="prefetch" href="/docs/assets/js/333.9590fd85.js"><link rel="prefetch" href="/docs/assets/js/334.f11e2f6c.js"><link rel="prefetch" href="/docs/assets/js/335.320c05f4.js"><link rel="prefetch" href="/docs/assets/js/336.919879c2.js"><link rel="prefetch" href="/docs/assets/js/337.098c0178.js"><link rel="prefetch" href="/docs/assets/js/338.8d47980e.js"><link rel="prefetch" href="/docs/assets/js/339.af7df32e.js"><link rel="prefetch" href="/docs/assets/js/34.cc594137.js"><link rel="prefetch" href="/docs/assets/js/340.b40403e2.js"><link rel="prefetch" href="/docs/assets/js/341.27924e48.js"><link rel="prefetch" href="/docs/assets/js/342.6b1ed863.js"><link rel="prefetch" href="/docs/assets/js/343.6c449bf7.js"><link rel="prefetch" href="/docs/assets/js/344.d784b524.js"><link rel="prefetch" href="/docs/assets/js/345.119f37d0.js"><link rel="prefetch" href="/docs/assets/js/346.c21c0e93.js"><link rel="prefetch" href="/docs/assets/js/347.c70c45e3.js"><link rel="prefetch" href="/docs/assets/js/348.9e814b11.js"><link rel="prefetch" href="/docs/assets/js/349.e5590ba6.js"><link rel="prefetch" href="/docs/assets/js/35.4a5b2595.js"><link rel="prefetch" href="/docs/assets/js/350.1ff4a813.js"><link rel="prefetch" href="/docs/assets/js/351.c3151e3d.js"><link rel="prefetch" href="/docs/assets/js/352.c56ef90f.js"><link rel="prefetch" href="/docs/assets/js/353.d4b0b2dc.js"><link rel="prefetch" href="/docs/assets/js/354.43b9b2f3.js"><link rel="prefetch" href="/docs/assets/js/355.28cf46e1.js"><link rel="prefetch" href="/docs/assets/js/356.02480643.js"><link rel="prefetch" href="/docs/assets/js/357.92bd78bb.js"><link rel="prefetch" href="/docs/assets/js/358.78eb51df.js"><link rel="prefetch" href="/docs/assets/js/359.a70f915d.js"><link rel="prefetch" href="/docs/assets/js/36.52c215d2.js"><link rel="prefetch" href="/docs/assets/js/360.5db8b55c.js"><link rel="prefetch" href="/docs/assets/js/361.f7a3627e.js"><link rel="prefetch" href="/docs/assets/js/362.8d16caee.js"><link rel="prefetch" href="/docs/assets/js/363.83c228bc.js"><link rel="prefetch" href="/docs/assets/js/364.13bbf20a.js"><link rel="prefetch" href="/docs/assets/js/365.f718e869.js"><link rel="prefetch" href="/docs/assets/js/366.8ab7c140.js"><link rel="prefetch" href="/docs/assets/js/367.b9179bab.js"><link rel="prefetch" href="/docs/assets/js/368.00397f74.js"><link rel="prefetch" href="/docs/assets/js/369.2e53db79.js"><link rel="prefetch" href="/docs/assets/js/37.d3416b0e.js"><link rel="prefetch" href="/docs/assets/js/370.d2170ce3.js"><link rel="prefetch" href="/docs/assets/js/371.c100c845.js"><link rel="prefetch" href="/docs/assets/js/372.188dd188.js"><link rel="prefetch" href="/docs/assets/js/373.b2777f34.js"><link rel="prefetch" href="/docs/assets/js/374.395969d1.js"><link rel="prefetch" href="/docs/assets/js/375.db014891.js"><link rel="prefetch" href="/docs/assets/js/376.ee761f7a.js"><link rel="prefetch" href="/docs/assets/js/377.6b7204be.js"><link rel="prefetch" href="/docs/assets/js/378.b2a9c6b0.js"><link rel="prefetch" href="/docs/assets/js/379.31c8a65c.js"><link rel="prefetch" href="/docs/assets/js/38.f013117e.js"><link rel="prefetch" href="/docs/assets/js/380.22c1df18.js"><link rel="prefetch" href="/docs/assets/js/381.02fc2a4e.js"><link rel="prefetch" href="/docs/assets/js/382.92fcf2bf.js"><link rel="prefetch" href="/docs/assets/js/383.e1ef43ad.js"><link rel="prefetch" href="/docs/assets/js/384.f78553c3.js"><link rel="prefetch" href="/docs/assets/js/385.7a775f89.js"><link rel="prefetch" href="/docs/assets/js/386.e66e41dd.js"><link rel="prefetch" href="/docs/assets/js/387.2cf72c55.js"><link rel="prefetch" href="/docs/assets/js/388.6ef56db3.js"><link rel="prefetch" href="/docs/assets/js/389.386c1209.js"><link rel="prefetch" href="/docs/assets/js/39.507ded33.js"><link rel="prefetch" href="/docs/assets/js/390.cd49089b.js"><link rel="prefetch" href="/docs/assets/js/391.c967b6a6.js"><link rel="prefetch" href="/docs/assets/js/392.6bd11990.js"><link rel="prefetch" href="/docs/assets/js/393.1cb31fa8.js"><link rel="prefetch" href="/docs/assets/js/394.c1d615d3.js"><link rel="prefetch" href="/docs/assets/js/395.64b55b2c.js"><link rel="prefetch" href="/docs/assets/js/396.3255695c.js"><link rel="prefetch" href="/docs/assets/js/397.d2f8df92.js"><link rel="prefetch" href="/docs/assets/js/398.47f4b9dd.js"><link rel="prefetch" href="/docs/assets/js/399.1e9c6c54.js"><link rel="prefetch" href="/docs/assets/js/4.2c05b10b.js"><link rel="prefetch" href="/docs/assets/js/40.a09c7e32.js"><link rel="prefetch" href="/docs/assets/js/400.911a3bba.js"><link rel="prefetch" href="/docs/assets/js/401.71bd4c8f.js"><link rel="prefetch" href="/docs/assets/js/402.56573c8c.js"><link rel="prefetch" href="/docs/assets/js/403.3e8d5855.js"><link rel="prefetch" href="/docs/assets/js/404.a5e3bdca.js"><link rel="prefetch" href="/docs/assets/js/405.f969ec60.js"><link rel="prefetch" href="/docs/assets/js/406.7402cbc1.js"><link rel="prefetch" href="/docs/assets/js/407.ca81491e.js"><link rel="prefetch" href="/docs/assets/js/408.bcb4c908.js"><link rel="prefetch" href="/docs/assets/js/409.085fb47e.js"><link rel="prefetch" href="/docs/assets/js/41.e262c14a.js"><link rel="prefetch" href="/docs/assets/js/410.f1d37beb.js"><link rel="prefetch" href="/docs/assets/js/411.80b60096.js"><link rel="prefetch" href="/docs/assets/js/412.6a30ecd7.js"><link rel="prefetch" href="/docs/assets/js/413.3ee5d371.js"><link rel="prefetch" href="/docs/assets/js/414.ca59c53a.js"><link rel="prefetch" href="/docs/assets/js/415.82616ce5.js"><link rel="prefetch" href="/docs/assets/js/416.569c1979.js"><link rel="prefetch" href="/docs/assets/js/417.621d01ee.js"><link rel="prefetch" href="/docs/assets/js/418.da57dcae.js"><link rel="prefetch" href="/docs/assets/js/419.a2d423ca.js"><link rel="prefetch" href="/docs/assets/js/42.b6b6e2d3.js"><link rel="prefetch" href="/docs/assets/js/420.2c2178ae.js"><link rel="prefetch" href="/docs/assets/js/421.e70b5b1f.js"><link rel="prefetch" href="/docs/assets/js/422.6f35655b.js"><link rel="prefetch" href="/docs/assets/js/423.2f0cea18.js"><link rel="prefetch" href="/docs/assets/js/424.128e7163.js"><link rel="prefetch" href="/docs/assets/js/425.861d4dfe.js"><link rel="prefetch" href="/docs/assets/js/426.9aea92a0.js"><link rel="prefetch" href="/docs/assets/js/427.af581d15.js"><link rel="prefetch" href="/docs/assets/js/428.a218ea46.js"><link rel="prefetch" href="/docs/assets/js/429.065b5ac1.js"><link rel="prefetch" href="/docs/assets/js/43.63957427.js"><link rel="prefetch" href="/docs/assets/js/430.e767f1f4.js"><link rel="prefetch" href="/docs/assets/js/431.540150d6.js"><link rel="prefetch" href="/docs/assets/js/432.a1ddbbd1.js"><link rel="prefetch" href="/docs/assets/js/433.c7f7981f.js"><link rel="prefetch" href="/docs/assets/js/434.cffb48e9.js"><link rel="prefetch" href="/docs/assets/js/435.491baaf0.js"><link rel="prefetch" href="/docs/assets/js/436.0d652c26.js"><link rel="prefetch" href="/docs/assets/js/437.5bfcab8f.js"><link rel="prefetch" href="/docs/assets/js/438.68d2335b.js"><link rel="prefetch" href="/docs/assets/js/439.c6297ce6.js"><link rel="prefetch" href="/docs/assets/js/44.d8d04da9.js"><link rel="prefetch" href="/docs/assets/js/440.f33b43c5.js"><link rel="prefetch" href="/docs/assets/js/441.94af4046.js"><link rel="prefetch" href="/docs/assets/js/442.1d1cfe2e.js"><link rel="prefetch" href="/docs/assets/js/443.3a9f8a23.js"><link rel="prefetch" href="/docs/assets/js/444.36ca831d.js"><link rel="prefetch" href="/docs/assets/js/445.91622551.js"><link rel="prefetch" href="/docs/assets/js/446.45c815f0.js"><link rel="prefetch" href="/docs/assets/js/447.5d417e2d.js"><link rel="prefetch" href="/docs/assets/js/448.42abd591.js"><link rel="prefetch" href="/docs/assets/js/449.6c21256c.js"><link rel="prefetch" href="/docs/assets/js/45.49c1a866.js"><link rel="prefetch" href="/docs/assets/js/450.b9b1a490.js"><link rel="prefetch" href="/docs/assets/js/451.35fa3d3e.js"><link rel="prefetch" href="/docs/assets/js/452.513b0cce.js"><link rel="prefetch" href="/docs/assets/js/453.2792e570.js"><link rel="prefetch" href="/docs/assets/js/454.987f083a.js"><link rel="prefetch" href="/docs/assets/js/455.122cc5e2.js"><link rel="prefetch" href="/docs/assets/js/456.1dda02bd.js"><link rel="prefetch" href="/docs/assets/js/457.4beb203a.js"><link rel="prefetch" href="/docs/assets/js/458.ab405ce8.js"><link rel="prefetch" href="/docs/assets/js/459.ad2f065a.js"><link rel="prefetch" href="/docs/assets/js/46.be09a393.js"><link rel="prefetch" href="/docs/assets/js/460.89954fa3.js"><link rel="prefetch" href="/docs/assets/js/461.7018216b.js"><link rel="prefetch" href="/docs/assets/js/462.4d4ad00b.js"><link rel="prefetch" href="/docs/assets/js/463.baad8239.js"><link rel="prefetch" href="/docs/assets/js/464.190f3c23.js"><link rel="prefetch" href="/docs/assets/js/465.5c953a3e.js"><link rel="prefetch" href="/docs/assets/js/466.ad70fe73.js"><link rel="prefetch" href="/docs/assets/js/467.67bfc834.js"><link rel="prefetch" href="/docs/assets/js/468.f19aa8aa.js"><link rel="prefetch" href="/docs/assets/js/469.7cc42528.js"><link rel="prefetch" href="/docs/assets/js/47.f26d6bb6.js"><link rel="prefetch" href="/docs/assets/js/470.c0d409f2.js"><link rel="prefetch" href="/docs/assets/js/471.b84e0ea4.js"><link rel="prefetch" href="/docs/assets/js/472.6b8b1d7f.js"><link rel="prefetch" href="/docs/assets/js/473.f93754fe.js"><link rel="prefetch" href="/docs/assets/js/474.cd934b70.js"><link rel="prefetch" href="/docs/assets/js/475.792f8b22.js"><link rel="prefetch" href="/docs/assets/js/476.c1c92b32.js"><link rel="prefetch" href="/docs/assets/js/477.f5a9a42c.js"><link rel="prefetch" href="/docs/assets/js/478.1ab0b4d7.js"><link rel="prefetch" href="/docs/assets/js/479.5452fc68.js"><link rel="prefetch" href="/docs/assets/js/48.f384117a.js"><link rel="prefetch" href="/docs/assets/js/480.261723ff.js"><link rel="prefetch" href="/docs/assets/js/481.69c308bf.js"><link rel="prefetch" href="/docs/assets/js/482.2f954883.js"><link rel="prefetch" href="/docs/assets/js/483.bd6d2964.js"><link rel="prefetch" href="/docs/assets/js/484.8747dd46.js"><link rel="prefetch" href="/docs/assets/js/485.259a2a6b.js"><link rel="prefetch" href="/docs/assets/js/486.0f986781.js"><link rel="prefetch" href="/docs/assets/js/487.fe5e34fe.js"><link rel="prefetch" href="/docs/assets/js/488.f51c09c4.js"><link rel="prefetch" href="/docs/assets/js/489.c57b330a.js"><link rel="prefetch" href="/docs/assets/js/49.68d8968b.js"><link rel="prefetch" href="/docs/assets/js/490.813ea9fd.js"><link rel="prefetch" href="/docs/assets/js/491.630a22a2.js"><link rel="prefetch" href="/docs/assets/js/492.b97cc3da.js"><link rel="prefetch" href="/docs/assets/js/493.39c0cb23.js"><link rel="prefetch" href="/docs/assets/js/494.8274d531.js"><link rel="prefetch" href="/docs/assets/js/495.426dfbf4.js"><link rel="prefetch" href="/docs/assets/js/496.37b2211b.js"><link rel="prefetch" href="/docs/assets/js/497.1be9f612.js"><link rel="prefetch" href="/docs/assets/js/498.c3062f23.js"><link rel="prefetch" href="/docs/assets/js/499.4b3687d9.js"><link rel="prefetch" href="/docs/assets/js/5.7e332b2d.js"><link rel="prefetch" href="/docs/assets/js/50.64eac5e7.js"><link rel="prefetch" href="/docs/assets/js/500.f9ff19bc.js"><link rel="prefetch" href="/docs/assets/js/501.f65b2840.js"><link rel="prefetch" href="/docs/assets/js/502.60c23683.js"><link rel="prefetch" href="/docs/assets/js/503.e3eac5e5.js"><link rel="prefetch" href="/docs/assets/js/504.ab971aae.js"><link rel="prefetch" href="/docs/assets/js/505.c8129b89.js"><link rel="prefetch" href="/docs/assets/js/506.f772fc40.js"><link rel="prefetch" href="/docs/assets/js/507.f70951cf.js"><link rel="prefetch" href="/docs/assets/js/508.25cc8be9.js"><link rel="prefetch" href="/docs/assets/js/509.65dfbf21.js"><link rel="prefetch" href="/docs/assets/js/51.01f3110a.js"><link rel="prefetch" href="/docs/assets/js/510.ac159aa9.js"><link rel="prefetch" href="/docs/assets/js/511.3c411759.js"><link rel="prefetch" href="/docs/assets/js/512.2d4a937f.js"><link rel="prefetch" href="/docs/assets/js/513.717f6b15.js"><link rel="prefetch" href="/docs/assets/js/514.20fea45c.js"><link rel="prefetch" href="/docs/assets/js/515.36261571.js"><link rel="prefetch" href="/docs/assets/js/516.03f6f640.js"><link rel="prefetch" href="/docs/assets/js/517.d28e06bf.js"><link rel="prefetch" href="/docs/assets/js/518.211ac5b3.js"><link rel="prefetch" href="/docs/assets/js/519.e0576033.js"><link rel="prefetch" href="/docs/assets/js/52.78391078.js"><link rel="prefetch" href="/docs/assets/js/520.dfd2104a.js"><link rel="prefetch" href="/docs/assets/js/521.c0c195b8.js"><link rel="prefetch" href="/docs/assets/js/522.c70b23ea.js"><link rel="prefetch" href="/docs/assets/js/523.2e32d373.js"><link rel="prefetch" href="/docs/assets/js/524.dc30f013.js"><link rel="prefetch" href="/docs/assets/js/525.c7e74848.js"><link rel="prefetch" href="/docs/assets/js/526.2aa4467e.js"><link rel="prefetch" href="/docs/assets/js/527.d4865c4a.js"><link rel="prefetch" href="/docs/assets/js/528.87ef62a6.js"><link rel="prefetch" href="/docs/assets/js/529.e8adf60e.js"><link rel="prefetch" href="/docs/assets/js/53.ba4442c1.js"><link rel="prefetch" href="/docs/assets/js/530.8155d09c.js"><link rel="prefetch" href="/docs/assets/js/531.ef9f8a62.js"><link rel="prefetch" href="/docs/assets/js/532.e2d63979.js"><link rel="prefetch" href="/docs/assets/js/533.52be2a10.js"><link rel="prefetch" href="/docs/assets/js/534.1632b8ff.js"><link rel="prefetch" href="/docs/assets/js/535.1a22682f.js"><link rel="prefetch" href="/docs/assets/js/536.317add4c.js"><link rel="prefetch" href="/docs/assets/js/537.a9876966.js"><link rel="prefetch" href="/docs/assets/js/538.47ef8244.js"><link rel="prefetch" href="/docs/assets/js/539.c85fd8d8.js"><link rel="prefetch" href="/docs/assets/js/54.3b5666f4.js"><link rel="prefetch" href="/docs/assets/js/540.989842fa.js"><link rel="prefetch" href="/docs/assets/js/541.41f03fe7.js"><link rel="prefetch" href="/docs/assets/js/542.89e2be8c.js"><link rel="prefetch" href="/docs/assets/js/543.a3ad7d54.js"><link rel="prefetch" href="/docs/assets/js/544.26df925d.js"><link rel="prefetch" href="/docs/assets/js/545.3f06eefc.js"><link rel="prefetch" href="/docs/assets/js/546.c2697d2c.js"><link rel="prefetch" href="/docs/assets/js/547.403732e3.js"><link rel="prefetch" href="/docs/assets/js/548.8fdc36d8.js"><link rel="prefetch" href="/docs/assets/js/549.f535039f.js"><link rel="prefetch" href="/docs/assets/js/55.c70259cd.js"><link rel="prefetch" href="/docs/assets/js/550.44dca448.js"><link rel="prefetch" href="/docs/assets/js/551.09698fe6.js"><link rel="prefetch" href="/docs/assets/js/552.b87d8bdb.js"><link rel="prefetch" href="/docs/assets/js/553.18df4e68.js"><link rel="prefetch" href="/docs/assets/js/554.4b4d8ff0.js"><link rel="prefetch" href="/docs/assets/js/555.aebbab34.js"><link rel="prefetch" href="/docs/assets/js/556.08111e0a.js"><link rel="prefetch" href="/docs/assets/js/557.71f09c80.js"><link rel="prefetch" href="/docs/assets/js/558.10d550f5.js"><link rel="prefetch" href="/docs/assets/js/559.a242b5ac.js"><link rel="prefetch" href="/docs/assets/js/56.7bceb0cd.js"><link rel="prefetch" href="/docs/assets/js/560.89b5bb73.js"><link rel="prefetch" href="/docs/assets/js/561.c3cc7a4c.js"><link rel="prefetch" href="/docs/assets/js/562.d26a674b.js"><link rel="prefetch" href="/docs/assets/js/563.c87833fe.js"><link rel="prefetch" href="/docs/assets/js/564.e3e494f0.js"><link rel="prefetch" href="/docs/assets/js/565.b15376ae.js"><link rel="prefetch" href="/docs/assets/js/566.33572c2d.js"><link rel="prefetch" href="/docs/assets/js/567.21a9191c.js"><link rel="prefetch" href="/docs/assets/js/568.e118c126.js"><link rel="prefetch" href="/docs/assets/js/569.cf6762c5.js"><link rel="prefetch" href="/docs/assets/js/57.d970a53c.js"><link rel="prefetch" href="/docs/assets/js/570.9092596b.js"><link rel="prefetch" href="/docs/assets/js/571.f6f98009.js"><link rel="prefetch" href="/docs/assets/js/572.efe936bf.js"><link rel="prefetch" href="/docs/assets/js/573.7663f0f2.js"><link rel="prefetch" href="/docs/assets/js/574.69422327.js"><link rel="prefetch" href="/docs/assets/js/575.21edf531.js"><link rel="prefetch" href="/docs/assets/js/576.f889bc97.js"><link rel="prefetch" href="/docs/assets/js/577.05c97749.js"><link rel="prefetch" href="/docs/assets/js/578.3ddeb9b7.js"><link rel="prefetch" href="/docs/assets/js/579.30ab9a6f.js"><link rel="prefetch" href="/docs/assets/js/58.cdace39d.js"><link rel="prefetch" href="/docs/assets/js/580.5ee1443b.js"><link rel="prefetch" href="/docs/assets/js/581.57b2e5bc.js"><link rel="prefetch" href="/docs/assets/js/582.017b54dd.js"><link rel="prefetch" href="/docs/assets/js/583.b9b9cce9.js"><link rel="prefetch" href="/docs/assets/js/584.bc5ea254.js"><link rel="prefetch" href="/docs/assets/js/585.4d2659b8.js"><link rel="prefetch" href="/docs/assets/js/586.b384e0a0.js"><link rel="prefetch" href="/docs/assets/js/587.e1a93ba2.js"><link rel="prefetch" href="/docs/assets/js/588.2b967457.js"><link rel="prefetch" href="/docs/assets/js/589.53f5d127.js"><link rel="prefetch" href="/docs/assets/js/59.995216a6.js"><link rel="prefetch" href="/docs/assets/js/590.49173e30.js"><link rel="prefetch" href="/docs/assets/js/591.043f1145.js"><link rel="prefetch" href="/docs/assets/js/592.d5dc2ec0.js"><link rel="prefetch" href="/docs/assets/js/593.7e5c8e4a.js"><link rel="prefetch" href="/docs/assets/js/594.b4595395.js"><link rel="prefetch" href="/docs/assets/js/595.be9bef9f.js"><link rel="prefetch" href="/docs/assets/js/596.1e4a4520.js"><link rel="prefetch" href="/docs/assets/js/597.d9c69d5c.js"><link rel="prefetch" href="/docs/assets/js/598.2fbe0fbd.js"><link rel="prefetch" href="/docs/assets/js/599.8376ff1a.js"><link rel="prefetch" href="/docs/assets/js/6.eedf5cbf.js"><link rel="prefetch" href="/docs/assets/js/60.0047f859.js"><link rel="prefetch" href="/docs/assets/js/600.82185e66.js"><link rel="prefetch" href="/docs/assets/js/601.f0e1f279.js"><link rel="prefetch" href="/docs/assets/js/602.38d0e9c6.js"><link rel="prefetch" href="/docs/assets/js/603.7b69bbf9.js"><link rel="prefetch" href="/docs/assets/js/604.e2b4b86b.js"><link rel="prefetch" href="/docs/assets/js/605.40bb113c.js"><link rel="prefetch" href="/docs/assets/js/606.5bf5d2be.js"><link rel="prefetch" href="/docs/assets/js/607.27f38a78.js"><link rel="prefetch" href="/docs/assets/js/608.4c061219.js"><link rel="prefetch" href="/docs/assets/js/609.06809f4f.js"><link rel="prefetch" href="/docs/assets/js/61.2862fb6a.js"><link rel="prefetch" href="/docs/assets/js/610.acde6577.js"><link rel="prefetch" href="/docs/assets/js/611.23c4975a.js"><link rel="prefetch" href="/docs/assets/js/612.60f730f4.js"><link rel="prefetch" href="/docs/assets/js/613.9d1b7929.js"><link rel="prefetch" href="/docs/assets/js/614.559beacf.js"><link rel="prefetch" href="/docs/assets/js/615.1f9be7be.js"><link rel="prefetch" href="/docs/assets/js/616.eedac43e.js"><link rel="prefetch" href="/docs/assets/js/617.2ed2bcb2.js"><link rel="prefetch" href="/docs/assets/js/618.f425c18f.js"><link rel="prefetch" href="/docs/assets/js/619.3cb0569a.js"><link rel="prefetch" href="/docs/assets/js/62.9ef63b76.js"><link rel="prefetch" href="/docs/assets/js/620.f744636e.js"><link rel="prefetch" href="/docs/assets/js/621.8c6656a1.js"><link rel="prefetch" href="/docs/assets/js/622.685e3c9f.js"><link rel="prefetch" href="/docs/assets/js/623.a11c9e23.js"><link rel="prefetch" href="/docs/assets/js/624.52f36d48.js"><link rel="prefetch" href="/docs/assets/js/625.d3fb4805.js"><link rel="prefetch" href="/docs/assets/js/626.11e73330.js"><link rel="prefetch" href="/docs/assets/js/627.43d6477c.js"><link rel="prefetch" href="/docs/assets/js/628.c187b568.js"><link rel="prefetch" href="/docs/assets/js/629.0126df5c.js"><link rel="prefetch" href="/docs/assets/js/63.fbbf15ab.js"><link rel="prefetch" href="/docs/assets/js/630.db329275.js"><link rel="prefetch" href="/docs/assets/js/631.09cf74e9.js"><link rel="prefetch" href="/docs/assets/js/632.21b85ace.js"><link rel="prefetch" href="/docs/assets/js/633.9eeeec5d.js"><link rel="prefetch" href="/docs/assets/js/634.96af7409.js"><link rel="prefetch" href="/docs/assets/js/635.242baa30.js"><link rel="prefetch" href="/docs/assets/js/636.a80304b3.js"><link rel="prefetch" href="/docs/assets/js/637.3679d316.js"><link rel="prefetch" href="/docs/assets/js/638.bcdb8fac.js"><link rel="prefetch" href="/docs/assets/js/639.cc50ef8b.js"><link rel="prefetch" href="/docs/assets/js/64.8e274e7a.js"><link rel="prefetch" href="/docs/assets/js/640.06de7ca9.js"><link rel="prefetch" href="/docs/assets/js/641.bffa4bdc.js"><link rel="prefetch" href="/docs/assets/js/642.00162379.js"><link rel="prefetch" href="/docs/assets/js/643.92d66e56.js"><link rel="prefetch" href="/docs/assets/js/644.4e84bee2.js"><link rel="prefetch" href="/docs/assets/js/645.7c42c9b3.js"><link rel="prefetch" href="/docs/assets/js/646.7add21ea.js"><link rel="prefetch" href="/docs/assets/js/647.ff6c2981.js"><link rel="prefetch" href="/docs/assets/js/648.56a31c9c.js"><link rel="prefetch" href="/docs/assets/js/649.38e92cff.js"><link rel="prefetch" href="/docs/assets/js/65.d0b04ff8.js"><link rel="prefetch" href="/docs/assets/js/650.8375ae86.js"><link rel="prefetch" href="/docs/assets/js/651.5202b8b3.js"><link rel="prefetch" href="/docs/assets/js/652.0fe60d34.js"><link rel="prefetch" href="/docs/assets/js/653.ccb8a7fc.js"><link rel="prefetch" href="/docs/assets/js/654.f425ed00.js"><link rel="prefetch" href="/docs/assets/js/655.c33d409c.js"><link rel="prefetch" href="/docs/assets/js/656.9205e833.js"><link rel="prefetch" href="/docs/assets/js/657.0ca496ee.js"><link rel="prefetch" href="/docs/assets/js/658.27a73bfd.js"><link rel="prefetch" href="/docs/assets/js/659.54059cc6.js"><link rel="prefetch" href="/docs/assets/js/66.625eb510.js"><link rel="prefetch" href="/docs/assets/js/660.f147b1eb.js"><link rel="prefetch" href="/docs/assets/js/661.ec2e96c6.js"><link rel="prefetch" href="/docs/assets/js/662.43457746.js"><link rel="prefetch" href="/docs/assets/js/663.f41b3c2b.js"><link rel="prefetch" href="/docs/assets/js/664.3a394909.js"><link rel="prefetch" href="/docs/assets/js/665.4150abc4.js"><link rel="prefetch" href="/docs/assets/js/666.901f75af.js"><link rel="prefetch" href="/docs/assets/js/667.4fbcd769.js"><link rel="prefetch" href="/docs/assets/js/668.a7cbba5c.js"><link rel="prefetch" href="/docs/assets/js/669.bc5ba701.js"><link rel="prefetch" href="/docs/assets/js/67.d38e8cd3.js"><link rel="prefetch" href="/docs/assets/js/670.15121176.js"><link rel="prefetch" href="/docs/assets/js/671.3f73f40d.js"><link rel="prefetch" href="/docs/assets/js/672.564f3bb0.js"><link rel="prefetch" href="/docs/assets/js/673.0ae7eaf4.js"><link rel="prefetch" href="/docs/assets/js/674.fb3029ee.js"><link rel="prefetch" href="/docs/assets/js/675.42685a5a.js"><link rel="prefetch" href="/docs/assets/js/676.5abd26c5.js"><link rel="prefetch" href="/docs/assets/js/677.3fe1755c.js"><link rel="prefetch" href="/docs/assets/js/678.1650dbb6.js"><link rel="prefetch" href="/docs/assets/js/679.7babb708.js"><link rel="prefetch" href="/docs/assets/js/68.d401e2c4.js"><link rel="prefetch" href="/docs/assets/js/680.46b95bcf.js"><link rel="prefetch" href="/docs/assets/js/681.d770d29a.js"><link rel="prefetch" href="/docs/assets/js/682.d5171f01.js"><link rel="prefetch" href="/docs/assets/js/683.797145d8.js"><link rel="prefetch" href="/docs/assets/js/684.2a7193f2.js"><link rel="prefetch" href="/docs/assets/js/685.f64c5026.js"><link rel="prefetch" href="/docs/assets/js/686.16cbbadb.js"><link rel="prefetch" href="/docs/assets/js/687.0adcbabb.js"><link rel="prefetch" href="/docs/assets/js/688.b0136fbe.js"><link rel="prefetch" href="/docs/assets/js/689.f2dcc4d1.js"><link rel="prefetch" href="/docs/assets/js/69.270c7ff8.js"><link rel="prefetch" href="/docs/assets/js/690.fdb7a815.js"><link rel="prefetch" href="/docs/assets/js/691.b8e911c0.js"><link rel="prefetch" href="/docs/assets/js/692.92afbc12.js"><link rel="prefetch" href="/docs/assets/js/693.ff405580.js"><link rel="prefetch" href="/docs/assets/js/694.53fdf7c5.js"><link rel="prefetch" href="/docs/assets/js/695.0a3d15a8.js"><link rel="prefetch" href="/docs/assets/js/696.581418ac.js"><link rel="prefetch" href="/docs/assets/js/697.04895a58.js"><link rel="prefetch" href="/docs/assets/js/698.70e4d954.js"><link rel="prefetch" href="/docs/assets/js/699.b3576e9e.js"><link rel="prefetch" href="/docs/assets/js/7.69699b46.js"><link rel="prefetch" href="/docs/assets/js/70.8802986c.js"><link rel="prefetch" href="/docs/assets/js/700.40eedc90.js"><link rel="prefetch" href="/docs/assets/js/701.711a24c4.js"><link rel="prefetch" href="/docs/assets/js/702.f64689a3.js"><link rel="prefetch" href="/docs/assets/js/703.55c3857c.js"><link rel="prefetch" href="/docs/assets/js/704.ec3ffff5.js"><link rel="prefetch" href="/docs/assets/js/705.3c015979.js"><link rel="prefetch" href="/docs/assets/js/706.93359feb.js"><link rel="prefetch" href="/docs/assets/js/707.3a5d8ab1.js"><link rel="prefetch" href="/docs/assets/js/708.140b3b9f.js"><link rel="prefetch" href="/docs/assets/js/709.65ff829f.js"><link rel="prefetch" href="/docs/assets/js/71.86283f6b.js"><link rel="prefetch" href="/docs/assets/js/710.ea492f6c.js"><link rel="prefetch" href="/docs/assets/js/711.190b2e31.js"><link rel="prefetch" href="/docs/assets/js/712.c84633f7.js"><link rel="prefetch" href="/docs/assets/js/713.3a581fed.js"><link rel="prefetch" href="/docs/assets/js/714.2f11bd17.js"><link rel="prefetch" href="/docs/assets/js/715.875cff3d.js"><link rel="prefetch" href="/docs/assets/js/716.d0949dfd.js"><link rel="prefetch" href="/docs/assets/js/717.f1449650.js"><link rel="prefetch" href="/docs/assets/js/718.943a841a.js"><link rel="prefetch" href="/docs/assets/js/719.f17feed2.js"><link rel="prefetch" href="/docs/assets/js/72.f5731a1e.js"><link rel="prefetch" href="/docs/assets/js/720.6d39135e.js"><link rel="prefetch" href="/docs/assets/js/721.e45d6d53.js"><link rel="prefetch" href="/docs/assets/js/722.a06e5300.js"><link rel="prefetch" href="/docs/assets/js/723.0b0a8a28.js"><link rel="prefetch" href="/docs/assets/js/724.00efa468.js"><link rel="prefetch" href="/docs/assets/js/725.f5d426df.js"><link rel="prefetch" href="/docs/assets/js/726.9a505a77.js"><link rel="prefetch" href="/docs/assets/js/727.2d7b1cf8.js"><link rel="prefetch" href="/docs/assets/js/728.03bd3983.js"><link rel="prefetch" href="/docs/assets/js/729.1449d1b1.js"><link rel="prefetch" href="/docs/assets/js/73.5fbf43d0.js"><link rel="prefetch" href="/docs/assets/js/730.78a73426.js"><link rel="prefetch" href="/docs/assets/js/731.7782dd14.js"><link rel="prefetch" href="/docs/assets/js/732.c07e31e2.js"><link rel="prefetch" href="/docs/assets/js/733.5260b376.js"><link rel="prefetch" href="/docs/assets/js/734.e97adfef.js"><link rel="prefetch" href="/docs/assets/js/735.4d160b58.js"><link rel="prefetch" href="/docs/assets/js/736.84ee3892.js"><link rel="prefetch" href="/docs/assets/js/737.a5bda87f.js"><link rel="prefetch" href="/docs/assets/js/738.576329ef.js"><link rel="prefetch" href="/docs/assets/js/739.da891839.js"><link rel="prefetch" href="/docs/assets/js/74.17d19004.js"><link rel="prefetch" href="/docs/assets/js/740.caa1c5ea.js"><link rel="prefetch" href="/docs/assets/js/741.f0045c10.js"><link rel="prefetch" href="/docs/assets/js/742.d8e9ce9e.js"><link rel="prefetch" href="/docs/assets/js/743.300c7fda.js"><link rel="prefetch" href="/docs/assets/js/744.273140e6.js"><link rel="prefetch" href="/docs/assets/js/745.7024e286.js"><link rel="prefetch" href="/docs/assets/js/746.e9337443.js"><link rel="prefetch" href="/docs/assets/js/747.feba5d9c.js"><link rel="prefetch" href="/docs/assets/js/748.32a76b49.js"><link rel="prefetch" href="/docs/assets/js/749.b409d96d.js"><link rel="prefetch" href="/docs/assets/js/75.e31c5664.js"><link rel="prefetch" href="/docs/assets/js/750.d8454ae2.js"><link rel="prefetch" href="/docs/assets/js/751.14613305.js"><link rel="prefetch" href="/docs/assets/js/752.a16566a5.js"><link rel="prefetch" href="/docs/assets/js/753.e974a53c.js"><link rel="prefetch" href="/docs/assets/js/754.7194a972.js"><link rel="prefetch" href="/docs/assets/js/755.9ec7b833.js"><link rel="prefetch" href="/docs/assets/js/756.50f5b75c.js"><link rel="prefetch" href="/docs/assets/js/757.423f4628.js"><link rel="prefetch" href="/docs/assets/js/758.41daf4af.js"><link rel="prefetch" href="/docs/assets/js/759.50d726bc.js"><link rel="prefetch" href="/docs/assets/js/76.a6d2d020.js"><link rel="prefetch" href="/docs/assets/js/760.a3cbe13c.js"><link rel="prefetch" href="/docs/assets/js/761.845cb4df.js"><link rel="prefetch" href="/docs/assets/js/762.e429fc39.js"><link rel="prefetch" href="/docs/assets/js/763.228d5e64.js"><link rel="prefetch" href="/docs/assets/js/764.9e9450c9.js"><link rel="prefetch" href="/docs/assets/js/765.a6b0cf34.js"><link rel="prefetch" href="/docs/assets/js/766.dd40bcc6.js"><link rel="prefetch" href="/docs/assets/js/767.1827c029.js"><link rel="prefetch" href="/docs/assets/js/768.bc7f549d.js"><link rel="prefetch" href="/docs/assets/js/769.c37c9184.js"><link rel="prefetch" href="/docs/assets/js/77.2c84b5e7.js"><link rel="prefetch" href="/docs/assets/js/770.120427ac.js"><link rel="prefetch" href="/docs/assets/js/771.28cf4d9c.js"><link rel="prefetch" href="/docs/assets/js/772.1c2567f9.js"><link rel="prefetch" href="/docs/assets/js/773.2de14a63.js"><link rel="prefetch" href="/docs/assets/js/774.3f2d1a5c.js"><link rel="prefetch" href="/docs/assets/js/775.c2eee57b.js"><link rel="prefetch" href="/docs/assets/js/776.ce01a240.js"><link rel="prefetch" href="/docs/assets/js/777.e43ff443.js"><link rel="prefetch" href="/docs/assets/js/778.dbdabeda.js"><link rel="prefetch" href="/docs/assets/js/779.84ca9a40.js"><link rel="prefetch" href="/docs/assets/js/78.de150a39.js"><link rel="prefetch" href="/docs/assets/js/780.7d4ea451.js"><link rel="prefetch" href="/docs/assets/js/781.2ef05752.js"><link rel="prefetch" href="/docs/assets/js/782.f8d1af06.js"><link rel="prefetch" href="/docs/assets/js/783.61f5d695.js"><link rel="prefetch" href="/docs/assets/js/784.68643b3f.js"><link rel="prefetch" href="/docs/assets/js/785.0eeb40fc.js"><link rel="prefetch" href="/docs/assets/js/786.46929670.js"><link rel="prefetch" href="/docs/assets/js/787.27aea701.js"><link rel="prefetch" href="/docs/assets/js/788.8734555f.js"><link rel="prefetch" href="/docs/assets/js/789.a56056e7.js"><link rel="prefetch" href="/docs/assets/js/79.0b0c8741.js"><link rel="prefetch" href="/docs/assets/js/790.8cf272c1.js"><link rel="prefetch" href="/docs/assets/js/791.d5232aff.js"><link rel="prefetch" href="/docs/assets/js/792.cc9262da.js"><link rel="prefetch" href="/docs/assets/js/793.cb4a9271.js"><link rel="prefetch" href="/docs/assets/js/794.8c086163.js"><link rel="prefetch" href="/docs/assets/js/795.8b0ec904.js"><link rel="prefetch" href="/docs/assets/js/796.e761d6c6.js"><link rel="prefetch" href="/docs/assets/js/797.3ba2d149.js"><link rel="prefetch" href="/docs/assets/js/798.ff6f48e1.js"><link rel="prefetch" href="/docs/assets/js/799.b62e9085.js"><link rel="prefetch" href="/docs/assets/js/8.dfcc4cab.js"><link rel="prefetch" href="/docs/assets/js/80.2380eda8.js"><link rel="prefetch" href="/docs/assets/js/800.c971d246.js"><link rel="prefetch" href="/docs/assets/js/801.fba40151.js"><link rel="prefetch" href="/docs/assets/js/802.2156ce08.js"><link rel="prefetch" href="/docs/assets/js/803.c72e03ad.js"><link rel="prefetch" href="/docs/assets/js/804.ab14c057.js"><link rel="prefetch" href="/docs/assets/js/805.73d81c62.js"><link rel="prefetch" href="/docs/assets/js/806.a692ad02.js"><link rel="prefetch" href="/docs/assets/js/807.0c33e152.js"><link rel="prefetch" href="/docs/assets/js/808.b6a97586.js"><link rel="prefetch" href="/docs/assets/js/809.2c3637d7.js"><link rel="prefetch" href="/docs/assets/js/81.b4bc4383.js"><link rel="prefetch" href="/docs/assets/js/810.5766dcdd.js"><link rel="prefetch" href="/docs/assets/js/811.2893da77.js"><link rel="prefetch" href="/docs/assets/js/812.c63730fb.js"><link rel="prefetch" href="/docs/assets/js/813.a610df43.js"><link rel="prefetch" href="/docs/assets/js/814.dbf6628f.js"><link rel="prefetch" href="/docs/assets/js/815.abcef43d.js"><link rel="prefetch" href="/docs/assets/js/816.e842428d.js"><link rel="prefetch" href="/docs/assets/js/817.95dd19de.js"><link rel="prefetch" href="/docs/assets/js/818.a1efc42c.js"><link rel="prefetch" href="/docs/assets/js/819.05ff670b.js"><link rel="prefetch" href="/docs/assets/js/82.e7930bc4.js"><link rel="prefetch" href="/docs/assets/js/820.32cb4e92.js"><link rel="prefetch" href="/docs/assets/js/821.df9233bb.js"><link rel="prefetch" href="/docs/assets/js/822.aa4205df.js"><link rel="prefetch" href="/docs/assets/js/823.277fde07.js"><link rel="prefetch" href="/docs/assets/js/824.2b949a80.js"><link rel="prefetch" href="/docs/assets/js/825.9d33d9c0.js"><link rel="prefetch" href="/docs/assets/js/826.e8c8f61f.js"><link rel="prefetch" href="/docs/assets/js/827.3ef34c1e.js"><link rel="prefetch" href="/docs/assets/js/828.ddc3ac0b.js"><link rel="prefetch" href="/docs/assets/js/829.a6cdb412.js"><link rel="prefetch" href="/docs/assets/js/83.fc7e126a.js"><link rel="prefetch" href="/docs/assets/js/830.4ea95ba7.js"><link rel="prefetch" href="/docs/assets/js/831.ae0440b5.js"><link rel="prefetch" href="/docs/assets/js/832.17b620d0.js"><link rel="prefetch" href="/docs/assets/js/833.cd7045b3.js"><link rel="prefetch" href="/docs/assets/js/834.2fb2649a.js"><link rel="prefetch" href="/docs/assets/js/835.27439aab.js"><link rel="prefetch" href="/docs/assets/js/836.2080123e.js"><link rel="prefetch" href="/docs/assets/js/837.996f2c7d.js"><link rel="prefetch" href="/docs/assets/js/838.498403f6.js"><link rel="prefetch" href="/docs/assets/js/839.048d86d4.js"><link rel="prefetch" href="/docs/assets/js/84.fc5de171.js"><link rel="prefetch" href="/docs/assets/js/840.053bd885.js"><link rel="prefetch" href="/docs/assets/js/841.53a01594.js"><link rel="prefetch" href="/docs/assets/js/842.4f3eb7b5.js"><link rel="prefetch" href="/docs/assets/js/843.caae9187.js"><link rel="prefetch" href="/docs/assets/js/844.6fd18438.js"><link rel="prefetch" href="/docs/assets/js/845.2c902f2b.js"><link rel="prefetch" href="/docs/assets/js/846.6597c1f1.js"><link rel="prefetch" href="/docs/assets/js/847.9c04cf32.js"><link rel="prefetch" href="/docs/assets/js/848.c3a3684e.js"><link rel="prefetch" href="/docs/assets/js/849.6dcbb2db.js"><link rel="prefetch" href="/docs/assets/js/85.af8d2a92.js"><link rel="prefetch" href="/docs/assets/js/850.90239a01.js"><link rel="prefetch" href="/docs/assets/js/851.102a0322.js"><link rel="prefetch" href="/docs/assets/js/852.e652a448.js"><link rel="prefetch" href="/docs/assets/js/853.f4d2b825.js"><link rel="prefetch" href="/docs/assets/js/854.6bb06b12.js"><link rel="prefetch" href="/docs/assets/js/855.c41511ec.js"><link rel="prefetch" href="/docs/assets/js/856.bac0af57.js"><link rel="prefetch" href="/docs/assets/js/857.dfc83bd1.js"><link rel="prefetch" href="/docs/assets/js/858.1cee10a2.js"><link rel="prefetch" href="/docs/assets/js/859.511decf8.js"><link rel="prefetch" href="/docs/assets/js/86.76b77201.js"><link rel="prefetch" href="/docs/assets/js/860.8d26e878.js"><link rel="prefetch" href="/docs/assets/js/861.c6e8cd79.js"><link rel="prefetch" href="/docs/assets/js/862.9b4e8cfc.js"><link rel="prefetch" href="/docs/assets/js/863.b7e8f9da.js"><link rel="prefetch" href="/docs/assets/js/864.b7ae0a6d.js"><link rel="prefetch" href="/docs/assets/js/865.c4d6788c.js"><link rel="prefetch" href="/docs/assets/js/866.e47bf462.js"><link rel="prefetch" href="/docs/assets/js/867.a1688b10.js"><link rel="prefetch" href="/docs/assets/js/868.dc685dae.js"><link rel="prefetch" href="/docs/assets/js/869.8c7be1e3.js"><link rel="prefetch" href="/docs/assets/js/87.5fd4f2ce.js"><link rel="prefetch" href="/docs/assets/js/870.7cec79d2.js"><link rel="prefetch" href="/docs/assets/js/871.a8910b22.js"><link rel="prefetch" href="/docs/assets/js/872.1062b445.js"><link rel="prefetch" href="/docs/assets/js/873.d0260d6c.js"><link rel="prefetch" href="/docs/assets/js/874.117faf2e.js"><link rel="prefetch" href="/docs/assets/js/875.61161f75.js"><link rel="prefetch" href="/docs/assets/js/876.d8dda88a.js"><link rel="prefetch" href="/docs/assets/js/877.bed17928.js"><link rel="prefetch" href="/docs/assets/js/878.12cc970b.js"><link rel="prefetch" href="/docs/assets/js/879.f0c46f93.js"><link rel="prefetch" href="/docs/assets/js/88.a9326a7c.js"><link rel="prefetch" href="/docs/assets/js/880.157427f1.js"><link rel="prefetch" href="/docs/assets/js/881.9c0da1f9.js"><link rel="prefetch" href="/docs/assets/js/882.6461ef8f.js"><link rel="prefetch" href="/docs/assets/js/883.90c002d8.js"><link rel="prefetch" href="/docs/assets/js/884.4acc2abe.js"><link rel="prefetch" href="/docs/assets/js/885.7e72b9e9.js"><link rel="prefetch" href="/docs/assets/js/886.2db6682c.js"><link rel="prefetch" href="/docs/assets/js/887.30d8299e.js"><link rel="prefetch" href="/docs/assets/js/888.14f88192.js"><link rel="prefetch" href="/docs/assets/js/889.6b4b394b.js"><link rel="prefetch" href="/docs/assets/js/89.5f25c45f.js"><link rel="prefetch" href="/docs/assets/js/890.88242d66.js"><link rel="prefetch" href="/docs/assets/js/891.705598af.js"><link rel="prefetch" href="/docs/assets/js/892.d5112333.js"><link rel="prefetch" href="/docs/assets/js/893.f047a16d.js"><link rel="prefetch" href="/docs/assets/js/894.e8038193.js"><link rel="prefetch" href="/docs/assets/js/895.4f559c6f.js"><link rel="prefetch" href="/docs/assets/js/896.7e552c35.js"><link rel="prefetch" href="/docs/assets/js/897.61632210.js"><link rel="prefetch" href="/docs/assets/js/898.8c635c4e.js"><link rel="prefetch" href="/docs/assets/js/899.646bcafd.js"><link rel="prefetch" href="/docs/assets/js/9.051f2e4b.js"><link rel="prefetch" href="/docs/assets/js/90.63904893.js"><link rel="prefetch" href="/docs/assets/js/900.56de8114.js"><link rel="prefetch" href="/docs/assets/js/901.1df8d385.js"><link rel="prefetch" href="/docs/assets/js/902.1078e067.js"><link rel="prefetch" href="/docs/assets/js/903.eaab3260.js"><link rel="prefetch" href="/docs/assets/js/904.ac9efd3e.js"><link rel="prefetch" href="/docs/assets/js/905.f1397c44.js"><link rel="prefetch" href="/docs/assets/js/906.e1d3ab12.js"><link rel="prefetch" href="/docs/assets/js/907.5f6baa09.js"><link rel="prefetch" href="/docs/assets/js/908.0d4c29d0.js"><link rel="prefetch" href="/docs/assets/js/909.f2cd4ac6.js"><link rel="prefetch" href="/docs/assets/js/91.5ce7f0c3.js"><link rel="prefetch" href="/docs/assets/js/910.6fcdebc8.js"><link rel="prefetch" href="/docs/assets/js/911.6777957c.js"><link rel="prefetch" href="/docs/assets/js/912.192ae00e.js"><link rel="prefetch" href="/docs/assets/js/913.001e2b14.js"><link rel="prefetch" href="/docs/assets/js/914.f42662fc.js"><link rel="prefetch" href="/docs/assets/js/915.cac4fcbb.js"><link rel="prefetch" href="/docs/assets/js/916.17096861.js"><link rel="prefetch" href="/docs/assets/js/917.5d3aa2cd.js"><link rel="prefetch" href="/docs/assets/js/918.067ca6c4.js"><link rel="prefetch" href="/docs/assets/js/919.96b3dd13.js"><link rel="prefetch" href="/docs/assets/js/92.03afd5f0.js"><link rel="prefetch" href="/docs/assets/js/920.c75da0a5.js"><link rel="prefetch" href="/docs/assets/js/921.de79d8a6.js"><link rel="prefetch" href="/docs/assets/js/922.0f1918f7.js"><link rel="prefetch" href="/docs/assets/js/923.4b394cbf.js"><link rel="prefetch" href="/docs/assets/js/924.60cd234f.js"><link rel="prefetch" href="/docs/assets/js/925.39a12e0e.js"><link rel="prefetch" href="/docs/assets/js/926.c81ddd59.js"><link rel="prefetch" href="/docs/assets/js/927.9ccb47e4.js"><link rel="prefetch" href="/docs/assets/js/928.2b34630c.js"><link rel="prefetch" href="/docs/assets/js/929.6683f400.js"><link rel="prefetch" href="/docs/assets/js/93.a9b56f5a.js"><link rel="prefetch" href="/docs/assets/js/930.098e3a4a.js"><link rel="prefetch" href="/docs/assets/js/931.7fcfc095.js"><link rel="prefetch" href="/docs/assets/js/932.15375ce8.js"><link rel="prefetch" href="/docs/assets/js/933.d3eebeb5.js"><link rel="prefetch" href="/docs/assets/js/934.54978a6f.js"><link rel="prefetch" href="/docs/assets/js/935.c91e4f22.js"><link rel="prefetch" href="/docs/assets/js/936.a8735ceb.js"><link rel="prefetch" href="/docs/assets/js/937.85182e4c.js"><link rel="prefetch" href="/docs/assets/js/938.a93039f9.js"><link rel="prefetch" href="/docs/assets/js/939.eec54478.js"><link rel="prefetch" href="/docs/assets/js/94.755cb533.js"><link rel="prefetch" href="/docs/assets/js/940.4740eaea.js"><link rel="prefetch" href="/docs/assets/js/941.3b89acaf.js"><link rel="prefetch" href="/docs/assets/js/942.1f5a7556.js"><link rel="prefetch" href="/docs/assets/js/943.5dc97c29.js"><link rel="prefetch" href="/docs/assets/js/944.9961bf92.js"><link rel="prefetch" href="/docs/assets/js/945.71197478.js"><link rel="prefetch" href="/docs/assets/js/946.911f5769.js"><link rel="prefetch" href="/docs/assets/js/947.2d677338.js"><link rel="prefetch" href="/docs/assets/js/948.7517f60b.js"><link rel="prefetch" href="/docs/assets/js/949.d5a72238.js"><link rel="prefetch" href="/docs/assets/js/95.b9022c5c.js"><link rel="prefetch" href="/docs/assets/js/950.2a566f7c.js"><link rel="prefetch" href="/docs/assets/js/951.4ed58b1a.js"><link rel="prefetch" href="/docs/assets/js/952.2c11c1a2.js"><link rel="prefetch" href="/docs/assets/js/953.92888b69.js"><link rel="prefetch" href="/docs/assets/js/954.0310924b.js"><link rel="prefetch" href="/docs/assets/js/955.81a20420.js"><link rel="prefetch" href="/docs/assets/js/956.d4ffd582.js"><link rel="prefetch" href="/docs/assets/js/957.44f1ecbf.js"><link rel="prefetch" href="/docs/assets/js/958.e34debbc.js"><link rel="prefetch" href="/docs/assets/js/959.e097670d.js"><link rel="prefetch" href="/docs/assets/js/96.ee73e6c4.js"><link rel="prefetch" href="/docs/assets/js/960.0cc1a18c.js"><link rel="prefetch" href="/docs/assets/js/961.9b321ce4.js"><link rel="prefetch" href="/docs/assets/js/962.eb3e7815.js"><link rel="prefetch" href="/docs/assets/js/963.47c3cb4c.js"><link rel="prefetch" href="/docs/assets/js/964.6e1a2f57.js"><link rel="prefetch" href="/docs/assets/js/965.c5ad05e3.js"><link rel="prefetch" href="/docs/assets/js/966.964bbdad.js"><link rel="prefetch" href="/docs/assets/js/967.24ae6747.js"><link rel="prefetch" href="/docs/assets/js/968.c80e898b.js"><link rel="prefetch" href="/docs/assets/js/969.a00ccb6b.js"><link rel="prefetch" href="/docs/assets/js/97.b44fac77.js"><link rel="prefetch" href="/docs/assets/js/970.8533ba87.js"><link rel="prefetch" href="/docs/assets/js/971.67278162.js"><link rel="prefetch" href="/docs/assets/js/972.c2fa6219.js"><link rel="prefetch" href="/docs/assets/js/973.1fe23483.js"><link rel="prefetch" href="/docs/assets/js/974.d2ff44fe.js"><link rel="prefetch" href="/docs/assets/js/975.2d4bc6e6.js"><link rel="prefetch" href="/docs/assets/js/976.a6c7f38a.js"><link rel="prefetch" href="/docs/assets/js/977.3635a676.js"><link rel="prefetch" href="/docs/assets/js/978.f46b4826.js"><link rel="prefetch" href="/docs/assets/js/979.1353cba7.js"><link rel="prefetch" href="/docs/assets/js/98.9c54769a.js"><link rel="prefetch" href="/docs/assets/js/980.cdfc802c.js"><link rel="prefetch" href="/docs/assets/js/981.94cf3fc9.js"><link rel="prefetch" href="/docs/assets/js/982.a6814225.js"><link rel="prefetch" href="/docs/assets/js/983.cfb42e21.js"><link rel="prefetch" href="/docs/assets/js/984.51f5d4ab.js"><link rel="prefetch" href="/docs/assets/js/985.1ea79184.js"><link rel="prefetch" href="/docs/assets/js/986.e0a2d63d.js"><link rel="prefetch" href="/docs/assets/js/987.e02525b3.js"><link rel="prefetch" href="/docs/assets/js/988.700902ac.js"><link rel="prefetch" href="/docs/assets/js/989.22f1560b.js"><link rel="prefetch" href="/docs/assets/js/99.df60c60f.js"><link rel="prefetch" href="/docs/assets/js/990.e5fb2404.js"><link rel="prefetch" href="/docs/assets/js/991.e7ebadf0.js"><link rel="prefetch" href="/docs/assets/js/992.4e1043b2.js"><link rel="prefetch" href="/docs/assets/js/993.c91aef48.js"><link rel="prefetch" href="/docs/assets/js/994.69c3d38e.js"><link rel="prefetch" href="/docs/assets/js/995.91000ab4.js"><link rel="prefetch" href="/docs/assets/js/996.9a58e9f4.js"><link rel="prefetch" href="/docs/assets/js/997.db9b9d32.js"><link rel="prefetch" href="/docs/assets/js/998.1b6526a0.js"><link rel="prefetch" href="/docs/assets/js/999.3f137356.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.1fca6052.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><!----> <span class="site-name">木可生森</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/node/html5/HTML基础/1 基本结构.html" class="nav-link">
  HTML5
</a></li><li class="dropdown-item"><!----> <a href="/docs/node/css3/css初级/CSS简介.html" class="nav-link">
  CSS3
</a></li><li class="dropdown-item"><!----> <a href="/docs/node/javaScript/js基础教程/变量声明.html" class="nav-link">
  javaScript
</a></li><li class="dropdown-item"><!----> <a href="/docs/node/调试/调试/ChromeDevTools.html" class="nav-link">
  调试
</a></li><li class="dropdown-item"><!----> <a href="/docs/node/typeScript/环境配置/介绍.html" class="nav-link">
  typeScript
</a></li><li class="dropdown-item"><!----> <a href="/docs/node/git/基本使用.html" class="nav-link">
  git
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue学习路线" class="dropdown-title"><span class="title">Vue学习路线</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue学习路线" class="mobile-dropdown-title"><span class="title">Vue学习路线</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/vue/npm/notes/npm.html" class="nav-link">
  NPM
</a></li><li class="dropdown-item"><!----> <a href="/docs/vue/模拟数据/json-server.html" class="nav-link">
  模拟数据
</a></li><li class="dropdown-item"><!----> <a href="/docs/vue/vite/vite.html" class="nav-link">
  vite
</a></li><li class="dropdown-item"><!----> <a href="/docs/vue/vue/vue基础/数据绑定渲染.html" class="nav-link">
  Vue2基础
</a></li><li class="dropdown-item"><!----> <a href="/docs/vue/nodejs/快速上手/认识nodejs.html" class="nav-link">
  nodejs
</a></li><li class="dropdown-item"><!----> <a href="/docs/vue/webpack/webpack.html" class="nav-link">
  webpack
</a></li></ul></div></div><div class="nav-item"><a href="/docs/数据结构/二叉树/二叉树基本操作.html" class="nav-link">
  数据结构
</a></div><div class="nav-item"><a href="/docs/算法/二分查找/二维数组查找.html" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/docs/手撕/call.html" class="nav-link">
  手撕
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面经" class="dropdown-title"><span class="title">面经</span> <span class="arrow down"></span></button> <button type="button" aria-label="面经" class="mobile-dropdown-title"><span class="title">面经</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/面经/牛客网/html/标签/日历.html" class="nav-link">
  牛客网
</a></li><li class="dropdown-item"><!----> <a href="/docs/面经/腾讯面经/HTML.html" class="nav-link">
  面经
</a></li></ul></div></div><div class="nav-item"><a href="/docs/蓝桥杯/模拟题/实现搜一搜.html" class="nav-link">
  蓝桥杯
</a></div><div class="nav-item"><a href="/docs/项目/作家/小程序问题.html" class="nav-link">
  项目笔记
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具箱" class="mobile-dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          在线编辑
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tinypng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片压缩
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          在线服务
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.aliyun.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阿里云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://cloud.tencent.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  腾讯云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          博客指南
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://juejin.im/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://blog.csdn.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://v3.cn.vuejs.org/guide/introduction.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue3
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://cn.vuejs.org/v2/guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="前端基础" class="dropdown-title"><span class="title">前端基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="前端基础" class="mobile-dropdown-title"><span class="title">前端基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/node/html5/HTML基础/1 基本结构.html" class="nav-link">
  HTML5
</a></li><li class="dropdown-item"><!----> <a href="/docs/node/css3/css初级/CSS简介.html" class="nav-link">
  CSS3
</a></li><li class="dropdown-item"><!----> <a href="/docs/node/javaScript/js基础教程/变量声明.html" class="nav-link">
  javaScript
</a></li><li class="dropdown-item"><!----> <a href="/docs/node/调试/调试/ChromeDevTools.html" class="nav-link">
  调试
</a></li><li class="dropdown-item"><!----> <a href="/docs/node/typeScript/环境配置/介绍.html" class="nav-link">
  typeScript
</a></li><li class="dropdown-item"><!----> <a href="/docs/node/git/基本使用.html" class="nav-link">
  git
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue学习路线" class="dropdown-title"><span class="title">Vue学习路线</span> <span class="arrow down"></span></button> <button type="button" aria-label="Vue学习路线" class="mobile-dropdown-title"><span class="title">Vue学习路线</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/vue/npm/notes/npm.html" class="nav-link">
  NPM
</a></li><li class="dropdown-item"><!----> <a href="/docs/vue/模拟数据/json-server.html" class="nav-link">
  模拟数据
</a></li><li class="dropdown-item"><!----> <a href="/docs/vue/vite/vite.html" class="nav-link">
  vite
</a></li><li class="dropdown-item"><!----> <a href="/docs/vue/vue/vue基础/数据绑定渲染.html" class="nav-link">
  Vue2基础
</a></li><li class="dropdown-item"><!----> <a href="/docs/vue/nodejs/快速上手/认识nodejs.html" class="nav-link">
  nodejs
</a></li><li class="dropdown-item"><!----> <a href="/docs/vue/webpack/webpack.html" class="nav-link">
  webpack
</a></li></ul></div></div><div class="nav-item"><a href="/docs/数据结构/二叉树/二叉树基本操作.html" class="nav-link">
  数据结构
</a></div><div class="nav-item"><a href="/docs/算法/二分查找/二维数组查找.html" class="nav-link">
  算法
</a></div><div class="nav-item"><a href="/docs/手撕/call.html" class="nav-link">
  手撕
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面经" class="dropdown-title"><span class="title">面经</span> <span class="arrow down"></span></button> <button type="button" aria-label="面经" class="mobile-dropdown-title"><span class="title">面经</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/面经/牛客网/html/标签/日历.html" class="nav-link">
  牛客网
</a></li><li class="dropdown-item"><!----> <a href="/docs/面经/腾讯面经/HTML.html" class="nav-link">
  面经
</a></li></ul></div></div><div class="nav-item"><a href="/docs/蓝桥杯/模拟题/实现搜一搜.html" class="nav-link">
  蓝桥杯
</a></div><div class="nav-item"><a href="/docs/项目/作家/小程序问题.html" class="nav-link">
  项目笔记
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具箱" class="dropdown-title"><span class="title">工具箱</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具箱" class="mobile-dropdown-title"><span class="title">工具箱</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          在线编辑
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tinypng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片压缩
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          在线服务
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.aliyun.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  阿里云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://cloud.tencent.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  腾讯云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          博客指南
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://juejin.im/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://blog.csdn.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://v3.cn.vuejs.org/guide/introduction.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue3
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://cn.vuejs.org/v2/guide/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Vue2
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>面经</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/面经/腾讯面经/HTML.html" class="sidebar-link">HTML</a></li><li><a href="/docs/面经/腾讯面经/CSS.html" class="sidebar-link">CSS</a></li><li><a href="/docs/面经/腾讯面经/JS.html" class="active sidebar-link">JS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_1-重点-什么是事件代理-事件委托-有什么好处" class="sidebar-link">1(重点)什么是事件代理（事件委托） 有什么好处</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#什么是事件代理" class="sidebar-link">什么是事件代理</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#应用场景" class="sidebar-link">应用场景</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#处理子元素不同操作" class="sidebar-link">处理子元素不同操作</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#添加子元素还能代理么" class="sidebar-link">添加子元素还能代理么？</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#难度升级-使用递归从里往外冒泡" class="sidebar-link">难度升级，使用递归从里往外冒泡</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#什么是事件委托-e-currenttarget-与-e-target-有何区别" class="sidebar-link">什么是事件委托，e.currentTarget 与 e.target 有何区别</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#总结" class="sidebar-link">总结</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_2addeventlistener-默认是捕获还是冒泡" class="sidebar-link">2addEventListener 默认是捕获还是冒泡</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_3-重点-apply-call-bind-区别" class="sidebar-link">3 (重点)apply call bind 区别</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_4-重点-什么是闭包、举出闭包实际场景运用的例子" class="sidebar-link">4 (重点)什么是闭包、举出闭包实际场景运用的例子</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#什么是闭包" class="sidebar-link">什么是闭包</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#形成闭包的原因" class="sidebar-link">形成闭包的原因</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#闭包变量存储的位置" class="sidebar-link">闭包变量存储的位置</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#闭包的作用" class="sidebar-link">闭包的作用</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#使用场景" class="sidebar-link">使用场景</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#经典面试题" class="sidebar-link">经典面试题</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#思考题和上面有何不同-字节" class="sidebar-link">思考题和上面有何不同 (字节)</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_5-重点-从0到1讲一下事件轮询-eventloop" class="sidebar-link">5 (重点)从0到1讲一下事件轮询 eventLoop</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_6-重点-手写-call-apply-bind" class="sidebar-link">6 (重点)手写 call apply bind</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#手写call" class="sidebar-link">手写call</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#手写-apply" class="sidebar-link">手写 apply</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#手写-bind" class="sidebar-link">手写 bind</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_7-重点-手写promise" class="sidebar-link">7 (重点)手写promise</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#起步构建" class="sidebar-link">起步构建</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#全代码" class="sidebar-link">全代码</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#重点-手写promise-all" class="sidebar-link">重点 手写promise.all</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#重点-手写promise-race" class="sidebar-link">重点 手写promise.race</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#手写-promise-allsettled" class="sidebar-link">手写 promise.allSettled</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_8-重点-手写寄生组合继承" class="sidebar-link">8 (重点)手写寄生组合继承</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_9-重点-手写new" class="sidebar-link">9 （重点）手写new</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#new命令原理" class="sidebar-link">new命令原理</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#特性" class="sidebar-link">特性</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#mynew" class="sidebar-link">myNew</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#拓展延伸" class="sidebar-link">拓展延伸</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_10-重点-手写settimeout-模拟实现setintervel" class="sidebar-link">10 (重点)手写setTimeout 模拟实现setIntervel</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_11-重点-手写发布订阅模式" class="sidebar-link">11 (重点)手写发布订阅模式</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_12-重点-手写防抖节流" class="sidebar-link">12 (重点)手写防抖节流</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#防抖" class="sidebar-link">防抖</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#节流" class="sidebar-link">节流</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_13-重点-什么是闭包-闭包使用场景-有何影响" class="sidebar-link">13 (重点)什么是闭包，闭包使用场景,有何影响</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_14-手写-将虚拟-dom-转化为真实-dom-类似的递归题-必考" class="sidebar-link">14 手写-将虚拟 Dom 转化为真实 Dom（类似的递归题-必考）</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_15-重点-对象的扁平化flatten方法-数组扁平化flatten方法" class="sidebar-link">15 (重点)对象的扁平化flatten方法,数组扁平化flatten方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#将对象扁平化" class="sidebar-link">将对象扁平化</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#重点-数组扁平化" class="sidebar-link">(重点)数组扁平化</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#第一种-while-some" class="sidebar-link">第一种 while + some</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#第二次-递归-reduce" class="sidebar-link">第二次  递归 + reduce</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_16-怎么在制定数据源里面生成一个长度为-n-的不重复随机数组-能有几种方法-时间复杂度多少-字节" class="sidebar-link">16 怎么在制定数据源里面生成一个长度为 n 的不重复随机数组 能有几种方法 时间复杂度多少（字节）</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_17-tree-shaking-是什么-原理是什么" class="sidebar-link">17 tree shaking 是什么，原理是什么</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_18-重点-原型链判断" class="sidebar-link">18 (重点)原型链判断</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_19-raf-和-ric-是什么" class="sidebar-link">19 RAF 和 RIC 是什么</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_20-es6-的-let-实现原理" class="sidebar-link">20 Es6 的 let 实现原理</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_21-require-具体实现原理是什么" class="sidebar-link">21 require 具体实现原理是什么</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_22-重点-从0到1介绍promise" class="sidebar-link">22 (重点)从0到1介绍promise</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#为什么会有promise" class="sidebar-link">为什么会有promise</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#promise的三种状态" class="sidebar-link">promise的三种状态</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#特点" class="sidebar-link">特点</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#创建promise实例" class="sidebar-link">创建Promise实例</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#then方法" class="sidebar-link">then方法</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#异常捕获" class="sidebar-link">异常捕获</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#链式调用" class="sidebar-link">链式调用</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#finally" class="sidebar-link">finally</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#promise相关api" class="sidebar-link">Promise相关Api</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#重点-async-await" class="sidebar-link">(重点)async await</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_23-重点-从0到1介绍原型和原型链" class="sidebar-link">23 (重点)从0到1介绍原型和原型链</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#二、构造函数" class="sidebar-link">二、构造函数</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#三、原型" class="sidebar-link">三、原型</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#四、原型链" class="sidebar-link">四、原型链</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#五、继承-es5方法" class="sidebar-link">五、继承 - ES5方法</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#六、类" class="sidebar-link">六、类</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#七、继承-es6方法" class="sidebar-link">七、继承 - ES6方法</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#八、类和构造函数的区别" class="sidebar-link">八、类和构造函数的区别</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#九、总结" class="sidebar-link">九、总结</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#十、-什么是语法糖" class="sidebar-link">十、 什么是语法糖</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#十一、面试题" class="sidebar-link">十一、面试题</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_24-重点-隐式转换" class="sidebar-link">24 (重点)隐式转换</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_25-重点-手写深拷贝" class="sidebar-link">25 (重点)手写深拷贝</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_26-重点-说一下知道的所有数组方法" class="sidebar-link">26 (重点)说一下知道的所有数组方法</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_27-重点-手写some" class="sidebar-link">27 (重点)手写some</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_28-重点-判断数据类型的方法" class="sidebar-link">28 (重点)判断数据类型的方法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#typeof" class="sidebar-link">typeof</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#object-prototype-tostring" class="sidebar-link">Object.prototype.toString</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#instanceof" class="sidebar-link">instanceof</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#constructor" class="sidebar-link">constructor</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#数据类型检测终极方法" class="sidebar-link">数据类型检测终极方法</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_29-重点-实现拖动" class="sidebar-link">29 (重点)实现拖动</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#拖放的流程对应的事件" class="sidebar-link">拖放的流程对应的事件</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#选中" class="sidebar-link">选中</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#拖动" class="sidebar-link">拖动</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#释放" class="sidebar-link">释放</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_30-运算符" class="sidebar-link">30 ...运算符</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#spread运算符" class="sidebar-link">spread运算符</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#rest运算符" class="sidebar-link">rest运算符</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_31-重点-手写reduce" class="sidebar-link">31 (重点)手写reduce</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_32-重点-手写instanceof" class="sidebar-link">32 (重点)手写instanceof</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_33-如何计算白屏时间和首屏时间" class="sidebar-link">33 如何计算白屏时间和首屏时间</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_34-如何判断当前环境是移动端还是-pc-端" class="sidebar-link">34 如何判断当前环境是移动端还是 PC 端</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_35-input-中监听值的变化是在监听什么事件" class="sidebar-link">35 input 中监听值的变化是在监听什么事件</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_36-简单介绍-requestidlecallback-及使用场景" class="sidebar-link">36 简单介绍 requestIdleCallback 及使用场景</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_37-如何找到当前页面出现次数最多的-html-标签" class="sidebar-link">37 如何找到当前页面出现次数最多的 HTML 标签</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_38-前端如何实现文件上传功能" class="sidebar-link">38 前端如何实现文件上传功能</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_40-如何取消请求的发送" class="sidebar-link">40 如何取消请求的发送</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_41-dom-中如何阻止事件默认行为-如何判断事件否可阻止" class="sidebar-link">41 DOM 中如何阻止事件默认行为，如何判断事件否可阻止？</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_42-dom-中-element-与-node-有何区别" class="sidebar-link">42 DOM 中 Element 与 Node 有何区别</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_43-如何设置一个支持过期时间的-localstorage" class="sidebar-link">43 如何设置一个支持过期时间的 localStorage</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_44-浏览器中如何读取二进制信息" class="sidebar-link">44 浏览器中如何读取二进制信息</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_45-在浏览器中点击-a-标签保存为文件如何做" class="sidebar-link">45 在浏览器中点击 a 标签保存为文件如何做</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_46-浏览器中监听事件函数-addeventlistener-第三个参数有那些值" class="sidebar-link">46 浏览器中监听事件函数 addEventListener 第三个参数有那些值</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_47-浏览器中如何使用原生的-esm" class="sidebar-link">47 浏览器中如何使用原生的 ESM</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_48-在-js-中如何把类数组转化为数组" class="sidebar-link">48 在 js 中如何把类数组转化为数组</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_49-array-100-map-x-1-结果是多少" class="sidebar-link">49 Array(100).map(x =&gt; 1) 结果是多少</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_50-如何实现-compose-函数-组合函数-进行函数合成" class="sidebar-link">50 如何实现 compose 函数(组合函数)，进行函数合成</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_51-前端中遇到过处理二进制的场景吗" class="sidebar-link">51 前端中遇到过处理二进制的场景吗</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_52-如何实现类似-lodash-get-函数" class="sidebar-link">52 如何实现类似 lodash.get 函数</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_53-js-中什么是可选链操作符-如何访问数组" class="sidebar-link">53 js 中什么是可选链操作符，如何访问数组</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_54-flatmap" class="sidebar-link">54 flatMap()</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_55-如何裁剪图片-情景-选择头像" class="sidebar-link">55 如何裁剪图片 (情景：选择头像)</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_56-如何实现一个-async-await" class="sidebar-link">56 如何实现一个 async/await</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_57-如何使用-async-await-实现-promise-all-的效果" class="sidebar-link">57 如何使用 async/await 实现 Promise.all 的效果</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_58-使用js实现一个lru-最近最少使用-缓存机制" class="sidebar-link">58 使用js实现一个LRU (最近最少使用) 缓存机制</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_59-实现一个-once-函数-记忆返回结果只执行一次" class="sidebar-link">59 实现一个 once 函数，记忆返回结果只执行一次</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_60-如何实现一个函数-isplainobject-判断是否为纯对象" class="sidebar-link">60 如何实现一个函数 isPlainObject 判断是否为纯对象</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_61-如何实现一个无限累加的-sum-函数" class="sidebar-link">61 如何实现一个无限累加的 sum 函数</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_62-js-如何实现一个同步的-sleep-函数" class="sidebar-link">62 JS 如何实现一个同步的 sleep 函数</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_63-实现一个函数用来解析-url-的-querystring" class="sidebar-link">63 实现一个函数用来解析 URL 的 querystring</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_64-js-如何实现一个-sleep-delay-函数" class="sidebar-link">64 JS 如何实现一个 sleep/delay 函数</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_65-如何实现一个-sample-函数-从数组中随机取一个元素" class="sidebar-link">65 如何实现一个 sample 函数，从数组中随机取一个元素</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_66-实现一个函数用来对-url-的-querystring-进行编码" class="sidebar-link">66 实现一个函数用来对 URL 的 querystring 进行编码</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_67-如何实现一个数组洗牌函数-shuffle" class="sidebar-link">67 如何实现一个数组洗牌函数 shuffle</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_68-js-如何翻转一个字符串" class="sidebar-link">68 JS 如何翻转一个字符串</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_69-关于模块化-什么是-amd-和-umd" class="sidebar-link">69 关于模块化，什么是 amd 和 umd</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_70-如何实现一个-promise-any" class="sidebar-link">70 如何实现一个 promise.any</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_71-如何把一个数组随机打乱" class="sidebar-link">71 如何把一个数组随机打乱</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_72-map-与-weakmap-有何区别" class="sidebar-link">72 Map 与 WeakMap 有何区别</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_73-javascript-数组中有那些方法可以改变自身-那些不可以" class="sidebar-link">73 Javascript 数组中有那些方法可以改变自身，那些不可以</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_74-简述-object-defineproperty" class="sidebar-link">74 简述 Object.defineProperty</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#数据描述符-data-descriptor" class="sidebar-link">数据描述符 (data descriptor)</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#存取描述符-accessor-descriptor" class="sidebar-link">存取描述符 (accessor descriptor)</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_75-object-keys-与-object-getownpropertynames-有何区别" class="sidebar-link">75 Object.keys 与 Object.getOwnPropertyNames() 有何区别</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_76-实现一个-inherits-函数进行继承" class="sidebar-link">76 实现一个 inherits 函数进行继承</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_77-为何-0-1-0-2-不等于-0-3-应如何做相等比较" class="sidebar-link">77 为何 0.1+0.2 不等于 0.3，应如何做相等比较</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_78-重点-关于类型转化-判断以下代码输出" class="sidebar-link">78 （重点）关于类型转化，判断以下代码输出</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_79-关于暂时性死域-判断以下代码输出" class="sidebar-link">79 关于暂时性死域，判断以下代码输出</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_80-重点-关于-this-判断以下代码输出" class="sidebar-link">80 （重点）关于 this，判断以下代码输出</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_81-关于-new-判断以下代码输出" class="sidebar-link">81 关于 new，判断以下代码输出</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_82-什么是纯函数" class="sidebar-link">82 什么是纯函数</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_83-给数字添加千位符" class="sidebar-link">83 给数字添加千位符</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_84-如何实现一个深比较的函数-deepequal" class="sidebar-link">84 如何实现一个深比较的函数 deepEqual</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_85-object-is-与全等运算符-有何区别" class="sidebar-link">85 Object.is 与全等运算符(===)有何区别</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_86-如何把对象转化为-key-value-的二维数组" class="sidebar-link">86 如何把对象转化为 key/value 的二维数组</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_87-在-js-中如何监听-object-某个属性值的变化" class="sidebar-link">87 在 JS 中如何监听 Object 某个属性值的变化</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_88-使用-js-如何生成一个随机字符串" class="sidebar-link">88 使用 JS 如何生成一个随机字符串</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_89-如何判断一个数值为整数" class="sidebar-link">89 如何判断一个数值为整数</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_90-如何把字符串全部转化为小写格式" class="sidebar-link">90 如何把字符串全部转化为小写格式</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_91-如何把一个数组-array-转化为迭代器-iterable" class="sidebar-link">91 如何把一个数组 Array 转化为迭代器 Iterable</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_92-js-如何检测到对象中有循环引用" class="sidebar-link">92 JS 如何检测到对象中有循环引用</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_93-实现二进制与十进制的互相转化的两个函数" class="sidebar-link">93 实现二进制与十进制的互相转化的两个函数</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_94-什么是原码、补码与反码" class="sidebar-link">94 什么是原码、补码与反码</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_95-settimeout-为什么最小只能设置-4ms-如何实现一个-0ms-的-settimeout" class="sidebar-link">95 setTimeout 为什么最小只能设置 4ms，如何实现一个 0ms 的 setTimeout?</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_96-return-promise-与-return-await-promise-有何区别" class="sidebar-link">96 return promise 与 return await promise 有何区别</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_97-在-es6-class-中-super-的过程中做了什么" class="sidebar-link">97 在 ES6 Class 中，super 的过程中做了什么</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_98-如何实现-promise-map-限制-promise-并发数" class="sidebar-link">98 如何实现 promise.map，限制 promise 并发数</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_99-对以下字符串进行压缩编码" class="sidebar-link">99 对以下字符串进行压缩编码</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_100-随机生成六位数的手机验证码-重复-不可重复" class="sidebar-link">100 随机生成六位数的手机验证码(重复/不可重复)</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_101-实现一个函数-camelcase-对变量转化为驼峰命名" class="sidebar-link">101 实现一个函数 camelCase，对变量转化为驼峰命名</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_102-如何根据-random5-随机生成-0-5-生成一个函数-random7" class="sidebar-link">102 如何根据 random5 随机生成 [0, 5]，生成一个函数 random7？</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_103-实现函数-promisify-把回调函数改成-promise-形式" class="sidebar-link">103 实现函数 promisify，把回调函数改成 promise 形式</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_104-重点-你是怎么学习es6的" class="sidebar-link">104 (重点)你是怎么学习ES6的</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_105-重点-初始化长度为100的数组-各项为1" class="sidebar-link">105 (重点)初始化长度为100的数组，各项为1</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_106-了解blob-api吗" class="sidebar-link">106 了解blob API吗</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_107-重点-falsely变量" class="sidebar-link">107 (重点)！！falsely变量</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_108-重点-字符串拼接" class="sidebar-link">108 （重点）字符串拼接</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_109-重点-列举强制类型转换和隐式类型转换" class="sidebar-link">109 （重点）列举强制类型转换和隐式类型转换</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_110-重点-手写深度比较" class="sidebar-link">110 (重点)手写深度比较</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_111-重点-split和join区别" class="sidebar-link">111 (重点)split和join区别</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_112-重点-数组的api有哪些是纯函数" class="sidebar-link">112 （重点）数组的api有哪些是纯函数</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_113-重点-函数声明和函数表达式的区别" class="sidebar-link">113 （重点）函数声明和函数表达式的区别</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_114-重点-new-object-和object-create-区别" class="sidebar-link">114 （重点）new Object 和Object.create()区别</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_115-重点-手写字符串trim方法" class="sidebar-link">115 (重点)手写字符串trim方法</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_116-重点-获取数字的最大值" class="sidebar-link">116 （重点）获取数字的最大值</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_117-捕获js中异常" class="sidebar-link">117 捕获js中异常</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_118-重点-什么是json" class="sidebar-link">118 （重点）什么是JSON</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_119-重点-获取当前页面url参数" class="sidebar-link">119 (重点)获取当前页面url参数</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_120-将url参数转换为js对象" class="sidebar-link">120 将url参数转换为js对象</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_121-重点-数组去重" class="sidebar-link">121 （重点）数组去重</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_122-重点-介绍一下raf-requestanimateframe" class="sidebar-link">122 （重点）介绍一下RAF requestAnimateFrame</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_123-重点-请说明ajax-fetch-axios三者的区别" class="sidebar-link">123 (重点)请说明ajax Fetch Axios三者的区别</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#ajax" class="sidebar-link">ajax</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#fetch" class="sidebar-link">fetch</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#axios" class="sidebar-link">Axios</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_124-重点-for-in-for-of区别" class="sidebar-link">124 (重点)forin forof区别</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_125-重点-htmlcollection-和-nodelist区别" class="sidebar-link">125 (重点)HTMLCollection 和 NodeList区别</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_126-重点-严格模式" class="sidebar-link">126 （重点）严格模式</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_127-重点-http跨域请求时为何发送options请求" class="sidebar-link">127 (重点)HTTP跨域请求时为何发送options请求</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_128-重点-垃圾回收与内存泄漏" class="sidebar-link">128 （重点）垃圾回收与内存泄漏</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_129-浏览器和nodejs事件循环有什么区别" class="sidebar-link">129 浏览器和nodejs事件循环有什么区别</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_130-重点-遍历数组-for和foreach哪个快" class="sidebar-link">130 （重点）遍历数组，for和forEach哪个快</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_131-jsbridge原理" class="sidebar-link">131 jsbridge原理</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_132-重点-script-defer和async有什么区别" class="sidebar-link">132 （重点）script defer和async有什么区别</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_133-重点-preload-和prefetch" class="sidebar-link">133 （重点）preload 和prefetch</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_134-重点-如何实现网页多标签通信" class="sidebar-link">134 （重点）如何实现网页多标签通信</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#多标签通信" class="sidebar-link">多标签通信</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#websocket" class="sidebar-link">websocket</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#localstorage" class="sidebar-link">localStorage</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#sharedworker" class="sidebar-link">SharedWorker</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#总结-3" class="sidebar-link">总结</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_135-重点-网页和iframe如何通信" class="sidebar-link">135 (重点)网页和iframe如何通信</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_136-重点-修改函数参数" class="sidebar-link">136 (重点)修改函数参数</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#dom" class="sidebar-link">Dom</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#获取dom节点的方法" class="sidebar-link">获取dom节点的方法</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#新增-插入节点、删除节点" class="sidebar-link">新增/插入节点、删除节点</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#重点-dom性能" class="sidebar-link">（重点）Dom性能</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#bom" class="sidebar-link">Bom</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#获取浏览器信息" class="sidebar-link">获取浏览器信息</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#location" class="sidebar-link">location</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#history" class="sidebar-link">history</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#事件绑定" class="sidebar-link">事件绑定</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#通用绑定函数" class="sidebar-link">通用绑定函数</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#事件冒泡" class="sidebar-link">事件冒泡</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#事件代理" class="sidebar-link">事件代理</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#ajax-2" class="sidebar-link">ajax</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#手写一个简易的ajax" class="sidebar-link">手写一个简易的ajax</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#跨域的常用实现方式" class="sidebar-link">跨域的常用实现方式</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#存储" class="sidebar-link">存储</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_1-let-const-var的区别。const定义的对象是否可以修改" class="sidebar-link">1.let,const,var的区别。const定义的对象是否可以修改</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_2-js的原型和原型链-原型链的终点在哪里" class="sidebar-link">2.js的原型和原型链，原型链的终点在哪里？</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_3-重点-js的基本数据类型" class="sidebar-link">3.(重点)js的基本数据类型</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_4-事件委托-详细讲" class="sidebar-link">4.事件委托，详细讲</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_5-es6新特性-常用语法有哪些" class="sidebar-link">5.es6新特性，常用语法有哪些</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_6-this的原理-call-apply-bind的区别" class="sidebar-link">6.this的原理，call，apply，bind的区别</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_7-全等和弱等的区别" class="sidebar-link">7.全等和弱等的区别</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_8-构造函数的原型" class="sidebar-link">8.构造函数的原型</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_9-函数柯里化" class="sidebar-link">9.函数柯里化</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_10-数组浅拷贝" class="sidebar-link">10.数组浅拷贝</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_11-立即执行函数" class="sidebar-link">11.立即执行函数</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_12-浏览器事件模型-ie的有什么特殊-如何兼容-attachevent与addeventlistener" class="sidebar-link">12.浏览器事件模型, IE的有什么特殊, 如何兼容(attachEvent与addEventListener)</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_13-js宏任务和微任务" class="sidebar-link">13.js宏任务和微任务</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_14-数组查找的方法" class="sidebar-link">14.数组查找的方法</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_15-了解过for-of吗" class="sidebar-link">15.了解过for…of吗</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_16-class继承和js继承的区别" class="sidebar-link">16.class继承和js继承的区别</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_17-的原型链" class="sidebar-link">17.{}的原型链</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_18-typeof-null是什么-为什么是这个结果。" class="sidebar-link">18.typeof null是什么，为什么是这个结果。</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_19-typeof和instanceof有什么区别-说说判断的原理" class="sidebar-link">19.typeof和instanceof有什么区别，说说判断的原理</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_20-重点-数组里面新加的方法你有用过哪些" class="sidebar-link">20.(重点)数组里面新加的方法你有用过哪些？</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_21-微任务有哪些" class="sidebar-link">21.微任务有哪些？</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_22-如何判断array和object" class="sidebar-link">22.如何判断Array和Object</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_23-js精度问题-0-1-0-2-0-3的问题" class="sidebar-link">23.js精度问题（0.1+0.2==0.3的问题）</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_24-讲一下generator生成器" class="sidebar-link">24.讲一下generator生成器</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_25-讲一下声明提升" class="sidebar-link">25.讲一下声明提升</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_26-讲一下块作用域" class="sidebar-link">26.讲一下块作用域</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_27-原型对象的constructor属性指向谁" class="sidebar-link">27.原型对象的constructor属性指向谁</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_28-dom规范跟js规范有什么区别" class="sidebar-link">28.dom规范跟js规范有什么区别？</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_29-js定时器-设置一个时间-会在那个时间之后准时执行吗" class="sidebar-link">29.js定时器，设置一个时间，会在那个时间之后准时执行吗？</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_30-transition有什么需要注意的地方" class="sidebar-link">30.transition有什么需要注意的地方？</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_31-js的错误监控机制有了解吗" class="sidebar-link">31.js的错误监控机制有了解吗？</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_32-重点-dom0和dom2" class="sidebar-link">32.(重点)Dom0和Dom2</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_2-重点-手写filter" class="sidebar-link">2.（重点）手写filter</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#定义和用法" class="sidebar-link">定义和用法</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#语法" class="sidebar-link">语法</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_3-settimeout第二个参数为0时和匿名自执行函数区别" class="sidebar-link">3.setTimeout第二个参数为0时和匿名自执行函数区别</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_4-js里堆和栈的区别" class="sidebar-link">4.js里堆和栈的区别</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_5-new操作符之后的操作" class="sidebar-link">5.new操作符之后的操作</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_6-重点-this指向" class="sidebar-link">6.(重点)this指向</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_7-es6的使用-相比es5的好处" class="sidebar-link">7.ES6的使用，相比ES5的好处</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_8-简单说一下es6的symbol属性" class="sidebar-link">8.简单说一下es6的symbol属性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#symbol" class="sidebar-link">Symbol</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_9-重点-es6的新特性" class="sidebar-link">9.（重点）ES6的新特性</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_10-如果要同时启动两个异步任务-怎么做" class="sidebar-link">10.如果要同时启动两个异步任务，怎么做</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_11-重点-深拷贝-浅拷贝问题" class="sidebar-link">11.（重点）深拷贝/浅拷贝问题</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_12-说一下链表的实现" class="sidebar-link">12.说一下链表的实现</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_13-bind-object-bind-windows-后的this指向" class="sidebar-link">13.bind(object).bind(windows) 后的this指向</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_14-构造继承里-function-call-argu-里传进来的参数argu是什么" class="sidebar-link">14.构造继承里 Function.call(argu)里传进来的参数argu是什么</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_15-promise介绍-你是怎么用promise的-怎么实现一个promise" class="sidebar-link">15.promise介绍，你是怎么用promise的，怎么实现一个promise</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_16-async是什么的语法糖-generator怎么用" class="sidebar-link">16.async是什么的语法糖，generator怎么用</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_17-ajax有哪些状态-每个状态分别对应什么" class="sidebar-link">17.ajax有哪些状态，每个状态分别对应什么</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_18-手动实现一个ajax-这样实现的方法叫什么" class="sidebar-link">18.手动实现一个ajax，这样实现的方法叫什么</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_19-require和import的区别-amd、cmd、es6" class="sidebar-link">19.require和import的区别？AMD、CMD、ES6</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_20-callback的缺点-promise的状态有哪些-generator-async和await" class="sidebar-link">20.callback的缺点，Promise的状态有哪些，generator，async和await</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_21-js溢出怎么解决" class="sidebar-link">21.js溢出怎么解决</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_3-解决内存溢出问题" class="sidebar-link">3. 解决内存溢出问题</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_22-如何实现私有的方法-属性" class="sidebar-link">22.如何实现私有的方法/属性</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_23-es5实现继承的方法-构造继承-原型链继承-组合继承-寄生组合继承" class="sidebar-link">23.ES5实现继承的方法，构造继承，原型链继承，组合继承，寄生组合继承</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_24-怎么用正则判断当前域名是否为qq-com-或者xxx-qq-com" class="sidebar-link">24.怎么用正则判断当前域名是否为qq.com，或者xxx.qq.com</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_25-try-catch-中如果异步代码出错怎么办" class="sidebar-link">25.try…catch…中如果异步代码出错怎么办？</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_26-js怎么删除cookie" class="sidebar-link">26.js怎么删除cookie</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_27-cookie的几个字段的功能" class="sidebar-link">27.cookie的几个字段的功能</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_28-怎么创建一个promise-参数是什么-怎么中断一个promise" class="sidebar-link">28.怎么创建一个Promise，参数是什么，怎么中断一个promise，</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_29-怎么判断一个空数组" class="sidebar-link">29.怎么判断一个空数组</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_30-重点-箭头函数跟普通函数的区别-普通函数的作用域" class="sidebar-link">30.(重点)箭头函数跟普通函数的区别，普通函数的作用域</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_31-let-const-babel-中的实现" class="sidebar-link">31.let const, babel 中的实现</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_32-fetch的使用-考察通信是否了解" class="sidebar-link">32.fetch的使用，考察通信是否了解</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_33-事件机制-捕获和冒泡-如何阻止冒泡" class="sidebar-link">33.事件机制，捕获和冒泡，如何阻止冒泡？</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_34-阻塞、非阻塞和异步同步是对应的吗-一样的吗" class="sidebar-link">34.阻塞、非阻塞和异步同步是对应的吗？一样的吗？</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_35-window-onload和document-ready" class="sidebar-link">35.window.onload和document.ready，</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_36-如何给不存在的元素绑定事件监听" class="sidebar-link">36.如何给不存在的元素绑定事件监听</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_37-可以在捕获阶段实现事件代理吗-为什么业界都用冒泡" class="sidebar-link">37.可以在捕获阶段实现事件代理吗，为什么业界都用冒泡？</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_38-promise的api-如果有10个调用请求-那么哪个api能查到最快调用的请求" class="sidebar-link">38.promise的api：如果有10个调用请求，那么哪个api能查到最快调用的请求</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_39-promise中不声明async-可以用await吗" class="sidebar-link">39.promise中不声明async，可以用await吗</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_40-内存泄漏" class="sidebar-link">40.内存泄漏</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_41-怎么判断一个元素有没有被引用" class="sidebar-link">41.怎么判断一个元素有没有被引用</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_42-全局变量为什么不会被垃圾处理" class="sidebar-link">42.全局变量为什么不会被垃圾处理</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_43-bom和dom的区别-bom的方法讲完整一点" class="sidebar-link">43.BOM和DOM的区别,BOM的方法讲完整一点</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_44-点击事件是宏任务还是微任务" class="sidebar-link">44.点击事件是宏任务还是微任务</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_45-class定义类和function定义类的区别" class="sidebar-link">45.class定义类和function定义类的区别</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_46-封装自定义事件-两种方法" class="sidebar-link">46 封装自定义事件 两种方法</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_47-重点-解决定时器延迟问题" class="sidebar-link">47 (重点)解决定时器延迟问题</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_48-重点-作用域和作用域链" class="sidebar-link">48 (重点)作用域和作用域链</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#作用域" class="sidebar-link">作用域</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#作用域链" class="sidebar-link">作用域链</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#重点-输出题" class="sidebar-link">(重点)输出题</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_1-重点-promise输出时机问题" class="sidebar-link">1：(重点)promise输出时机问题</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_2-重点-async-await" class="sidebar-link">2 （重点）async await</a></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_3-重点-for-of异步循环" class="sidebar-link">3 （重点）for-of异步循环</a></li></ul></li><li class="sidebar-sub-header"><a href="/docs/面经/腾讯面经/JS.html#_1" class="sidebar-link">1</a></li></ul></li><li><a href="/docs/面经/腾讯面经/TS.html" class="sidebar-link">TS</a></li><li><a href="/docs/面经/腾讯面经/node.html" class="sidebar-link">node</a></li><li><a href="/docs/面经/腾讯面经/Vue.html" class="sidebar-link">Vue2 基础</a></li><li><a href="/docs/面经/腾讯面经/React.html" class="sidebar-link">React</a></li><li><a href="/docs/面经/腾讯面经/Webpack&amp;Vite.html" class="sidebar-link">Webpack</a></li><li><a href="/docs/面经/腾讯面经/操作系统.html" class="sidebar-link">操作系统</a></li><li><a href="/docs/面经/腾讯面经/后端问题.html" class="sidebar-link">后端问题</a></li><li><a href="/docs/面经/腾讯面经/计算机网络.html" class="sidebar-link">计算机网络</a></li><li><a href="/docs/面经/腾讯面经/浏览器安全.html" class="sidebar-link">浏览器安全</a></li><li><a href="/docs/面经/腾讯面经/浏览器工作原理.html" class="sidebar-link">浏览器工作原理</a></li><li><a href="/docs/面经/腾讯面经/前端框架.html" class="sidebar-link">前端框架</a></li><li><a href="/docs/面经/腾讯面经/设计模式.html" class="sidebar-link">设计模式</a></li><li><a href="/docs/面经/腾讯面经/手撕.html" class="sidebar-link">手撕</a></li><li><a href="/docs/面经/腾讯面经/算法.html" class="sidebar-link">算法</a></li><li><a href="/docs/面经/腾讯面经/项目工程.html" class="sidebar-link">项目工程</a></li><li><a href="/docs/面经/腾讯面经/移动端&amp;小程序.html" class="sidebar-link">移动端&amp;小程序</a></li><li><a href="/docs/面经/腾讯面经/桌面应用.html" class="sidebar-link">(重点)electron原理</a></li><li><a href="/docs/面经/腾讯面经/简历问题.html" class="sidebar-link">简历问题</a></li><li><a href="/docs/面经/腾讯面经/开发环境.html" class="sidebar-link">开发环境</a></li><li><a href="/docs/面经/腾讯面经/扩展问题.html" class="sidebar-link">扩展问题</a></li><li><a href="/docs/面经/腾讯面经/面试记录.html" class="sidebar-link">自我介绍</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="js"><a href="#js" class="header-anchor">#</a> JS</h1> <h2 id="_1-重点-什么是事件代理-事件委托-有什么好处"><a href="#_1-重点-什么是事件代理-事件委托-有什么好处" class="header-anchor">#</a> 1(重点)什么是事件代理（事件委托） 有什么好处</h2> <h3 id="什么是事件代理"><a href="#什么是事件代理" class="header-anchor">#</a> 什么是事件代理</h3> <p>https://juejin.cn/post/6991677634451079204</p> <p>事件委托的原理：不给每个子节点单独设置事件监听器，而是设置在其父节点上，然后利用<strong>冒泡原理</strong>设置每个子节点。</p> <p><strong>优点：</strong></p> <ul><li><font color="red" size="3">减少内存消耗和 dom 操作</font>，提高性能 在 JavaScript 中，添加到页面上的事件处理程序数量将直接关系到页面的整体运行性能，因为需要不断的操作 dom,那么引起浏览器重绘和回流的可能也就越多，页面交互的事件也就变的越长，这也就是为什么要<strong>减少 dom 操作</strong>的原因。每一个事件处理函数，都是一个对象，多一个事件处理函数，<strong>内存</strong>中就会被多占用一部分空间。如果要用事件委托，就会将所有的操作放到 js 程序里面，只对它的父级进行操作，与 dom 的操作就只需要交互一次，这样就能大大的减少与 dom 的交互次数，提高性能；</li> <li><font color="red" size="3">动态绑定事件</font> 因为事件绑定在父级元素 所以新增的元素也能触发同样的事件</li></ul> <p>捕获：自顶而下，window -&gt; 目标元素</p> <p>冒泡：自底向上，目标元素 -&gt; window</p> <h3 id="应用场景"><a href="#应用场景" class="header-anchor">#</a> <strong>应用场景</strong></h3> <p>这样改下就只有点击li会触发事件了，且每次只执行一次dom操作，如果li数量很多的话，将大大减少dom的操作，优化的性能可想而知！</p> <p><font color="red" size="3">Event对象提供了一个属性叫target，可以返回事件的目标节点</font>，我们成为事件源，也就是说，target就可以表示为当前的事件操作的dom，但是不是真正操作dom，当然，这个是有兼容性的，标准浏览器用ev.target，IE浏览器用event.srcElement，此时只是获取了当前节点的位置，并不知道是什么节点名称，这里我们用nodeName来获取具体是什么标签名，这个返回的是一个大写的，我们需要转成小写再做比较</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span><span class="token operator">!</span>doctype html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>html lang<span class="token operator">=</span><span class="token string">&quot;en&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>meta charset<span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>ul id<span class="token operator">=</span><span class="token string">&quot;ul&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">1</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>

 <span class="token keyword">const</span> ul <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'ul'</span><span class="token punctuation">)</span>
  ul<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> target <span class="token operator">=</span> e<span class="token punctuation">.</span>target
    <span class="token keyword">if</span> <span class="token punctuation">(</span>target<span class="token punctuation">.</span>tagName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'li'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> liList <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span>
      <span class="token keyword">const</span> index <span class="token operator">=</span> <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>liList<span class="token punctuation">,</span>target<span class="token punctuation">)</span>
      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">内容是</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>target<span class="token punctuation">.</span>innerHTML<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">,索引</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>index<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>html<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h3 id="处理子元素不同操作"><a href="#处理子元素不同操作" class="header-anchor">#</a> 处理子元素不同操作</h3> <p>上面的例子是说li操作的是同样的效果，要是每个li被点击的效果都不一样，那么用事件委托还有用吗？</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token operator">&lt;</span>div <span class="token assign-left variable">id</span><span class="token operator">=</span><span class="token string">&quot;box&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input <span class="token assign-left variable">type</span><span class="token operator">=</span><span class="token string">&quot;button&quot;</span> <span class="token assign-left variable">id</span><span class="token operator">=</span><span class="token string">&quot;add&quot;</span> <span class="token assign-left variable">value</span><span class="token operator">=</span><span class="token string">&quot;添加&quot;</span> /<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input <span class="token assign-left variable">type</span><span class="token operator">=</span><span class="token string">&quot;button&quot;</span> <span class="token assign-left variable">id</span><span class="token operator">=</span><span class="token string">&quot;remove&quot;</span> <span class="token assign-left variable">value</span><span class="token operator">=</span><span class="token string">&quot;删除&quot;</span> /<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input <span class="token assign-left variable">type</span><span class="token operator">=</span><span class="token string">&quot;button&quot;</span> <span class="token assign-left variable">id</span><span class="token operator">=</span><span class="token string">&quot;move&quot;</span> <span class="token assign-left variable">value</span><span class="token operator">=</span><span class="token string">&quot;移动&quot;</span> /<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>input <span class="token assign-left variable">type</span><span class="token operator">=</span><span class="token string">&quot;button&quot;</span> <span class="token assign-left variable">id</span><span class="token operator">=</span><span class="token string">&quot;select&quot;</span> <span class="token assign-left variable">value</span><span class="token operator">=</span><span class="token string">&quot;选择&quot;</span> /<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
window.onload <span class="token operator">=</span> <span class="token function-name function">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    var Add <span class="token operator">=</span> document.getElementById<span class="token punctuation">(</span><span class="token string">&quot;add&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    var Remove <span class="token operator">=</span> document.getElementById<span class="token punctuation">(</span><span class="token string">&quot;remove&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    var Move <span class="token operator">=</span> document.getElementById<span class="token punctuation">(</span><span class="token string">&quot;move&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    var Select <span class="token operator">=</span> document.getElementById<span class="token punctuation">(</span><span class="token string">&quot;select&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    Add.onclick <span class="token operator">=</span> <span class="token function-name function">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    	alert<span class="token punctuation">(</span><span class="token string">'添加'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    Remove.onclick <span class="token operator">=</span> <span class="token function-name function">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    	alert<span class="token punctuation">(</span><span class="token string">'删除'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    Move.onclick <span class="token operator">=</span> <span class="token function-name function">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    	alert<span class="token punctuation">(</span><span class="token string">'移动'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    Select.onclick <span class="token operator">=</span> <span class="token function-name function">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    	alert<span class="token punctuation">(</span><span class="token string">'选择'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>上面实现的效果我就不多说了，很简单，4个按钮，点击每一个做不同的操作，那么至少需要4次dom操作，如果用事件委托，能进行优化吗？</p> <p>借用target的id属性进行switch选择</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>window.onload <span class="token operator">=</span> <span class="token function-name function">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            var oBox <span class="token operator">=</span> document.getElementById<span class="token punctuation">(</span><span class="token string">&quot;box&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            oBox.onclick <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>ev<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                var ev <span class="token operator">=</span> ev <span class="token operator">||</span> window.event<span class="token punctuation">;</span>
                var target <span class="token operator">=</span> ev.target <span class="token operator">||</span> ev.srcElement<span class="token punctuation">;</span>
                if<span class="token punctuation">(</span>target.nodeName.toLocaleLowerCase<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'input'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    switch<span class="token punctuation">(</span>target.id<span class="token punctuation">)</span><span class="token punctuation">{</span>
                        <span class="token keyword">case</span> <span class="token string">'add'</span> <span class="token builtin class-name">:</span>
                            alert<span class="token punctuation">(</span><span class="token string">'添加'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token builtin class-name">break</span><span class="token punctuation">;</span>
                        <span class="token keyword">case</span> <span class="token string">'remove'</span> <span class="token builtin class-name">:</span>
                            alert<span class="token punctuation">(</span><span class="token string">'删除'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token builtin class-name">break</span><span class="token punctuation">;</span>
                        <span class="token keyword">case</span> <span class="token string">'move'</span> <span class="token builtin class-name">:</span>
                            alert<span class="token punctuation">(</span><span class="token string">'移动'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token builtin class-name">break</span><span class="token punctuation">;</span>
                        <span class="token keyword">case</span> <span class="token string">'select'</span> <span class="token builtin class-name">:</span>
                            alert<span class="token punctuation">(</span><span class="token string">'选择'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token builtin class-name">break</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            
        <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="添加子元素还能代理么"><a href="#添加子元素还能代理么" class="header-anchor">#</a> 添加子元素还能代理么？</h3> <p>用事件委托就可以只用一次dom操作就能完成所有的效果，比上面的性能肯定是要好一些的 现在讲的都是document加载完成的现有dom节点下的操作，那么如果是新增的节点，新增的节点会有事件吗？也就是说，一个新员工来了，他能收到快递吗？ 看一下正常的添加节点的方法：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;&quot;</span> id<span class="token operator">=</span><span class="token string">&quot;btn&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;添加&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>ul id<span class="token operator">=</span><span class="token string">&quot;ul1&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">111</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">222</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">333</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">444</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><font color="red" size="3">如果监听子元素，</font>现在是移入li，li变红，移出li，li变白，这么一个效果，然后点击按钮，可以向ul中添加一个li子节点</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">var</span> oBtn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;btn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> oUl <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;ul1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> aLi <span class="token operator">=</span> oUl<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
            
            <span class="token comment">//鼠标移入变红，移出变白</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span>aLi<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                aLi<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onmouseover</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">;</span>
                aLi<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function-variable function">onmouseout</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token keyword">this</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token string">'#fff'</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//添加新节点</span>
            oBtn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                num<span class="token operator">++</span><span class="token punctuation">;</span>
                <span class="token keyword">var</span> oLi <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                oLi<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token number">111</span><span class="token operator">*</span>num<span class="token punctuation">;</span>
                oUl<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>oLi<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>这是一般的做法，但是你会发现，新增的li是没有事件的，说明添加子节点的时候，事件没有一起添加进去，这不是我们想要的结果，那怎么做呢？<font color="red" size="3">根本不需要单独给每个子元素添加监听事件，只需要监听父元素</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">var</span> oBtn <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;btn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> oUl <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;ul1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> aLi <span class="token operator">=</span> oUl<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>
            
            <span class="token comment">//事件委托，添加的子元素也有事件</span>
            oUl<span class="token punctuation">.</span><span class="token function-variable function">onmouseover</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">var</span> ev <span class="token operator">=</span> ev <span class="token operator">||</span> window<span class="token punctuation">.</span>event<span class="token punctuation">;</span>
                <span class="token keyword">var</span> target <span class="token operator">=</span> ev<span class="token punctuation">.</span>target <span class="token operator">||</span> ev<span class="token punctuation">.</span>srcElement<span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token string">&quot;red&quot;</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
            oUl<span class="token punctuation">.</span><span class="token function-variable function">onmouseout</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">var</span> ev <span class="token operator">=</span> ev <span class="token operator">||</span> window<span class="token punctuation">.</span>event<span class="token punctuation">;</span>
                <span class="token keyword">var</span> target <span class="token operator">=</span> ev<span class="token punctuation">.</span>target <span class="token operator">||</span> ev<span class="token punctuation">.</span>srcElement<span class="token punctuation">;</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>nodeName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    target<span class="token punctuation">.</span>style<span class="token punctuation">.</span>background <span class="token operator">=</span> <span class="token string">&quot;#fff&quot;</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
                
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
            
            <span class="token comment">//添加新节点</span>
            oBtn<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                num<span class="token operator">++</span><span class="token punctuation">;</span>
                <span class="token keyword">var</span> oLi <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                oLi<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> <span class="token number">111</span><span class="token operator">*</span>num<span class="token punctuation">;</span>
                oUl<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>oLi<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h3 id="难度升级-使用递归从里往外冒泡"><a href="#难度升级-使用递归从里往外冒泡" class="header-anchor">#</a> 难度升级，使用递归从里往外冒泡</h3> <p>现在给一个场景 ul &gt; li &gt; div &gt; p，div占满li，p占满li，还是给ul绑定事件，需要判断点击的是不是li（假设li里面的结构是不固定的），那么e.target就可能是p，也有可能是div，这种情况你会怎么处理呢？</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>ul id<span class="token operator">=</span><span class="token string">&quot;test&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token number">11111111111</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
            <span class="token number">22222222</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token number">3333333333</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token number">4444444</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>如上列表，有4个li，里面的内容各不相同，点击li，event对象肯定是当前点击的对象，怎么指定到li上，下面我直接给解决方案：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>　<span class="token keyword">var</span> oUl <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
oUl<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">ev</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> target <span class="token operator">=</span> ev<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>target <span class="token operator">!==</span> oUl <span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>tagName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'li click~'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        target <span class="token operator">=</span> target<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>核心代码是while循环部分，实际上就是一个递归调用，你也可以写成一个函数，用递归的方法来调用，同时用到冒泡的原理，从里往外冒泡，知道currentTarget为止，当当前的target是li的时候，就可以执行对应的事件了，然后终止循环，恩，没毛病！</p> <h3 id="什么是事件委托-e-currenttarget-与-e-target-有何区别"><a href="#什么是事件委托-e-currenttarget-与-e-target-有何区别" class="header-anchor">#</a> 什么是事件委托，e.currentTarget 与 e.target 有何区别</h3> <p>Event 接口的只读属性 <strong>currentTarget</strong> 表示的，标识是当事件沿着 DOM 触发时事件的当前目标。它<strong>总是指向事件绑定的元素</strong>，而 <strong>Event.target 则是事件触发的元素</strong>。</p> <h3 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h3> <p>那什么样的事件可以用事件委托，什么样的事件不可以用呢？</p> <p>适合用事件委托的事件：click，mousedown，mouseup，keydown，keyup，keypress。</p> <p>值得注意的是，mouseover和mouseout虽然也有事件冒泡，但是处理它们的时候需要特别的注意，因为需要经常计算它们的位置，处理起来不太容易。</p> <p>不适合的就有很多了，举个例子，mousemove，每次都要计算它的位置，非常不好把控，在不如说focus，blur之类的，本身就没用冒泡的特性，自然就不能用事件委托了。</p> <h2 id="_2addeventlistener-默认是捕获还是冒泡"><a href="#_2addeventlistener-默认是捕获还是冒泡" class="header-anchor">#</a> 2addEventListener 默认是捕获还是冒泡</h2> <p>默认是<strong>冒泡</strong></p> <p>addEventListener<strong>第三个参数</strong>默认为 false 代表执行事件冒泡行为。</p> <p>当为 true 时执行事件捕获行为。</p> <h2 id="_3-重点-apply-call-bind-区别"><a href="#_3-重点-apply-call-bind-区别" class="header-anchor">#</a> 3 (重点)apply call bind 区别</h2> <ul><li><font color="red" size="3">三者都可以改变函数的 this 对象指向。</font></li> <li>三者第一个参数都是 this 要指向的对象，<font color="red" size="3">如果如果没有这个参数</font>或参数为 undefined 或 null，则默认指向全局 window。</li> <li>三者都可以传参，但是 <strong>apply 是数组</strong>，而 <strong>call 是参数列表</strong>，且 apply 和 call 是一次性传入参数，而 <strong>bind 可以分为多次传入</strong>。</li> <li>bind 是返回<strong>绑定 this 之后的函数</strong>，便于<font color="red" size="3">稍后调用</font>；apply 、call 则是<font color="red" size="3"><strong>立即执行</strong></font> 。</li> <li>bind()会返回一个新的函数，如果这个返回的新的函数作为<strong>构造函数</strong>创建一个新的对象，那么此时 this <strong>不再指向</strong>传入给 bind 的第一个参数，<strong>而是指向用 new 创建的实例</strong></li></ul> <blockquote><p>注意！<strong><font color="orange" size="3">很多同学可能会忽略 bind 绑定的函数作为构造函数进行 new 实例化的情况</font></strong></p></blockquote> <h2 id="_4-重点-什么是闭包、举出闭包实际场景运用的例子"><a href="#_4-重点-什么是闭包、举出闭包实际场景运用的例子" class="header-anchor">#</a> 4 (重点)什么是闭包、举出闭包实际场景运用的例子</h2> <h3 id="什么是闭包"><a href="#什么是闭包" class="header-anchor">#</a> 什么是闭包</h3> <p><strong><font color="red" size="3">闭包指子函数可以访问外部作用域变量的函数特性</font>，即使在子函数作用域外也可以访问。如果没有闭包那么在处理事件绑定，异步请求时都会变得困难。</strong></p> <h3 id="形成闭包的原因"><a href="#形成闭包的原因" class="header-anchor">#</a> 形成闭包的原因</h3> <p><strong>内部的函数存在外部作用域的引用就会导致闭包</strong>。</p> <p>这里的子函数 <code>fo</code> 内存就存在外部作用域的引用 <code>a, b</code>，所以这就会产生闭包</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> b <span class="token operator">=</span><span class="token number">14</span>
    <span class="token keyword">function</span> <span class="token function">fo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">fo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="闭包变量存储的位置"><a href="#闭包变量存储的位置" class="header-anchor">#</a> 闭包变量存储的位置</h3> <p><strong>闭包中的变量存储的位置是堆内存。</strong></p> <h3 id="闭包的作用"><a href="#闭包的作用" class="header-anchor">#</a> 闭包的作用</h3> <p>实现方法和属性的私有化,保护函数的私有变量不受外部的干扰。</p> <h3 id="使用场景"><a href="#使用场景" class="header-anchor">#</a> 使用场景</h3> <ul><li><code>return</code> 回一个函数</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token number">10</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> n <span class="token operator">=</span><span class="token number">20</span>
    <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       n<span class="token operator">++</span><span class="token punctuation">;</span>
       console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
     <span class="token punctuation">}</span>
    <span class="token keyword">return</span> f
<span class="token punctuation">}</span>

<span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 21</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li><p>IIFE(自执行函数)</p> <p>同样也是产生了闭包<code>p()</code>，存在 <code>window</code>下的引用 <code>n</code>。</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> n <span class="token operator">=</span> <span class="token string">'林一一'</span><span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">p</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">/* 输出
*   林一一
/ 
</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>比如常见的防抖节流</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 节流</span>
<span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> timeout</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>arg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token keyword">return</span>
        timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arg<span class="token punctuation">)</span>
            timer <span class="token operator">=</span> <span class="token keyword">null</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> timeout<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 防抖</span>
<span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> timeout</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>arg</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>
        timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arg<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> timeout<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><ul><li>使用闭包可以在 JavaScript 中模拟块级作用域</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">outputNumbers</span><span class="token punctuation">(</span><span class="token parameter">count</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> count<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">alert</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">alert</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//导致一个错误！</span>
<span class="token punctuation">}</span>
复制代码
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>闭包可以用于在对象中创建私有变量</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> aaa <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">function</span> <span class="token function">bbb</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    a<span class="token operator">++</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">function</span> <span class="token function">ccc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    a<span class="token operator">++</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">b</span><span class="token operator">:</span> bbb<span class="token punctuation">,</span> <span class="token comment">//json结构</span>
    <span class="token literal-property property">c</span><span class="token operator">:</span> ccc<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>aaa<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//undefined</span>
aaa<span class="token punctuation">.</span><span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//2</span>
aaa<span class="token punctuation">.</span><span class="token function">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><ul><li>柯里化实现</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">curry</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> len <span class="token operator">=</span> fn<span class="token punctuation">.</span>length</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//fn.length是参数列表长度</span>
    <span class="token keyword">return</span> <span class="token function">_curry</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> len<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">_curry</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> len<span class="token punctuation">,</span> <span class="token operator">...</span>arg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>params</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> _arg <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arg<span class="token punctuation">,</span> <span class="token operator">...</span>params<span class="token punctuation">]</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>_arg<span class="token punctuation">.</span>length <span class="token operator">&gt;=</span> len<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> _arg<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">_curry</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> fn<span class="token punctuation">,</span> len<span class="token punctuation">,</span> <span class="token operator">...</span>_arg<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> fn <span class="token operator">=</span> <span class="token function">curry</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">,</span> d<span class="token punctuation">,</span> e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b <span class="token operator">+</span> c <span class="token operator">+</span> d <span class="token operator">+</span> e<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>  <span class="token comment">// 15</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="经典面试题"><a href="#经典面试题" class="header-anchor">#</a> 经典面试题</h3> <ul><li><p>for 循环和闭包(号称必刷题)</p> <p>这里的 <code>i</code> 是全局下的 <code>i</code>，共用一个作用域，当函数被执行的时候这时的 <code>i=3</code>，导致输出的结构都是3。</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  data<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
data<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">/* 输出
    3
    3
    3
/
</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ul><li>使用闭包改善上面的写法达到预期效果，写法1：自执行函数和闭包</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">j</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      data<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token number">0</span>
data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token number">1</span>
data<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token number">2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ul><li>写法2：使用 <code>let</code></li></ul> <p><code>let</code> 具有块级作用域，形成的3个私有作用域都是互不干扰的。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  data<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
data<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="思考题和上面有何不同-字节"><a href="#思考题和上面有何不同-字节" class="header-anchor">#</a> 思考题和上面有何不同 (字节)</h3> <p>tip：这里也形成了闭包。total 被外层引用没有被销毁。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> total <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">a</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        result<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            total <span class="token operator">+=</span> i <span class="token operator">*</span> a<span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>total<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 3</span>
result<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 6</span>
result<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 9</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="_5-重点-从0到1讲一下事件轮询-eventloop"><a href="#_5-重点-从0到1讲一下事件轮询-eventloop" class="header-anchor">#</a> 5 (重点)从0到1讲一下事件轮询 eventLoop</h2> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230218182938142.png" alt="image-20230218182938142" style="zoom:50%;"> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230218212924482.png" alt="image-20230218212924482" style="zoom:50%;"> <p>每次CallStack清空（每次轮询结束），即同步任务执行完，都是DOM重新渲染的机会，DOM结构如有改变则重新渲染页面，然后再去触发下一次EventLoop</p> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230218213304874.png" alt="image-20230218213304874" style="zoom:50%;"> <p><font color="red" size="3">我之前以为同步任务执行完就微任务，然后宏任务，其实这之中还有DOM重新渲染的过程，其中微任务在DOM渲染前触发，宏任务在DOM渲染后触发，本质原因是因为微任务是ES6语法规定的，宏任务是由浏览器规定的</font></p> <p>测试代码：</p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230218212350983.png" alt="image-20230218212350983"></p> <p><strong>JavaScript 处理任务是在等待任务、执行任务 、休眠等待新任务中不断循环中，也称这种机制为事件循环。</strong></p> <ul><li>主线程中的任务执行完后，才执行任务队列中的<strong>异步任务</strong></li> <li>有新任务到来时会将其放入队列，采取先进先执行的策略执行队列中的任务</li> <li>比如多个 <code>setTimeout</code> 同时到时间了，就要依次执行</li> <li>执行顺序为
<ul><li>先执行同步任务</li> <li>执行同步任务产生的微任务</li> <li>执行下一个宏任务</li> <li>执行宏任务产生的微任务</li> <li>再执行下一个宏任务</li></ul></li> <li>常见的宏任务有：
<ul><li>script（整体代码）</li> <li>setTimout</li> <li>setInterval</li> <li>setImmediate(node 独有)</li> <li>requestAnimationFrame(浏览器独有)</li> <li>IO/UI render（浏览器独有）</li></ul></li> <li>常见的微任务有：
<ul><li>process.nextTick(node 独有)</li> <li>async/await</li> <li>Promise.then()</li> <li>Promise请求中的静态方法resolve()</li> <li>Object.observe</li> <li>MutationObserver</li></ul></li></ul> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/49350cbe529a454d86708bb507615c9b~tplv-k3u1fbpfcp-zoom-1.image" alt="image-20191227151316924"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> data<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;4&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;async2的结果&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;5&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> data<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;6&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;7&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//   resolve() </span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
复制代码
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>输出结果：247536 async2 的结果 1</p> <blockquote><p>注意！我在最后一个 <strong>Promise</strong> 埋了个坑 我没有调用 resolve 方法 这个是在面试美团的时候遇到了 当时自己没看清楚 以为都是一样的套路 最后面试官说不对 找了半天才发现是这个坑 哈哈</p></blockquote> <h2 id="_6-重点-手写-call-apply-bind"><a href="#_6-重点-手写-call-apply-bind" class="header-anchor">#</a> 6 (重点)手写 call apply bind</h2> <h3 id="手写call"><a href="#手写call" class="header-anchor">#</a> 手写call</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myCall</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1.将方法挂载到我们传入的ctx</span>
    <span class="token comment">// 2.将挂载以后的方法调用</span>
    <span class="token comment">// 3.将添加的属性删除</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;this&quot;</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//this指向调用myCall的对象,这里是show</span>
    ctx<span class="token punctuation">.</span>fn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>   <span class="token comment">//将this保存到对象方法中</span>
    ctx<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//执行对象方法，这里是show</span>
    <span class="token keyword">delete</span> ctx<span class="token punctuation">.</span>fn<span class="token punctuation">;</span> <span class="token comment">//删除添加的属性</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// show({name:&quot;luck&quot;},11,22,33);</span>
show<span class="token punctuation">.</span><span class="token function">myCall</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;luck&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">33</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>优化: 因为可能对象本身就已经有了fn属性了，因此需要对fn进行特殊处理,使用symbol把fn对象变成唯一的</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myCall</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1.将方法挂载到我们传入的ctx</span>
    <span class="token comment">// 2.将挂载以后的方法调用</span>
    <span class="token comment">// 3.将添加的属性删除</span>
    <span class="token keyword">let</span> fn <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">[</span>fn<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>   <span class="token comment">//将this保存到对象方法中</span>
    ctx<span class="token punctuation">[</span>fn<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//执行对象方法，这里是show</span>
    <span class="token keyword">delete</span> ctx<span class="token punctuation">[</span>fn<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//删除添加的属性</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="手写-apply"><a href="#手写-apply" class="header-anchor">#</a> 手写 apply</h3> <p>apply与call的区别在与第二个参数是数组</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myApply</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span>args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1.将方法挂载到我们传入的ctx</span>
    <span class="token comment">// 2.将挂载以后的方法调用</span>
    <span class="token comment">// 3.将添加的属性删除</span>
    <span class="token comment">// 4.做判断，如果传入的参数不是数组，抛出错误</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>args <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token punctuation">(</span>args <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span><span class="token punctuation">(</span><span class="token string">'apply 第二个参数只接受数组'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    ctx<span class="token punctuation">.</span>fn <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">delete</span> ctx<span class="token punctuation">.</span>fn<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

show<span class="token punctuation">.</span><span class="token function">myApply</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;apply lucky&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">11</span><span class="token punctuation">,</span><span class="token number">22</span><span class="token punctuation">,</span><span class="token number">33</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>优化: 因为可能对象本身就已经有了fn属性了，因此需要对fn进行特殊处理,使用symbol把fn对象变成唯一的</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myApply</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span>args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1.将方法挂载到我们传入的ctx</span>
    <span class="token comment">// 2.将挂载以后的方法调用</span>
    <span class="token comment">// 3.将添加的属性删除</span>
    <span class="token comment">// 4.做判断，如果传入的参数不是数组，抛出错误</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>args <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token punctuation">(</span>args <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span><span class="token punctuation">(</span><span class="token string">'apply 第二个参数只接受数组'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> fn <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">[</span>fn<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">[</span>fn<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">delete</span> ctx<span class="token punctuation">[</span>fn<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="手写-bind"><a href="#手写-bind" class="header-anchor">#</a> 手写 bind</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myBind</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1.将方法挂载到我们传入的ctx</span>
    <span class="token comment">// 2.将挂载以后的方法调用</span>
    <span class="token comment">// 3.将添加的属性删除</span>
    <span class="token comment">// bind函数特点: ①分两次调用参数  ②返回一个函数再次调用</span>
    <span class="token comment">// bind方法在调用bind的时候可以传入参数，对象调用已经绑定好的方法时还可以传入参数，因此要合并参数</span>
    <span class="token keyword">let</span> fn <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">[</span>fn<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>rest</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>his
        ctx<span class="token punctuation">[</span>fn<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">,</span> <span class="token operator">...</span>rest<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">delete</span> ctx<span class="token punctuation">[</span>fn<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">show</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> newFun <span class="token operator">=</span> show<span class="token punctuation">.</span><span class="token function">myBind</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">&quot;bind lucky&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;44&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;55&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;66&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//把show方法绑定到对象{name:&quot;bind lucky&quot;}中，使用newFun()调用{name:&quot;bind lucky&quot;}中的show方法</span>

<span class="token function">newFun</span><span class="token punctuation">(</span><span class="token string">&quot;77&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;88&quot;</span><span class="token punctuation">)</span>  <span class="token comment">//执行结果为: ['44', '55', '66', '77', '88'] bind lucky</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>优化: 因为可能对象本身就已经有了fn属性了，因此需要对fn进行特殊处理,使用symbol把fn对象变成唯一的</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myBind</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1.将方法挂载到我们传入的ctx</span>
    <span class="token comment">// 2.将挂载以后的方法调用</span>
    <span class="token comment">// 3.将添加的属性删除</span>
    <span class="token comment">// bind函数特点: ①分两次调用参数  ②返回一个函数再次调用</span>
    <span class="token comment">// bind方法在调用bind的时候可以传入参数，对象调用已经绑定好的方法时还可以传入参数，因此要合并参数</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> fn <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">[</span>fn<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">[</span>fn<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>args2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">delete</span> ctx<span class="token punctuation">[</span>fn<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="_7-重点-手写promise"><a href="#_7-重点-手写promise" class="header-anchor">#</a> 7 (重点)手写promise</h2> <h3 id="起步构建"><a href="#起步构建" class="header-anchor">#</a> 起步构建</h3> <p>首先声明定义类并声明Promise状态与值，有以下几个细节需要注意。</p> <ul><li>executor为执行者</li> <li>当执行者出现异常时触发<strong>拒绝</strong>状态</li> <li>使用静态属性保存状态值</li> <li>状态只能改变一次，所以在resolve与reject添加条件判断</li> <li>因为 <code>resolve</code>或<code>rejected</code>方法在executor中调用，作用域也是executor作用域，这会造成this指向window，现在我们使用的是class定义，this为undefined。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">myPromise</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token constant">PENDING</span> <span class="token operator">=</span> <span class="token string">&quot;pending&quot;</span><span class="token punctuation">;</span> <span class="token comment">//默认状态</span>
    <span class="token keyword">static</span> <span class="token constant">FULFILLED</span> <span class="token operator">=</span> <span class="token string">&quot;fulfilled&quot;</span><span class="token punctuation">;</span> <span class="token comment">//完成状态</span>
    <span class="token keyword">static</span> <span class="token constant">REJECTED</span> <span class="token operator">=</span> <span class="token string">&quot;rejected&quot;</span><span class="token punctuation">;</span> <span class="token comment">//拒绝状态</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">exectutor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//创建promise时传入的是一个方法  new Promise((resolve,reject) =&gt; {})//里面是一个箭头函数</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> myPromise<span class="token punctuation">.</span><span class="token constant">PENDING</span><span class="token punctuation">;</span> <span class="token comment">//默认状态下是pending</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token function">exectutor</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//class默认在严格模式下，此时resolve内的this是undefined，需要更改指相当前myPromise对象</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//执行一些无法理解的代码时，严格模式下会报错，promise转变为reject状态</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// console.log(this); //验证当前this指向</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">==</span> myPromise<span class="token punctuation">.</span><span class="token constant">PENDING</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//因为promise状态只允许改变一次，只能从pendding到resolve，或者从pendding到reject，不会从resolve到reject等</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> myPromise<span class="token punctuation">.</span><span class="token constant">FULFILLED</span><span class="token punctuation">;</span> <span class="token comment">//执行完resolve后promise状态改变</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span><span class="token comment">//更改promise的返回值</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">reject</span><span class="token punctuation">(</span><span class="token parameter">reason</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">==</span> myPromise<span class="token punctuation">.</span><span class="token constant">PENDING</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> myPromise<span class="token punctuation">.</span><span class="token constant">REJECTED</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> reason<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="全代码"><a href="#全代码" class="header-anchor">#</a> 全代码</h3> <p>详细解析看 博客promise核心：https://doc.houdunren.com/js/17%20Promise%E6%A0%B8%E5%BF%83.html#%E8%B5%B7%E6%AD%A5%E6%9E%84%E5%BB%BA</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">myPromise</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token constant">PENDING</span> <span class="token operator">=</span> <span class="token string">&quot;pending&quot;</span><span class="token punctuation">;</span> <span class="token comment">//默认状态</span>
    <span class="token keyword">static</span> <span class="token constant">FULFILLED</span> <span class="token operator">=</span> <span class="token string">&quot;fulfilled&quot;</span><span class="token punctuation">;</span> <span class="token comment">//完成状态</span>
    <span class="token keyword">static</span> <span class="token constant">REJECTED</span> <span class="token operator">=</span> <span class="token string">&quot;rejected&quot;</span><span class="token punctuation">;</span> <span class="token comment">//拒绝状态</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">exectutor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//创建promise时传入的是一个方法  new Promise((resolve,reject) =&gt; {})//里面是一个箭头函数</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> myPromise<span class="token punctuation">.</span><span class="token constant">PENDING</span><span class="token punctuation">;</span> <span class="token comment">//默认状态下是pending</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">//promise的返回值</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>callbacks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">//把状态改变后要执行的函数先放在这里，等状态改变了再来这里取出来执行</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token function">exectutor</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//class默认在严格模式下，此时resolve内的this是undefined，需要更改指相当前myPromise对象</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//执行一些无法理解的代码时，严格模式下会报错，promise转变为reject状态</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// console.log(this); //验证当前this指向</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">==</span> myPromise<span class="token punctuation">.</span><span class="token constant">PENDING</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//因为promise状态只允许改变一次，只能从pendding到resolve，或者从pendding到reject，不会从resolve到reject等</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> myPromise<span class="token punctuation">.</span><span class="token constant">FULFILLED</span><span class="token punctuation">;</span> <span class="token comment">//执行完resolve后promise状态改变</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> value<span class="token punctuation">;</span><span class="token comment">//更改promise的返回值</span>
            <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">//</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>callbacks<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">callback</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">//状态改变后调用回调函数栈中保存的各个回调函数</span>
                    callback<span class="token punctuation">.</span><span class="token function">onFulfilled</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">reject</span><span class="token punctuation">(</span><span class="token parameter">reason</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">==</span> myPromise<span class="token punctuation">.</span><span class="token constant">PENDING</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">=</span> myPromise<span class="token punctuation">.</span><span class="token constant">REJECTED</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>value <span class="token operator">=</span> reason<span class="token punctuation">;</span>
            <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>callbacks<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">callback</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    callback<span class="token punctuation">.</span><span class="token function">onRejected</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">onFulfilled<span class="token punctuation">,</span> onRejected</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//.then(value =&gt; {console.log(value)}) .then里的也是一个函数</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> onFulfilled <span class="token operator">!==</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//如果.then参数不是函数，进行穿透处理</span>
            <span class="token function-variable function">onFulfilled</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>  <span class="token comment">//把onFulfilled更改为函数</span>
            <span class="token comment">//eg: </span>
            <span class="token comment">/**
             *  p2.then().then(resolve =&gt; {
                    console.log(resolve);
                });
             */</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> onRejected <span class="token operator">!==</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//如果.then参数不是函数，进行处理</span>
            <span class="token function-variable function">onRejected</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">let</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">myPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">==</span> myPromise<span class="token punctuation">.</span><span class="token constant">PENDING</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//处理pending状态下的函数</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>callbacks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token comment">//先保存onFulfilled和onRejected，等状态改变时再调用</span>
                    <span class="token function-variable function">onFulfilled</span><span class="token operator">:</span> <span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                        <span class="token keyword">try</span> <span class="token punctuation">{</span>
                            <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">onFulfilled</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//如果onFulfilled返回的是个promise，需要拿出promise的结果再返回</span>

                            <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token keyword">instanceof</span> <span class="token class-name">myPromise</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                result<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                                <span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token function-variable function">onRejected</span><span class="token operator">:</span> <span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                        <span class="token keyword">try</span> <span class="token punctuation">{</span>
                            <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">onRejected</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//如果onRejected返回的是个promise，需要拿出promise的结果再返回</span>

                            <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token keyword">instanceof</span> <span class="token class-name">myPromise</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                result<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                                <span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
                            <span class="token punctuation">}</span>
                        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">==</span> myPromise<span class="token punctuation">.</span><span class="token constant">FULFILLED</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>  <span class="token comment">//因为.then执行是在微任务里，使用settimeout来达到同样的效果，不然就是同步任务了</span>
                    <span class="token keyword">try</span> <span class="token punctuation">{</span>
                        <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">onFulfilled</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//如果onFulfilled返回的是个promise，需要拿出promise的结果再返回</span>

                        <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token keyword">instanceof</span> <span class="token class-name">myPromise</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            result<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                            <span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>status <span class="token operator">==</span> myPromise<span class="token punctuation">.</span><span class="token constant">REJECTED</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token keyword">try</span> <span class="token punctuation">{</span>
                        <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">onRejected</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//如果onRejected返回的是个promise，需要拿出promise的结果再返回</span>

                        <span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token keyword">instanceof</span> <span class="token class-name">myPromise</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            result<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                            <span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> promise<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//不定义变量，直接使用myPromise的resolve方法  myPromise.resolve(value)</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">myPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token keyword">instanceof</span> <span class="token class-name">myPromise</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                value<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token parameter">reason</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">myPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">reject</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token function">all</span><span class="token punctuation">(</span><span class="token parameter">promises</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">myPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">//all方法返回的也是一个promise</span>
            promises<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">promise<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
                    <span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                        values<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>values<span class="token punctuation">.</span>length <span class="token operator">==</span> promises<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//如果返回值全部来自onFulfilled,all执行resolve</span>
                            <span class="token function">resolve</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token parameter">reason</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                        <span class="token function">reject</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//有一个promise是onRejected，all执行reject</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">static</span> <span class="token function">race</span><span class="token punctuation">(</span><span class="token parameter">promises</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">myPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            promises<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">promise</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
                    <span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                        <span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//promise数组只要有任何一个promise 状态变更就可以返回</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token parameter">reason</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                        <span class="token function">reject</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br></div></div><h3 id="重点-手写promise-all"><a href="#重点-手写promise-all" class="header-anchor">#</a> 重点 手写promise.all</h3> <p>最佳方案还得再判断一下promises是否是可迭代对象</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">static</span> <span class="token function">all</span><span class="token punctuation">(</span><span class="token parameter">promises</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> values <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">myPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">//all方法返回的也是一个promise</span>
            promises<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">promise<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
                    <span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                        values<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">if</span> <span class="token punctuation">(</span>values<span class="token punctuation">.</span>length <span class="token operator">==</span> promises<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//如果返回值全部来自onFulfilled,all执行resolve</span>
                            <span class="token function">resolve</span><span class="token punctuation">(</span>values<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token parameter">reason</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                        <span class="token function">reject</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//有一个promise是onRejected，all执行reject</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="重点-手写promise-race"><a href="#重点-手写promise-race" class="header-anchor">#</a> 重点 手写promise.race</h3> <p>最佳方案还得再判断一下promises是否是可迭代对象</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">static</span> <span class="token function">race</span><span class="token punctuation">(</span><span class="token parameter">promises</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">myPromise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            promises<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">promise</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
                    <span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                        <span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//promise数组只要有任何一个promise 状态变更就可以返回</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token parameter">reason</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                        <span class="token function">reject</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="手写-promise-allsettled"><a href="#手写-promise-allsettled" class="header-anchor">#</a> 手写 promise.allSettled</h3> <p>只关注所有promise执行完，不关注是否执行成功</p> <h2 id="_8-重点-手写寄生组合继承"><a href="#_8-重点-手写寄生组合继承" class="header-anchor">#</a> 8 (重点)手写寄生组合继承</h2> <p><strong>原型链继承</strong>有一个重点弊端： 引用值共享</p> <p>现象如下</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> 	<span class="token keyword">function</span> <span class="token function">Super</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>b<span class="token operator">=</span><span class="token number">1</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">Sub</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> sub1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> sub2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sub1<span class="token punctuation">.</span>a<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sub1<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//a = [1,2,3,4,5]</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sub2<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//a = [1,2,3,4,5]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>解决方法：使用<strong>构造函数继承</strong></p> <p>先明白函数独立执行的现象</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>	<span class="token keyword">function</span> <span class="token function">Super</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Window</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Sub </span>
        <span class="token function">Super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//当函数独立执行时，this指向为window</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">var</span> sub1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> sub2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><font color="red" size="3">通过改变Super()构造函数指向</font>，来达到继承目的,执行<code>Super.call(this)</code>时，传入的this是sub，在执行<code>this.a = [1,2,3,4]</code>时，就是<code>sub.a = [1,2,3,4]</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>	<span class="token keyword">function</span> <span class="token function">Super</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Sub</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">Super</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">say</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">222</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//Sub </span>
        <span class="token function">Super</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//通过sub1,sub2都是无法访问到Super原型上方法</span>
    <span class="token keyword">var</span> sub1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> sub2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sub1<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//a = [1,2,3,4]</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sub2<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//a = [1,2,3,4]</span>
    sub1<span class="token punctuation">.</span>a<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sub1<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//a = [1,2,3,4,5]</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sub2<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//a = [1,2,3,4]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>但是使用构造函数继承任然存在重大弊端，无法继承构造函数原型,通过sub1,sub2都是无法访问到Super原型上方法</p> <p>使用<strong>组合继承</strong>(伪经典继承)来解决该问题,组合继承就是在构造函数继承基础上再进行原型链继承</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Super</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Super</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">say</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">222</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">Super</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//在构造函数继承基础上，再进行原型链继承</span>
<span class="token class-name">Sub</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> sub1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> sub2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sub1<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//a = [1,2,3,4]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sub2<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//a = [1,2,3,4]</span>
sub1<span class="token punctuation">.</span>a<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sub1<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//a = [1,2,3,4,5]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sub2<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//a = [1,2,3,4]</span>
sub1<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//222</span>
sub2<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//222</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220617200350811.png" alt="image-20220617200350811" style="zoom:150%;"> <p>组合继承（伪经典继承）如何解决<strong>构造函数复用的问题</strong>？变成<strong>寄生组合继承</strong>（经典继承），可以按如下写</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>方法创建一个新对象，使用现有的对象来提供新创建的对象的__proto__。
<span class="token literal-property property">语法</span><span class="token operator">:</span>Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>proto<span class="token punctuation">,</span> <span class="token punctuation">[</span>propertiesObject<span class="token punctuation">]</span><span class="token punctuation">)</span>

    proto：新创建对象的原型对象。
    propertiesObject：可选
        若没有指定为 <span class="token keyword">undefined</span>，则是要添加到新创建对象的可枚举属性
        即其自身定义的属性，而不是其原型链上的枚举属性）对象的属性描述符以及相应的属性名称。
        这些属性对应Object<span class="token punctuation">.</span><span class="token function">defineProperties</span><span class="token punctuation">(</span><span class="token punctuation">)</span>的第二个参数
        返回值：一个新对象，带着指定的原型对象和属性。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>寄生组合继承代码如下:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>	<span class="token keyword">function</span> <span class="token function">Super</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">Super</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">say</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">222</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">Super</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//在构造函数继承基础上，再进行原型链继承</span>
    <span class="token comment">// Sub.prototype = new Super();</span>
    <span class="token class-name">Sub</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Super</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//这样做Sup原型为Super,Super原型为Object，同时也不用去实例化Super了，达成了构造函数复用</span>
    <span class="token comment">// Sub.prototype = Super.prototype;//不可以直接这样赋值,这样做Sub的原型就是Object了,而不是Super</span>
    <span class="token keyword">var</span> sub1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> sub2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sub1<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//a = [1,2,3,4]</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sub2<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//a = [1,2,3,4]</span>
    sub1<span class="token punctuation">.</span>a<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sub1<span class="token punctuation">.</span>b<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sub1<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//a = [1,2,3,4,5]</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sub2<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//a = [1,2,3,4]</span>
    sub1<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//222</span>
    sub2<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//222</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>寄生组合继承仍然存在不足之处，就是<code>Sub.prototype</code>是直接通过赋值来更改的，如果<code>Sub.prototype</code>本来就有东西了，这样原来的会被覆盖掉，显然不符合要求，解决方法有<strong>圣杯模式</strong>，<strong>ES6的class继承</strong>，<strong>extends继承</strong>，以及<strong>拷贝继承</strong>等</p> <h2 id="_9-重点-手写new"><a href="#_9-重点-手写new" class="header-anchor">#</a> 9 （重点）手写new</h2> <h3 id="new命令原理"><a href="#new命令原理" class="header-anchor">#</a> new命令原理</h3> <p>使用new命令时，它后面的函数依次执行下面的步骤</p> <ol><li><strong>创建空对象</strong>：创建一个空对象，作为将要返回的对象实例</li> <li><strong>连接原型</strong>：将这个空对象的原型，指向构造函数的prototype属性</li> <li><strong>绑定 this</strong>：将这个空对象赋值给函数内部的this关键字</li> <li><strong>返回新对象</strong>：开始执行构造函数内部的代码</li></ol> <h3 id="特性"><a href="#特性" class="header-anchor">#</a> 特性</h3> <ul><li>如果构造函数内部有return语句，而且return后面跟着一个对象，new命令会返回return语句指定的对象，否则返回这个创建的对象</li> <li>对于普通函数（内部没有使用this关键字）则会返回一个空对象</li></ul> <p>示例</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
<span class="token punctuation">}</span>
<span class="token keyword">const</span> d1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">a</span><span class="token punctuation">(</span><span class="token string">'xm'</span><span class="token punctuation">)</span> <span class="token comment">// { name : &quot;xm&quot; }</span>
d1 <span class="token keyword">instanceof</span> <span class="token class-name">a</span> <span class="token comment">// true</span>

<span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span><span class="token string">'abc'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> d2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">b</span><span class="token punctuation">(</span><span class="token string">'xm'</span><span class="token punctuation">)</span> <span class="token comment">// { name : &quot;abc&quot; }</span>
d2 <span class="token keyword">instanceof</span> <span class="token class-name">b</span> <span class="token comment">// false</span>

<span class="token keyword">function</span> <span class="token function">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'hello world'</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> d3 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// { }</span>
d3 <span class="token keyword">instanceof</span> <span class="token class-name">c</span>    <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p><strong>按照上面的思路实现</strong></p> <h3 id="mynew"><a href="#mynew" class="header-anchor">#</a> myNew</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">myNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获得构造函数，arguments是一个伪数组，无法直接使用数组方法</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token comment">//Arguments(2) [ƒ, 'xm', callee: ƒ, Symbol(Symbol.iterator): ƒ]</span>
    <span class="token keyword">var</span> constructor <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>constructor<span class="token punctuation">)</span><span class="token comment">//ƒ a(name) {this.name = name}</span>
    <span class="token comment">//到这里arguments中的构造函数以及被取出了</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token comment">//Arguments ['xm', callee: ƒ, Symbol(Symbol.iterator): ƒ]</span>
    <span class="token comment">// 创建一个空对象，并继承构造函数的 prototype 属性</span>
    <span class="token keyword">var</span> context <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>constructor<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 绑定this，执行构造函数</span>
    <span class="token keyword">var</span> res <span class="token operator">=</span> <span class="token function">constructor</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 如果返回结果是对象，就直接返回</span>
    <span class="token comment">// 否则返回 context 对象</span>
    <span class="token keyword">return</span> res <span class="token keyword">instanceof</span> <span class="token class-name">Object</span> <span class="token operator">?</span> res <span class="token operator">:</span> context<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>测试，得到一致的结果</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
<span class="token punctuation">}</span>
<span class="token keyword">const</span> d1 <span class="token operator">=</span> <span class="token function">myNew</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token string">'xm'</span><span class="token punctuation">)</span> <span class="token comment">// { name : &quot;xm&quot; }</span>
d1 <span class="token keyword">instanceof</span> <span class="token class-name">a</span> <span class="token comment">// true</span>

<span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">'abc'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> d2 <span class="token operator">=</span> <span class="token function">myNew</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token string">'xm'</span><span class="token punctuation">)</span> <span class="token comment">// { name : &quot;abc&quot; }</span>
d2 <span class="token keyword">instanceof</span> <span class="token class-name">b</span> <span class="token comment">// false</span>

<span class="token keyword">function</span> <span class="token function">c</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">'hello world'</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> d3 <span class="token operator">=</span> <span class="token function">myNew</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token comment">// { }</span>
d3 <span class="token keyword">instanceof</span> <span class="token class-name">c</span>    <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>其余写法的实现方案</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">myNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 创建空对象</span>
    <span class="token keyword">let</span> o <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token comment">// 获取构造函数</span>
    <span class="token keyword">let</span> fn <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span>
    <span class="token comment">// 连接原型</span>
    o<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> fn<span class="token punctuation">.</span>prototype
    <span class="token comment">// 绑定this</span>
    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span>
    <span class="token keyword">return</span> res <span class="token keyword">instanceof</span> <span class="token class-name">Object</span> <span class="token operator">?</span> res <span class="token operator">:</span> o
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="拓展延伸"><a href="#拓展延伸" class="header-anchor">#</a> 拓展延伸</h3> <h4 id="proto-属性"><a href="#proto-属性" class="header-anchor">#</a> __proto__属性</h4> <ul><li><p>每一个js对象有一个<code>__proto__</code>属性</p></li> <li><p><code>__proto__</code>指向该对象的原型</p></li> <li><div class="language- line-numbers-mode"><pre class="language-text"><code>__proto__
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>绝大部分浏览器都支持这个非标准的方法访问原型，然而它并不存在于 xx.prototype 中，实际上，它是来自于 Object.prototype ，与其说是一个属性，不如说是一个 getter/setter，当使用</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>obj.__proto__
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>时，可以理解成返回了</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>Object.getPrototypeOf(obj)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>而<code>Object.getPrototypeOf</code>方法的作用是返回指定对象的原型</li></ul></li></ul> <h4 id="object-create"><a href="#object-create" class="header-anchor">#</a> Object.create</h4> <p>作用：创建一个新对象，使用现有的对象来提供新创建的对象的__proto__</p> <p>于是可以得出下面的结论</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 构造函数</span>
<span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

<span class="token punctuation">}</span>
<span class="token keyword">const</span> a1 <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>fn<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
<span class="token comment">// 等价于</span>
<span class="token keyword">const</span> a2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
a2<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> fn<span class="token punctuation">.</span>prototype

a1<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> a2<span class="token punctuation">.</span>__proto__ <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h4 id="通过new的方式创建对象与通过字面量创建的区别"><a href="#通过new的方式创建对象与通过字面量创建的区别" class="header-anchor">#</a> 通过new的方式创建对象与通过字面量创建的区别</h4> <ul><li><code>new Object()</code> 方式创建对象本质上是方法调用，涉及到在原型链中查找该方法，当找到该方法后，又会生产方法调用必须的堆栈信息，方法调用结束后，还要释放该堆栈，性能不如字面量的方式</li> <li>通过对象字面量定义对象时，不会调用Object的构造函数</li></ul> <p><strong>小结:</strong> 使用字面量的方式创建对象<code>性能上</code>更好，<code>可读性</code>更高</p> <h2 id="_10-重点-手写settimeout-模拟实现setintervel"><a href="#_10-重点-手写settimeout-模拟实现setintervel" class="header-anchor">#</a> 10 (重点)手写setTimeout 模拟实现setIntervel</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>浏览器的画面，和动画片类似，也是浏览器按照一定频率一帧一帧绘制出来的，一般情况下浏览器的刷新率为16ms绘制一帧。也就是说，这个频率的绘制，会让人完全感受不到画面的闪烁，让图像真正的动起来。
浏览器绘制每一帧，都会按照以下过程进行：（省略一些不太相关的过程）
<span class="token number">1</span>、开始新的一帧率
<span class="token number">2</span>、处理输入事件
<span class="token number">3</span>、执行requestAnimationFrame
<span class="token number">4</span>、解析html
<span class="token number">5</span>、计算样式
<span class="token number">6</span>、更新图层树
<span class="token number">7</span>、发送帧

通过这个过程不难发现，每当浏览器开始绘制新的一帧画面的时候，都会去执行一下requestAnimationFrame，那如果我们讲动画相关的代码，通过requestAnimationFrame来执行，是不是就可以做到和浏览器本身画面一样顺滑了呢？
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>参考文章:https://github.com/sisterAn/JavaScript-Algorithms/issues/98</p> <p>手写setTimeout，</p> <p>第一个参数为回调函数，</p> <p>第二个参数为延时,</p> <p>注意setTimout是先加入任务队列中，而不是立即执行</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token function-variable function">setTimeout</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> timeout<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 初始当前时间</span>
    <span class="token keyword">const</span> start <span class="token operator">=</span> <span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">//声明定时器，now</span>
    <span class="token keyword">let</span> timer<span class="token punctuation">,</span> now
    <span class="token keyword">const</span> <span class="token function-variable function">loop</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">//该window.requestAnimationFrame()方法告诉浏览器您希望执行动画，并请求浏览器调用指定的函数以在下次重绘之前更新动画。该方法将回调作为在重绘之前调用的参数。 </span>
        <span class="token comment">//避免因为主线程执行时间太长导致计时短的计时器反而因为先定义而先执行了</span>
        timer <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>loop<span class="token punctuation">)</span>
        <span class="token comment">// 再次运行时获取当前时间</span>
        now <span class="token operator">=</span> <span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">// 当前运行时间 - 初始当前时间 &gt;= 等待时间 ===&gt;&gt; 跳出</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>now <span class="token operator">-</span> start <span class="token operator">&gt;=</span> timeout<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span>
            <span class="token comment">//取消一个先前通过调用window.requestAnimationFrame()方法添加到计划中的动画帧请求.</span>
            window<span class="token punctuation">.</span><span class="token function">cancelAnimationFrame</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//loop()这样直接写的话是立即执行，并没有把showname放入任务队列</span>
    window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span>loop<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">showName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> timerID <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>showName<span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>参考至：https://www.bilibili.com/video/BV1DA411Y7Xe/?vd_source=52b9208bc9964a4623ebab34f5fd4a57</p> <p>使用setInterval有个重大错误，就是如果任务队列里还有别的任务没执行完，setInterval就呆住了，根本不准时，所以用setTimeout来模拟实现setInterval，具体来说就是setInterval并不是间隔一段时间执行任务，而是间隔一段时间把任务放入任务队列</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">newInterval</span> <span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span>millisecond</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">function</span> <span class="token function">inside</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span>inside<span class="token punctuation">,</span>millisecond<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span>inside<span class="token punctuation">,</span>millisecond<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">showName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Hello&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">newInterval</span><span class="token punctuation">(</span>showName<span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>以上写法其实都是存在误差的，详情参考这篇文章，有更优解：https://mp.weixin.qq.com/s/JYfm8oiQmomkNnJIFWDkrQ</p> <h2 id="_11-重点-手写发布订阅模式"><a href="#_11-重点-手写发布订阅模式" class="header-anchor">#</a> 11 (重点)手写发布订阅模式</h2> <p>订阅事件 -- 类似于监听事件</p> <p>发布事件 -- 类似于触发事件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">EventEmitter</span> <span class="token punctuation">{</span>
        <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>events <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token comment">//被订阅的事件</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 实现订阅</span>
        <span class="token function">on</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> callBack</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//事件未被订阅，加入订阅列表</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>callBack<span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//this.events是一个对象,通过键值对的方式保存订阅，键位订阅名，值为回调函数</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>callBack<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//事件已被订阅，再添加一个新的回调</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 删除订阅</span>
        <span class="token function">off</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> callBack</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span><span class="token comment">//不存在该订阅直接返回</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token comment">//清除所有等于callback的回调函数</span>
                <span class="token keyword">return</span> item <span class="token operator">!==</span> callBack<span class="token punctuation">;</span> 
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 只执行一次订阅事件</span>
        <span class="token function">once</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> callBack</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">callBack</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> fn<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 触发事件</span>
        <span class="token function">emit</span><span class="token punctuation">(</span><span class="token parameter">type<span class="token punctuation">,</span> <span class="token operator">...</span>rest</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>events<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> rest<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//把订阅事件的每个回调函数都执行一遍</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 使用如下</span>
    <span class="token keyword">const</span> event <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EventEmitter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> <span class="token function-variable function">handle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>rest</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rest<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token comment">// event.on(&quot;click&quot;, handle);</span>

    <span class="token comment">// event.emit(&quot;click&quot;, 1, 2, 3, 4);</span>

    <span class="token comment">// event.off(&quot;click&quot;, handle);</span>

    <span class="token comment">// event.emit(&quot;click&quot;, 1, 2);</span>

    event<span class="token punctuation">.</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token string">&quot;dbClick&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">123456</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    event<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&quot;dbClick&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    event<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">&quot;dbClick&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br></div></div><h2 id="_12-重点-手写防抖节流"><a href="#_12-重点-手写防抖节流" class="header-anchor">#</a> 12 (重点)手写防抖节流</h2> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230221160155646.png" alt="image-20230221160155646"></p> <h3 id="防抖"><a href="#防抖" class="header-anchor">#</a> 防抖</h3> <p>防抖的概念: 用户触发事件过于频繁，只取最后一次触发事件进行处理</p> <p>例子,这样写很丑陋，而且还定义了外部变量t，不合理的防抖方法</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token comment">//防抖，用户触发事件过于频繁，只去最后一次事件操作</span>
    <span class="token keyword">let</span> inp <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> t <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token comment">//通过setTimeout的方式把多次事件触发取消，只取最后一次</span>
    inp<span class="token punctuation">.</span><span class="token function-variable function">oninput</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>t <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">clearTimeout</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        t <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">500</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>下面利用闭包来封装防抖函数,这里还有一个漏洞,debounce返回的是一个独立执行的函数<code>return function() {}</code>,函数指向为window</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> inp <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
inp<span class="token punctuation">.</span>oninput <span class="token operator">=</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token comment">//防抖函数</span>
<span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span>delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">//因为闭包调用完debouce后timer定时器不会被销毁</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>timer <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//这里有this指向重要漏洞，下面解释</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>delay<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>改进方法：在闭包内更改this指向调用debounce的对象</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">//因为闭包调用完debouce后timer定时器不会被销毁</span>
        <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>timer <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">//console.log(this); 这里this为input输入框</span>
            timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//因为是箭头函数，箭头函数内this指向同上下文中this,上下文可以理解为当前函数的上一层函数</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>最后如果debounce回调函数带有参数，需要把参数提取出来，最后在调用回调函数fn时传入</p> <p><strong>完整代码如下</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">handleInput</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>value<span class="token punctuation">,</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
inp<span class="token punctuation">.</span>oninput <span class="token operator">=</span> <span class="token function">debounce</span><span class="token punctuation">(</span>handleInput<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>
<span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span> <span class="token comment">//因为闭包调用完debouce后timer定时器不会被销毁</span>
    <span class="token keyword">const</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arguments<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//获取debounce传入的所有参数</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>timer <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//console.log(this); 这里this为input输入框</span>
        timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//因为是箭头函数，箭头函数内this指向同上下文中this,上下文可以理解为当前函数的上一层函数</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><strong>有哪些防抖的场景呢</strong></p> <ol><li><strong>登录</strong>、发短信等按钮避免用户点击太快，以致于发送了多次请求，需要防抖</li> <li>调整浏览器窗口大小时，resize 次数过于频繁，造成计算过多，此时需要一次到位，就用到了防抖</li> <li>文本编辑器实时保存，当无任何更改操作一秒后进行保存</li></ol> <h3 id="节流"><a href="#节流" class="header-anchor">#</a> 节流</h3> <p>如果说<strong>防抖是只执行最后一次</strong></p> <p>那么<strong>节流就是控制执行次数</strong>，不要一下子执行那么多次，控制高频事件执行的次数</p> <p><strong>基础写法</strong></p> <p>形成滚动条</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
    <span class="token selector">body</span> <span class="token punctuation">{</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 2000px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>监听滚动事件，执行节流操作</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span><span class="token function-variable function">onscroll</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'123'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">//500毫秒后再让flag变为true,重新执行回调函数</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">500</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>利用闭包封裝</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
window<span class="token punctuation">.</span>onscroll <span class="token operator">=</span> <span class="token function">throttle</span><span class="token punctuation">(</span>test<span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>arguments<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
                flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">//500毫秒后再让flag变为true,重新执行回调函数</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><strong>使用场景</strong></p> <ol><li><code>scroll</code> 事件，每隔一秒计算一次位置信息等</li> <li>浏览器播放事件，每个一秒计算一次进度信息等</li> <li>input 框实时搜索并发送请求展示下拉列表，每隔一秒发送一次请求 (也可做防抖)</li></ol> <h2 id="_13-重点-什么是闭包-闭包使用场景-有何影响"><a href="#_13-重点-什么是闭包-闭包使用场景-有何影响" class="header-anchor">#</a> 13 (重点)什么是闭包，闭包使用场景,有何影响</h2> <p>https://juejin.cn/post/7055322482600837133</p> <p>闭包指的是那些引用了另一个函数作用域中变量的函数，通常是在嵌套函数中实现的。</p> <p>拿 MDN文档中的解释来分析</p> <blockquote><p>一个函数和对其周围状态（<strong>lexical environment，词法环境</strong>）的引用捆绑在一起（或者说函数被引用包围），这样的组合就是<strong>闭包</strong>（<strong>closure</strong>）。也就是说，闭包让你可以在一个内层函数中访问到其外层函数的作用域。在 JavaScript 中，每当创建一个函数，闭包就会在函数创建的同时被创建出来。</p></blockquote> <p>闭包使用场景：</p> <ul><li>函数柯里化</li> <li>防抖节流</li> <li>偏函数</li> <li>即使执行函数</li> <li>闭包隐藏数据</li> <li><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230218173506976.png" alt="image-20230218173506976"></li></ul> <p>影响</p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230219155955926.png" alt="image-20230219155955926"></p> <h2 id="_14-手写-将虚拟-dom-转化为真实-dom-类似的递归题-必考"><a href="#_14-手写-将虚拟-dom-转化为真实-dom-类似的递归题-必考" class="header-anchor">#</a> 14 手写-将虚拟 Dom 转化为真实 Dom（类似的递归题-必考）</h2> <p>详细看小野森森 https://www.bilibili.com/video/BV1Rf4y1S7RN?p=1&amp;vd_source=52b9208bc9964a4623ebab34f5fd4a57</p> <p>什么是虚拟DOM?   用JS模拟DOM结构</p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220623232109804.png" alt="image-20220623232109804"></p> <p>以Vue来讲，</p> <p>数据改变 -&gt; 虚拟DOM（计算变更）-&gt; 操作真实DOM -&gt; 视图更新</p> <p>看具体面试题</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">tag</span><span class="token operator">:</span> <span class="token string">'DIV'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">attrs</span><span class="token operator">:</span><span class="token punctuation">{</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span><span class="token string">'app'</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">tag</span><span class="token operator">:</span> <span class="token string">'SPAN'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> <span class="token literal-property property">tag</span><span class="token operator">:</span> <span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">tag</span><span class="token operator">:</span> <span class="token string">'SPAN'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> <span class="token literal-property property">tag</span><span class="token operator">:</span> <span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span> <span class="token literal-property property">tag</span><span class="token operator">:</span> <span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
把上诉虚拟Dom转化成下方真实Dom
<span class="token operator">&lt;</span>div id<span class="token operator">=</span><span class="token string">&quot;app&quot;</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>a<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>a<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>a<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><p>还是有点无法理解，建议深入学习虚拟DOM</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> vNode <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">tag</span><span class="token operator">:</span> <span class="token string">'DIV'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">attrs</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">&quot;app&quot;</span>
        <span class="token comment">//id: 123 假如这里的id被写成123那我们得把它改成 id: &quot;123&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token literal-property property">tag</span><span class="token operator">:</span> <span class="token string">'SPAN'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span> <span class="token literal-property property">tag</span><span class="token operator">:</span> <span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token literal-property property">tag</span><span class="token operator">:</span> <span class="token string">'SPAN'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span> <span class="token literal-property property">tag</span><span class="token operator">:</span> <span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token punctuation">{</span> <span class="token literal-property property">tag</span><span class="token operator">:</span> <span class="token string">'A'</span><span class="token punctuation">,</span> <span class="token literal-property property">children</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">_render</span><span class="token punctuation">(</span><span class="token parameter">vNode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//如果是数字就转换为字符串</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> vNode <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//id = 123</span>
        vNode <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span>vNode<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//字符串类型转换为文本节点</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> vNode <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> document<span class="token punctuation">.</span><span class="token function">createTextNode</span><span class="token punctuation">(</span>vNode<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//普通的DOM</span>
    <span class="token keyword">const</span> dom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>vNode<span class="token punctuation">.</span>tag<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>vNode<span class="token punctuation">.</span>attrs<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//遍历节点属性,并为dom节点添加节点属性</span>
        Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>vNode<span class="token punctuation">.</span>attrs<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token comment">//获取所有键并遍历</span>
            <span class="token keyword">const</span> value <span class="token operator">=</span> vNode<span class="token punctuation">.</span>attrs<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token comment">//取值</span>
            dom<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token comment">//设置属性</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 子数组进行递归操作 这一步是关键</span>
    vNode<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">child</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> dom<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span><span class="token function">_render</span><span class="token punctuation">(</span>child<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> dom<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">_render</span><span class="token punctuation">(</span>vNode<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><h2 id="_15-重点-对象的扁平化flatten方法-数组扁平化flatten方法"><a href="#_15-重点-对象的扁平化flatten方法-数组扁平化flatten方法" class="header-anchor">#</a> 15 (重点)对象的扁平化flatten方法,数组扁平化flatten方法</h2> <h3 id="将对象扁平化"><a href="#将对象扁平化" class="header-anchor">#</a> 将对象扁平化</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
 <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
        <span class="token literal-property property">d</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">e</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
 <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token number">3</span>
<span class="token punctuation">}</span>

<span class="token function">flatten</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> 结果返回如下
<span class="token comment">// {</span>
<span class="token comment">//  'a.b': 1,</span>
<span class="token comment">//  'a.c': 2,</span>
<span class="token comment">//  'a.d.e': 5,</span>
<span class="token comment">//  'b[0]': 1,</span>
<span class="token comment">//  'b[1]': 3,</span>
<span class="token comment">//  'b[2].a': 2,</span>
<span class="token comment">//  'b[2].b': 3</span>
<span class="token comment">//   c: 3</span>
<span class="token comment">// }</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><ul><li>简单的对象扁平化: <font color="red" size="3">对象内只嵌套了对象</font></li></ul> <p>代码实现思路：我们可以利用<code>Object.entries</code>获取对象的<code>[key,value]</code>数组，遍历这个数组，进行进一步的判断（<strong>判断遍历的值的类型</strong>，如果是对象类型就递归调用，如果是普通类型就赋值给对象）。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">flat</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> preKey <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> res <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">//prekey表示xx.</span>
  Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>key<span class="token punctuation">,</span> val<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>val <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> val <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">flat</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> preKey <span class="token operator">+</span> key <span class="token operator">+</span> <span class="token string">&quot;.&quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      res<span class="token punctuation">[</span>preKey <span class="token operator">+</span> key<span class="token punctuation">]</span> <span class="token operator">=</span> val<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 测试</span>
<span class="token keyword">const</span> source <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">d</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token literal-property property">e</span><span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token literal-property property">f</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">g</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">flat</span><span class="token punctuation">(</span>source<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li><p>实现复杂的对象扁平化: <font color="red" size="3">对象内嵌套了数组等其它类型</font></p> <p>代码实现思路：其实本质上就是多了一个<strong>遍历的obj的类型的判断</strong>和<strong>value的类型判断</strong></p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">flat</span><span class="token punctuation">(</span>obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> preKey <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> res <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//空值判断，如果obj是空，直接返回</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>obj<span class="token punctuation">)</span> <span class="token keyword">return</span>
  <span class="token comment">//获取obj对象的所有[key,value]数组并且遍历，forEach的箭头函数中用了解构</span>
  Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>key<span class="token punctuation">,</span>value<span class="token punctuation">]</span></span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">//如果obj是数组，那么key就是数组的index，value就是对应的value</span>
      <span class="token comment">//obj是数组的话就用[]引起来</span>
      <span class="token comment">//因为value是数组，数组后面是直接跟元素的，不需要.号</span>
      <span class="token keyword">let</span> temp <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>preKey<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">[</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">]</span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>preKey<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token function">flat</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span>temp<span class="token punctuation">,</span>res<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">//因为value是对象类型，所以在末尾需要加.号</span>
      <span class="token keyword">let</span> temp <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>preKey<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">[</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">].</span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>preKey<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.</span><span class="token template-punctuation string">`</span></span>
      <span class="token function">flat</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span>temp<span class="token punctuation">,</span>res<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
      <span class="token keyword">let</span> temp <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>preKey<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">[</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">]</span><span class="token template-punctuation string">`</span></span> <span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>preKey<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>key<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
      res<span class="token punctuation">[</span>temp<span class="token punctuation">]</span> <span class="token operator">=</span> value
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">flat</span><span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="重点-数组扁平化"><a href="#重点-数组扁平化" class="header-anchor">#</a> (重点)数组扁平化</h3> <p><font color="red" size="3">说两种就行了</font></p> <h3 id="第一种-while-some"><a href="#第一种-while-some" class="header-anchor">#</a> 第一种 while + some</h3> <h3 id="第二次-递归-reduce"><a href="#第二次-递归-reduce" class="header-anchor">#</a> 第二次  递归 + reduce</h3> <p>数组扁平化相较于对象扁平化更加简单，有多种实现方法</p> <ul><li>递归</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/* ES6 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">flatten</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> i<span class="token punctuation">,</span> arr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      result <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token function">flatten</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">flatten</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ul><li><code>toString()</code></li></ul> <p>该方法是利用 <code>toString</code> 把数组变成以逗号分隔的字符串，然后遍历数组把每一项再变回原来的类型。</p> <p>先来看下 <code>toString</code> 是怎么把数组变成字符串的</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[1, [2, 3, [4]]].toString()
// &quot;1,2,3,4&quot;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>完整的展示</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/* ES6 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">flatten</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> arr<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">+</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">flatten</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>这种方法使用的场景却非常有限，必须数组中元素全部都是 <code>Number</code>。 也可以全部都为 <code>String</code>，具体实现大家自己体会。</p> <ul><li><code>[].concat.apply</code> + <code>some</code></li></ul> <p>利用 <code>arr.some</code> 判断当数组中还有数组的话，循环调用 <code>flatten</code> 扁平函数(利用 <code>[].concat.apply</code>扁平), 用 <code>concat</code> 连接，最终返回 <code>arr</code>;</p> <p>对于<code>[].concat.apply([], arr);</code>this指向[]本体，最前面的[]只是为了调用concat方法而写,这里为啥this不能指向null之类的，因为我们要生成的就是一个数组，本体也得是数组[]，甚至可以把原代码改为<code>Array.prototype.concat.apply([], arr);</code>，照样正常运行，说明前面的[]只是为了调用concat</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/* ES6 */</span>
<span class="token keyword">const</span> <span class="token function-variable function">flatten</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//只要还有一项是数组，继续扁平化</span>
    arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> arr<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">flatten</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>对于some方法：某一个元素满足返回条件，就立刻返回true，全部元素都不满足返回条件，则返回false，不会改变原数组</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>

<span class="token keyword">const</span> result <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span>index<span class="token punctuation">,</span>arr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span>index<span class="token punctuation">,</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> item <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/** 
 *运行结果: 
    1 0 (4) [1, 2, 3, 4]   
    true         //第一项就满足返回条件了，立刻返回。
*/</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220630144828522.png" alt="image-20220630144828522"></p> <p>直接使用空数组连接数组，会得到和连接数组一样的数组</p> <p><font color="red" size="3">但是使用了apply后，因为apply第二个参数为数组类型</font></p> <p>apply和call还有bind都是用来改变this指向的  他们的第一个参数就是用来改变this的，之后的参数才是用来传参的，那么问题就来了，这里不用apply用call可以不？答案是不行！因为apply的特殊性，它是apply（this，[arr1,arrr2,arr3]）这样来传参的，它的第二个参数就是以一个数组形式进行传参，所以很明显很符合我们之前的题目设定，所以[[12,21],[1,2,3],[2,3,4]]=&gt;[arr1,arrr2,arr3] ，arr1=&gt;[12,21]; arr2=&gt;[1,2,3]; arr3=&gt;[2,3,4];  <font color="red" size="3">apply会解构数组</font>，之后运用<a href="https://so.csdn.net/so/search?q=concat&amp;spm=1001.2101.3001.7020" target="_blank" rel="noopener noreferrer">concat<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>来连接多个数组，多次解构后便可以得到一维数组</p> <p>详参apply源码</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myApply</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">ctx<span class="token punctuation">,</span>args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 1.将方法挂载到我们传入的ctx</span>
    <span class="token comment">// 2.将挂载以后的方法调用</span>
    <span class="token comment">// 3.将添加的属性删除</span>
    <span class="token comment">// 4.做判断，如果传入的参数不是数组，抛出错误</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>args <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token punctuation">(</span>args <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span><span class="token punctuation">(</span><span class="token string">'apply 第二个参数只接受数组'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> fn <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">[</span>fn<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    ctx<span class="token punctuation">[</span>fn<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">delete</span> ctx<span class="token punctuation">[</span>fn<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ul><li><font color="red" size="3">扩展运算符</font></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//第五种处理：扩展运算符</span>
<span class="token keyword">while</span> <span class="token punctuation">(</span>ary<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span>Array<span class="token punctuation">.</span>isArray<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  ary <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token operator">...</span>ary<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_16-怎么在制定数据源里面生成一个长度为-n-的不重复随机数组-能有几种方法-时间复杂度多少-字节"><a href="#_16-怎么在制定数据源里面生成一个长度为-n-的不重复随机数组-能有几种方法-时间复杂度多少-字节" class="header-anchor">#</a> 16 怎么在制定数据源里面生成一个长度为 n 的不重复随机数组 能有几种方法 时间复杂度多少（字节）</h2> <ul><li>第一版 时间复杂度为 O(n^2)</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getTenNum</span><span class="token punctuation">(</span><span class="token parameter">testArray<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> random <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> testArray<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> cur <span class="token operator">=</span> testArray<span class="token punctuation">[</span>random<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      i<span class="token operator">--</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> testArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> resArr <span class="token operator">=</span> <span class="token function">getTenNum</span><span class="token punctuation">(</span>testArray<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ul><li>第二版 标记法 / 自定义属性法 时间复杂度为 O(n)</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getTenNum</span><span class="token punctuation">(</span><span class="token parameter">testArray<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> hash <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> ranNum <span class="token operator">=</span> n<span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>ranNum <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> ran <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> testArray<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>hash<span class="token punctuation">[</span>ran<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      hash<span class="token punctuation">[</span>ran<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>ran<span class="token punctuation">)</span><span class="token punctuation">;</span>
      ranNum<span class="token operator">--</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> testArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> resArr <span class="token operator">=</span> <span class="token function">getTenNum</span><span class="token punctuation">(</span>testArray<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ul><li>第三版 交换法 时间复杂度为 O(n)</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getTenNum</span><span class="token punctuation">(</span><span class="token parameter">testArray<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> cloneArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>testArray<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">debugger</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> ran <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>cloneArr<span class="token punctuation">.</span>length <span class="token operator">-</span> i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cloneArr<span class="token punctuation">[</span>ran<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    cloneArr<span class="token punctuation">[</span>ran<span class="token punctuation">]</span> <span class="token operator">=</span> cloneArr<span class="token punctuation">[</span>cloneArr<span class="token punctuation">.</span>length <span class="token operator">-</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> testArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> resArr <span class="token operator">=</span> <span class="token function">getTenNum</span><span class="token punctuation">(</span>testArray<span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><blockquote><p>值得一提的是操作数组的时候使用交换法 这种思路在算法里面很常见</p></blockquote> <ul><li>最终版 边遍历边删除 时间复杂度为 O(n)</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getTenNum</span><span class="token punctuation">(</span><span class="token parameter">testArray<span class="token punctuation">,</span> n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> cloneArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>testArray<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> random <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> cloneArr<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> cur <span class="token operator">=</span> cloneArr<span class="token punctuation">[</span>random<span class="token punctuation">]</span><span class="token punctuation">;</span>
    result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cur<span class="token punctuation">)</span><span class="token punctuation">;</span>
    cloneArr<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>random<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> testArray <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> resArr <span class="token operator">=</span> <span class="token function">getTenNum</span><span class="token punctuation">(</span>testArray<span class="token punctuation">,</span> <span class="token number">14</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="_17-tree-shaking-是什么-原理是什么"><a href="#_17-tree-shaking-是什么-原理是什么" class="header-anchor">#</a> 17 tree shaking 是什么，原理是什么</h2> <p>Tree shaking 是一种通过<strong>清除多余代码方式</strong>来优化项目打包体积的技术，专业术语叫 Dead code elimination</p> <p>tree shaking 的<strong>原理</strong>是什么?</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>ES6 Module引入进行静态分析，故而编译的时候正确判断到底加载了那些模块

静态分析程序流，判断那些模块和变量未被使用或者引用，进而删除对应代码
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><blockquote><p>扩展：common.js 和 es6 中模块引入的区别？</p></blockquote> <p>CommonJS 是一种模块规范，最初被应用于 Nodejs，成为 Nodejs 的模块规范。运行在浏览器端的 JavaScript 由于也缺少类似的规范，在 ES6 出来之前，前端也实现了一套相同的模块规范 (例如: AMD)，用来对前端模块进行管理。自 ES6 起，引入了一套新的 ES6 Module 规范，在语言标准的层面上实现了模块功能，而且实现得相当简单，有望成为浏览器和服务器通用的模块解决方案。但目前浏览器对 ES6 Module 兼容还不太好，我们平时在 Webpack 中使用的 export 和 import，会经过 Babel 转换为 CommonJS 规范。在使用上的差别主要有：</p> <p>1、CommonJS 模块输出的是一个值的拷贝，ES6 模块输出的是值的引用。</p> <p>2、CommonJS 模块是运行时加载，ES6 模块是编译时输出接口（静态编译）。</p> <p>3、CommonJs 是单个值导出，ES6 Module 可以导出多个</p> <p>4、CommonJs 是动态语法可以写在判断里，ES6 Module 静态语法只能写在顶层</p> <p>5、CommonJs 的 this 是当前模块，ES6 Module 的 this 是 undefined</p> <h2 id="_18-重点-原型链判断"><a href="#_18-重点-原型链判断" class="header-anchor">#</a> 18 (重点)原型链判断</h2> <h4 id="原型链判断"><a href="#原型链判断" class="header-anchor">#</a> 原型链判断</h4> <p>请写出下面的答案</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__<span class="token punctuation">;</span>
<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__<span class="token punctuation">;</span>
Object<span class="token punctuation">.</span>__proto__<span class="token punctuation">;</span>
Object <span class="token keyword">instanceof</span> <span class="token class-name">Function</span><span class="token punctuation">;</span>
Function <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">;</span>
<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype <span class="token operator">===</span> Function<span class="token punctuation">.</span>__proto__<span class="token punctuation">;</span>


<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__<span class="token punctuation">;</span> <span class="token comment">//null</span>
<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__<span class="token punctuation">;</span> <span class="token comment">//Object.prototype</span>
Object<span class="token punctuation">.</span>__proto__<span class="token punctuation">;</span> <span class="token comment">//Function.prototype</span>
Object <span class="token keyword">instanceof</span> <span class="token class-name">Function</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
Function <span class="token keyword">instanceof</span> <span class="token class-name">Object</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype <span class="token operator">===</span> Function<span class="token punctuation">.</span>__proto__<span class="token punctuation">;</span> <span class="token comment">//true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>这道题目深入考察了原型链相关知识点 尤其是 Function 和 Object 的之间的关系</p> <p>强烈推荐大家看看这篇文章 看完就清楚了 <a href="https://juejin.cn/post/6844903937418461198" target="_blank" rel="noopener noreferrer">JavaScript 原型系列（三）Function、Object、null 等等的关系和鸡蛋问题<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>看懂下面这张图，就彻底悟了</p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220908145644546.png" alt="image-20220908145644546"></p> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/16d0b42ee465ff96~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="JavaScript-prototype" style="zoom:50%;"> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220908144648430.png" alt="image-20220908144648430"></p> <h2 id="_19-raf-和-ric-是什么"><a href="#_19-raf-和-ric-是什么" class="header-anchor">#</a> 19 RAF 和 RIC 是什么</h2> <p><strong>requestAnimationFrame：</strong> 告诉浏览器在下次重绘之前执行传入的回调函数(通常是操纵 dom，更新动画的函数)；由于是每帧执行一次，那结果就是每秒的执行次数与浏览器屏幕刷新次数一样，通常是每秒 60 次。</p> <p><strong>requestIdleCallback：</strong>: 会在浏览器空闲时间执行回调，也就是允许开发人员在主事件循环中执行低优先级任务，而不影响一些延迟关键事件。如果有多个回调，会按照先进先出原则执行，但是当传入了 timeout，为了避免超时，有可能会打乱这个顺序。</p> <blockquote><p>这个题目可以深入去问浏览器每一帧的渲染流程 具体可以看看这篇 <a href="https://juejin.cn/post/6844903848981577735" target="_blank" rel="noopener noreferrer">requestIdleCallback 和 requestAnimationFrame 详解<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h2 id="_20-es6-的-let-实现原理"><a href="#_20-es6-的-let-实现原理" class="header-anchor">#</a> 20 Es6 的 let 实现原理</h2> <p>原始 es6 代码</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> funcs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  funcs<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
funcs<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>babel 编译之后的 es5 代码（polyfill）</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> funcs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> <span class="token function-variable function">_loop</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">_loop</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  funcs<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">_loop</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
funcs<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>其实我们根据 babel 编译之后的结果可以看得出来 let 是借助闭包和函数作用域来实现块级作用域的效果的 在不同的情况下 let 的编译结果是不一样的</p> <h2 id="_21-require-具体实现原理是什么"><a href="#_21-require-具体实现原理是什么" class="header-anchor">#</a> 21 require 具体实现原理是什么</h2> <p><strong>require 基本原理</strong></p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/0f1dbabee4d849d3a3e018c91f04c619~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="图片.png"></p> <p><strong>require 查找路径</strong></p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/e49999989bcf496facdbc91179bebd71~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="图片.png"></p> <p>require 和 module.exports 干的事情并不复杂，我们先假设有一个全局对象{}，初始情况下是空的，当你 require 某个文件时，就将这个文件拿出来执行，如果这个文件里面存在 module.exports，当运行到这行代码时将 module.exports 的值加入这个对象，键为对应的文件名，最终这个对象就长这样：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{
  &quot;a.js&quot;: &quot;hello world&quot;,
  &quot;b.js&quot;: function add(){},
  &quot;c.js&quot;: 2,
  &quot;d.js&quot;: { num: 2 }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>当你再次 require 某个文件时，如果这个对象里面有对应的值，就直接返回给你，如果没有就重复前面的步骤，执行目标文件，然后将它的 module.exports 加入这个全局对象，并返回给调用者。这个全局对象其实就是我们经常听说的缓存。所以 require 和 module.exports 并没有什么黑魔法，就只是运行并获取目标文件的值，然后加入缓存，用的时候拿出来用就行。</p> <p>具体可以看看这篇 <a href="https://juejin.cn/post/6866973719634542606" target="_blank" rel="noopener noreferrer">深入 Node.js 的模块加载机制，手写 require 函数<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="_22-重点-从0到1介绍promise"><a href="#_22-重点-从0到1介绍promise" class="header-anchor">#</a> 22 (重点)从0到1介绍promise</h2> <h3 id="为什么会有promise"><a href="#为什么会有promise" class="header-anchor">#</a> 为什么会有promise</h3> <p>promise可以用来解决回调地狱问题，某个异步操作需要等待之前的异步操作完成才能执行，不管你使用的是事件还是回调函数，都会进行嵌套，<strong>导致代码难以阅读</strong></p> <p><strong>总结： promise是用来处理异步操作，回调地狱问题的</strong></p> <h3 id="promise的三种状态"><a href="#promise的三种状态" class="header-anchor">#</a> promise的三种状态</h3> <ul><li>pending：进行中</li> <li>fulfilled：已成功</li> <li>rejected：已失败</li></ul> <h3 id="特点"><a href="#特点" class="header-anchor">#</a> 特点</h3> <h4 id="对象的状态不受外界影响"><a href="#对象的状态不受外界影响" class="header-anchor">#</a> 对象的状态不受外界影响</h4> <p>只有Promise自己才能决定最终的状态，任何操作都无法进行干扰</p> <h4 id="状态不可逆"><a href="#状态不可逆" class="header-anchor">#</a> 状态不可逆</h4> <p>状态只要发生了改变，就已经定死了，不能进行任何改变。</p> <p>我们只能从pending推向fulfilled或pending推向rejected，不能从pending推向fulfilled再推向rejected</p> <h3 id="创建promise实例"><a href="#创建promise实例" class="header-anchor">#</a> 创建Promise实例</h3> <p>Promise是一个构造函数，我们可以用它来生成Promise实例，并且该构造函数接受一个函数作为参数，这个函数拥有两个参数，分别为resolve和reject，它们是由<strong>js引擎提供</strong>给我们的<strong>一个函数</strong></p> <ul><li><p>resolve函数的作用</p> <p>将当前Promise实例的状态从pending推向fulfilled</p></li> <li><p>reject函数的作用</p> <p>将当前Promise实例的状态从pending推向rejected</p></li></ul> <h3 id="then方法"><a href="#then方法" class="header-anchor">#</a> then方法</h3> <p>then方法接收两个回调函数作为参数，分别为<strong>thenable函数</strong>和<strong>catchable函数</strong>(<font color="red" size="3">会被放到微任务队列中</font>)，thenable函数是当状态为fulfilled的时候调用，catchable函数是当状态为rejected的时候调用，并且catchable函数是可选的</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// thenable函数</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// catchable函数</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><strong>注意：</strong></p> <p>1.thenable和catchable都是<font color="red" size="3">异步函数</font>，所以它们会被加入到事件队列中等待执行(是<font color="red" size="3">放在微队列中</font>)</p> <p>2.Promise构造函数中的函数是一个同步函数，它会立即执行</p> <p>3.一个Promise是可以对应多个处理程序的</p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/16ff5d5b2d283613~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="img"></p> <h3 id="异常捕获"><a href="#异常捕获" class="header-anchor">#</a> 异常捕获</h3> <p>在pending阶段，如果<font color="orange" size="3">发生未捕获的错误或者主动调用reject，都会将状态推向至rejected，并被catchable捕获</font></p> <ul><li>错误未捕获</li></ul> <p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/1/30/16ff5d5e3b3d7063~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="img"></p> <ul><li>捕获错误(不会推向reject)</li></ul> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/16ff5d60de392976~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="img"></p> <ul><li>主动调用reject</li></ul> <p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/1/30/16ff5d629c3a26cb~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="img"></p> <p>细节补充：</p> <p><font color="orange" size="3">try...catch，只能捕获同步的错误，捕获不了异步的错误</font>，碰到需要注意</p> <p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/1/30/16ff5d6904d6dfe5~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="img"></p> <p><strong>解决方法：</strong></p> <ul><li><font color="red" size="3">异步函数中内嵌try...catch</font></li></ul> <p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/1/30/16ff5d6aca8dfaff~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="img"></p> <ul><li>window.onerror</li></ul> <p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/1/30/16ff5d6cae15e8b2~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="img"></p> <h3 id="链式调用"><a href="#链式调用" class="header-anchor">#</a> 链式调用</h3> <p>如果后面的Promise需要用到之前Promise的结果时，就需要让Promise串行执行</p> <p><strong>Promise中的then或catch方法，都是会返回一个全新的Promise对象</strong></p> <h4 id="新的promise的状态的特点"><a href="#新的promise的状态的特点" class="header-anchor">#</a> 新的Promise的状态的特点</h4> <ul><li>如果Promise的状态为pending，那么新的Promise状态就为pending</li></ul> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/16ff5d7155a86ca2~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="img"></p> <ul><li><p><strong>上一个Promise的状态，只会导致它自己的then方法执行哪个函数的问题</strong>，并不会导致下一个Promise的then方法执行函数的问题，也就是说then执行不出错，那么then返回的Promise状态都是fulfilled</p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/16ff5d78cc856776~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="img"></p></li> <li><p>为什么promise1的状态为pending？ 虽然promise执行了resolve后把自己的状态推向resolved，但是因为promise1的状态<strong>需要等待promise有了处理结果(相应函数运行完)，才会进行状态改变</strong>。由于thenable和catchable是异步函数，会被加到事件队列中，而这里log函数又是同步执行，所以log函数在执行的时候，异步函数还未执行，那么就意味着没有得到处理结果，这时候promise1还处于等待处理结果的状态，所以状态就是为pending</p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/16ff5d7331e8b955~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="img"></p></li></ul> <h4 id="总结-2"><a href="#总结-2" class="header-anchor">#</a> 总结</h4> <p>链式调用中，第一个promise是调用构造函数Promise构造出来的，它的状态由回调函数resolve，reject决定</p> <p>第一个promise的状态，只会导致在执行.then时使用thenable，还是catchabel异步函数，并不会决定返回的promise的状态</p> <p>只要<code>.then</code>执行不出错，第二个promise的状态就为resolved,<code>.then</code>执行出错就为<code>rejected</code>,<code>.then</code>未执行完就为<code>pending</code></p> <h4 id="小栗子"><a href="#小栗子" class="header-anchor">#</a> 小栗子</h4> <p>下面这些代码输出的结果是什么？</p> <ol><li></li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> promise1 <span class="token operator">=</span> promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> res <span class="token operator">*</span> <span class="token number">2</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> err <span class="token operator">*</span> <span class="token number">3</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
promise1<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
复制代码
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ol start="2"><li></li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token string">&quot;吴彦祖&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> promise1 <span class="token operator">=</span> promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;Wick好帅&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>err<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">好帅</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
promise1<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
复制代码
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ol start="3"><li></li></ol> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;摊牌了&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> promise1 <span class="token operator">=</span> promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>res<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">，其实我就是吴彦祖</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">,我不是吴彦祖</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
promise1<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
复制代码
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ol><li>第一个为：8</li></ol> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/16ff5d7b4e1ce442~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="img"></p> <ol><li>第二个为：吴彦祖好帅 30</li></ol> <p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/1/30/16ff5d7d49124608~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="img"></p> <ol><li>第三个为：摊牌了，其实我就是吴彦祖</li></ol> <p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/1/30/16ff5d7eda07de30~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="img"></p> <h3 id="finally"><a href="#finally" class="header-anchor">#</a> finally</h3> <p>ES2018引入的一个标准，不管Promise最后状态如何，都会执行这个语句，并跟finally声明的顺序有关。类似<code>try...catch</code>的finally关键字</p> <h3 id="promise相关api"><a href="#promise相关api" class="header-anchor">#</a> Promise相关Api</h3> <h4 id="实例成员"><a href="#实例成员" class="header-anchor">#</a> 实例成员</h4> <p><strong>Promise.prototype.then()</strong></p> <p><strong>Promise.prototype.catch()</strong></p> <h4 id="静态成员"><a href="#静态成员" class="header-anchor">#</a> 静态成员</h4> <ul><li><strong>Promise.resolve(args)</strong>   返回一个promise对象</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;后盾人&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//后盾人</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><strong>Promise.reject(args)</strong> 生成一个失败的<code>promise</code></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">&quot;fail&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li><strong>Promise.all(iterable)</strong>  同时执行多个并行异步操作,任何一个 <code>Promise</code> 执行失败就会调用 <code>catch</code>方法,参数必须是可迭代类型，如Array/Set</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> hdcms <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;第一个Promise&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> houdunren <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;第二个异步&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> hd <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>hdcms<span class="token punctuation">,</span> houdunren<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">results</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">msg</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><ul><li>**Promise.race(iterable)**处理容错异步,以最快返回的promise为准</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> hdcms <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;第一个Promise&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> houdunren <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;第二个异步&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
Promise<span class="token punctuation">.</span><span class="token function">race</span><span class="token punctuation">(</span><span class="token punctuation">[</span>hdcms<span class="token punctuation">,</span> houdunren<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">results</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">msg</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="重点-async-await"><a href="#重点-async-await" class="header-anchor">#</a> (重点)async await</h3> <p>使用 <code>async/await</code> 是promise 的语法糖，可以让编写 promise 更清晰易懂，也是推荐编写promise 的方式。</p> <ul><li><code>async/await</code> 本质还是promise，只是更简洁的语法糖书写</li> <li><code>async/await</code> 使用更清晰的promise来替换 promise.then/catch 的方式</li></ul> <p>下面在 <code>hd</code> 函数前加上async，函数将返回promise，我们就可以像使用标准Promise一样使用了。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">hd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token string">&quot;houdunren.com&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">hd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">hd</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>使用 <code>await</code> 关键词后会等待promise 执行完,</p> <p><code>await</code> 后面一般是promise，如果不是直接返回,</p> <p><code>await</code> 必须放在 async 定义的函数中使用</p> <p>asycn await 通常和 try  catch搭配使用</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">ajax</span><span class="token punctuation">(</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://localhost:8888/php/user.php?name=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">&quot;用户不存在&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>await 会去执行promise的resolved状态，但是不会执行reject状态，会报错，<font color="red" size="3">使用上面的try...catch就可以去处理这种情况</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> p <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'err'</span><span class="token punctuation">)</span> <span class="token comment">//rejected状态</span>
    rejectd状态不会走到then，因此不会去执行<span class="token keyword">await</span>，下面代码会报错
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> p	<span class="token comment">//await -&gt; then</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_23-重点-从0到1介绍原型和原型链"><a href="#_23-重点-从0到1介绍原型和原型链" class="header-anchor">#</a> 23 (重点)从0到1介绍原型和原型链</h2> <p>https://juejin.cn/post/6844904093828251662</p> <h3 id="二、构造函数"><a href="#二、构造函数" class="header-anchor">#</a> 二、构造函数</h3> <p>讲原型则离不开构造函数，让我们先来认识下构造函数。</p> <h4 id="_2-1-构造函数分为-实例成员-和-静态成员"><a href="#_2-1-构造函数分为-实例成员-和-静态成员" class="header-anchor">#</a> 2.1 构造函数分为 实例成员 和 静态成员</h4> <p>让我们先来看看他们分别是什么样子的。</p> <p><strong>实例成员：</strong> 实例成员就是在构造函数内部，通过this添加的成员。<font color="red" size="3">实例成员只能通过实例化的对象来访问。</font></p> <p><strong>静态成员：</strong> 在构造函数本身上添加的成员，只能通过构造函数来访问</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Star</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//实例成员</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//静态成员</span>
Star<span class="token punctuation">.</span>sex <span class="token operator">=</span> <span class="token string">'女'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> stars <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'小红'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stars<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">// Star {name: &quot;小红&quot;, age: 18}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stars<span class="token punctuation">.</span>sex<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// undefined     实例无法访问sex属性</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Star<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Star     通过构造函数无法直接访问实例成员</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Star<span class="token punctuation">.</span>sex<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//女       通过构造函数可直接访问静态成员</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="_2-2-通过构造函数创建对象"><a href="#_2-2-通过构造函数创建对象" class="header-anchor">#</a> 2.2 通过构造函数创建对象</h4> <p>该过程也称作实例化</p> <h5 id="_2-2-1-如何通过构造函数创建一个对象"><a href="#_2-2-1-如何通过构造函数创建一个对象" class="header-anchor">#</a> 2.2.1 如何通过构造函数创建一个对象？</h5> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token keyword">function</span> <span class="token function">Father</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 <span class="token keyword">let</span> son <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Father</span><span class="token punctuation">(</span><span class="token string">'Lisa'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>son<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Father {name: &quot;Lisa&quot;}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>此时，son就是一个新对象。</p> <h5 id="_2-2-2-new一个新对象的过程-发生了什么"><a href="#_2-2-2-new一个新对象的过程-发生了什么" class="header-anchor">#</a> 2.2.2 new一个新对象的过程，发生了什么？</h5> <p>(1) 创建一个空对象 son <code>{}</code>
(2) 为 son 准备原型链连接 <code>son.__proto__ = Father.prototype</code>
(3) 重新绑定this，使构造函数的this指向新对象 <code>Father.call(this)</code>
(4) 为新对象属性赋值 <code>son.name</code>
(5) 返回this <code>return this</code>，此时的新对象就拥有了构造函数的方法和属性了</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">myNew</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 创建空对象</span>
    <span class="token keyword">let</span> o <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token comment">// 获取构造函数</span>
    <span class="token keyword">let</span> fn <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span>
    <span class="token comment">// 连接原型</span>
    o<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> fn<span class="token punctuation">.</span>prototype
    <span class="token comment">// 绑定this</span>
    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span>
    <span class="token keyword">return</span> res <span class="token keyword">instanceof</span> <span class="token class-name">Object</span> <span class="token operator">?</span> res <span class="token operator">:</span> o
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="_2-2-3-每个实例的方法是共享的吗"><a href="#_2-2-3-每个实例的方法是共享的吗" class="header-anchor">#</a> 2.2.3 每个实例的方法是共享的吗？</h4> <p>这要看我们如何定义该方法了，分为两种情况。</p> <h5 id="方法1-在构造函数上直接定义方法-不共享"><a href="#方法1-在构造函数上直接定义方法-不共享" class="header-anchor">#</a> 方法1：在构造函数上直接定义方法（不共享）</h5> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">function</span> <span class="token function">Star</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">sing</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我爱唱歌'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> stu1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> stu2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    stu1<span class="token punctuation">.</span><span class="token function">sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//我爱唱歌</span>
    stu2<span class="token punctuation">.</span><span class="token function">sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//我爱唱歌</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stu1<span class="token punctuation">.</span>sing <span class="token operator">===</span> stu2<span class="token punctuation">.</span>sing<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>很明显，stu1 和 stu2 指向的不是一个地方。 所以 在构造函数上通过this来添加方法的方式来生成实例，每次生成实例，都是新开辟一个内存空间存方法。这样会导致内存的极大浪费，从而影响性能。</p> <h5 id="方法2-通过原型添加方法-共享"><a href="#方法2-通过原型添加方法-共享" class="header-anchor">#</a> 方法2：通过原型添加方法（共享）</h5> <p>构造函数通过原型分配的函数，是所有对象共享的。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token keyword">function</span> <span class="token function">Star</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">Star</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sing</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我爱唱歌'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> stu1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'小红'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> stu2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'小蓝'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    stu1<span class="token punctuation">.</span><span class="token function">sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//我爱唱歌 小红</span>
    stu2<span class="token punctuation">.</span><span class="token function">sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//我爱唱歌 小蓝</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stu1<span class="token punctuation">.</span>sing <span class="token operator">===</span> stu2<span class="token punctuation">.</span>sing<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="_2-2-4-实例的属性为基本类型是-它们是共享的吗"><a href="#_2-2-4-实例的属性为基本类型是-它们是共享的吗" class="header-anchor">#</a> 2.2.4 实例的属性为基本类型是，它们是共享的吗？</h4> <p>属性存储的是如果存储的是基本类型，不存在共享问题，是否相同要看值内容。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">let</span> stu1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'小红'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> stu2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'小红'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stu1<span class="token punctuation">.</span>name <span class="token operator">===</span> stu2<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span>

    <span class="token keyword">let</span> stu1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'小红'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> stu2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'小蓝'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stu1<span class="token punctuation">.</span>name <span class="token operator">===</span> stu2<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="_2-2-5-定义构造函数的规则"><a href="#_2-2-5-定义构造函数的规则" class="header-anchor">#</a> 2.2.5 定义构造函数的规则</h4> <p>公共属性定义到构造函数里面，公共方法我们放到原型对象身上。</p> <h3 id="三、原型"><a href="#三、原型" class="header-anchor">#</a> 三、原型</h3> <p>前面我们在 实例化 和 实例共享方法 时，都提到了原型。那么现在聊聊这个神秘的原型到底是什么？</p> <h4 id="_3-1-什么是原型"><a href="#_3-1-什么是原型" class="header-anchor">#</a> 3.1 什么是原型？</h4> <p>Father.prototype 就是原型，它是一个对象，我们也称它为原型对象。</p> <h4 id="_3-2-原型的作用是什么"><a href="#_3-2-原型的作用是什么" class="header-anchor">#</a> 3.2 原型的作用是什么？</h4> <p>原型的作用，就是共享方法。
我们通过 <code>Father.prototype.method</code> 可以共享方法，不会反应开辟空间存储方法。</p> <h4 id="_3-3-原型中this的指向是什么"><a href="#_3-3-原型中this的指向是什么" class="header-anchor">#</a> 3.3 原型中this的指向是什么？</h4> <p>原型中this的指向是实例。</p> <h3 id="四、原型链"><a href="#四、原型链" class="header-anchor">#</a> 四、原型链</h3> <h4 id="_4-1-什么是原型链"><a href="#_4-1-什么是原型链" class="header-anchor">#</a> 4.1 什么是原型链？</h4> <p>原型与原型层层相链接的过程即为原型链。</p> <h4 id="_4-2-原型链应用"><a href="#_4-2-原型链应用" class="header-anchor">#</a> 4.2 原型链应用</h4> <p><font color="red" size="3">原型链让对象可以使用构造函数prototype原型对象的属性和方法</font>，就是因为对象有__proto__原型的存在
每个对象都有__proto__原型的存在</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Star</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Star</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">dance</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我在跳舞'</span><span class="token punctuation">,</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'张萌'</span><span class="token punctuation">,</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>__proto__ <span class="token operator">===</span> <span class="token class-name">Star</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="_4-3-重点-原型链图"><a href="#_4-3-重点-原型链图" class="header-anchor">#</a> 4.3 （重点）原型链图</h4> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220822214806838.png" alt="image-20220822214806838"></p> <p><img src="https://p1-jj.byteimg.com/tos-cn-i-t2oaga2asx/gold-user-assets/2020/3/21/170fd29767b1485f~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="image-20220822214806838"></p> <h4 id="_4-4-原型查找方式"><a href="#_4-4-原型查找方式" class="header-anchor">#</a> 4.4 原型查找方式</h4> <p>例如：查找obj的dance方法</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">function</span> <span class="token function">Star</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        
        <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>首先看obj对象身上是否有dance方法，如果有，则执行对象身上的方法
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">dance</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    
    <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>如果没有dance方法，就去构造函数原型对象prototype身上去查找dance这个方法。
    <span class="token class-name">Star</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">dance</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'2'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    
    <span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>如果再没有dance方法，就去Object原型对象prototype身上去查找dance这个方法。
    <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">dance</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span> <span class="token string">'3'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>如果再没有，则会报错。
    <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'小红'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    obj<span class="token punctuation">.</span><span class="token function">dance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>(1)首先看obj对象身上是否有dance方法，如果有，则执行对象身上的方法。</p> <p>(2)如果没有dance方法，就去构造函数原型对象prototype身上去查找dance这个方法。</p> <p>(3)如果再没有dance方法，就去Object原型对象prototype身上去查找dance这个方法。</p> <p>(4)如果再没有，则会报错。</p> <h4 id="_4-5-原型的构造器"><a href="#_4-5-原型的构造器" class="header-anchor">#</a> 4.5 原型的构造器</h4> <p>原型的构造器指向构造函数。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">function</span> <span class="token function">Star</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'小红'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Star</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Star<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token class-name">__proto__</span><span class="token punctuation">.</span>constructor <span class="token operator">===</span> Star<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h5 id="_4-5-1-在原型上添加方法需要注意的地方"><a href="#_4-5-1-在原型上添加方法需要注意的地方" class="header-anchor">#</a> 4.5.1 在原型上添加方法需要注意的地方</h5> <p>方法1：<code>构造函数.prototype.方法</code>在原型对象上直接添加方法，此时的原型对象是有<code>constructor</code>构造器的，构造器指向构造函数本身</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">function</span> <span class="token function">Star</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">Star</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">dance</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'小红'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//{dance: ƒ, constructor: ƒ}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token class-name">__proto__</span><span class="token punctuation">.</span>constructor<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Star</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>方法2：<code>Star.prototype = {}</code>给原型重新赋值，<font color="red" size="3">此时会丢失构造器</font>，我们需要手动定义构造器，指回构造函数本身</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">function</span> <span class="token function">Star</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">Star</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">dance</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Star</span><span class="token punctuation">(</span><span class="token string">'小红'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>__proto__<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//{dance: ƒ}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span><span class="token class-name">__proto__</span><span class="token punctuation">.</span>constructor<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//  ƒ Object() { [native code] }</span>
    <span class="token class-name">Star</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Star<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h4 id="_4-5-2-一般不允许直接改变原型prototype指向"><a href="#_4-5-2-一般不允许直接改变原型prototype指向" class="header-anchor">#</a> 4.5.2 一般不允许直接改变原型<code>prototype</code>指向</h4> <p>改变原型指向，会使原生的方法都没了，所以Array、String这些内置的方法是不允许改变原型指向的。如果改变了，就会报错。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getSum</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            sum <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> sum<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">getSum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//45</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>如果改变prototype指向，会报错！</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">getSum</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                sum <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">return</span> sum<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">getSum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//45</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/170de47590740a47~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="img"></p> <h3 id="五、继承-es5方法"><a href="#五、继承-es5方法" class="header-anchor">#</a> 五、继承 - ES5方法</h3> <p>ES6之前并没有给我们提供extends继承，我们可以通过构造函数+原型对象模拟实现继承。</p> <p>继承属性，利用call改变this指向。但该方法只可以继承属性，实例不可以使用父类的方法。(<font color="orange" size="3">构造函数继承</font>)</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">function</span> <span class="token function">Father</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">Father</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">dance</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I am dancing'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">Son</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">Father</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> son <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Son</span><span class="token punctuation">(</span><span class="token string">'小红'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    son<span class="token punctuation">.</span><span class="token function">dance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//报错</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>如何继承父类的方法呢?</p> <p>解决方法1：利用<code>Son.prototype = Father.prototype</code>改变原型指向，<font color="red" size="3">但此时我们给子类增加原型方法，同样会影响到父类</font>。(不可取)</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">function</span> <span class="token function">Father</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">Father</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">dance</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I am dancing'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">Son</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">Father</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">Son</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token class-name">Father</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
    <span class="token comment">//为子类添加方法</span>
    <span class="token class-name">Son</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sing</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I am singing'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> son <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Son</span><span class="token punctuation">(</span><span class="token string">'小红'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//此时父类也被影响了</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Father</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token comment">//{dance: ƒ, sing: ƒ, constructor: ƒ}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>解决方法2：子类的原型指向父类的实例，这样就可以顺着原型链共享父类的方法了。并且为子类添加原型方法的时候，不会影响父类。（<font color="red" size="3">组合继承：原型链继承 + 构造函数继承</font>）</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">function</span> <span class="token function">Father</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">Father</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">dance</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I am dancing'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">Son</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">Father</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">Son</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Father</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//看这里</span>
<span class="token comment">//不可写做Son._proto_ = new Father， 因为Son这个构造函数就没有proto，只有实例和原型有proto</span>
    <span class="token class-name">Son</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sing</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'I am singing'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> son <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Son</span><span class="token punctuation">(</span><span class="token string">'小红'</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token class-name">Father</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token comment">//{dance: ƒ, constructor: ƒ}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>组合继承（伪经典继承）如何解决<strong>构造函数复用的问题</strong>？变成**<font color="red" size="3">寄生组合继承</font>**（经典继承），可以按如下写</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Super</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">Super</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">say</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">222</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">Super</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//在构造函数继承基础上，再进行原型链继承</span>
    <span class="token comment">// Sub.prototype = new Super();</span>
    <span class="token class-name">Sub</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Super</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//这样做Sub原型为Super,Super原型为Object，同时也不用去实例化Super了，达成了构造函数复用</span>
    <span class="token comment">// Sub.prototype = Super.prototype;//不可以直接这样赋值,此时我们给子类增加原型方法，同样会影响到父类,需要重新创建一个和父类一样的原型</span>
    <span class="token keyword">var</span> sub1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> sub2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sub1<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//a = [1,2,3,4]</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sub2<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//a = [1,2,3,4]</span>
    sub1<span class="token punctuation">.</span>a<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    sub1<span class="token punctuation">.</span>b<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sub1<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//a = [1,2,3,4,5]</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sub2<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//a = [1,2,3,4]</span>
    sub1<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//222</span>
    sub2<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//222</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>Object.create()方法创建一个新对象，使用现有的对象来提供新创建的对象的__proto__。
语法:Object.create(proto, [propertiesObject])</p> <div class="language- extra-class"><pre><code>proto：新创建对象的原型对象。
propertiesObject：可选
    若没有指定为 undefined，则是要添加到新创建对象的可枚举属性
    即其自身定义的属性，而不是其原型链上的枚举属性）对象的属性描述符以及相应的属性名称。
    这些属性对应Object.defineProperties()的第二个参数
    返回值：一个新对象，带着指定的原型对象和属性。
</code></pre></div><p>寄生组合继承仍然存在不足之处，就是<code>Sub.prototype</code>是直接通过赋值来更改的，如果<code>Sub.prototype</code>本来就有东西了，这样原来的会被覆盖掉，显然不符合要求，解决方法有<strong>圣杯模式</strong>，<strong>ES6的class继承</strong>，<strong>extends继承</strong>，以及<strong>拷贝继承</strong>等</p> <h3 id="六、类"><a href="#六、类" class="header-anchor">#</a> 六、类</h3> <h4 id="什么是类"><a href="#什么是类" class="header-anchor">#</a> 什么是类？</h4> <p>类的本质还是一个函数，类就是构造函数的另一种写法。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Star</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> Star<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//function</span>

<span class="token keyword">class</span> <span class="token class-name">Star</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> Star<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//function</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="es6中类没有变量提升"><a href="#es6中类没有变量提升" class="header-anchor">#</a> ES6中类没有变量提升</h4> <p>通过构造函数创建实例，是可以变量提升的。 es6中的类，必须先有类，才可以实例化。</p> <h4 id="类的所有方法都定义在类的prototype属性上面"><a href="#类的所有方法都定义在类的prototype属性上面" class="header-anchor">#</a> 类的所有方法都定义在类的prototype属性上面</h4> <p>让我们来测试一下。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>    <span class="token keyword">class</span> <span class="token class-name">Father</span><span class="token punctuation">{</span>
        <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> red <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Father</span><span class="token punctuation">(</span><span class="token string">'小红'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> green <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Father</span><span class="token punctuation">(</span><span class="token string">'小绿'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>red<span class="token punctuation">.</span>sing <span class="token operator">===</span> green<span class="token punctuation">.</span>sing<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="向类中添加方法"><a href="#向类中添加方法" class="header-anchor">#</a> 向类中添加方法</h4> <p>通过Object.assign，在原型上追加方法。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">class</span> <span class="token class-name">Father</span><span class="token punctuation">{</span>
        <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//在原型上追加方法</span>
    Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span><span class="token class-name">Father</span><span class="token punctuation">.</span>prototype<span class="token punctuation">,</span><span class="token punctuation">{</span>
        <span class="token function">dance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token string">'我爱跳舞'</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> red <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Father</span><span class="token punctuation">(</span><span class="token string">'小红'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> green <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Father</span><span class="token punctuation">(</span><span class="token string">'小绿'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>red<span class="token punctuation">.</span><span class="token function">dance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//我爱跳舞</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>red<span class="token punctuation">.</span>dance <span class="token operator">===</span> green<span class="token punctuation">.</span>dance<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h4 id="constructor方法"><a href="#constructor方法" class="header-anchor">#</a> constructor方法</h4> <p>constructor方法是类的默认方法，通过new命令生成对象实例时，自动调用该方法。一个类必须有constructor方法，如果没有显式定义，一个空的constructor方法会被默认添加。</p> <h3 id="七、继承-es6方法"><a href="#七、继承-es6方法" class="header-anchor">#</a> 七、继承 - ES6方法</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">class</span> <span class="token class-name">Father</span> <span class="token punctuation">{</span>
        <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">dance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token string">'我在跳舞'</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">class</span> <span class="token class-name">Son</span> <span class="token keyword">extends</span> <span class="token class-name">Father</span><span class="token punctuation">{</span>
        <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>score</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>score <span class="token operator">=</span> score<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">+</span><span class="token string">','</span><span class="token operator">+</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">dance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Son</span><span class="token punctuation">(</span><span class="token string">'小红'</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="八、类和构造函数的区别"><a href="#八、类和构造函数的区别" class="header-anchor">#</a> 八、类和构造函数的区别</h3> <p>(1) 类必须使用new调用，否则会报错。这是它跟普通构造函数的一个主要区别，后者不用new也可以执行。</p> <p>(2) 类的所有实例共享一个原型对象。</p> <p>(3) 类的内部，默认就是严格模式，所以不需要使用use strict指定运行模式。</p> <h3 id="九、总结"><a href="#九、总结" class="header-anchor">#</a> 九、总结</h3> <p><strong>构造函数特点：</strong></p> <p>1.构造函数有原型对象prototype。</p> <p>2.构造函数原型对象prototype里面有constructor，指向构造函数本身。</p> <p>3.构造函数可以通过原型对象添加方法。</p> <p>4.构造函数创建的实例对象有__proto__原型，指向构造函数的原型对象。</p> <p><strong>类：</strong></p> <p>1.class本质还是function</p> <p>2.类的所有方法都定义在类的prototype属性上</p> <p>3.类创建的实例，里面也有__proto__指向类的prototype原型对象</p> <p>4.新的class写法，只是让对象原型的写法更加清晰，更像面向对象编程的语法而已。</p> <p>5.ES6的类其实就是语法糖。</p> <h3 id="十、-什么是语法糖"><a href="#十、-什么是语法糖" class="header-anchor">#</a> 十、 什么是语法糖</h3> <p>什么是语法糖？加糖后的代码功能与加糖前保持一致，糖在不改变其所在位置的语法结构的前提下，实现了运行时的等价。</p> <p>语法糖没有改变语言功能，但增加了程序员的可读性。</p> <h3 id="十一、面试题"><a href="#十一、面试题" class="header-anchor">#</a> 十一、面试题</h3> <h4 id="一"><a href="#一" class="header-anchor">#</a> 一</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__    <span class="token comment">//null</span>
<span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__  <span class="token comment">//Object.prototype</span>
Object<span class="token punctuation">.</span>__proto__              <span class="token comment">//Function.prototype,这里有点迷，但是想不到是哪儿也只能是Function了</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>讲解： 这里涉及到Function的原型问题，附一张图</p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/170e2ba41e08f444~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="img"></p> <h4 id="二"><a href="#二" class="header-anchor">#</a> 二</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code>按照如下要求实现Person 和 Student 对象
 a<span class="token punctuation">)</span>Student 继承Person 
 b<span class="token punctuation">)</span>Person 包含一个实例变量 name， 包含一个方法 printName
 c<span class="token punctuation">)</span>Student 包含一个实例变量 score， 包含一个实例方法printScore
 d<span class="token punctuation">)</span>所有Person和Student对象之间共享一个方法
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>es6类写法</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
        <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">printName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'This is printName'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">commonMethods</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我是共享方法'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
        <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> score</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>score <span class="token operator">=</span> score<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token function">printScore</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'This is printScore'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">let</span> stu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'小红'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'小紫'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stu<span class="token punctuation">.</span>commonMethods<span class="token operator">===</span>person<span class="token punctuation">.</span>commonMethods<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>原生写法</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">function</span> <span class="token function">Person</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">printName</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'This is printName'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">commonMethods</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'我是共享方法'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>

    <span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> score</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>score <span class="token operator">=</span> score<span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">printScore</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//其实方法最好写在原型上，但是下面我们的原型被赋值了，这也是寄生组合继承的弊端</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'This is printScore'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">Student</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span>  Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'小紫'</span><span class="token punctuation">,</span><span class="token number">80</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> stu <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token string">'小红'</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stu<span class="token punctuation">.</span>printName<span class="token operator">===</span>person<span class="token punctuation">.</span>printName<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//false</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stu<span class="token punctuation">.</span>commonMethods<span class="token operator">===</span>person<span class="token punctuation">.</span>commonMethods<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h2 id="_24-重点-隐式转换"><a href="#_24-重点-隐式转换" class="header-anchor">#</a> 24 (重点)隐式转换</h2> <p>https://juejin.cn/post/6854573211208646670</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>得到”<span class="token punctuation">[</span>object Object<span class="token punctuation">]</span>“，而<span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> 得到 <span class="token number">0</span>。这是因为 <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">(</span>花括号<span class="token punctuation">)</span>在<span class="token constant">JS</span>中有两种含义：

当 <span class="token punctuation">{</span><span class="token punctuation">}</span> 在 <span class="token operator">+</span> 后面时，表示对象<span class="token punctuation">{</span><span class="token punctuation">}</span>当 <span class="token punctuation">{</span><span class="token punctuation">}</span> 位于 <span class="token operator">+</span> 前面时，<span class="token punctuation">{</span><span class="token punctuation">}</span> 表示一个独立的「空代码块」，所以<span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token operator">+</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> 操作相当于进行的是 <span class="token operator">+</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">(</span>一元操作符转换操作<span class="token punctuation">)</span> 将 <span class="token punctuation">[</span><span class="token punctuation">]</span> 转为<span class="token number">0</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>很多不理解的</p> <h2 id="_25-重点-手写深拷贝"><a href="#_25-重点-手写深拷贝" class="header-anchor">#</a> 25 (重点)手写深拷贝</h2> <p>https://kexiaozhan.github.io/docs/node/javaScript/%E6%B7%B1%E6%8B%B7%E8%B4%9D/two.html#%E6%96%B9%E6%B3%95%E4%B8%89-%E9%80%92%E5%BD%92-%E6%98%A0%E5%B0%84</p> <h2 id="_26-重点-说一下知道的所有数组方法"><a href="#_26-重点-说一下知道的所有数组方法" class="header-anchor">#</a> 26 (重点)说一下知道的所有数组方法</h2> <h2 id="_27-重点-手写some"><a href="#_27-重点-手写some" class="header-anchor">#</a> 27 (重点)手写some</h2> <h2 id="_28-重点-判断数据类型的方法"><a href="#_28-重点-判断数据类型的方法" class="header-anchor">#</a> 28 (重点)判断数据类型的方法</h2> <p>https://juejin.cn/post/6844903682018902029</p> <p>红宝石书告诉我们，JavaScript 中的数据类型有 <strong>Undefined、Null、Boolean、Number、String、Object</strong>，<strong>Symbol</strong>其中前五种是基本类型，而 Object 是引用类型。实际上，Object 中还包含了其它更为具体的引用类型，如 <strong>Array、Function、Date、RegExp、Error、Arguments</strong> 等。</p> <p>我们通常用来检测数据类型的方法，分别是 <strong>typeof</strong> 和 <strong>Object.prototype.toString</strong>，让我们仔细来看看这两个方法。</p> <h3 id="typeof"><a href="#typeof" class="header-anchor">#</a> typeof</h3> <p>MDN 中的叙述是，typeof 操作符返回一个字符串，表示未经计算的操作数的类型。</p> <p>其使用方式是 typeof operand 或 typeof(operand)，operand 是一个表达式，表示对象或原始值，其类型将被返回，返回值是表示其数据类型的字符串的小写形式。</p> <p>那么让我们直接来看一下上述的 12 种数据类型使用 typeof 来检测后返回值分别是什么：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> und<span class="token operator">=</span><span class="token keyword">undefined</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> nul<span class="token operator">=</span><span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> boo<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> num<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> str<span class="token operator">=</span><span class="token string">'xys'</span>
<span class="token keyword">var</span> obj<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> arr<span class="token operator">=</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">fun</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">var</span> date<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">a</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>
<span class="token keyword">var</span> err<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">var</span> arg<span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">getArg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    arg<span class="token operator">=</span>arguments<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> und<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> nul<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// object</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> boo<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// boolean</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// number</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// string</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// object</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> arr<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// object</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> fun<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// function</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> date<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// object</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> reg<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// object</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// object</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> arg<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// object</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p>可以看到，使用 typeof 方法来检测数据类型，<font color="red" size="3"><strong>基本类型</strong>大部分都能被准确检测并返回正确的字符串（<strong>除了 Null 类型，其返回 object 字符串</strong>），而<strong>引用类型</strong>大部分都不能够被准确检测（<strong>除了 Function 类型能够准确返回 function 字符串外，其它的都返回了 object 字符串</strong>）</font>。</p> <h3 id="object-prototype-tostring"><a href="#object-prototype-tostring" class="header-anchor">#</a> Object.prototype.toString</h3> <p>Object.prototype.toString 最终会返回形式如<code>[object,class]</code>的字符串，class 指代的是其检测出的数据类型，这个是我们判断数据类型的关键。</p> <p>同样的，让我们来看下使用 <code>Object.prototype.toString</code>来检测上述列举到的 12 种数据类型都会返回什么样的结果：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> toString<span class="token operator">=</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>toString<span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>und<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// [object Undefined]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>nul<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// [object Null]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>boo<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// [object Boolean]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// [object Number]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// [object String]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// [object Object]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// [object Array]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>fun<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// [object Function]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Date]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// [object RegExp]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// [object Error]</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// [object Arguments]</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>可以看到，Object.prototype.toString 返回的 [object,class] 字符串中，class 准确的表示了各个数据的类型，与 typeof 不同的是，class 所代表的数据类型字符串首字母是大写的，而不像 typeof 返回的是小写字符串。</p> <h3 id="instanceof"><a href="#instanceof" class="header-anchor">#</a> <strong>instanceof</strong></h3> <p>能判断<strong>对象</strong>类型，不能判断基本数据类型，<strong>其内部运行机制是判断在其原型链中能否找到该类型的原型</strong>。比如考虑以下代码：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">People</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token keyword">extends</span> <span class="token class-name">People</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">const</span> vortesnail <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>vortesnail <span class="token keyword">instanceof</span> <span class="token class-name">People</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>vortesnail <span class="token keyword">instanceof</span> <span class="token class-name">Student</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="constructor"><a href="#constructor" class="header-anchor">#</a> constructor</h3> <p>原理：<code>每一个实例对象都可通过constructor来访问它的构造函数</code>,其实也是根据原型链的原理来的。</p> <div class="language-kotlin line-numbers-mode"><pre class="language-kotlin"><code><span class="token char">'5'</span><span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>constructor <span class="token operator">===</span> String <span class="token comment">// true</span>
<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Array <span class="token comment">// true</span>

undefined<span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>constructor <span class="token comment">// Cannot read property '__proto__' of undefined</span>

<span class="token keyword">null</span><span class="token punctuation">.</span>__proto__<span class="token punctuation">.</span>constructor <span class="token comment">// Cannot read property '__proto__' of undefined</span>

复制代码
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>由于undefined和null是无效的对象，因此是没有constructor属性的,这两个值不能用这种方法判断.</p> <h3 id="数据类型检测终极方法"><a href="#数据类型检测终极方法" class="header-anchor">#</a> 数据类型检测终极方法</h3> <p>通过上述对两个检测数据类型方法的介绍，我们知道 typeof 能够被用来检测除 Null 类型外的其它基本类型，并且能够检测出引用类型中 Function 数据类型，而 Object.prototype.toString 能够检测出所有的数据类型，所以我们可以结合这两个方法来实现一个 JavaScript 数据类型检测的终极方法。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * @desc 数据类型检测
 * @param obj 待检测的数据
 * @return {String} 类型字符串
 */</span>
<span class="token keyword">function</span> <span class="token function">type</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">typeof</span> obj <span class="token operator">!==</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">?</span> <span class="token keyword">typeof</span> <span class="token literal-property property">obj</span> <span class="token operator">:</span> 		 <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_29-重点-实现拖动"><a href="#_29-重点-实现拖动" class="header-anchor">#</a> 29 (重点)实现拖动</h2> <p>https://juejin.cn/post/6844903513491767303#heading-1</p> <p>https://juejin.cn/post/6844904003881402382</p> <p>拖放（drap &amp;&amp; drop）在我们平时的工作中，经常遇到。它表示：抓取对象以后拖放到另一个位置。目前，它是HTML5标准的一部分。我从几个方面学习并实践这个功能。</p> <h3 id="拖放的流程对应的事件"><a href="#拖放的流程对应的事件" class="header-anchor">#</a> 拖放的流程对应的事件</h3> <p>我们先看下拖放的流程：</p> <div class="language-rust line-numbers-mode"><pre class="language-rust"><code>选中 <span class="token operator">-</span><span class="token operator">-</span><span class="token punctuation">-&gt;</span>  拖动  <span class="token operator">-</span><span class="token operator">-</span><span class="token punctuation">-&gt;</span> 释放复制代码
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>然后，我们一步步看下这个过程中，会发生的事情</p> <h3 id="选中"><a href="#选中" class="header-anchor">#</a> 选中</h3> <p>在HTML5标准中，为了使元素可拖动，把draggable属性设置为true。
文本、图片和链接是默认可以拖放的，它们的draggable属性自动被设置成了true。
图片和链接按住鼠标左键选中，就可以拖放。
文本只有在被选中的情况下才能拖放。如果显示设置文本的draggable属性为true，按住鼠标左键也可以直接拖放。</p> <p>draggable属性：设置元素是否可拖动。语法：<code>&lt;element draggable=&quot;true | false | auto&quot; &gt;</code></p> <ul><li>true: 可以拖动</li> <li>false: 禁止拖动</li> <li>auto: 跟随浏览器定义是否可以拖动</li></ul> <h3 id="拖动"><a href="#拖动" class="header-anchor">#</a> 拖动</h3> <p>每一个可拖动的元素，在拖动过程中，都会经历三个过程，<code>拖动开始</code>--&gt;<code>拖动过程中</code>--&gt; <code>拖动结束</code>。</p> <table><thead><tr><th>针对对象</th> <th>事件名称</th> <th>说明</th></tr></thead> <tbody><tr><td>被拖动的元素</td> <td>dragstart</td> <td>在元素开始被拖动时候触发</td></tr> <tr><td></td> <td>drag</td> <td>在元素被拖动时反复触发</td></tr> <tr><td></td> <td>dragend</td> <td>在拖动操作完成时触发</td></tr> <tr><td></td> <td></td> <td></td></tr> <tr><td>目的地对象</td> <td>dragenter</td> <td>当被拖动元素进入目的地元素所占据的屏幕空间时触发</td></tr> <tr><td></td> <td>dragover</td> <td>当被拖动元素在目的地元素内时触发</td></tr> <tr><td></td> <td>dragleave</td> <td>当被拖动元素没有放下就离开目的地元素时触发</td></tr></tbody></table> <p>dragenter和dragover事件的默认行为是拒绝接受任何被拖放的元素。因此，我们必须阻止浏览器这种默认行为。<code>e.preventDefault();</code></p> <h3 id="释放"><a href="#释放" class="header-anchor">#</a> 释放</h3> <p>到达目的地之后，释放元素事件</p> <table><thead><tr><th>针对对象</th> <th>事件名称</th> <th>说明</th></tr></thead> <tbody><tr><td>目的地对象</td> <td>drop</td> <td>当被拖动元素在目的地元素里放下时触发，一般需要取消浏览器的默认行为。</td></tr></tbody></table> <h2 id="_30-运算符"><a href="#_30-运算符" class="header-anchor">#</a> 30 ...运算符</h2> <h3 id="spread运算符"><a href="#spread运算符" class="header-anchor">#</a> spread运算符</h3> <p>扩展运算符用三个点号表示，功能是把数组或类数组对象展开成一系列用逗号隔开的值。</p> <div class="language-ini line-numbers-mode"><pre class="language-ini"><code><span class="token key attr-name">var arr</span> <span class="token punctuation">=</span> <span class="token value attr-value">[1, 2, 3]; //传统写法</span> 
foo(arr[0], arr[1], arr[2]); //使用扩展运算符 
foo(...arr); //1 //2 //3 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="rest运算符"><a href="#rest运算符" class="header-anchor">#</a> rest运算符</h3> <p>rest运算符也是三个点号，不过其功能与扩展运算符恰好相反，把逗号隔开的值序列组合成一个数组。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//主要用于不定参数，所以ES6开始可以不再使用arguments对象 </span>
<span class="token keyword">var</span> <span class="token function-variable function">bar</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> el <span class="token keyword">of</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span><span class="token punctuation">;</span> 
  <span class="token punctuation">}</span> 
<span class="token punctuation">}</span> 
<span class="token function">bar</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//args = [1 2 3 4] ...args = 1,2,3,4 </span>

<span class="token keyword">var</span> <span class="token function-variable function">test</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> 
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span> 
<span class="token function">test</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//1 //args == [ 2, 3, 4 ]   ...args = 2,3,4 </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>三点放在形参或者等号<strong>左边</strong>为<code>rest</code>运算符;放在实参或者等号<strong>右边</strong>为<code>spread</code>运算符。</p> <h2 id="_31-重点-手写reduce"><a href="#_31-重点-手写reduce" class="header-anchor">#</a> 31 (重点)手写reduce</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>   <span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">reduceArr</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span>initValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span> <span class="token operator">!==</span> <span class="token string">&quot;[object Function]&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'current params in not correct'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span> <span class="token comment">//当前数组</span>
        <span class="token keyword">let</span> initIndex<span class="token punctuation">;</span><span class="token comment">//初始索引，</span>
        <span class="token keyword">let</span> acc<span class="token punctuation">;</span><span class="token comment">//累加器</span>
        initIndex <span class="token operator">=</span> arguments<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//当有传入初始值时从0开始遍历，当没传初始值从1开始遍历</span>
        acc <span class="token operator">=</span> arguments<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">?</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">:</span> initValue <span class="token comment">//当有传入初始值取初始值，没传初始值取第一项</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> initIndex<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            acc <span class="token operator">=</span> <span class="token function">fn</span><span class="token punctuation">(</span>acc<span class="token punctuation">,</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span>i<span class="token punctuation">,</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//四个参数，累加器，当前项，当前索引，原数组</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> acc<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">reduceArr</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">pre<span class="token punctuation">,</span>item</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> pre <span class="token operator">+=</span> item<span class="token punctuation">;</span>  <span class="token comment">//注意这里要return</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">20</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="_32-重点-手写instanceof"><a href="#_32-重点-手写instanceof" class="header-anchor">#</a> 32 (重点)手写instanceof</h2> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220901165514546.png" alt="image-20220901165514546"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">myInstanceOf</span><span class="token punctuation">(</span><span class="token parameter">obj<span class="token punctuation">,</span>className</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> pointer <span class="token operator">=</span> obj<span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>pointer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>pointer <span class="token operator">===</span> className<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            pointer <span class="token operator">=</span> pointer<span class="token punctuation">.</span>__proto__
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">myInstanceOf</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>Object<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>主要是要利用<code>__proto__</code>来遍历原型链，相当于链表，当最后为null时就直接返回false就行了</p> <h2 id="_33-如何计算白屏时间和首屏时间"><a href="#_33-如何计算白屏时间和首屏时间" class="header-anchor">#</a> 33 如何计算白屏时间和首屏时间</h2> <p>白屏时间:<code>window.performance.timing.domLoading - window.performance.timing.navigationStart</code></p> <p>首屏时间: <code>window.performance.timing.domInteractive - window.performace.timing.navigationStart</code></p> <h2 id="_34-如何判断当前环境是移动端还是-pc-端"><a href="#_34-如何判断当前环境是移动端还是-pc-端" class="header-anchor">#</a> 34 如何判断当前环境是移动端还是 PC 端</h2> <p>判断 <code>navigator.userAgent</code>，对于 Android/iPhone 可以匹配以下正则</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> appleIphone <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">iPhone</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">;</span>
<span class="token keyword">const</span> appleIpod <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">iPod</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">;</span>
<span class="token keyword">const</span> appleTablet <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">iPad</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">;</span>
<span class="token keyword">const</span> androidPhone <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\bAndroid(?:.+)Mobile\b</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">;</span> <span class="token comment">// Match 'Android' AND 'Mobile'</span>
<span class="token keyword">const</span> androidTablet <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">Android</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>当然，不要重复造轮子，推荐一个库: https://github.com/kaimallea/isMobile<a href="https://github.com/kaimallea/isMobile" target="_blank" rel="noopener noreferrer"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://github.com/kaimallea/isMobile" target="_blank" rel="noopener noreferrer"> (opens new window)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> isMobile <span class="token keyword">from</span> <span class="token string">&quot;ismobilejs&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> mobile <span class="token operator">=</span> <span class="token function">isMobile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_35-input-中监听值的变化是在监听什么事件"><a href="#_35-input-中监听值的变化是在监听什么事件" class="header-anchor">#</a> 35 input 中监听值的变化是在监听什么事件</h2> <p>可以<strong>实时</strong>监听值的变化的事件有以下几种</p> <ul><li>keypress</li> <li>keydown</li> <li>keyup</li> <li>input</li></ul> <p>注: <code>onChange</code> 无法做到实时监听，因为 onChange 需要失去焦点才能触发</p> <p>oninput 不用考虑是否失去焦点，不管 js 操作还是键盘鼠标手动操作，只要 HTML 元素属性发生改变即可立即捕获到</p> <h2 id="_36-简单介绍-requestidlecallback-及使用场景"><a href="#_36-简单介绍-requestidlecallback-及使用场景" class="header-anchor">#</a> 36 简单介绍 requestIdleCallback 及使用场景</h2> <p><code>requestIdleCallback</code> 维护一个队列，将在浏览器空闲时间内执行。它属于 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Background_Tasks_API" target="_blank" rel="noopener noreferrer">Background Tasks API<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Background_Tasks_API" target="_blank" rel="noopener noreferrer"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Background_Tasks_API" target="_blank" rel="noopener noreferrer"> (opens new window)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，你可以使用 <code>setTimeout</code> 来模拟实现</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>window<span class="token punctuation">.</span>requestIdleCallback <span class="token operator">=</span>
  window<span class="token punctuation">.</span>requestIdleCallback <span class="token operator">||</span>
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">handler</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> startTime <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">handler</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">didTimeout</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token function-variable function">timeRemaining</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">50.0</span> <span class="token operator">-</span> <span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> startTime<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="_37-如何找到当前页面出现次数最多的-html-标签"><a href="#_37-如何找到当前页面出现次数最多的-html-标签" class="header-anchor">#</a> 37 如何找到当前页面出现次数最多的 HTML 标签</h2> <p>这是一道前端基础与编程功底具备的面试题：</p> <ul><li>如果你前端基础强会了解 <code>document.querySelector(*)</code> 能够列出页面内所有标签</li> <li>如果你编程能力强能够用<strong>递归</strong>/<strong>正则</strong>快速实现同等的效果</li></ul> <p>有三种 API 可以列出页面所有标签：</p> <ol><li><code>document.querySelector('*')</code>，标准规范实现</li> <li><code>$$('*')</code>，devtools 实现</li> <li><code>document.all</code>，非标准规范实现</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&gt;</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'*'</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span> <span class="token function">NodeList</span><span class="token punctuation">(</span><span class="token number">593</span><span class="token punctuation">)</span> <span class="token punctuation">[</span>html<span class="token punctuation">,</span> head<span class="token punctuation">,</span> meta<span class="token punctuation">,</span> meta<span class="token punctuation">,</span> meta<span class="token punctuation">,</span> meta<span class="token punctuation">,</span> meta<span class="token punctuation">,</span> meta<span class="token punctuation">,</span> meta<span class="token punctuation">,</span> title<span class="token punctuation">,</span> link#favicon<span class="token punctuation">,</span> link<span class="token punctuation">,</span> link#MainCss<span class="token punctuation">,</span> link#mobile<span class="token operator">-</span>style<span class="token punctuation">,</span> link<span class="token punctuation">,</span> link<span class="token punctuation">,</span> link<span class="token punctuation">,</span> script<span class="token punctuation">,</span> script<span class="token punctuation">,</span> script<span class="token punctuation">,</span> script<span class="token punctuation">,</span> script<span class="token punctuation">,</span> script<span class="token punctuation">,</span> script<span class="token punctuation">,</span> link<span class="token punctuation">,</span> script<span class="token punctuation">,</span> link<span class="token punctuation">,</span> link<span class="token punctuation">,</span> script<span class="token punctuation">,</span> input#_w_brink<span class="token punctuation">,</span> body<span class="token punctuation">,</span> a<span class="token punctuation">,</span> div#home<span class="token punctuation">,</span> div#header<span class="token punctuation">,</span> div#blogTitle<span class="token punctuation">,</span> a#lnkBlogLogo<span class="token punctuation">,</span> img#blogLogo<span class="token punctuation">,</span> h1<span class="token punctuation">,</span> a#Header1_HeaderTitle<span class="token punctuation">.</span>headermaintitle<span class="token punctuation">.</span>HeaderMainTitle<span class="token punctuation">,</span> h2<span class="token punctuation">,</span> div#navigator<span class="token punctuation">,</span> ul#navList<span class="token punctuation">,</span> li<span class="token punctuation">,</span> a#blog_nav_sitehome<span class="token punctuation">.</span>menu<span class="token punctuation">,</span> li<span class="token punctuation">,</span> a#blog_nav_myhome<span class="token punctuation">.</span>menu<span class="token punctuation">,</span> li<span class="token punctuation">,</span> a#blog_nav_newpost<span class="token punctuation">.</span>menu<span class="token punctuation">,</span> li<span class="token punctuation">,</span> a#blog_nav_contact<span class="token punctuation">.</span>menu<span class="token punctuation">,</span> li<span class="token punctuation">,</span> a#blog_nav_rss<span class="token punctuation">.</span>menu<span class="token punctuation">,</span> li<span class="token punctuation">,</span> a#blog_nav_admin<span class="token punctuation">.</span>menu<span class="token punctuation">,</span> div<span class="token punctuation">.</span>blogStats<span class="token punctuation">,</span> span#stats_post_count<span class="token punctuation">,</span> span#stats_article_count<span class="token punctuation">,</span> span#stats<span class="token operator">-</span>comment_count<span class="token punctuation">,</span> div#main<span class="token punctuation">,</span> div#mainContent<span class="token punctuation">,</span> div<span class="token punctuation">.</span>forFlow<span class="token punctuation">,</span> div#post_detail<span class="token punctuation">,</span> div#topics<span class="token punctuation">,</span> div<span class="token punctuation">.</span>post<span class="token punctuation">,</span> h1<span class="token punctuation">.</span>postTitle<span class="token punctuation">,</span> a#cb_post_title_url<span class="token punctuation">.</span>postTitle2<span class="token punctuation">.</span>vertical<span class="token operator">-</span>middle<span class="token punctuation">,</span> span<span class="token punctuation">,</span> div<span class="token punctuation">.</span>clear<span class="token punctuation">,</span> div<span class="token punctuation">.</span>postBody<span class="token punctuation">,</span> div#cnblogs_post_body<span class="token punctuation">.</span>blogpost<span class="token operator">-</span>body<span class="token punctuation">,</span> p<span class="token punctuation">,</span> p<span class="token punctuation">,</span> strong<span class="token punctuation">,</span> p<span class="token punctuation">,</span> p<span class="token punctuation">,</span> p<span class="token punctuation">,</span> strong<span class="token punctuation">,</span> div<span class="token punctuation">.</span>cnblogs_code<span class="token punctuation">,</span> pre<span class="token punctuation">,</span> span<span class="token punctuation">,</span> span<span class="token punctuation">,</span> span<span class="token punctuation">,</span> span<span class="token punctuation">,</span> span<span class="token punctuation">,</span> p<span class="token punctuation">,</span> span<span class="token punctuation">,</span> strong<span class="token punctuation">,</span> pre<span class="token punctuation">,</span> strong<span class="token punctuation">,</span> span<span class="token punctuation">,</span> strong<span class="token punctuation">,</span> br<span class="token punctuation">,</span> br<span class="token punctuation">,</span> br<span class="token punctuation">,</span> div<span class="token punctuation">.</span>cnblogs_code<span class="token punctuation">,</span> pre<span class="token punctuation">,</span> span<span class="token punctuation">,</span> span<span class="token punctuation">,</span> p<span class="token punctuation">,</span> p<span class="token punctuation">,</span> …<span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">0</span> … <span class="token number">99</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">100</span> … <span class="token number">199</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">200</span> … <span class="token number">299</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">300</span> … <span class="token number">399</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">400</span> … <span class="token number">499</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span><span class="token number">500</span> … <span class="token number">592</span><span class="token punctuation">]</span>
<span class="token literal-property property">__proto__</span><span class="token operator">:</span> NodeList
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>使用 <code>document.querySelectorAll</code> 实现如下</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 实现一个 maxBy 方便找出出现次数最多的 HTML 标签</span>
<span class="token keyword">const</span> <span class="token function-variable function">maxBy</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">list<span class="token punctuation">,</span> keyBy</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  list<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token function">keyBy</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token function">keyBy</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span> <span class="token operator">?</span> x <span class="token operator">:</span> y<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">getFrequentTag</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> tags <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x<span class="token punctuation">.</span>tagName<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">o<span class="token punctuation">,</span> tag</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      o<span class="token punctuation">[</span>tag<span class="token punctuation">]</span> <span class="token operator">=</span> o<span class="token punctuation">[</span>tag<span class="token punctuation">]</span> <span class="token operator">?</span> o<span class="token punctuation">[</span>tag<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> o<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token function">maxBy</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>tags<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">tag</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> tag<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="_38-前端如何实现文件上传功能"><a href="#_38-前端如何实现文件上传功能" class="header-anchor">#</a> 38 前端如何实现文件上传功能</h2> <p>将 input 的类型设置为 file，再加一个按钮就行</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>referenceUpload<span class="token punctuation">&quot;</span></span> <span class="token attr-name">@change</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onUpload<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>input</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>primary<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">margin</span><span class="token punctuation">:</span> 0px 0px 0px -83px<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>上传文件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="_40-如何取消请求的发送"><a href="#_40-如何取消请求的发送" class="header-anchor">#</a> 40 如何取消请求的发送</h2> <p><strong>axios出了一个新的api  AbortControl API</strong></p> <p>根据发送网络请求的 API 不同，取消方法不同</p> <ul><li>xhr</li> <li>fetch</li> <li>axios</li></ul> <p>如果使用<code>XMLHttpRequest</code>发送请求可以使用<code>XMLHttpRequest.abort()</code></p> <p>如果使用<code>fetch</code>发送请求可以使用<code>AbortController</code></p> <p><code>Axios</code> 中通过 <code>cancelToken</code> 取消请求发送</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> CancelToken <span class="token operator">=</span> axios<span class="token punctuation">.</span>CancelToken<span class="token punctuation">;</span>
<span class="token keyword">const</span> source <span class="token operator">=</span> CancelToken<span class="token punctuation">.</span><span class="token function">source</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

axios
  <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/user/12345&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">cancelToken</span><span class="token operator">:</span> source<span class="token punctuation">.</span>token<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">thrown</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>axios<span class="token punctuation">.</span><span class="token function">isCancel</span><span class="token punctuation">(</span>thrown<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Request canceled&quot;</span><span class="token punctuation">,</span> thrown<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// handle error</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>
  <span class="token string">&quot;/user/12345&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;new name&quot;</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">cancelToken</span><span class="token operator">:</span> source<span class="token punctuation">.</span>token<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// cancel the request (the message parameter is optional)</span>
source<span class="token punctuation">.</span><span class="token function">cancel</span><span class="token punctuation">(</span><span class="token string">&quot;Operation canceled by the user.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h2 id="_41-dom-中如何阻止事件默认行为-如何判断事件否可阻止"><a href="#_41-dom-中如何阻止事件默认行为-如何判断事件否可阻止" class="header-anchor">#</a> 41 DOM 中如何阻止事件默认行为，如何判断事件否可阻止？</h2> <ul><li><code>e.preventDefault()</code>: 取消事件</li> <li><code>e.cancelable</code>: 事件是否可取消</li></ul> <h2 id="_42-dom-中-element-与-node-有何区别"><a href="#_42-dom-中-element-与-node-有何区别" class="header-anchor">#</a> 42 DOM 中 Element 与 Node 有何区别</h2> <p>Element 是 dom 元素，Node 是节点，包含 Element，还有其他节点</p> <p>Element 继承于 Node，具有 Node 的方法，同时又拓展了很多自己的特有方法</p> <h2 id="_43-如何设置一个支持过期时间的-localstorage"><a href="#_43-如何设置一个支持过期时间的-localstorage" class="header-anchor">#</a> 43 如何设置一个支持过期时间的 localStorage</h2> <p>setItem时再设置一个过期字段，getItem时先判断是否过期</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">initLocalStorage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  localStorage<span class="token punctuation">.</span><span class="token function-variable function">setItem</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> value<span class="token punctuation">,</span> time <span class="token operator">=</span> <span class="token number">1000</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> expiresTime <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> time <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> payload <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">__data</span><span class="token operator">:</span> value<span class="token punctuation">,</span>
      <span class="token literal-property property">__expiresTime</span><span class="token operator">:</span> expiresTime<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token class-name">Storage</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>localStorage<span class="token punctuation">,</span> key<span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>payload<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
  localStorage<span class="token punctuation">.</span><span class="token function-variable function">getItem</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token class-name">Storage</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>localStorage<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> value <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> jsonVal <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>jsonVal<span class="token punctuation">.</span>__expiresTime<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>jsonVal<span class="token punctuation">.</span>__expiresTime <span class="token operator">&gt;=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>jsonVal<span class="token punctuation">.</span>__data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">initLocalStorage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>想了下 只能去改 api 去封装一层 不过存在一个问题就是别人在使用的时候 也需要遵循这个规则 没想到别的办法</p> <h2 id="_44-浏览器中如何读取二进制信息"><a href="#_44-浏览器中如何读取二进制信息" class="header-anchor">#</a> 44 浏览器中如何读取二进制信息</h2> <p>使用 JavaScript 处理二进制数据和文件。</p> <ol><li><a href="https://zh.javascript.info/arraybuffer-binary-arrays" target="_blank" rel="noopener noreferrer">ArrayBuffer，二进制数组<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zh.javascript.info/text-decoder" target="_blank" rel="noopener noreferrer">TextDecoder 和 TextEncoder<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zh.javascript.info/blob" target="_blank" rel="noopener noreferrer">Blob<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zh.javascript.info/file" target="_blank" rel="noopener noreferrer">File 和 FileReader<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ol> <h2 id="_45-在浏览器中点击-a-标签保存为文件如何做"><a href="#_45-在浏览器中点击-a-标签保存为文件如何做" class="header-anchor">#</a> 45 在浏览器中点击 a 标签保存为文件如何做</h2> <p>有两种方式:</p> <ol><li><code>a.download</code> 当指定 a 标签的 <code>download</code> 属性时，点击该链接会直接保存为文件，文件名为 <code>download</code> 属性</li> <li>通过对 a 标签指定的 URL 在服务器设置响应头 <code>Content-Disposition: attachment; filename=&quot;filename.jpg&quot;</code> 可直接下载</li></ol> <h2 id="_46-浏览器中监听事件函数-addeventlistener-第三个参数有那些值"><a href="#_46-浏览器中监听事件函数-addeventlistener-第三个参数有那些值" class="header-anchor">#</a> 46 浏览器中监听事件函数 addEventListener 第三个参数有那些值</h2> <p>capture。监听器会在时间捕获阶段传播到 event.target 时触发。</p> <p>passive。监听器不会调用 preventDefault()。</p> <p>once。监听器只会执行一次，执行后移除。</p> <p>singal。调用 abort()移除监听器</p> <h2 id="_47-浏览器中如何使用原生的-esm"><a href="#_47-浏览器中如何使用原生的-esm" class="header-anchor">#</a> 47 浏览器中如何使用原生的 ESM</h2> <p>通过 <code>script[type=module]</code>，可直接在浏览器中使用原生 <code>ESM</code>。这也使得前端不打包 (<code>Bundless</code>) 成为可能。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>module<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> lodash <span class="token keyword">from</span> <span class="token string">&quot;https://cdn.skypack.dev/lodash&quot;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>由于前端跑在浏览器中，<strong>因此它也只能从 URL 中引入 <code>Package</code></strong></p> <ol><li>绝对路径: <code>https://cdn.sykpack.dev/lodash</code></li> <li>相对路径: <code>./lib.js</code></li></ol> <p>.module 默认是 defer 的加载和执行方式</p> <h2 id="_48-在-js-中如何把类数组转化为数组"><a href="#_48-在-js-中如何把类数组转化为数组" class="header-anchor">#</a> 48 在 js 中如何把类数组转化为数组</h2> <p><code>ES6</code> 中有现成的 API：<code>Array.from</code>，极为简单</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// [undefined, undefined, undefined]</span>
Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>在 <code>ES5</code> 中可以借用 <code>Array API</code> 通过 <code>call/apply</code> 改变 <code>this</code> 或者 <code>arguments</code> 来完成转化。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Array</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> arrayLike<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> arrayLike<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arrayLike<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arrayLike<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arrayLike<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_49-array-100-map-x-1-结果是多少"><a href="#_49-array-100-map-x-1-结果是多少" class="header-anchor">#</a> 49 Array(100).map(x =&gt; 1) 结果是多少</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>Array(100)` 将会创建一个稀疏数组 (sparse array)，即不存在真实元素，节省内存空间。在控制台上显示为 `[empty]`
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>正因为没有元素，所以它也不会有 <code>map</code> 操作，所以 <code>Array(100).map(x =&gt; 1)</code> 仍然返回为 <code>[empty]</code></p> <p><strong>那如何生成 100 个元素为 1 的数组呢？</strong></p> <p>可以使用 <code>Array.from</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token function">Array</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>而在 <code>ES5</code> 中借用 <code>apply</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Array</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token function">Array</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>根据楼下提示，再添加一个 <code>fill</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Array</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_50-如何实现-compose-函数-组合函数-进行函数合成"><a href="#_50-如何实现-compose-函数-组合函数-进行函数合成" class="header-anchor">#</a> 50 如何实现 compose 函数(组合函数)，进行函数合成</h2> <p>实现一个 compose 函数，进行函数合成，比如 redux 中的 compose，react 高阶组件连续调用时的 compose</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">add10</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">mul10</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">add100</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x <span class="token operator">+</span> <span class="token number">100</span><span class="token punctuation">;</span>

<span class="token comment">// (10 + 100) * 10 + 10 = 1110</span>
<span class="token function">compose</span><span class="token punctuation">(</span>add10<span class="token punctuation">,</span> mul10<span class="token punctuation">,</span> add100<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">compose</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>fns</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token comment">// 注意 f、g 的位置，如果实现从左到右计算，则置换顺序</span>
  fns<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span><span class="token parameter">f<span class="token punctuation">,</span> g</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
      <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        <span class="token function">f</span><span class="token punctuation">(</span><span class="token function">g</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_51-前端中遇到过处理二进制的场景吗"><a href="#_51-前端中遇到过处理二进制的场景吗" class="header-anchor">#</a> 51 前端中遇到过处理二进制的场景吗</h2> <p>TCPSocket通信，获取数据</p> <h2 id="_52-如何实现类似-lodash-get-函数"><a href="#_52-如何实现类似-lodash-get-函数" class="header-anchor">#</a> 52 如何实现类似 lodash.get 函数</h2> <p>使用 <code>get</code> 函数可避免长链的 key 时获取不到属性而出现问题，此时进行异常避免时及其服务，如 <code>o.a &amp;&amp; o.a.b &amp;&amp; o.a.b.c &amp;&amp; o.a.b.c.d</code></p> <p>实现类似lodash.get，有以下测试用例:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> object <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//=&gt; 3</span>
<span class="token function">get</span><span class="token punctuation">(</span>object<span class="token punctuation">,</span> <span class="token string">&quot;a[0].b.c&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//=&gt; 3</span>
<span class="token function">get</span><span class="token punctuation">(</span>object<span class="token punctuation">,</span> <span class="token string">'a[0][&quot;b&quot;][&quot;c&quot;]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//=&gt; 10086</span>
<span class="token function">get</span><span class="token punctuation">(</span>object<span class="token punctuation">,</span> <span class="token string">&quot;a[100].b.c&quot;</span><span class="token punctuation">,</span> <span class="token number">10086</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token parameter">source<span class="token punctuation">,</span> path<span class="token punctuation">,</span> defaultValue <span class="token operator">=</span> <span class="token keyword">undefined</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// a[3].b -&gt; a.3.b -&gt; [a, 3, b]</span>
  <span class="token keyword">const</span> paths <span class="token operator">=</span> path
    <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\[(\w+)\]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&quot;.$1&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\[&quot;(\w+)&quot;\]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&quot;.$1&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\['(\w+)'\]</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token string">&quot;.$1&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> source<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> p <span class="token keyword">of</span> paths<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result <span class="token operator">=</span> result<span class="token operator">?.</span><span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> result <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> defaultValue <span class="token operator">:</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> object <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> result <span class="token operator">=</span> _<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>object<span class="token punctuation">,</span> <span class="token string">&quot;a[0].b.c&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="_53-js-中什么是可选链操作符-如何访问数组"><a href="#_53-js-中什么是可选链操作符-如何访问数组" class="header-anchor">#</a> 53 js 中什么是可选链操作符，如何访问数组</h2> <p><code>?.</code> 操作符，可以嵌套获取对象的属性值。通过获取对象属性获得的值可能是 undefined 或 null 时，可选链操作符提供了一种方法来简化被连接对象的值访问。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> o <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 添加可选链之前</span>
o <span class="token operator">&amp;&amp;</span> o<span class="token punctuation">.</span>a <span class="token operator">&amp;&amp;</span> o<span class="token punctuation">.</span>a<span class="token punctuation">.</span>b <span class="token operator">&amp;&amp;</span> o<span class="token punctuation">.</span>a<span class="token punctuation">.</span>b<span class="token punctuation">.</span>c <span class="token operator">&amp;&amp;</span> o<span class="token punctuation">.</span>a<span class="token punctuation">.</span>b<span class="token punctuation">.</span>c<span class="token punctuation">.</span>d<span class="token punctuation">;</span>

<span class="token comment">// 添加可选链之后</span>
o<span class="token operator">?.</span>a<span class="token operator">?.</span>b<span class="token operator">?.</span>c<span class="token operator">?.</span>d<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 访问数组</span>
obj<span class="token operator">?.</span>a<span class="token operator">?.</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">//使用方法</span>
obj<span class="token operator">?.</span>b<span class="token operator">?.</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_54-flatmap"><a href="#_54-flatmap" class="header-anchor">#</a> 54 flatMap()</h2> <p>flatMap()方法对原数组的每个成员执行一个函数，相当于执行Array.prototype.map(),然后对返回值组成的数组执行flat()方法。该方法返回一个新数组，不改变原数组。</p> <p><code>Array.prototype.flatMap</code> 已经是 EcmaScript 的标准，看一个例子，它的输出是多少？</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">flatMap</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//=&gt; [2, 3, '31', 5]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>很可惜，不是 <code>[2, 3, 4, 5]</code>，原因在于 <code>flatMap</code> 实际上是先 <code>map</code> 再 <code>flat</code>，实现如下</p> <p><code>flatMap</code> 实际上是先 <code>map</code> 再 <code>flat</code>，实现如下</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 先map再flat</span>
<span class="token keyword">let</span> <span class="token function-variable function">myFlatMap</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> target <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> target<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">fn</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_55-如何裁剪图片-情景-选择头像"><a href="#_55-如何裁剪图片-情景-选择头像" class="header-anchor">#</a> 55 如何裁剪图片 (情景：选择头像)</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> path <span class="token operator">=</span> <span class="token string">'https://static-zh.wxb.com.cn/customer/form/2020/11/1758696796d.jpg'</span>
<span class="token keyword">function</span> <span class="token function">clipImage</span><span class="token punctuation">(</span><span class="token parameter">path</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'canvas'</span><span class="token punctuation">)</span>
    canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token number">200</span>
    canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token number">100</span>
    <span class="token keyword">const</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">'2d'</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> img <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span>
    img<span class="token punctuation">.</span>src <span class="token operator">=</span> path
    img<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&quot;crossOrigin&quot;</span><span class="token punctuation">,</span><span class="token string">'Anonymous'</span><span class="token punctuation">)</span>
    img<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">200</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>canvas<span class="token punctuation">.</span><span class="token function">toDataURL</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">clipImage</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>使用 ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>和 ctx<span class="token punctuation">.</span><span class="token function">clip</span><span class="token punctuation">(</span><span class="token punctuation">)</span>进行裁剪 ctx<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> radius<span class="token punctuation">,</span> startAngle<span class="token punctuation">,</span> endAngle<span class="token punctuation">)</span><span class="token punctuation">;</span> ctx<span class="token punctuation">.</span><span class="token function">clip</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> ctx<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_56-如何实现一个-async-await"><a href="#_56-如何实现一个-async-await" class="header-anchor">#</a> 56 如何实现一个 async/await</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">/**
 * async的执行原理
 * 其实就是自动执行generator函数
 * 暂时不考虑genertor的编译步骤（更复杂）
 */</span>

<span class="token keyword">const</span> <span class="token function-variable function">getData</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">&quot;data&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 这样的一个async函数 应该再1秒后打印data</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;data: &quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> data2 <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;data2: &quot;</span><span class="token punctuation">,</span> data2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// async函数会被编译成generator函数 (babel会编译成更本质的形态，这里我们直接用generator)</span>
<span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">testG</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// await被编译成了yield</span>
  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;data: &quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> data2 <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;data2: &quot;</span><span class="token punctuation">,</span> data2<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token string">&quot;success&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">asyncToGenerator</span><span class="token punctuation">(</span><span class="token parameter">generatorFunc</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> gen <span class="token operator">=</span> <span class="token function">generatorFunc</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">function</span> <span class="token function">step</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> arg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> generatorResult<span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
          generatorResult <span class="token operator">=</span> gen<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">const</span> <span class="token punctuation">{</span> value<span class="token punctuation">,</span> done <span class="token punctuation">}</span> <span class="token operator">=</span> generatorResult<span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
            <span class="token keyword">function</span> <span class="token function">onResolve</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token function">step</span><span class="token punctuation">(</span><span class="token string">&quot;next&quot;</span><span class="token punctuation">,</span> val<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token keyword">function</span> <span class="token function">onReject</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
              <span class="token function">step</span><span class="token punctuation">(</span><span class="token string">&quot;throw&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
      <span class="token function">step</span><span class="token punctuation">(</span><span class="token string">&quot;next&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> testGAsync <span class="token operator">=</span> <span class="token function">asyncToGenerator</span><span class="token punctuation">(</span>testG<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">testGAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br></div></div><h2 id="_57-如何使用-async-await-实现-promise-all-的效果"><a href="#_57-如何使用-async-await-实现-promise-all-的效果" class="header-anchor">#</a> 57 如何使用 async/await 实现 Promise.all 的效果</h2> <h2 id="_58-使用js实现一个lru-最近最少使用-缓存机制"><a href="#_58-使用js实现一个lru-最近最少使用-缓存机制" class="header-anchor">#</a> 58 使用js实现一个LRU (最近最少使用) 缓存机制</h2> <ul><li>使用 Map 做数据保存</li> <li>自建双向链表做元素使用频率保存及空间大小控制</li></ul> <h2 id="_59-实现一个-once-函数-记忆返回结果只执行一次"><a href="#_59-实现一个-once-函数-记忆返回结果只执行一次" class="header-anchor">#</a> 59 实现一个 once 函数，记忆返回结果只执行一次</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">once</span><span class="token punctuation">(</span><span class="token parameter">f</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result<span class="token punctuation">;</span>
  <span class="token keyword">let</span> revoked <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>revoked<span class="token punctuation">)</span> <span class="token keyword">return</span> result<span class="token punctuation">;</span>
    <span class="token keyword">const</span> r <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    revoked <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    result <span class="token operator">=</span> r<span class="token punctuation">;</span>
    <span class="token keyword">return</span> r<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">f</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x<span class="token punctuation">;</span>

<span class="token keyword">const</span> onceF <span class="token operator">=</span> <span class="token function">once</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//=&gt; 3</span>
<span class="token function">onceF</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//=&gt; 3</span>
<span class="token function">onceF</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_60-如何实现一个函数-isplainobject-判断是否为纯对象"><a href="#_60-如何实现一个函数-isplainobject-判断是否为纯对象" class="header-anchor">#</a> 60 如何实现一个函数 isPlainObject 判断是否为纯对象</h2> <h2 id="_61-如何实现一个无限累加的-sum-函数"><a href="#_61-如何实现一个无限累加的-sum-函数" class="header-anchor">#</a> 61 如何实现一个无限累加的 sum 函数</h2> <p>实现一个 sum 函数如下所示：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//6</span>
<span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//7</span>
<span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//10</span>
<span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//9</span>
<span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 21</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>追问:</p> <p>如果不使用 <code>valueOf</code>，可直接进行计算，如下示例，应如何处理。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//=&gt; 15</span>
<span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//=&gt; 100</span>
<span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><blockquote><p>这是一个关于懒计算的函数，使用 <code>sum</code> 收集所有累加项，使用 <code>valueOf</code> 进行计算</p> <ol><li>sum 返回一个函数，收集所有的累加项，使用递归实现</li> <li>返回函数带有 <code>valueOf</code> 属性，用于统一计算</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token function-variable function">f</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>rest</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">,</span> <span class="token operator">...</span>rest<span class="token punctuation">)</span><span class="token punctuation">;</span>
  f<span class="token punctuation">.</span><span class="token function-variable function">valueOf</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> args<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x <span class="token operator">+</span> y<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> f<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></blockquote> <p>关键点在于每次调用后返回自己所返回的东西，也就是函数 f。 同时收集每次传进来的参数并做对应的操作。</p> <h2 id="_62-js-如何实现一个同步的-sleep-函数"><a href="#_62-js-如何实现一个同步的-sleep-函数" class="header-anchor">#</a> 62 JS 如何实现一个同步的 sleep 函数</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">sleepSync</span><span class="token punctuation">(</span><span class="token parameter">ttl</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> now <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  ttl <span class="token operator">*=</span> <span class="token number">1000</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> now <span class="token operator">&lt;</span> ttl<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_63-实现一个函数用来解析-url-的-querystring"><a href="#_63-实现一个函数用来解析-url-的-querystring" class="header-anchor">#</a> 63 实现一个函数用来解析 URL 的 querystring</h2> <p>示例，如</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> url <span class="token operator">=</span> <span class="token string">&quot;https://shanyue.tech?a=3&amp;b=4&amp;c=5&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// 解析后得到 qs 如下</span>
<span class="token keyword">const</span> qs <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
  <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>纯碎使用 <code>javascript</code> 完成解析函数，而不利用浏览器 DOM 特性 API，代码如下所示，细节在注释中体现</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">parse</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 一、夹杂在 ? 与 # 之前的字符就是 qs，使用 /\?([^/?#:]+)#?/ 正则来抽取</span>
  <span class="token comment">// 使用正则从 URL 中解析出 querystring</span>
  <span class="token comment">// 二、通过 Optional Chain 来避免空值错误</span>
  <span class="token keyword">const</span> queryString <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\?([^/?#:]+)#?</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span><span class="token operator">?.</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>queryString<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  queryObj <span class="token operator">=</span> queryString<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;&amp;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">params<span class="token punctuation">,</span> block</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 三、如果未赋值，则默认为空字符串</span>
    <span class="token keyword">const</span> <span class="token punctuation">[</span>_k<span class="token punctuation">,</span> _v <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> block<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;=&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 四、通过 decodeURIComponent 来转义字符，切记不可出现在最开头，以防 ?tag=test&amp;title=1%2B1%3D2 出错</span>
    <span class="token keyword">const</span> k <span class="token operator">=</span> <span class="token function">decodeURIComponent</span><span class="token punctuation">(</span>_k<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> v <span class="token operator">=</span> <span class="token function">decodeURIComponent</span><span class="token punctuation">(</span>_v<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>params<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">!==</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 处理 key 出现多次的情况，设置为数组</span>
      params<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>params<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      params<span class="token punctuation">[</span>k<span class="token punctuation">]</span> <span class="token operator">=</span> v<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> params<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> queryObj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h2 id="_64-js-如何实现一个-sleep-delay-函数"><a href="#_64-js-如何实现一个-sleep-delay-函数" class="header-anchor">#</a> 64 JS 如何实现一个 sleep/delay 函数</h2> <p><code>sleep</code> 函数实现较为简单，也常作为对 <code>Promise</code> 的代码考察。在日常工作中，特别是 Node 写脚本时，常用它控制频率。</p> <p>实现一个 sleep 函数格式如下：</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">sleep</span> <span class="token operator">=</span> <span class="token punctuation">(</span>s<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>追问:</strong></p> <p>实现一个 delay 函数格式如下，在 N 毫秒之后执行函数，并以函数结果作为返回值</p> <div class="language-ts line-numbers-mode"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">delay</span><span class="token punctuation">(</span>func<span class="token punctuation">,</span> seconds<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// 在 3s 之后返回 hello, world</span>
<span class="token keyword">await</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> str<span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">,</span> <span class="token string">&quot;hello, world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 在 3s 之后返回 hello, world，第一个函数可返回 promise</span>
<span class="token keyword">await</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">,</span> <span class="token string">&quot;hello, world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">delay</span><span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> time<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_65-如何实现一个-sample-函数-从数组中随机取一个元素"><a href="#_65-如何实现一个-sample-函数-从数组中随机取一个元素" class="header-anchor">#</a> 65 如何实现一个 sample 函数，从数组中随机取一个元素</h2> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sample</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;not a Array&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">[</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_66-实现一个函数用来对-url-的-querystring-进行编码"><a href="#_66-实现一个函数用来对-url-的-querystring-进行编码" class="header-anchor">#</a> 66 实现一个函数用来对 URL 的 querystring 进行编码</h2> <p>示例，如</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
  <span class="token literal-property property">c</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// 对 data 编码后得到 querystring 如下</span>
<span class="token comment">//=&gt; 'a=3&amp;b=4&amp;c=5'</span>
<span class="token function">stringify</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>先上几个测试用例:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// a=3&amp;b=4</span>
<span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// a=3&amp;b=</span>
<span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token keyword">null</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// a=3&amp;%E5%B1%B1=%E6%9C%88</span>
<span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token literal-property property">山</span><span class="token operator">:</span> <span class="token string">&quot;月&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>只做一些基本的功能，满足以下条件</p> <ol><li>对 null/undefined/object 编码为空字符</li> <li>对 key/value 记得 encodeURIComponent</li> <li>不考虑数组及嵌套对象等复杂操作</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">stringify</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> pairs <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> qs <span class="token operator">=</span> pairs
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">[</span>k<span class="token punctuation">,</span> v<span class="token punctuation">]</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> noValue <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>v <span class="token operator">===</span> <span class="token keyword">null</span> <span class="token operator">||</span> v <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">||</span> <span class="token keyword">typeof</span> v <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        noValue <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>noValue <span class="token operator">?</span> <span class="token string">&quot;&quot;</span> <span class="token operator">:</span> <span class="token function">encodeURIComponent</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;&amp;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> qs<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="_67-如何实现一个数组洗牌函数-shuffle"><a href="#_67-如何实现一个数组洗牌函数-shuffle" class="header-anchor">#</a> 67 如何实现一个数组洗牌函数 shuffle</h2> <p>先来一个利用 <code>Array.prototype.sort</code> 的技巧解法</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">shuffle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">list</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> list<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>使用以下算法可实现洗牌算法:</p> <ol><li>第 N 项数字与前 N 项数字随机选一相互交换</li> <li>第 N-1 项数字与前 N-1 项数字随机选一相互交换</li> <li>...</li> <li>第 2 项数字与前 2 项数字随机选一相互交换</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">shuffle</span><span class="token punctuation">(</span><span class="token parameter">list</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> len <span class="token operator">=</span> list<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>list<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> len <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> swapIndex <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">[</span>result<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> result<span class="token punctuation">[</span>swapIndex<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>result<span class="token punctuation">[</span>swapIndex<span class="token punctuation">]</span><span class="token punctuation">,</span> result<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="_68-js-如何翻转一个字符串"><a href="#_68-js-如何翻转一个字符串" class="header-anchor">#</a> 68 JS 如何翻转一个字符串</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">reverse</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">s</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> s<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_69-关于模块化-什么是-amd-和-umd"><a href="#_69-关于模块化-什么是-amd-和-umd" class="header-anchor">#</a> 69 关于模块化，什么是 amd 和 umd</h2> <p><code>amd</code> 是一种浏览器中的模块格式，关键字为 <code>define</code>，<code>cjs</code> 是一种 Node 中的模块格式，也是广为人所熟悉的 <code>require/exports</code>。</p> <p>而 <code>umd</code> 是 <code>amd</code> 与 <code>cjs</code> 两种格式的兼容。既可以跑在浏览器，又可以跑在 Node 中</p> <p><strong>amd</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;jquery&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;underscore&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">$<span class="token punctuation">,</span> _</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>umd</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">root<span class="token punctuation">,</span> factory</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> define <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span> <span class="token operator">&amp;&amp;</span> define<span class="token punctuation">.</span>amd<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// AMD</span>
    <span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;jquery&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> factory<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> exports <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// CommonJS</span>
    module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;jquery&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// 全局变量</span>
    root<span class="token punctuation">.</span>returnExports <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>jQuery<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">$</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h2 id="_70-如何实现一个-promise-any"><a href="#_70-如何实现一个-promise-any" class="header-anchor">#</a> 70 如何实现一个 promise.any</h2> <p>Promise.any 的行为跟 Promise.all 刚好相反</p> <h2 id="_71-如何把一个数组随机打乱"><a href="#_71-如何把一个数组随机打乱" class="header-anchor">#</a> 71 如何把一个数组随机打乱</h2> <p>使用原生实现，Math.rondom() - 0.5 有时大于 0，有时小于 0 会达成这样的效果</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_72-map-与-weakmap-有何区别"><a href="#_72-map-与-weakmap-有何区别" class="header-anchor">#</a> 72 Map 与 WeakMap 有何区别</h2> <ul><li><code>Map</code>: 可使用任何数据类型作为 key，但因其在内部实现原理中需要维护两个数组，存储 key/value，因此垃圾回收机制无法回收</li> <li><code>WeakMap</code>: 只能使用引用数据类型作为 key。弱引用，不在内部维护两个数组，可被垃圾回收，但因此无法被遍历！即没有与枚举相关的 API，如 <code>keys</code>、<code>values</code>、<code>entries</code> 等</li></ul> <h2 id="_73-javascript-数组中有那些方法可以改变自身-那些不可以"><a href="#_73-javascript-数组中有那些方法可以改变自身-那些不可以" class="header-anchor">#</a> 73 Javascript 数组中有那些方法可以改变自身，那些不可以</h2> <p>不改变原数组的方法：concat/join/reduce/map/forEach/filter/slice/findIndex</p> <p>改变原数组的方法：push/unshift/pop/shift/sort/splice/reverse</p> <h2 id="_74-简述-object-defineproperty"><a href="#_74-简述-object-defineproperty" class="header-anchor">#</a> 74 简述 Object.defineProperty</h2> <p>与直接为一个对象的属性赋值(<code>o.a = 3</code>)不同，<code>Object.defineProperty</code> 可更为精确，拥有更多选项地为对象属性赋值</p> <p>属性描述符拥有两种: 数据描述符与存取描述符</p> <h3 id="数据描述符-data-descriptor"><a href="#数据描述符-data-descriptor" class="header-anchor">#</a> 数据描述符 (data descriptor)</h3> <p>决定该属性值是否可写</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> o <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">configurable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token literal-property property">writable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li><code>configurable</code>: 是否可被删除</li> <li><code>enumerable</code>: 是否可被枚举，不可枚举属性无法通过 <code>Object.keys</code> 获取到</li> <li><code>writable</code>: 是否可更改该属性值</li> <li><code>value</code>: 该属性值的值</li></ul> <p>当我们使用赋值运算符为对象添加属性时，实际上是添加了一个数据描述符</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&gt;</span> o<span class="token punctuation">.</span>c <span class="token operator">=</span> <span class="token number">5</span>
<span class="token operator">&gt;</span> Object<span class="token punctuation">.</span><span class="token function">getOwnPropertyDescriptor</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token string">'c'</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span> <span class="token punctuation">{</span><span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token literal-property property">writable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">configurable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="存取描述符-accessor-descriptor"><a href="#存取描述符-accessor-descriptor" class="header-anchor">#</a> 存取描述符 (accessor descriptor)</h3> <p>可对对象属性进行拦截，Vue2 的数据绑定原理便是基于此</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> o <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>o<span class="token punctuation">,</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">configurable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>_a<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">set</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>_a <span class="token operator">=</span> a <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="_75-object-keys-与-object-getownpropertynames-有何区别"><a href="#_75-object-keys-与-object-getownpropertynames-有何区别" class="header-anchor">#</a> 75 Object.keys 与 Object.getOwnPropertyNames() 有何区别</h3> <ul><li><code>Object.keys</code>: 列出可枚举的属性值</li> <li><code>Object.getOwnPropertyNames</code>: 列出所有属性值(包括可枚举与不可枚举)</li></ul> <p>同时 <code>Object.defineProperty</code> 中的选项 <code>enumerable</code> 可定义属性是否可枚举</p> <h2 id="_76-实现一个-inherits-函数进行继承"><a href="#_76-实现一个-inherits-函数进行继承" class="header-anchor">#</a> 76 实现一个 inherits 函数进行继承</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">inherits</span><span class="token punctuation">(</span><span class="token parameter">SuperType<span class="token punctuation">,</span> SubType</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> pro <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">SuperType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//原型链继承</span>
  pro<span class="token punctuation">.</span>constructor <span class="token operator">=</span> SubType<span class="token punctuation">;</span>
  <span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> pro<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">SuperType</span><span class="token punctuation">(</span><span class="token parameter">friends</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>friends <span class="token operator">=</span> friends<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">SuperType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getFriends</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>friends<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">SubType</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> friends</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
  <span class="token function">SuperType</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> friends<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//这里是构造函数继承</span>
<span class="token punctuation">}</span>
<span class="token function">inherits</span><span class="token punctuation">(</span>SuperType<span class="token punctuation">,</span> SubType<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">SubType</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> tom <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SubType</span><span class="token punctuation">(</span><span class="token string">&quot;tom&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;jerry&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
tom<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 'tom'</span>
tom<span class="token punctuation">.</span><span class="token function">getFriends</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ['jerry']</span>
tom<span class="token punctuation">.</span>friends<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&quot;jack&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
tom<span class="token punctuation">.</span><span class="token function">getFriends</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ['jerry', 'jack']</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h2 id="_77-为何-0-1-0-2-不等于-0-3-应如何做相等比较"><a href="#_77-为何-0-1-0-2-不等于-0-3-应如何做相等比较" class="header-anchor">#</a> 77 为何 0.1+0.2 不等于 0.3，应如何做相等比较</h2> <p>0.1，0.2 表示为二进制会有精度的损失，比较时可引入一个很小的数值 <code>Number.EPSILON</code> 容忍误差，其值为 2^-52。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">equal</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">abs</span><span class="token punctuation">(</span>a <span class="token operator">-</span> b<span class="token punctuation">)</span> <span class="token operator">&lt;</span> Number<span class="token punctuation">.</span><span class="token constant">EPSILON</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_78-重点-关于类型转化-判断以下代码输出"><a href="#_78-重点-关于类型转化-判断以下代码输出" class="header-anchor">#</a> 78 （重点）关于类型转化，判断以下代码输出</h2> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230218163454909.png" alt="image-20230218163454909"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Boolean</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Boolean</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">Boolean</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>all<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token number">42</span> <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>在<code>==</code>时，会强制类型转换并比较转换后的结果</p> <p>比较过程如下：</p> <ul><li>如果两个变量都是对象，则当都引用同一对象时才返回<code>true</code></li> <li><code>null == undefined</code> ? 返回<code>true</code></li> <li>当两个变量类型不一致时会进行类型转换：
<ul><li><code>string == number</code> ? <code>string</code>转换为<code>number</code>后再进行比较</li> <li><code>boolean == any</code> ? <code>boolean</code>转换为<code>number</code>后再进行比较</li> <li><code>object == string/number/symbol</code> ? 尝试调用<code>object</code>的<code>valueOf</code>或<code>toString</code>将其转换为原始类型后再进行比较</li></ul></li> <li>当两个变量类型一致时：
<ul><li><code>number == number</code> ? 其中有一个为<code>NaN</code>时返回<code>false</code>; <code>+0 == -0</code>时返回<code>true</code></li></ul></li></ul> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/124141063-a5c7b400-dabb-11eb-8a8c-2f9503f9f06e.png" alt="非原创，原作者未知"></p> <p>所以<code>[] == 0</code>时：</p> <ol><li><code>[]</code>先调用<code>Array.prototype.toString</code>转为原始值</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// &quot;&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol><li><code>&quot;&quot; == 0</code>，<code>&quot;&quot;</code>转为<code>number</code>即 0</li> <li><code>0 == 0</code>，返回<code>true</code></li></ol> <p>其他几行代码同理</p> <h2 id="_79-关于暂时性死域-判断以下代码输出"><a href="#_79-关于暂时性死域-判断以下代码输出" class="header-anchor">#</a> 79 关于暂时性死域，判断以下代码输出</h2> <p><strong>第一段代码如下</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> a<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><strong>第二段代码如下</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">x <span class="token operator">=</span> x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ..</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>都会形成暂时性死区报错</p> <p>Uncaught ReferenceError: Cannot access 'x' before initialization</p> <h2 id="_80-重点-关于-this-判断以下代码输出"><a href="#_80-重点-关于-this-判断以下代码输出" class="header-anchor">#</a> 80 （重点）关于 this，判断以下代码输出</h2> <p>更多描述</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>

  <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>输出: 2</p> <p><strong>只有在存在 this 的函数中设置严格模式</strong>，this 为 undefined。因此此时会正常输出。</p> <p>如果把严格模式设置在foo函数内，才会输出undefned</p> <p><img src="https://sztxcl-scau-1306847942.cos.ap-guangzhou.myqcloud.com/image-20230218173110312.png" alt="image-20230218173110312"></p> <h2 id="_81-关于-new-判断以下代码输出"><a href="#_81-关于-new-判断以下代码输出" class="header-anchor">#</a> 81 关于 new，判断以下代码输出</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token constant">F</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
 <span class="token keyword">return</span> <span class="token punctuation">{</span>
   <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">4</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>输出 4 new 操作符，默认返回 this 对象。如果手动指定返回对象，则 new 出来的实例指向的是 return 的对象，而不是 this</p> <h2 id="_82-什么是纯函数"><a href="#_82-什么是纯函数" class="header-anchor">#</a> 82 什么是纯函数</h2> <p>在程序设计中,如果一个函数符合以下条件,则被称之为纯函数:</p> <ol><li>相同的输入，产生相同的输出</li> <li>无可观察的副作用</li> <li>不依赖于外部状态</li></ol> <h4 id="例1-不纯的函数"><a href="#例1-不纯的函数" class="header-anchor">#</a> 例1 - 不纯的函数</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">b</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> a<span class="token operator">+</span>b
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>
复制代码
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>例1中，违反了规则1和规则3，相同的输入没有产生相同的输出，变量a的变动随时都会影响到内部的计算结果。</p></blockquote> <h4 id="例2-纯函数"><a href="#例2-纯函数" class="header-anchor">#</a> 例2 - 纯函数</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token parameter">a <span class="token operator">+</span> b</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> a<span class="token operator">+</span>b
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>
复制代码
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>例2是个纯函数，相同的输入有相同的输出，也没有依赖于外部变量，更没有可观察到的副作用。</p></blockquote> <h2 id="_83-给数字添加千位符"><a href="#_83-给数字添加千位符" class="header-anchor">#</a> 83 给数字添加千位符</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//=&gt; '123'</span>
<span class="token function">numberThousands</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//=&gt; '1,234,567'</span>
<span class="token function">numberThousands</span><span class="token punctuation">(</span><span class="token number">1234567</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// ⏹ 1. 使用正则表达式</span>
<span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(\d)(?=(\d{3})+$)</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">;</span>  <span class="token comment">//以整数开头并且后面有三的倍数个整数</span>

<span class="token comment">// ❗❗❗使用String()把数字转换为字符串的优点在于null等情况不会报错</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token number">123456789</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>reg<span class="token punctuation">,</span> <span class="token string">&quot;$1,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 123,456,789</span>
<span class="token comment">// 支持整数,不支持小数</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token number">123456789.1315454</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>reg<span class="token punctuation">,</span> <span class="token string">&quot;$1,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 123456789.1,315,454</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>reg<span class="token punctuation">,</span> <span class="token string">&quot;$1,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 1,000</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>reg<span class="token punctuation">,</span> <span class="token string">&quot;$1,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// null</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>reg<span class="token punctuation">,</span> <span class="token string">&quot;$1,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// undefined</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>reg<span class="token punctuation">,</span> <span class="token string">&quot;$1,&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// NaN</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'😁😁😁😁😁😁'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ⏹ 2. 使用toLocaleString()方法</span>
<span class="token comment">// ❗❗❗必须是数字,如果是null或者undefined的话,会报错</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">123456789</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token string">'en-US'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 123,456,789</span>
<span class="token comment">// 最多保留三位小数</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">123456789.1315454</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token string">'en-US'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 123,456,789.132</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'😁😁😁😁😁😁'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ⏹ 3. 使用new Intl.NumberFormat()方法</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Intl<span class="token punctuation">.</span>NumberFormat</span><span class="token punctuation">(</span><span class="token string">'en-US'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token number">123456789.1315454</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 123,456,789.132</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Intl<span class="token punctuation">.</span>NumberFormat</span><span class="token punctuation">(</span><span class="token string">'ja-JP'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">style</span><span class="token operator">:</span> <span class="token string">'currency'</span><span class="token punctuation">,</span> <span class="token literal-property property">currency</span><span class="token operator">:</span> <span class="token string">'JPY'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token number">123456789.1315454</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// ￥123,456,789</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h2 id="_84-如何实现一个深比较的函数-deepequal"><a href="#_84-如何实现一个深比较的函数-deepequal" class="header-anchor">#</a> 84 如何实现一个深比较的函数 deepEqual</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">isEqual</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">===</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//基础类型相等</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> 
    <span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">&amp;&amp;</span>
    x <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span>
    <span class="token keyword">typeof</span> y <span class="token operator">===</span> <span class="token string">&quot;object&quot;</span> <span class="token operator">&amp;&amp;</span>
    y <span class="token operator">!==</span> <span class="token keyword">null</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//对象，遍历对象属性比较</span>
    <span class="token keyword">const</span> keysX <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> keysY <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>keysX<span class="token punctuation">.</span>length <span class="token operator">!==</span> keysY<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">of</span> keysX<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isEqual</span><span class="token punctuation">(</span>x<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> y<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h2 id="_85-object-is-与全等运算符-有何区别"><a href="#_85-object-is-与全等运算符-有何区别" class="header-anchor">#</a> 85 Object.is 与全等运算符(===)有何区别</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">===</span> 是严格的比较，是不会进行类型转换的，<span class="token number">6</span>≠“<span class="token number">6</span>”
<span class="token operator">==</span> 在比较时会进行类型转换，

    <span class="token keyword">null</span><span class="token operator">==</span><span class="token keyword">undefined</span>
    String与number比较。String会先转换为number
    boolean与number比较，boolean会先转换为number
    Object与基本类型比较，Object会先转换为基本类型

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>    Object<span class="token punctuation">.</span>is与<span class="token operator">===</span>基本一致，不过有两处不同

    <span class="token operator">+</span><span class="token number">0</span>不等于<span class="token operator">-</span><span class="token number">0</span>。
    <span class="token number">NaN</span>等于自身。

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span>	<span class="token comment">//false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">,</span> <span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">)</span>	<span class="token comment">//true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_86-如何把对象转化为-key-value-的二维数组"><a href="#_86-如何把对象转化为-key-value-的二维数组" class="header-anchor">#</a> 86 如何把对象转化为 key/value 的二维数组</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_87-在-js-中如何监听-object-某个属性值的变化"><a href="#_87-在-js-中如何监听-object-某个属性值的变化" class="header-anchor">#</a> 87 在 JS 中如何监听 Object 某个属性值的变化</h2> <p>在 JS 中可以使用两种方式监听属性值变化</p> <p>Proxy</p> <p>Object.defineProperty</p> <h2 id="_88-使用-js-如何生成一个随机字符串"><a href="#_88-使用-js-如何生成一个随机字符串" class="header-anchor">#</a> 88 使用 JS 如何生成一个随机字符串</h2> <p>山月老师给出的答案：使用 <code>Math.random</code> 产生的随机数进行 36 进制转化，该随机数是由 0-9，a-z 构成的。</p> <p>还有一种方案是对大写字母，小写字母以及数字的 ASCII 码进行转化。</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token function">random_v1</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">random_v1</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ASCII：</span>
<span class="token comment">// 大写字母：65~90</span>
<span class="token comment">// 小写字母：97~122</span>
<span class="token comment">// 数字：48-57</span>
<span class="token keyword">function</span> <span class="token function">random_v1</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">num</span><span class="token operator">:</span> number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span><span class="token function">generateAcsii</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">generateAcsii</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 生成 [65,90] &amp;&amp; [97,122] &amp;&amp; [48,51]</span>
  <span class="token keyword">let</span> a <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">62</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [0,62]</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&lt;</span> <span class="token number">26</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//  返回 大写字母 的 ASCII</span>
    <span class="token keyword">return</span> a <span class="token operator">+</span> <span class="token number">65</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&gt;=</span> <span class="token number">26</span> <span class="token operator">&amp;&amp;</span> a <span class="token operator">&lt;</span> <span class="token number">52</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//  返回 小写字母 的 ASCII</span>
    <span class="token keyword">return</span> a <span class="token operator">-</span> <span class="token number">26</span> <span class="token operator">+</span> <span class="token number">97</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">//  返回 数字 的 ASCII</span>
    <span class="token keyword">return</span> a <span class="token operator">-</span> <span class="token number">52</span> <span class="token operator">+</span> <span class="token number">48</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h2 id="_89-如何判断一个数值为整数"><a href="#_89-如何判断一个数值为整数" class="header-anchor">#</a> 89 如何判断一个数值为整数</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// ES6</span>
Number<span class="token punctuation">.</span><span class="token function">isInteger</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// ES5</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Number<span class="token punctuation">.</span>isInteger<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  Number<span class="token punctuation">.</span><span class="token function-variable function">isInteger</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">typeof</span> num <span class="token operator">==</span> <span class="token string">&quot;number&quot;</span> <span class="token operator">&amp;&amp;</span> num <span class="token operator">%</span> <span class="token number">1</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="_90-如何把字符串全部转化为小写格式"><a href="#_90-如何把字符串全部转化为小写格式" class="header-anchor">#</a> 90 如何把字符串全部转化为小写格式</h2> <p>在 ES6+ 中，可直接使用原生 API <code>String.prototype.toLowerCase()</code> 实现</p> <p>如果手写实现，如下所示</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">lowerCase</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> char <span class="token keyword">of</span> str<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> charAt <span class="token operator">=</span> char<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>charAt <span class="token operator">&lt;=</span> <span class="token string">&quot;Z&quot;</span><span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> charAt <span class="token operator">&gt;=</span> <span class="token string">&quot;A&quot;</span><span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      char <span class="token operator">=</span> String<span class="token punctuation">.</span><span class="token function">fromCharCode</span><span class="token punctuation">(</span>charAt <span class="token operator">+</span> <span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    result <span class="token operator">+=</span> char<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//=&gt; 'hello'</span>
<span class="token function">lowerCase</span><span class="token punctuation">(</span><span class="token string">&quot;HELLO&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//=&gt; '山月'</span>
<span class="token function">lowerCase</span><span class="token punctuation">(</span><span class="token string">&quot;山月&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="_91-如何把一个数组-array-转化为迭代器-iterable"><a href="#_91-如何把一个数组-array-转化为迭代器-iterable" class="header-anchor">#</a> 91 如何把一个数组 Array 转化为迭代器 Iterable</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> it <span class="token operator">=</span> list<span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_92-js-如何检测到对象中有循环引用"><a href="#_92-js-如何检测到对象中有循环引用" class="header-anchor">#</a> 92 JS 如何检测到对象中有循环引用</h2> <p>示例，如下数据为循环结构/循环引用</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">10086</span><span class="token punctuation">,</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&quot;山月&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
user<span class="token punctuation">.</span>_user <span class="token operator">=</span> user<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>追问:</p> <ol><li>由于 <code>JSON.stringify</code> 序列化对象时，将跳过不枚举的 key，因此此时可不考虑不可枚举的 key</li> <li>如果考虑不可枚举 key 与 Symbol 如何处理</li></ol> <h2 id="_93-实现二进制与十进制的互相转化的两个函数"><a href="#_93-实现二进制与十进制的互相转化的两个函数" class="header-anchor">#</a> 93 实现二进制与十进制的互相转化的两个函数</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">integerToBin</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 64</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>num <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    next <span class="token operator">=</span> num <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">;</span>
    num <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>num <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    result<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">fractionalToBin</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span>num <span class="token operator">!==</span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> i <span class="token operator">&lt;</span> <span class="token number">54</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    num <span class="token operator">=</span> num <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">;</span>

    next <span class="token operator">=</span> num <span class="token operator">&gt;=</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token number">1</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
    num <span class="token operator">=</span> num <span class="token operator">%</span> <span class="token number">1</span><span class="token punctuation">;</span>
    i<span class="token operator">++</span><span class="token punctuation">;</span>
    result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">decToBinary</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 1.5</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>int<span class="token punctuation">,</span> fraction<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">(?=\.)</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> i <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token function">integerToBin</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">fractionalToBin</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span>int<span class="token punctuation">,</span> fraction<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">binToDec</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>_int<span class="token punctuation">,</span> _fraction<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">String</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> int <span class="token operator">=</span> _int<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduceRight</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> x<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> acc <span class="token operator">+</span> x <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">**</span> i<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> fraction <span class="token operator">=</span> _fraction
    <span class="token operator">?</span> _fraction<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">acc<span class="token punctuation">,</span> x<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> acc <span class="token operator">+</span> x <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">**</span> <span class="token operator">-</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>int<span class="token interpolation-punctuation punctuation">}</span></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>fraction <span class="token operator">?</span> <span class="token string">&quot;.&quot;</span> <span class="token operator">+</span> fraction<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">,</span> <span class="token function">integerToBin</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">,</span> <span class="token function">integerToBin</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">,</span> <span class="token function">fractionalToBin</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">,</span> <span class="token function">fractionalToBin</span><span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token number">0.1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1.1</span><span class="token punctuation">,</span> <span class="token function">decToBinary</span><span class="token punctuation">(</span><span class="token number">1.1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token number">1.1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">7.875</span><span class="token punctuation">,</span> <span class="token function">decToBinary</span><span class="token punctuation">(</span><span class="token number">7.875</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Number</span><span class="token punctuation">(</span><span class="token number">7.875</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;111.111&quot;</span><span class="token punctuation">,</span> <span class="token function">binToDec</span><span class="token punctuation">(</span><span class="token string">&quot;111.111&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">&quot;111.111&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br></div></div><h2 id="_94-什么是原码、补码与反码"><a href="#_94-什么是原码、补码与反码" class="header-anchor">#</a> 94 什么是原码、补码与反码</h2> <ul><li>原码:</li> <li>反码: 原码按位取反</li> <li>补码: 正数和 0 的补码就是该数字本身，负数的补码则是反码加一</li></ul> <h2 id="_95-settimeout-为什么最小只能设置-4ms-如何实现一个-0ms-的-settimeout"><a href="#_95-settimeout-为什么最小只能设置-4ms-如何实现一个-0ms-的-settimeout" class="header-anchor">#</a> 95 setTimeout 为什么最小只能设置 4ms，如何实现一个 0ms 的 setTimeout?</h2> <h2 id="_96-return-promise-与-return-await-promise-有何区别"><a href="#_96-return-promise-与-return-await-promise-有何区别" class="header-anchor">#</a> 96 return promise 与 return await promise 有何区别</h2> <p>https://juejin.cn/post/7125327953743446030</p> <h2 id="_97-在-es6-class-中-super-的过程中做了什么"><a href="#_97-在-es6-class-中-super-的过程中做了什么" class="header-anchor">#</a> 97 在 ES6 Class 中，super 的过程中做了什么</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Super</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//do something</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">Sub</span> <span class="token keyword">extends</span> <span class="token class-name">Super</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//do something else</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">//=========等价于=========</span>

<span class="token keyword">function</span> <span class="token function">Super</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">//do something</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Sub</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">Sub</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> <span class="token class-name">Super</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span> <span class="token comment">//extends</span>
  <span class="token function">Super</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//constructor中的super</span>
  <span class="token comment">//但是其实这个地方严格讲是有问题的</span>
  <span class="token comment">//在使用ES6 class的时候，constructor并不负责创建成员函数</span>
  <span class="token comment">//但是在用Constructor function时，一个function要管所有的</span>
  <span class="token comment">//成员变量和函数的创建。</span>
  <span class="token comment">//而Super里的所有东西都释放到当前上下文this中是不合适的</span>
  <span class="token comment">//会出现命名冲突之类的</span>
  <span class="token comment">//babel的具体的实现要比这个复杂很多。</span>

  <span class="token comment">//do something else</span>
<span class="token punctuation">}</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span>`
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><h2 id="_98-如何实现-promise-map-限制-promise-并发数"><a href="#_98-如何实现-promise-map-限制-promise-并发数" class="header-anchor">#</a> 98 如何实现 promise.map，限制 promise 并发数</h2> <p>实现一个 promise.map，进行并发数控制，有以下测试用例</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">pMap</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">pMap</span><span class="token punctuation">(</span><span class="token punctuation">[</span>Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> x <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 注意输出时间控制</span>
<span class="token function">pMap</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">concurrency</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>我自己的实现，使用闭包+递归</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//执行列表，回调函数，限制并发数，默认为100</span>
Promise<span class="token punctuation">.</span><span class="token function-variable function">map</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">list<span class="token punctuation">,</span> fn<span class="token punctuation">,</span> concurrency <span class="token operator">=</span> <span class="token number">100</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">let</span> limitNum <span class="token operator">=</span> concurrency<span class="token punctuation">;</span>
        <span class="token keyword">function</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">&lt;</span> limitNum <span class="token operator">&amp;&amp;</span> list<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//限制并发数和观察列表长度</span>
                count<span class="token operator">++</span><span class="token punctuation">;</span>
                <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token function">fn</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">,</span>count<span class="token punctuation">)</span>
                    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                        count<span class="token operator">--</span><span class="token punctuation">;</span>
                        <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span> count <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> limitNum<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function">get</span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
        <span class="token keyword">return</span> i <span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    Promise<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span>Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span> get<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h2 id="_99-对以下字符串进行压缩编码"><a href="#_99-对以下字符串进行压缩编码" class="header-anchor">#</a> 99 对以下字符串进行压缩编码</h2> <p>这是一道大厂常考的代码题</p> <ul><li>Input: 'aaaabbbccd'</li> <li>Output: 'a4b3c2d1'，代表 a 连续出现四次，b 连续出现三次，c 连续出现两次，d 连续出现一次</li></ul> <p>有以下测试用例</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//=&gt; a4b3c2</span>
<span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">&quot;aaaabbbcc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//=&gt; a4b3a4</span>
<span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">&quot;aaaabbbaaaa&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//=&gt; a2b2c2</span>
<span class="token function">encode</span><span class="token punctuation">(</span><span class="token string">&quot;aabbcc&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>如果代码编写正确，则可继续深入：</strong></p> <ul><li>如果只出现一次，不编码数字，如 aaab -&gt; a3b</li> <li>如果只出现两次，不进行编码，如 aabbb -&gt; aab3</li> <li>如果进行解码数字冲突如何解决</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 另外一种思路的解法</span>
<span class="token keyword">function</span> <span class="token function">encode</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> l <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> lastChar<span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> char <span class="token keyword">of</span> str<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>char <span class="token operator">!==</span> lastChar<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      lastChar <span class="token operator">=</span> char<span class="token punctuation">;</span>
      i<span class="token operator">++</span><span class="token punctuation">;</span>
      l<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>char<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      l<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> l<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h2 id="_100-随机生成六位数的手机验证码-重复-不可重复"><a href="#_100-随机生成六位数的手机验证码-重复-不可重复" class="header-anchor">#</a> 100 随机生成六位数的手机验证码(重复/不可重复)</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">random</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 可生成重复的随机验证码</span>
<span class="token keyword">function</span> <span class="token function">randomCode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">random</span><span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 不可生成重复的随机验证码</span>
<span class="token keyword">const</span> <span class="token function-variable function">shuffle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">list</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> list<span class="token punctuation">.</span><span class="token function">sort</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">0.5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">randomUniqueCode</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
  <span class="token function">shuffle</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="_101-实现一个函数-camelcase-对变量转化为驼峰命名"><a href="#_101-实现一个函数-camelcase-对变量转化为驼峰命名" class="header-anchor">#</a> 101 实现一个函数 camelCase，对变量转化为驼峰命名</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//驼峰转短横线</span>
<span class="token keyword">function</span> <span class="token function">toKebabCase</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> res <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">([A-Z])</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">all<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;-&quot;</span> <span class="token operator">+</span> i<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;-&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    res <span class="token operator">=</span> res<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//去除开头的-</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> res<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//短横线转驼峰</span>
<span class="token keyword">function</span> <span class="token function">toCamelCase</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">-([a-zA-Z])</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">all<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> i<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toCamelCase</span><span class="token punctuation">(</span><span class="token string">&quot;get-element-by-id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">toKebabCase</span><span class="token punctuation">(</span><span class="token string">&quot;GetElementById&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="_102-如何根据-random5-随机生成-0-5-生成一个函数-random7"><a href="#_102-如何根据-random5-随机生成-0-5-生成一个函数-random7" class="header-anchor">#</a> 102 如何根据 random5 随机生成 [0, 5]，生成一个函数 random7？</h2> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">rand5</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">rand7</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token function">rand5</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">4</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token function">rand5</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span> <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token function">rand5</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&amp;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_103-实现函数-promisify-把回调函数改成-promise-形式"><a href="#_103-实现函数-promisify-把回调函数改成-promise-形式" class="header-anchor">#</a> 103 实现函数 promisify，把回调函数改成 promise 形式</h2> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">promisify</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> hasCb <span class="token operator">=</span> args<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">typeof</span> v <span class="token operator">===</span> <span class="token string">&quot;function&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>hasCb<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">,</span> cb<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">function</span> <span class="token function">cb</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h2 id="_104-重点-你是怎么学习es6的"><a href="#_104-重点-你是怎么学习es6的" class="header-anchor">#</a> 104 (重点)你是怎么学习ES6的</h2> <p>在B站看阮一峰的ES6教程</p> <p>然后掘金上也有一些总结的文章</p> <h2 id="_105-重点-初始化长度为100的数组-各项为1"><a href="#_105-重点-初始化长度为100的数组-各项为1" class="header-anchor">#</a> 105 (重点)初始化长度为100的数组，各项为1</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">length</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_106-了解blob-api吗"><a href="#_106-了解blob-api吗" class="header-anchor">#</a> 106 了解blob API吗</h2> <p>blob api，可以将图片等转换为base64 进行存储</p> <p>可以用来替代file上传文件文件</p> <p>https://blog.csdn.net/qq_41807489/article/details/89371853</p> <p>可以在a标签设置download属性下载文件，模拟点击事件</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>        <span class="token keyword">var</span> a <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        a<span class="token punctuation">.</span>href <span class="token operator">=</span>window<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>myFile<span class="token punctuation">)</span><span class="token punctuation">;</span> 
        a<span class="token punctuation">.</span>download <span class="token operator">=</span> <span class="token string">&quot;SunnyChuan.xlsx&quot;</span><span class="token punctuation">;</span> 
        a<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="_107-重点-falsely变量"><a href="#_107-重点-falsely变量" class="header-anchor">#</a> 107 (重点)！！falsely变量</h2> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230218163913549.png" alt="image-20230218163913549"></p> <p><strong>与运算时遇到falsely变量就返回，或运算时遇到truely变量就返回</strong></p> <p><img src="https://sztxcl-scau-1306847942.cos.ap-guangzhou.myqcloud.com/image-20230218164436234.png" alt="image-20230218164436234"></p> <h2 id="_108-重点-字符串拼接"><a href="#_108-重点-字符串拼接" class="header-anchor">#</a> 108 （重点）字符串拼接</h2> <p><img src="https://sztxcl-scau-1306847942.cos.ap-guangzhou.myqcloud.com/image-20230218164558554.png" alt="image-20230218164558554"></p> <h2 id="_109-重点-列举强制类型转换和隐式类型转换"><a href="#_109-重点-列举强制类型转换和隐式类型转换" class="header-anchor">#</a> 109 （重点）列举强制类型转换和隐式类型转换</h2> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230219152515730.png" alt="image-20230219152515730" style="zoom:50%;"> <h2 id="_110-重点-手写深度比较"><a href="#_110-重点-手写深度比较" class="header-anchor">#</a> 110 (重点)手写深度比较</h2> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230219152647854.png" alt="image-20230219152647854"></p> <p>参考深拷贝 12 18.3</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 判断是否是对象或数组</span>
<span class="token keyword">function</span> <span class="token function">isObject</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">typeof</span> obj <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">&amp;&amp;</span> obj <span class="token operator">!==</span> <span class="token keyword">null</span>
<span class="token punctuation">}</span>
<span class="token comment">// 全相等（深度）</span>
<span class="token keyword">function</span> <span class="token function">isEqual</span><span class="token punctuation">(</span><span class="token parameter">obj1<span class="token punctuation">,</span> obj2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isObject</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token operator">!</span><span class="token function">isObject</span><span class="token punctuation">(</span>obj2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 值类型（注意，参与 equal 的一般不会是函数）</span>
        <span class="token keyword">return</span> obj1 <span class="token operator">===</span> obj2
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj1 <span class="token operator">===</span> obj2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 两个都是对象或数组，而且不相等</span>
    <span class="token comment">// 1. 先取出 obj1 和 obj2 的 keys ，比较个数</span>
    <span class="token keyword">const</span> obj1Keys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj1<span class="token punctuation">)</span>
    <span class="token keyword">const</span> obj2Keys <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span>obj2<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>obj1Keys<span class="token punctuation">.</span>length <span class="token operator">!==</span> obj2Keys<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 2. 以 obj1 为基准，和 obj2 一次递归比较</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> key <span class="token keyword">in</span> obj1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 比较当前 key 的 val —— 递归！！！</span>
        <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token function">isEqual</span><span class="token punctuation">(</span>obj1<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">,</span> obj2<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>res<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 3. 全相等</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span>

<span class="token comment">// 测试</span>
<span class="token keyword">const</span> obj1 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
        <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">200</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> obj2 <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
    <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
        <span class="token literal-property property">y</span><span class="token operator">:</span> <span class="token number">200</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// console.log( obj1 === obj2 )</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> <span class="token function">isEqual</span><span class="token punctuation">(</span>obj1<span class="token punctuation">,</span> obj2<span class="token punctuation">)</span> <span class="token punctuation">)</span>

<span class="token keyword">const</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br></div></div><h2 id="_111-重点-split和join区别"><a href="#_111-重点-split和join区别" class="header-anchor">#</a> 111 (重点)split和join区别</h2> <p>split 是把字符串切割为数组</p> <p>join是把数组合并为字符串</p> <h2 id="_112-重点-数组的api有哪些是纯函数"><a href="#_112-重点-数组的api有哪些是纯函数" class="header-anchor">#</a> 112 （重点）数组的api有哪些是纯函数</h2> <p>纯函数: <strong>不改变原数组（无副作用），返回一个数组</strong></p> <ul><li><strong>concat</strong></li> <li>map</li> <li>filter</li> <li>slice</li></ul> <p>some,every,reduce不是返回一个数组，所以不是纯函数</p> <p>forEach不返回东西，不是纯函数</p> <h2 id="_113-重点-函数声明和函数表达式的区别"><a href="#_113-重点-函数声明和函数表达式的区别" class="header-anchor">#</a> 113 （重点）函数声明和函数表达式的区别</h2> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230219165024174.png" alt="image-20230219165024174" style="zoom:50%;"> <h2 id="_114-重点-new-object-和object-create-区别"><a href="#_114-重点-new-object-和object-create-区别" class="header-anchor">#</a> 114 （重点）new Object 和Object.create()区别</h2> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230219165408986.png" alt="image-20230219165408986" style="zoom:50%;"> <p>Object.create是创建一个空对象，然后将空对象的原型指向传入的对象</p> <h2 id="_115-重点-手写字符串trim方法"><a href="#_115-重点-手写字符串trim方法" class="header-anchor">#</a> 115 (重点)手写字符串trim方法</h2> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230219192528581.png" alt="image-20230219192528581" style="zoom:50%;"> <h2 id="_116-重点-获取数字的最大值"><a href="#_116-重点-获取数字的最大值" class="header-anchor">#</a> 116 （重点）获取数字的最大值</h2> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230219192721324.png" alt="image-20230219192721324" style="zoom:50%;"> <h2 id="_117-捕获js中异常"><a href="#_117-捕获js中异常" class="header-anchor">#</a> 117 捕获js中异常</h2> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230219192923407.png" alt="image-20230219192923407" style="zoom:50%;"> <h2 id="_118-重点-什么是json"><a href="#_118-重点-什么是json" class="header-anchor">#</a> 118 （重点）什么是JSON</h2> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230219193152839.png" alt="image-20230219193152839"></p> <h2 id="_119-重点-获取当前页面url参数"><a href="#_119-重点-获取当前页面url参数" class="header-anchor">#</a> 119 (重点)获取当前页面url参数</h2> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230219193251274.png" alt="image-20230219193251274" style="zoom:50%;"> <p>使用正则表达式获取参数值</p> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230219194214084.png" alt="image-20230219194214084" style="zoom:50%;"> <p>使用urlsearchparams获取参数值</p> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230219194353500.png" alt="image-20230219194353500" style="zoom:50%;"> <h2 id="_120-将url参数转换为js对象"><a href="#_120-将url参数转换为js对象" class="header-anchor">#</a> 120 将url参数转换为js对象</h2> <p>传统方法</p> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230219194523875.png" alt="image-20230219194523875" style="zoom:50%;"> <p>新api</p> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230219194620982.png" alt="image-20230219194620982" style="zoom:50%;"> <h2 id="_121-重点-数组去重"><a href="#_121-重点-数组去重" class="header-anchor">#</a> 121 （重点）数组去重</h2> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230219195219769.png" alt="image-20230219195219769" style="zoom:67%;"> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230219195250408.png" alt="image-20230219195250408"></p> <h2 id="_122-重点-介绍一下raf-requestanimateframe"><a href="#_122-重点-介绍一下raf-requestanimateframe" class="header-anchor">#</a> 122 （重点）介绍一下RAF requestAnimateFrame</h2> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230219200100334.png" alt="image-20230219200100334"></p> <h2 id="_123-重点-请说明ajax-fetch-axios三者的区别"><a href="#_123-重点-请说明ajax-fetch-axios三者的区别" class="header-anchor">#</a> 123 (重点)请说明ajax Fetch Axios三者的区别</h2> <p>答案： Ajax： 一种技术统称</p> <p>Fetch：一个原生API</p> <p>Axios： 一个第三方库，这可不是个api</p> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230221155334420.png" alt="image-20230221155334420" style="zoom:67%;"> <h3 id="ajax"><a href="#ajax" class="header-anchor">#</a> ajax</h3> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230221155405475.png" alt="image-20230221155405475"></p> <h3 id="fetch"><a href="#fetch" class="header-anchor">#</a> fetch</h3> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230221155448174.png" alt="image-20230221155448174" style="zoom:67%;"> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230221155613912.png" alt="image-20230221155613912"></p> <h3 id="axios"><a href="#axios" class="header-anchor">#</a> Axios</h3> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230221155650209.png" alt="image-20230221155650209" style="zoom:67%;"> <h2 id="_124-重点-for-in-for-of区别"><a href="#_124-重点-for-in-for-of区别" class="header-anchor">#</a> 124 (重点)for_in for_of区别</h2> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230221161709367.png" alt="image-20230221161709367"></p> <p>扩展： for await of 有什么作用？其实就是一个promise.all的代替品</p> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230221162957787.png" alt="image-20230221162957787" style="zoom:67%;"> <h2 id="_125-重点-htmlcollection-和-nodelist区别"><a href="#_125-重点-htmlcollection-和-nodelist区别" class="header-anchor">#</a> 125 (重点)HTMLCollection 和 NodeList区别</h2> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230221164019044.png" alt="image-20230221164019044" style="zoom:67%;"> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230221181320728.png" alt="image-20230221181320728"></p> <h2 id="_126-重点-严格模式"><a href="#_126-重点-严格模式" class="header-anchor">#</a> 126 （重点）严格模式</h2> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230221223819440.png" alt="image-20230221223819440" style="zoom:67%;"> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230221224257757.png" alt="image-20230221224257757"></p> <h2 id="_127-重点-http跨域请求时为何发送options请求"><a href="#_127-重点-http跨域请求时为何发送options请求" class="header-anchor">#</a> 127 (重点)HTTP跨域请求时为何发送options请求</h2> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230221224907820.png" alt="image-20230221224907820" style="zoom:67%;"> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230221225115253.png" alt="image-20230221225115253"></p> <h2 id="_128-重点-垃圾回收与内存泄漏"><a href="#_128-重点-垃圾回收与内存泄漏" class="header-anchor">#</a> 128 （重点）垃圾回收与内存泄漏</h2> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230221230019850.png" alt="image-20230221230019850" style="zoom:67%;"> <p><strong>闭包不是内存泄漏，闭包是不能被垃圾回收的</strong></p> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230221230349772.png" alt="image-20230221230349772" style="zoom:67%;"> <h2 id="_129-浏览器和nodejs事件循环有什么区别"><a href="#_129-浏览器和nodejs事件循环有什么区别" class="header-anchor">#</a> 129 浏览器和nodejs事件循环有什么区别</h2> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230221231009463.png" alt="image-20230221231009463"></p> <p><strong>可以学习一下nodejs的事件优先级</strong></p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230221231058596.png" alt="image-20230221231058596"></p> <h2 id="_130-重点-遍历数组-for和foreach哪个快"><a href="#_130-重点-遍历数组-for和foreach哪个快" class="header-anchor">#</a> 130 （重点）遍历数组，for和forEach哪个快</h2> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230221231447483.png" alt="image-20230221231447483"></p> <h2 id="_131-jsbridge原理"><a href="#_131-jsbridge原理" class="header-anchor">#</a> 131 jsbridge原理</h2> <h2 id="_132-重点-script-defer和async有什么区别"><a href="#_132-重点-script-defer和async有什么区别" class="header-anchor">#</a> 132 （重点）script defer和async有什么区别</h2> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230222105529184.png" alt="image-20230222105529184"></p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230222105636874.png" alt="image-20230222105636874"></p> <h2 id="_133-重点-preload-和prefetch"><a href="#_133-重点-preload-和prefetch" class="header-anchor">#</a> 133 （重点）preload 和prefetch</h2> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230222122418369.png" alt="image-20230222122418369"></p> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230222122537477.png" alt="image-20230222122537477" style="zoom:67%;"> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230222122914545.png" alt="image-20230222122914545"></p> <h2 id="_134-重点-如何实现网页多标签通信"><a href="#_134-重点-如何实现网页多标签通信" class="header-anchor">#</a> 134 （重点）如何实现网页多标签通信</h2> <h3 id="多标签通信"><a href="#多标签通信" class="header-anchor">#</a> 多标签通信</h3> <p>同一个网页打开多个标签</p> <p>操作一个标签后，另一个标签也跟着更新</p> <h3 id="websocket"><a href="#websocket" class="header-anchor">#</a> websocket</h3> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230222131127504.png" alt="image-20230222131127504"></p> <h3 id="localstorage"><a href="#localstorage" class="header-anchor">#</a> localStorage</h3> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230222131458214.png" alt="image-20230222131458214"></p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230222131646290.png" alt="image-20230222131646290"></p> <h3 id="sharedworker"><a href="#sharedworker" class="header-anchor">#</a> SharedWorker</h3> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230222131758180.png" alt="image-20230222131758180"></p> <h3 id="总结-3"><a href="#总结-3" class="header-anchor">#</a> 总结</h3> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230222133127459.png" alt="image-20230222133127459"></p> <h2 id="_135-重点-网页和iframe如何通信"><a href="#_135-重点-网页和iframe如何通信" class="header-anchor">#</a> 135 (重点)网页和iframe如何通信</h2> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230222133836260.png" alt="image-20230222133836260"></p> <h2 id="_136-重点-修改函数参数"><a href="#_136-重点-修改函数参数" class="header-anchor">#</a> 136 (重点)修改函数参数</h2> <p>修改形参不影响实参的，实参不会变化</p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230222162939135.png" alt="image-20230222162939135"></p> <h1 id="重点-js-web-api"><a href="#重点-js-web-api" class="header-anchor">#</a> （重点)JS Web Api</h1> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230218215328961.png" alt="image-20230218215328961" style="zoom:50%;"> <h2 id="dom"><a href="#dom" class="header-anchor">#</a> Dom</h2> <h3 id="获取dom节点的方法"><a href="#获取dom节点的方法" class="header-anchor">#</a> 获取dom节点的方法</h3> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230218215942475.png" alt="image-20230218215942475" style="zoom:50%;"> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230218220015286.png" alt="image-20230218220015286" style="zoom:50%;"> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230218220328643.png" alt="image-20230218220328643" style="zoom:50%;"> <h3 id="新增-插入节点、删除节点"><a href="#新增-插入节点、删除节点" class="header-anchor">#</a> 新增/插入节点、删除节点</h3> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230218220525348.png" alt="image-20230218220525348" style="zoom:50%;"> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230218220732117.png" alt="image-20230218220732117" style="zoom:50%;"> <h3 id="重点-dom性能"><a href="#重点-dom性能" class="header-anchor">#</a> （重点）Dom性能</h3> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230218220840820.png" alt="image-20230218220840820" style="zoom:50%;"> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230218221018149.png" alt="image-20230218221018149" style="zoom:50%;"> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230218221135360.png" alt="image-20230218221135360" style="zoom:50%;"> <h2 id="bom"><a href="#bom" class="header-anchor">#</a> Bom</h2> <h3 id="获取浏览器信息"><a href="#获取浏览器信息" class="header-anchor">#</a> 获取浏览器信息</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> ua <span class="token operator">=</span> navigator<span class="token punctuation">.</span>userAgent
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="location"><a href="#location" class="header-anchor">#</a> location</h3> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230218232616617.png" alt="image-20230218232616617"></p> <p>hash 获取 url #后面的</p> <p>search 获取 url ?后面的</p> <h3 id="history"><a href="#history" class="header-anchor">#</a> history</h3> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230218232628678.png" alt="image-20230218232628678"></p> <h2 id="事件绑定"><a href="#事件绑定" class="header-anchor">#</a> 事件绑定</h2> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230218233147205.png" alt="image-20230218233147205"></p> <h3 id="通用绑定函数"><a href="#通用绑定函数" class="header-anchor">#</a> 通用绑定函数</h3> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230218233308417.png" alt="image-20230218233308417" style="zoom:50%;"> <p>还可以进行升级，兼容事件代理的绑定函数</p> <h3 id="事件冒泡"><a href="#事件冒泡" class="header-anchor">#</a> 事件冒泡</h3> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230218233725909.png" alt="image-20230218233725909" style="zoom:50%;"> <h3 id="事件代理"><a href="#事件代理" class="header-anchor">#</a> 事件代理</h3> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230218233859961.png" alt="image-20230218233859961" style="zoom:50%;"> <h2 id="ajax-2"><a href="#ajax-2" class="header-anchor">#</a> ajax</h2> <h3 id="手写一个简易的ajax"><a href="#手写一个简易的ajax" class="header-anchor">#</a> 手写一个简易的ajax</h3> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230219000721625.png" alt="image-20230219000721625" style="zoom:50%;"> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230219001312619.png" alt="image-20230219001312619" style="zoom:50%;"> <h3 id="跨域的常用实现方式"><a href="#跨域的常用实现方式" class="header-anchor">#</a> 跨域的常用实现方式</h3> <ul><li>jsonp（考察原理是如何实现）</li> <li>cors</li></ul> <h2 id="存储"><a href="#存储" class="header-anchor">#</a> 存储</h2> <p>cookie</p> <p>sectionStorage</p> <p>localStorage</p> <h1 id="基础问题"><a href="#基础问题" class="header-anchor">#</a> 基础问题</h1> <h2 id="_1-let-const-var的区别。const定义的对象是否可以修改"><a href="#_1-let-const-var的区别。const定义的对象是否可以修改" class="header-anchor">#</a> 1.let,const,var的区别。const定义的对象是否可以修改</h2> <p>自己整理的关于变量提升和暂时性死区https://juejin.cn/post/7051884459108827167</p> <p>var 未先声明也可以先使用，存在变量提升，不过是undefined</p> <p>let，const必须先声明后才可以使用，会形成暂时性死区</p> <p>const并不是变量的值不能改动，而是变量指向的内存地址所保存的数据不得改动</p> <p>完整参考https://juejin.cn/post/6991053348396859428</p> <h2 id="_2-js的原型和原型链-原型链的终点在哪里"><a href="#_2-js的原型和原型链-原型链的终点在哪里" class="header-anchor">#</a> 2.js的原型和原型链，原型链的终点在哪里？</h2> <p>原型链的终点是null</p> <p>https://juejin.cn/post/6934498361475072014</p> <h2 id="_3-重点-js的基本数据类型"><a href="#_3-重点-js的基本数据类型" class="header-anchor">#</a> 3.(重点)js的基本数据类型</h2> <p><strong>1、基本数据类型和引用数据类型</strong></p> <p>ECMASciprt包括两个不同类型的值：<strong>基本数据类型</strong>和引用数据类型。</p> <p><strong>2、常见的基本数据类型：</strong></p> <p>Number、String、Boolean、Null和Undefind 。(后来加了symbol)基本数据类型是按值访问的，因为可以直接操作保存在变量中的实际值</p> <p><strong>3、引用类型数据</strong></p> <p>也就是对象类型Object type，比如：Object、Array、Function、Data等。</p> <h2 id="_4-事件委托-详细讲"><a href="#_4-事件委托-详细讲" class="header-anchor">#</a> 4.事件委托，详细讲</h2> <p>https://juejin.cn/post/6844904097372438542</p> <p>事件委托，通俗的说就是将元素的事件委托给它的父级或者更外级的元素处理，它的实现机制就是事件冒泡。</p> <h2 id="_5-es6新特性-常用语法有哪些"><a href="#_5-es6新特性-常用语法有哪些" class="header-anchor">#</a> 5.es6新特性，常用语法有哪些</h2> <p>https://juejin.cn/post/6844903618810757128</p> <h2 id="_6-this的原理-call-apply-bind的区别"><a href="#_6-this的原理-call-apply-bind的区别" class="header-anchor">#</a> 6.this的原理，call，apply，bind的区别</h2> <p>this 的指向并不是在创建的时候就可以确定的，在 es5 中，永远是<strong>this 永远指向最后调用它的那个对象</strong>。</p> <p>值得细读https://juejin.cn/post/6844903496253177863</p> <h2 id="_7-全等和弱等的区别"><a href="#_7-全等和弱等的区别" class="header-anchor">#</a> 7.全等和弱等的区别</h2> <p>相等 ==： 先转换类型再比较</p> <p>全等 ===：直接比较，不转换类型，只要是类型不同就不相等，类型相同的看值是否相等</p> <h2 id="_8-构造函数的原型"><a href="#_8-构造函数的原型" class="header-anchor">#</a> 8.构造函数的原型</h2> <h2 id="_9-函数柯里化"><a href="#_9-函数柯里化" class="header-anchor">#</a> 9.函数柯里化</h2> <p>在数学和计算机科学中，柯里化是一种将使用多个参数的一个函数转换成一系列使用一个参数的函数的技术。</p> <p>柯里化实际是把简答的问题复杂化了，但是复杂化的同时，我们在使用函数时拥有了更加多的自由度。 而这里对于函数参数的自由处理，正是柯里化的核心所在</p> <h2 id="_10-数组浅拷贝"><a href="#_10-数组浅拷贝" class="header-anchor">#</a> 10.数组浅拷贝</h2> <p>https://juejin.cn/post/6844903951247081485</p> <p>浅拷贝大体意思就是改变数组表层不会跟着改，内部会跟着改</p> <p>经过浅拷贝后得到的对象，对于第一层数据其修改后已经不能影响之前的数据，但对于内部还存在迭代器的数据属性，还是有引用情况的存在，所以后者对这些属性的修改，依旧会影响前者中这些属性的内容。</p> <p>Object.assign()其方法自身实行的便是浅拷贝</p> <h2 id="_11-立即执行函数"><a href="#_11-立即执行函数" class="header-anchor">#</a> 11.立即执行函数</h2> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 这里是函数体
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_12-浏览器事件模型-ie的有什么特殊-如何兼容-attachevent与addeventlistener"><a href="#_12-浏览器事件模型-ie的有什么特殊-如何兼容-attachevent与addeventlistener" class="header-anchor">#</a> 12.浏览器事件模型, IE的有什么特殊, 如何兼容(attachEvent与addEventListener)</h2> <p>标准浏览器事件模型指<a href="https://so.csdn.net/so/search?q=addEventListener&amp;spm=1001.2101.3001.7020" target="_blank" rel="noopener noreferrer">addEventListener<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>事件，IE事件模型指的是attachEvent事件</p> <h2 id="_13-js宏任务和微任务"><a href="#_13-js宏任务和微任务" class="header-anchor">#</a> 13.js宏任务和微任务</h2> <p>阿里一面：熟悉事件循环？那谈谈为什么会分为宏任务和微任务：https://juejin.cn/post/7073099307510923295</p> <p>在等待异步任务准备的同时，JS引擎去执行其他同步任务，等到异步任务准备好了，再去执行回调。这种模式的优势显而易见，完成相同的任务，花费的时间大大减少，这种方式也被叫做非阻塞式。</p> <p>而实现这个“通知”的，正是事件循环，把异步任务的回调部分交给事件循环，等时机合适交还给JS线程执行。事件循环并不是JavaScript首创的，它是计算机的一种运行机制。</p> <p>事件循环是由一个队列组成的，异步任务的回调遵循先进先出，在JS引擎空闲时会一轮一轮地被取出，所以被叫做循环。</p> <p>根据队列中任务的不同，分为宏任务和微任务。</p> <p>事件循环由宏任务和在执行宏任务期间产生的所有微任务组成。<font color="red" size="3">完成当下的宏任务后，会立刻执行所有在此期间入队的微任务。</font></p> <p>这种设计是为了给紧急任务一个插队的机会，否则新入队的任务永远被放在队尾。<font color="red" size="3">区分了微任务和宏任务后，本轮循环中的微任务实际上就是在插队，这样微任务中所做的状态修改，在下一轮事件循环中也能得到同步。</font>font&gt;</p> <p>常见的宏任务有：script（整体代码）/setTimout/setInterval/setImmediate(node 独有)/requestAnimationFrame(浏览器独有)/IO/UI render（浏览器独有）</p> <p>常见的微任务有：process.nextTick(node 独有)/Promise.then()/Object.observe/MutationObserver</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'第一个回调函数：微任务1'</span><span class="token punctuation">)</span>  
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'第三个回调函数：宏任务2'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'第二个回调函数：宏任务1'</span><span class="token punctuation">)</span>
  Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'第四个回调函数：微任务2'</span><span class="token punctuation">)</span>   
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
<span class="token comment">// 第一个回调函数：微任务1</span>
<span class="token comment">// 第二个回调函数：宏任务1</span>
<span class="token comment">// 第四个回调函数：微任务2</span>
<span class="token comment">// 第三个回调函数：宏任务2</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><font color="red" size="3">浏览器执行时是一个宏任务+一个微任务队列，而node是一整个宏任务队列+一个微任务队列。</font>事件循环是不一致得</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Script开始'</span><span class="token punctuation">)</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'第一个回调函数，宏任务1'</span><span class="token punctuation">)</span>
  Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'第四个回调函数，微任务2'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'第二个回调函数，宏任务2'</span><span class="token punctuation">)</span>
  Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'第五个回调函数，微任务3'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'第三个回调函数，微任务1'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Script结束'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>node端：
Script开始
Script结束
第三个回调函数，微任务<span class="token number">1</span>
第一个回调函数，宏任务<span class="token number">1</span>
第二个回调函数，宏任务<span class="token number">2</span>
第四个回调函数，微任务<span class="token number">2</span>
第五个回调函数，微任务<span class="token number">3</span>

浏览器
Script开始
Script结束
第三个回调函数，微任务<span class="token number">1</span>
第一个回调函数，宏任务<span class="token number">1</span>
第四个回调函数，微任务<span class="token number">2</span>
第二个回调函数，宏任务<span class="token number">2</span>
第五个回调函数，微任务<span class="token number">3</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>node11.x 之前，其事件循环的规则就如上文所述：先取出完一整个宏任务队列中全部任务，然后执行一个微任务队列。</p> <p>但在11.x 之后，node端的事件循环变得和浏览器类似：先执行一个宏任务，然后是一个微任务队列。<font color="red" size="3">但依然保留了宏任务队列和微任务队列的优先级。</font></p> <p>node端的事件循环比浏览器更复杂，它的宏任务分为六个优先级，微任务分为两个优先级。node端的执行规律是一个宏任务队列搭配一个微任务队列，而浏览器是一个单独的宏任务搭配一个微任务队列。<font color="red" size="3">但是在node11之后，node和浏览器的规律趋同。</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Script开始'</span><span class="token punctuation">)</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'宏任务1（setTimeout)'</span><span class="token punctuation">)</span>
  Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'微任务promise2'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token function">setImmediate</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'宏任务2'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'宏任务3（setTimeout)'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Script结束'</span><span class="token punctuation">)</span>
Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'微任务promise1'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
process<span class="token punctuation">.</span><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'微任务nextTick'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>在 node11.x 之前运行：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Script开始
Script结束
微任务nextTick
微任务promise1
宏任务<span class="token number">1</span>（setTimeout<span class="token punctuation">)</span>
宏任务<span class="token number">3</span>（setTimeout<span class="token punctuation">)</span>
微任务promise2
宏任务<span class="token number">2</span>（setImmediate<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>在 node11.x 之后运行：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Script开始
Script结束
微任务nextTick
微任务promise1
宏任务<span class="token number">1</span>（setTimeout<span class="token punctuation">)</span>
微任务promise2
宏任务<span class="token number">3</span>（setTimeout<span class="token punctuation">)</span>
宏任务<span class="token number">2</span>（setImmediate<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_14-数组查找的方法"><a href="#_14-数组查找的方法" class="header-anchor">#</a> 14.数组查找的方法</h2> <p>indexOf</p> <p>lastIndexOf</p> <p>includes</p> <p>find</p> <p>findIndex</p> <h2 id="_15-了解过for-of吗"><a href="#_15-了解过for-of吗" class="header-anchor">#</a> 15.了解过for…of吗</h2> <p>还是先列举<code>for...of</code> 的特点，然后后面再用代码来论证。</p> <ol><li>for of通常用来<code>遍历数组</code>，从左到右遍历</li> <li>for of<code>遍历得到的结果是数据的值</code>，而不像for in得到的是索引/属性</li> <li>for of还可以遍历map,set,String等</li> <li>for of不可以遍历普通的对象,但是可以借用Object.keys方法遍历对象</li></ol> <p>https://juejin.cn/post/7038502292131151886</p> <h2 id="_16-class继承和js继承的区别"><a href="#_16-class继承和js继承的区别" class="header-anchor">#</a> 16.class继承和js继承的区别</h2> <p>为了和其他语言继承形态一致，JS提供了<code>class</code> 关键词用于模拟传统的<code>class</code> ，但底层实现机制依然是原型继承。</p> <p><code>class</code> 只是语法糖为了让类的声明与继承更加简洁清晰。</p> <p>https://kexiaozhan.github.io/docs/node/javaScript/%E5%8E%9F%E5%9E%8B%E4%B8%8E%E7%BB%A7%E6%89%BF/%E7%BB%A7%E6%89%BF%E4%B8%8E%E5%A4%9A%E6%80%81.html#%E7%BB%A7%E6%89%BF%E5%AE%9E%E7%8E%B0</p> <p>https://kexiaozhan.github.io/docs/node/javaScript/%E7%B1%BB/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.html</p> <h2 id="_17-的原型链"><a href="#_17-的原型链" class="header-anchor">#</a> 17.{}的原型链</h2> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/16d0b42ee465ff96~tplv-t2oaga2asx-zoom-in-crop-mark:3024:0:0:0.awebp" alt="JavaScript-prototype" style="zoom:50%;"> <h2 id="_18-typeof-null是什么-为什么是这个结果。"><a href="#_18-typeof-null是什么-为什么是这个结果。" class="header-anchor">#</a> 18.typeof null是什么，为什么是这个结果。</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token keyword">typeof</span> <span class="token keyword">null</span> <span class="token operator">===</span> <span class="token string">'object'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>https://www.jianshu.com/p/7b78e66b04c3?u_atoken=b1ce406e-8fe0-4e9e-a63a-3b5617f1646a&amp;u_asession=01fqPSsAoncn8irqAhdIzRLKzk4kubxSiTPIh5qHBoS4fpFp-yspkQogc7gFzqIYSzX0KNBwm7Lovlpxjd_P_q4JsKWYrT3W_NKPr8w6oU7K_GrGa4kTPkHl34DdGS60xYslvTX-jMTLEIhdGFg3rxgWBkFo3NEHBv0PZUm6pbxQU&amp;u_asig=05jbnufJzzl_zFfBjk7-M9at0jhMpmpgxAsgT7pyVwjzX7M0iBH_IzaMFBEydjOcld3m9YwrMyPId6SkNW3Ik7MGrLyDUoPbDdg0zUi4VIu7ifT3zZWuZ_NcFSHHYf60_sv7f_6xGXrdd78u2VBx4T2CaHq_6hLUVDvsa2Cew3mPz9JS7q8ZD7Xtz2Ly-b0kmuyAKRFSVJkkdwVUnyHAIJzTxlmnbP8Qoo1yEaZ-OEoSj-72m45AHIiTdvxrJK1VgK6FPw117USKdEPc8n7HkzU-3h9VXwMyh6PgyDIVSG1W8OSlbCIC5o_mrSvytbcN5igB0tNw8LOpQi1Vh_q51-PKdELexKCvqg-j4O8xtdHW0lSo1Wnx4oDLB0en1vKDPjmWspDxyAEEo4kbsryBKb9Q&amp;u_aref=P6p7VagI2MfgkuCkxP0nKj%2F7bJ8%3D</p> <p>这是第一版 <code>Javascript</code> 的历史遗留问题。</p> <p>在这一版本 <code>Javascript</code> 中，数据以二进制 <code>32</code> 字节存储，由 <code>值 + 标志位</code> 组成。为考虑性能，使用低位（前位）存储了变量的数据类型信息，即标志位（<code>TYPE TAG</code>），由 <code>1 ~ 3</code> 个字节组成。其他位表示真实值内容。</p> <h4 id="_2-使用标志位判断类型"><a href="#_2-使用标志位判断类型" class="header-anchor">#</a> 2 使用标志位判断类型</h4> <p>共有 <code>5</code> 种标志位：</p> <ul><li><code>1</code>     整型类型，值是 <code>31</code> 位带符号整数</li> <li><code>000</code> 对象类型，值是对象的引用</li> <li><code>010</code> 双精度类型，值是双精度数字</li> <li><code>100</code> 字符串类型，值是字符串</li> <li><code>110</code> 布尔类型，值是布尔值</li></ul> <p>另外还有两个特殊值</p> <ul><li><code>undefined</code> （<code>JSVAL_VOID</code>），值为 <code>-2^30</code> （此数不在整型范围内）</li> <li><code>null</code> 空指针，对 <code>object</code> 值的空引用，即<strong>期望</strong>得到一个对象但未指向，值全为 <code>0</code>。</li></ul> <h2 id="_19-typeof和instanceof有什么区别-说说判断的原理"><a href="#_19-typeof和instanceof有什么区别-说说判断的原理" class="header-anchor">#</a> 19.typeof和instanceof有什么区别，说说判断的原理</h2> <p><strong>typeof是一个一元运算符，放在一个运算数之前，运算数可以使任意类型。</strong></p> <p>它返回值是一个字符串，说明运算数的类型。</p> <p>typeof返回果:<strong>number</strong>，<strong>string</strong>，<strong>undefined</strong>，<strong>object</strong>，<strong>boolean</strong>，<strong>function</strong>，<strong>symbol</strong>（<strong>ES6新增</strong>）</p> <p><strong>局限性</strong>：但是在判断一个引用类型的变量时会出现一个问题，无论是什么引用类型都是object。这时候就需要instanceof来检测某个对象是不是另一个对象的实例。</p> <p><strong>instanceof 运算符用来测试一个对象在其原型链中是否存在一个构造函数的prototype属性。<font color="red" size="3">用于判断一个变量是否某个对象的实例</font></strong>。</p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/v2-30d91c7cc85892152ed71825580e916d_720w.jpg" alt="img"></p> <p>然后instanceof的判断规则就是：instanceof运算符的第一个变量是一个对象，暂时称为A;第二个变量一般是一个类，称为B。沿着A的<code>__proto__</code>这条线来找，同时沿着B的prototype这条线来找，如果两条线能找到同一个引用，就是返回true，如果找到终点都没有重合就返回false。</p> <h2 id="_20-重点-数组里面新加的方法你有用过哪些"><a href="#_20-重点-数组里面新加的方法你有用过哪些" class="header-anchor">#</a> 20.(重点)数组里面新加的方法你有用过哪些？</h2> <p><strong>循环遍历</strong></p> <p>forEach</p> <p>for/in</p> <p>for/of</p> <p><strong>扩展方法</strong></p> <p>every</p> <p>some</p> <p>filter</p> <p>map</p> <p>reduce</p> <p><strong>数组排序</strong></p> <p>reserve</p> <p>sort</p> <p><strong>查找元素</strong></p> <p>indexOf</p> <p>lastIndexOf</p> <p>includes</p> <p>find</p> <p>findIndex</p> <p><strong>合并拆分</strong></p> <p>join</p> <p>split</p> <p>concat</p> <p>copywithin</p> <p><strong>管理元素</strong></p> <p>push</p> <p>pop</p> <p>shift</p> <p>unshift</p> <p>fill</p> <p>slice</p> <p>splice</p> <p><strong>解构赋值</strong></p> <p><strong>展开语法</strong></p> <p><strong>类型转换</strong></p> <p>Array.from</p> <h2 id="_21-微任务有哪些"><a href="#_21-微任务有哪些" class="header-anchor">#</a> 21.微任务有哪些？</h2> <p>常见的微任务有：process.nextTick(node 独有)/Promise.then()/Object.observe/MutationObserver</p> <h2 id="_22-如何判断array和object"><a href="#_22-如何判断array和object" class="header-anchor">#</a> 22.如何判断Array和Object</h2> <p>1、方法一：利用toString方法
通过调用toString( )方法试着将该变量转化为代表其类型的string。该方法对于真正的array可行；参数对象转化为string时返回[object Arguments]会转化失败；此外， 对于含有数字长度属性的object类也会转化失败。
2、方法二：通过isArray
返回true或false，如果为true则为数组
3、方法三：通过instanceof运算符来判断
4、使用isPrototypeOf()函数
使用方法: parent.isPrototypeOf(child)来检测parent是否为child的原型;</p> <h2 id="_23-js精度问题-0-1-0-2-0-3的问题"><a href="#_23-js精度问题-0-1-0-2-0-3的问题" class="header-anchor">#</a> 23.js精度问题（0.1+0.2==0.3的问题）</h2> <p>原因分析</p> <p>JS浮点数存储机制：</p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/924210-20190307211249845-309096404.png" alt="img"></p> <p>解决办法</p> <p>1.自己实现浮点数加法</p> <p>2.先转化可以计算的整数，再相加，最后转化为小数。</p> <p>3.精度取一定位数如5</p> <h2 id="_24-讲一下generator生成器"><a href="#_24-讲一下generator生成器" class="header-anchor">#</a> 24.讲一下generator生成器</h2> <p>在JavaScript中，异步编程场景使用非常多，经常会现需要逐步完成多个异步操作的情况。之前用回调函数实现异步编程如果碰到了这种问题就需要嵌套使用回调函数，异步操作越多，嵌套得就越深，导致代码的可维护性较差，代码阅读起来也很困难。</p> <p>Generator函数是ES6提出的一种异步编程解决方案，它可以避免回调的嵌套，语法行为与传统函数完全不同。除此之外，Generator的特性在某些场景使用也十分方便。</p> <p>挺好一篇文章https://juejin.cn/post/6844904047137275917</p> <h2 id="_25-讲一下声明提升"><a href="#_25-讲一下声明提升" class="header-anchor">#</a> 25.讲一下声明提升</h2> <p>https://juejin.cn/post/6844903607066689550</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">// undefined</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token string">'hello JS'</span> 

<span class="token comment">/* 在我们声明a之前为什么输出a不会报错呢？ 不急，让我们接着往下看 */</span>

num <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
num<span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> num<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token comment">// 7 好奇怪，为什么给一个还没有声明的变量赋值会不报错呢</span>

<span class="token keyword">function</span> <span class="token function">hoistFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>        
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'running...'</span><span class="token punctuation">)</span>    
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">hoistFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// running... </span>

<span class="token comment">/* 最后一个栗子 */</span>

<span class="token function">alert</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">//  function a { alert(10) }</span>
<span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 10</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">// 3</span>
a <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>
<span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// throw error</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>JS引擎会在正式执行代码之前进行一次”<strong>预编译</strong>“，预编译简单理解就是在内存中开辟一些空间，存放一些变量和函数。具体步骤如下（browser）：</p> <ul><li><p>页面创建<strong>GO全局对象</strong>（Global Object）对象（window对象）。</p></li> <li><p>加载第一个脚本文件</p></li> <li><p>脚本加载完毕后，进行语法分析。</p></li> <li><p><strong>开始预编译</strong></p></li> <li><ul><li>**<em>*查找函数声明，作为GO属性，值赋予函数体（函数声明优先）*</em>
**</li> <li><strong>查找变量声明，作为GO属性，值赋予undefined</strong></li></ul></li></ul> <h2 id="_26-讲一下块作用域"><a href="#_26-讲一下块作用域" class="header-anchor">#</a> 26.讲一下块作用域</h2> <p>块级作用域可通过新增命令let和const声明，所声明的变量在指定块的作用域外无法被访问。块级作用域在如下情况被创建：</p> <ol><li>在一个函数内部</li> <li>在一个代码块（由一对花括号包裹）内部</li></ol> <p>let 声明的语法与 var 的语法一致。你基本上可以用 let 来代替 var 进行变量声明，但会将变量的作用域限制在当前代码块中。块级作用域有以下几个特点：</p> <ul><li>声明变量不会提升到代码块顶部</li> <li>禁止重复声明</li> <li>循环中的绑定块作用域的妙用</li></ul> <h2 id="_27-原型对象的constructor属性指向谁"><a href="#_27-原型对象的constructor属性指向谁" class="header-anchor">#</a> 27.原型对象的constructor属性指向谁</h2> <p><strong>constructor属性指向其构造函数</strong></p> <p>构造函数通过prototype属性链接到原型对象。</p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20220722130215958.png" alt="image-20220722130215958"></p> <h2 id="_28-dom规范跟js规范有什么区别"><a href="#_28-dom规范跟js规范有什么区别" class="header-anchor">#</a> 28.dom规范跟js规范有什么区别？</h2> <p>DOM是文档对象模型的缩写，可以说是一种模型结构。而Javascript是一种客户端脚本语言</p> <h2 id="_29-js定时器-设置一个时间-会在那个时间之后准时执行吗"><a href="#_29-js定时器-设置一个时间-会在那个时间之后准时执行吗" class="header-anchor">#</a> 29.js定时器，设置一个时间，会在那个时间之后准时执行吗？</h2> <p>不会准确无误的按照预期的时间去执行定时器里面的代码</p> <p>先把定时器事件交给定时器线程去处理，这时主线程继续执行下面的代码，同时定时器线程开始计时处理，等到计时完毕，事件循环线程会把定时器要执行的操作放在事件队列末尾，等主线程空闲的时候再来执行事件队列里面的操作。</p> <h2 id="_30-transition有什么需要注意的地方"><a href="#_30-transition有什么需要注意的地方" class="header-anchor">#</a> 30.transition有什么需要注意的地方？</h2> <p>https://juejin.cn/post/6924114612799406093</p> <p><strong>CSS transtion 不支持元素的高度或者宽度为 auto 的变化</strong>。</p> <h2 id="_31-js的错误监控机制有了解吗"><a href="#_31-js的错误监控机制有了解吗" class="header-anchor">#</a> 31.js的错误监控机制有了解吗？</h2> <h2 id="_32-重点-dom0和dom2"><a href="#_32-重点-dom0和dom2" class="header-anchor">#</a> 32.(重点)Dom0和Dom2</h2> <p>https://juejin.cn/post/6844903853956022285</p> <p>W3C DOM标准可以分为DOM1,DOM2,DOM3三个版本。</p> <h1 id="进阶问题"><a href="#进阶问题" class="header-anchor">#</a> 进阶问题</h1> <h2 id="_2-重点-手写filter"><a href="#_2-重点-手写filter" class="header-anchor">#</a> 2.（重点）手写filter</h2> <blockquote><h2 id="定义和用法"><a href="#定义和用法" class="header-anchor">#</a> 定义和用法</h2> <p>filter() 方法创建一个新的数组，新数组中的元素是通过检查指定数组中符合条件的所有元素。</p> <p><strong>注意：</strong> filter() 不会对空数组进行检测。</p> <p><strong>注意：</strong> filter() 不会改变原始数组。</p> <h2 id="语法"><a href="#语法" class="header-anchor">#</a> 语法</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>array.filter(function(currentValue,index,arr), thisValue)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>注意：function参数必选，thisValue参数可选</strong></p></blockquote> <p>手写步骤：</p> <p>1.先判断参数是否为函数，否则直接返回</p> <p>2.创建一个新数组用于返回filter后的结果</p> <p>3.循环遍历数组中每一个值，调用函数，将满足条件的元素放入新数组</p> <p>4.返回新数组</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">_filter</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> fn <span class="token operator">!==</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token keyword">return</span>
    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>length <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            res<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> res
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="_3-settimeout第二个参数为0时和匿名自执行函数区别"><a href="#_3-settimeout第二个参数为0时和匿名自执行函数区别" class="header-anchor">#</a> 3.setTimeout第二个参数为0时和匿名自执行函数区别</h2> <p>setTimeout将第二个参数设置为0，作用是让现有的任务队列一结束就立即执行，因为setTimeout设置了又一个宏任务</p> <p>而匿名自动执行函数是在当前任务队列立刻执行</p> <h2 id="_4-js里堆和栈的区别"><a href="#_4-js里堆和栈的区别" class="header-anchor">#</a> 4.js里堆和栈的区别</h2> <p>我们知道在js中的数据类型可以分为基本类型和引用类型。基本类型是存在栈内存中的，引用类型是存在<a href="https://so.csdn.net/so/search?q=%E5%A0%86%E5%86%85%E5%AD%98&amp;spm=1001.2101.3001.7020" target="_blank" rel="noopener noreferrer">堆内存<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中的，但是引用类型的引用还是存在栈内存中的。</p> <p>栈内存的特点:存取速度快，但不灵活，同时由于结构简单，在变量使用完成后就可以将其释放，内存回收容易实现。</p> <p>我们在访问引用类型时，需要在栈内存中查找 <strong>对应的地址</strong>，在去堆内存中取得真正的值，访问速度自然不及栈内存。</p> <p>堆内存的特点：使用灵活，可以动态增加或删除空间，但是存取比较慢</p> <h2 id="_5-new操作符之后的操作"><a href="#_5-new操作符之后的操作" class="header-anchor">#</a> 5.new操作符之后的操作</h2> <ul><li><p>使用new命令时，它后面的函数依次执行下面的步骤</p> <ol><li><strong>创建空对象</strong>：创建一个空对象，作为将要返回的对象实例</li> <li><strong>连接原型</strong>：将这个空对象的原型，指向构造函数的prototype属性</li> <li><strong>绑定 this</strong>：将这个空对象赋值给函数内部的this关键字</li> <li><strong>返回新对象</strong>：开始执行构造函数内部的代码</li></ol></li></ul> <h2 id="_6-重点-this指向"><a href="#_6-重点-this指向" class="header-anchor">#</a> 6.(重点)this指向</h2> <p>https://juejin.cn/post/6946021671656488991#heading-0</p> <p>相信我，只要记住本文的 7️⃣ 步口诀，就能彻底掌握 JS 中的 this 指向。</p> <p>先念口诀：箭头函数、new、bind、apply 和 call、欧比届点（obj.）、直接调用、不在函数里。</p> <h2 id="_7-es6的使用-相比es5的好处"><a href="#_7-es6的使用-相比es5的好处" class="header-anchor">#</a> 7.ES6的使用，相比ES5的好处</h2> <p>新增变量声明关键字let, const, 多了块级作用域概念</p> <p>变量的解构赋值, 扩展运算符</p> <p>字符串, 数组, 对象, 正则, 数值, 函数等都进行了扩展, 增强操作简便性</p> <p>新增一个数据类型Symbol, 可以解决名称冲突问题</p> <p>新增Set和Map数据结构</p> <p>增加了Proxy和Reflect, 对语言本身进行了规范和扩展</p> <p>标准化了异步解决方案Promise, 统一了语法, 原生提供了Promise对象</p> <p>提供了迭代器和生成器及可迭代协议, 可以用来实现数据结构的迭代. 生成器与异步操作结合, 使得可以使用同步代码的书写方式实现异步功能</p> <p>语言标准层面上, 实现了模块功能, 使得它成为了浏览器端和服务端通用的模块解决方案.</p> <h2 id="_8-简单说一下es6的symbol属性"><a href="#_8-简单说一下es6的symbol属性" class="header-anchor">#</a> 8.简单说一下es6的symbol属性</h2> <h3 id="symbol"><a href="#symbol" class="header-anchor">#</a> Symbol</h3> <ul><li>定义：独一无二的值</li> <li>声明：<code>const set = Symbol(str)</code></li> <li>入参：字符串(可选)</li> <li>方法
<ul><li><strong>Symbol()</strong>：创建以参数作为描述的<code>Symbol值</code>(不登记在全局环境)</li> <li><strong>Symbol.for()</strong>：创建以参数作为描述的<code>Symbol值</code>，如存在此参数则返回原有的<code>Symbol值</code>(先搜索后创建，登记在全局环境)</li> <li><strong>Symbol.keyFor()</strong>：返回已登记的<code>Symbol值</code>的描述(只能返回<code>Symbol.for()</code>的<code>key</code>)</li> <li><strong>Object.getOwnPropertySymbols()</strong>：返回对象中所有用作属性名的<code>Symbol值</code>的数组</li></ul></li> <li>内置
<ul><li><strong>Symbol.hasInstance</strong>：指向一个内部方法，当其他对象使用<code>instanceof运算符</code>判断是否为此对象的实例时会调用此方法</li> <li><strong>Symbol.isConcatSpreadable</strong>：指向一个布尔，定义对象用于<code>Array.prototype.concat()</code>时是否可展开</li> <li><strong>Symbol.species</strong>：指向一个构造函数，当实例对象使用自身构造函数时会调用指定的构造函数</li> <li><strong>Symbol.match</strong>：指向一个函数，当实例对象被<code>String.prototype.match()</code>调用时会重新定义<code>match()</code>的行为</li> <li><strong>Symbol.replace</strong>：指向一个函数，当实例对象被<code>String.prototype.replace()</code>调用时会重新定义<code>replace()</code>的行为</li> <li><strong>Symbol.search</strong>：指向一个函数，当实例对象被<code>String.prototype.search()</code>调用时会重新定义<code>search()</code>的行为</li> <li><strong>Symbol.split</strong>：指向一个函数，当实例对象被<code>String.prototype.split()</code>调用时会重新定义<code>split()</code>的行为</li> <li><strong>Symbol.iterator</strong>：指向一个默认遍历器方法，当实例对象执行<code>for-of</code>时会调用指定的默认遍历器</li> <li><strong>Symbol.toPrimitive</strong>：指向一个函数，当实例对象被转为原始类型的值时会返回此对象对应的原始类型值</li> <li><strong>Symbol.toStringTag</strong>：指向一个函数，当实例对象被<code>Object.prototype.toString()</code>调用时其返回值会出现在<code>toString()</code>返回的字符串之中表示对象的类型</li> <li><strong>Symbol.unscopables</strong>：指向一个对象，指定使用<code>with</code>时哪些属性会被<code>with环境</code>排除</li></ul></li></ul> <h2 id="_9-重点-es6的新特性"><a href="#_9-重点-es6的新特性" class="header-anchor">#</a> 9.（重点）ES6的新特性</h2> <p>一定要细看https://juejin.cn/post/6844903959283367950#heading-11</p> <blockquote><p>场景：面试官提问：都知道哪些es6</p> <p>因为太多了，我们可以列举几个，然后挑一个代表性强的讲，比如promise</p></blockquote> <ul><li><p><font color="red" size="3">声明变量</font>： let，const</p></li> <li><p><font color="red" size="3">解构赋值</font></p> <ul><li>字符串解构</li> <li>对象解构</li> <li>数组解构</li></ul></li> <li><p>字符串方法</p> <ul><li><font color="red" size="3">includes()</font></li> <li>matchAll()返回正则表达式在字符串的所有匹配</li> <li><strong>repeat()</strong>：把字符串重复n次，返回<code>新字符串</code></li></ul></li> <li><p>数组方法</p> <ul><li>Array.from() 转换具有<code>Iterator接口</code>的数据结构为真正数组，返回新数组</li> <li>find()</li> <li>keys()</li> <li>values()</li> <li>entries()</li> <li>flat()扁平化</li></ul></li> <li><p>函数扩展</p> <ul><li>扩展运算符</li> <li>箭头函数</li></ul></li> <li><p>正则扩展</p></li> <li><p>Symbol</p></li> <li><p>Set</p></li> <li><p>Map</p></li> <li><p>Proxy 拦截</p></li> <li><p>Class</p></li> <li><p><font color="red" size="3">Module模块化</font></p> <ul><li><p><strong>export</strong></p> <p><strong>默认导出</strong>：<code>export default Person</code>(导入时可指定模块任意名称，无需知晓内部真实名称)</p> <p><strong>单独导出</strong>：<code>export const name = &quot;Bruce&quot;</code></p> <p><strong>按需导出</strong>：<code>export { age, name, sex }</code>(推荐)</p> <p><strong>改名导出</strong>：<code>export { name as newName }</code></p></li> <li><p>import</p> <p><strong>默认导入</strong>：<code>import Person from &quot;person&quot;</code></p> <p><strong>整体导入</strong>：<code>import * as Person from &quot;person&quot;</code></p> <p><strong>按需导入</strong>：<code>import { age, name, sex } from &quot;person&quot;</code></p> <p><strong>改名导入</strong>：<code>import { name as newName } from &quot;person&quot;</code></p> <p><strong>自执导入</strong>：<code>import &quot;person&quot;</code></p> <p><strong>复合导入</strong>：<code>import Person, { name } from &quot;person&quot;</code></p></li> <li><p>模块方案</p> <ul><li><strong>CommonJS</strong>：用于服务器(动态化依赖)</li> <li><strong>AMD</strong>：用于浏览器(动态化依赖)</li> <li><strong>CMD</strong>：用于浏览器(动态化依赖)</li> <li><strong>UMD</strong>：用于浏览器和服务器(动态化依赖)</li> <li><strong>ESM</strong>：用于浏览器和服务器(静态化依赖)</li></ul></li></ul></li> <li><p>循环迭代</p> <ul><li>for in</li> <li>for of</li> <li>forEach</li> <li>Map</li></ul></li> <li><p>Promise</p></li> <li><p>async await</p></li> <li><p>Generator</p></li> <li><p><font color="red" size="3">Apply Call Bind</font></p></li></ul> <p><font color="red" size="3">最好是挑一个细讲，其它一笔带过</font></p> <h2 id="_10-如果要同时启动两个异步任务-怎么做"><a href="#_10-如果要同时启动两个异步任务-怎么做" class="header-anchor">#</a> 10.如果要同时启动两个异步任务，怎么做</h2> <p>promise.all</p> <h2 id="_11-重点-深拷贝-浅拷贝问题"><a href="#_11-重点-深拷贝-浅拷贝问题" class="header-anchor">#</a> 11.（重点）深拷贝/浅拷贝问题</h2> <p>https://juejin.cn/post/7072528644739956773</p> <p>两个对象指向同一地址， 用 <code>==</code> 运算符作比较会返回 true。</p> <p>两个对象指向不同地址， 用 <code>==</code> 运算符作比较会返回 false。</p> <p><font color="red" size="3">Object.assign 不是深拷贝，只是浅拷贝</font></p> <h2 id="_12-说一下链表的实现"><a href="#_12-说一下链表的实现" class="header-anchor">#</a> 12.说一下链表的实现</h2> <p>https://juejin.cn/post/6844904176229548039</p> <h2 id="_13-bind-object-bind-windows-后的this指向"><a href="#_13-bind-object-bind-windows-后的this指向" class="header-anchor">#</a> 13.bind(object).bind(windows) 后的this指向</h2> <p>object</p> <p>js bind的多次绑定只有第一次是有效的</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token function-variable function">one</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> two <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> three <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">x</span><span class="token operator">:</span> <span class="token number">2</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> fn <span class="token operator">=</span> <span class="token function">one</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>two<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>three<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//1  第二次调用bind也是不生效的，可以看到只打印了一次。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="_14-构造继承里-function-call-argu-里传进来的参数argu是什么"><a href="#_14-构造继承里-function-call-argu-里传进来的参数argu是什么" class="header-anchor">#</a> 14.构造继承里 Function.call(argu)里传进来的参数argu是什么</h2> <p>argument
说明：
　在JavaScript中，arguments是对象的一个特殊属性。arguments对象就像数组，但是它却不是数组。
属性：</p> <blockquote><p>length, 获取arguments对象的长度（实参）。 　　
callee, 引用当前正在执行的函数。</p></blockquote> <p>1.可以借用arguments.length可以来查看实参和形参的个数是否一致：</p> <div class="language-matlab line-numbers-mode"><pre class="language-matlab"><code><span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  var realLen <span class="token operator">=</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>&quot;realLen<span class="token operator">:</span>&quot;<span class="token punctuation">,</span> arguments<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
  var len <span class="token operator">=</span> add<span class="token punctuation">.</span>length<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>&quot;len<span class="token operator">:</span>&quot;<span class="token punctuation">,</span> add<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>realLen <span class="token operator">==</span> len<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'实参和形参个数一致'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'实参和形参个数不一致'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>2.可以借用arguments.callee来让匿名函数实现递归：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span><span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  	<span class="token keyword">return</span> n <span class="token operator">+</span> arguments<span class="token punctuation">.</span><span class="token function">callee</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
　<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;sum =&quot;</span><span class="token punctuation">,</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_15-promise介绍-你是怎么用promise的-怎么实现一个promise"><a href="#_15-promise介绍-你是怎么用promise的-怎么实现一个promise" class="header-anchor">#</a> 15.promise介绍，你是怎么用promise的，怎么实现一个promise</h2> <p>https://juejin.cn/post/6952083081519955998</p> <p>Promise是ES6新增的引用类型，可以通过new来进行实例化对象。Promise内部包含着异步的操作。</p> <blockquote><p>new Promise(fn)</p></blockquote> <blockquote><p>Promise.resolve(fn)</p></blockquote> <p>这两种方式都会返回一个 Promise 对象。</p> <ul><li>Promise 有三种状态： <strong>等待态（Pending）、执行态（Fulfilled）和拒绝态（Rejected）</strong>，且Promise 必须为三种状态之一只有异步操作的结果，可以决定当前是哪一种状态，任何其他操作都无法改变这个状态。</li> <li><strong>状态只能由 Pending 变为 Fulfilled 或由 Pending 变为 Rejected</strong> ，且状态改变之后不会在发生变化，会一直保持这个状态。</li> <li>Pending 变为 Fulfilled 会得到一个私有<strong>value</strong>，Pending 变为 Rejected会得到一个私有<strong>reason</strong>，当Promise达到了Fulfilled或Rejected时，执行的异步代码会接收到这个value或reason。 知道了这些，我们可以得到下面的代码：</li></ul> <p><strong>实现promise，手写promise</strong></p> <h2 id="_16-async是什么的语法糖-generator怎么用"><a href="#_16-async是什么的语法糖-generator怎么用" class="header-anchor">#</a> 16.async是什么的语法糖，generator怎么用</h2> <p>https://juejin.cn/post/7038968296518975525</p> <p>async/await的本质是Generator和Promise的语法糖</p> <h2 id="_17-ajax有哪些状态-每个状态分别对应什么"><a href="#_17-ajax有哪些状态-每个状态分别对应什么" class="header-anchor">#</a> 17.ajax有哪些状态，每个状态分别对应什么</h2> <p><strong>ajax的五种状态（readyState ）</strong></p> <p>0 － （未初始化）还没有调用send()方法
　　1 － （载入）已调用send()方法，正在发送请求
　　2 － （载入完成）send()方法执行完成，已经接收到全部响应内容
　　3 － （交互）正在解析响应内容
　　4 － （完成）响应内容解析完成，可以在客户端调用了</p> <p>ajax状态码
详细说明：</p> <p>100+：表示连接继续
200+：操作成功收到，分析、接受
300+：完成此请求必须进一步处理，重定向
400+：表示各种客户端错误
500+：表示各种服务器错误</p> <p>100——客户必须继续发出请求
101——客户要求服务器根据请求转换HTTP协议版本
200——交易成功
201——提示知道新文件的URL
202——接受和处理、但处理未完成
203——返回信息不确定或不完整
204——请求收到，但返回信息为空
205——服务器完成了请求，用户代理必须复位当前已经浏览过的文件
206——服务器已经完成了部分用户的GET请求
300——请求的资源可在多处得到
301——删除请求数据
302——在其他地址发现了请求数据
303——建议客户访问其他URL或访问方式
304——客户端已经执行了GET，但文件未变化
305——请求的资源必须从服务器指定的地址得到
306——前一版本HTTP中使用的代码，现行版本中不再使用
307——申明请求的资源临时性删除
400——错误请求，如语法错误
401——请求授权失败
402——保留有效ChargeTo头响应
403——请求不允许
404——没有发现文件、查询或URl
405——用户在Request-Line字段定义的方法不允许
406——根据用户发送的Accept拖，请求资源不可访问
407——类似401，用户必须首先在代理服务器上得到授权
408——客户端没有在用户指定的饿时间内完成请求
409——对当前资源状态，请求不能完成
410——服务器上不再有此资源且无进一步的参考地址
411——服务器拒绝用户定义的Content-Length属性请求
412——一个或多个请求头字段在当前请求中错误
413——请求的资源大于服务器允许的大小
414——请求的资源URL长于服务器允许的长度
415——请求资源不支持请求项目格式
416——请求中包含Range请求头字段，在当前请求资源范围内没有range指示值，请求也不包含If-Range请求头字段
417——服务器不满足请求Expect头字段指定的期望值，如果是代理服务器，可能是下一级服务器不能满足请求
500——服务器产生内部错误
501——服务器不支持请求的函数
502——服务器暂时不可用，有时是为了防止发生系统过载
503——服务器过载或暂停维修
504——关口过载，服务器使用另一个关口或服务来响应用户，等待时间设定值较长
505——服务器不支持或拒绝支请求头中指定的HTTP版本</p> <h2 id="_18-手动实现一个ajax-这样实现的方法叫什么"><a href="#_18-手动实现一个ajax-这样实现的方法叫什么" class="header-anchor">#</a> 18.手动实现一个ajax，这样实现的方法叫什么</h2> <p>https://juejin.cn/post/6844903480088346638</p> <p><strong>实现Ajax的四个步骤：</strong></p> <ol><li>新建一个XMLHttpRequest对象。</li> <li>open方法表示初始化请求，此时并没有发送。</li> <li>定义数据返回后的回调函数，里面的代码在readystatechange值改变的时候执行。</li> <li>发送请求。</li></ol> <p><strong>使用Ajax的一个栗子，里面注释的也较为详细：</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">loadXMLDoc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span><span class="token comment">//点击事件</span>
  <span class="token keyword">var</span> xmlhttp<span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>XMLHttpRequest<span class="token punctuation">)</span>
  <span class="token punctuation">{</span>
    <span class="token comment">// IE7+, Firefox, Chrome, Opera, Safari 浏览器执行代码</span>
    xmlhttp<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">else</span>
  <span class="token punctuation">{</span>
    <span class="token comment">// IE6, IE5 浏览器执行代码</span>
    xmlhttp<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">ActiveXObject</span><span class="token punctuation">(</span><span class="token string">&quot;Microsoft.XMLHTTP&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
 <span class="token comment">//1、上面是创建XMLHttpRequest对象</span>
  xmlhttp<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;/try/Ajax/demo_post2.php&quot;</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 2、open方法表示初始化请求，此时并没有发送。</span>
  xmlhttp<span class="token punctuation">.</span><span class="token function">setRequestHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Content-type&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;application/x-www-form-urlencoded&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  xmlhttp<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;fname=Henry&amp;lname=Ford&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//4、发送请求</span>
  xmlhttp<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">{</span><span class="token comment">//3、当参数被传入服务器的时候，引用监听事件。</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>xmlhttp<span class="token punctuation">.</span>readyState<span class="token operator">==</span><span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xmlhttp<span class="token punctuation">.</span>status<span class="token operator">==</span><span class="token number">200</span><span class="token punctuation">)</span>
    <span class="token comment">//判断readyState四种状态，当执行四步完成之后，并且返回的是200（成功）</span>
    <span class="token punctuation">{</span>
      document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;myDiv&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML<span class="token operator">=</span>xmlhttp<span class="token punctuation">.</span>responseText<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="_19-require和import的区别-amd、cmd、es6"><a href="#_19-require和import的区别-amd、cmd、es6" class="header-anchor">#</a> 19.require和import的区别？AMD、CMD、ES6</h2> <ol><li>导入<code>require</code> 导出 <code>exports/module.exports</code> 是 <code>CommonJS</code> 的标准，通常适用范围如 <code>Node.js</code></li> <li><code>import/export</code> 是 <code>ES6</code> 的标准，通常适用范围如 <code>React</code></li> <li><code>require</code> 是<strong>赋值过程</strong>并且是<strong>运行时才执行</strong>，也就是<em>同步加载</em></li> <li><code>require</code> 可以理解为一个全局方法，因为它是一个方法所以意味着可以在任何地方执行。</li> <li><code>import</code> 是<strong>解构过程</strong>并且是<strong>编译时执行</strong>，理解为<em>异步加载</em></li> <li><code>import</code> 会提升到整个模块的头部，具有置顶性，但是建议写在文件的顶部。</li></ol> <blockquote><p><code>commonjs</code> 输出的，是一个值的拷贝，而<code>es6</code>输出的是值的引用；</p> <p>require 是浅拷贝，也就是说你可以修改对象第二层的属性并影响原数据，import 是引用，基本数据类型，修改不会影响原数据，但是对象修改属性会。</p></blockquote> <blockquote><p><code>commonjs</code> 是运行时加载，<code>es6</code>是编译时输出接口；</p></blockquote> <p><code>require</code> 的性能相对于 <code>import</code> 稍低。</p> <p>因为 <code>require</code> 是在运行时才引入模块并且还赋值给某个变量，而 <code>import</code> 只需要依据 <code>import</code> 中的接口在编译时引入指定模块所以性能稍高</p> <p>https://juejin.cn/post/7014011266796617736</p> <h2 id="_20-callback的缺点-promise的状态有哪些-generator-async和await"><a href="#_20-callback的缺点-promise的状态有哪些-generator-async和await" class="header-anchor">#</a> 20.callback的缺点，Promise的状态有哪些，generator，async和await</h2> <h2 id="_21-js溢出怎么解决"><a href="#_21-js溢出怎么解决" class="header-anchor">#</a> 21.js溢出怎么解决</h2> <p>https://juejin.cn/post/6844904017546444808</p> <h3 id="_3-解决内存溢出问题"><a href="#_3-解决内存溢出问题" class="header-anchor">#</a> 3. 解决内存溢出问题</h3> <p>在Node.js应用开发过程中，了解V8内存分配和JavaScript语言限制是Node程序的基本素质。我们应该在应用中权衡利弊，综合考虑内存与程序的运行效率。以下几点防止内存溢出的建议：</p> <h4 id="_3-1-使用-async-await防止事件堆积-变为同步操作"><a href="#_3-1-使用-async-await防止事件堆积-变为同步操作" class="header-anchor">#</a> 3.1. 使用 async/await防止事件堆积,变为同步操作</h4> <p>await将代码执行顺序变为了同步。这样可以使 V8 获得内存回收的机会，有效解决过多事件堆积造成的内存溢出。 我们可以使用await方法处理：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">dbFuc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10000000</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> site <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    site<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'koala'</span><span class="token punctuation">;</span>
    site<span class="token punctuation">.</span>domain <span class="token operator">=</span> <span class="token string">'程序员成长指北'</span><span class="token punctuation">;</span>
    <span class="token comment">// 这里是一个保存或更新等操作</span>

    <span class="token keyword">await</span>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> site<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">dbFuc</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
复制代码
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>每次循环V8都会回收内存一次，因此内存不会再溢出。但这样做必然会造成运行效率的降低，而应该在速度在安全之间平衡，控制好循环的安全次数。 说明:实际开发中，上面这种虽然解决了内存溢出，但是仍然会造成进程阻塞，可以开启一个进程/线程来解决阻塞问题(具体可以看我的这篇文章<a href="https://juejin.cn/post/6844903908385488903" target="_blank" rel="noopener noreferrer">《深入理解Node.js 进程与线程(8000长文彻底搞懂)》<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>)</p> <h4 id="_3-2-增加v8内存空间"><a href="#_3-2-增加v8内存空间" class="header-anchor">#</a> 3.2. 增加V8内存空间</h4> <p>Node.js提供了一个程序运行参数<code>--max-old-space-size</code>，可以通过该参数指定V8所占用的内存空间，这样可以在一定程度上避免程序内存的溢出。 如，我们可以在运行示例2程序时指定使用4G的内存： <code>node --max-old-space-size=4096 app</code></p> <h4 id="_3-3-使用非v8内存"><a href="#_3-3-使用非v8内存" class="header-anchor">#</a> 3.3. 使用非V8内存</h4> <p>Node.js程序所使用的内存分为两类：</p> <ul><li>V8内存：数组、字符串等JavaScript内置对象，运行时使用“V8内存”</li> <li>系统内存：Buffer 是 Node.js 的一个扩展对象，使用底层的系统内存，不占用V8内存空间。与 buffer 相关的文件系统 fs 和stream 流操作，都不会占用 V8 内存。</li></ul> <h2 id="_22-如何实现私有的方法-属性"><a href="#_22-如何实现私有的方法-属性" class="header-anchor">#</a> 22.如何实现私有的方法/属性</h2> <p>https://juejin.cn/post/6881894768117284878</p> <p>闭包--&gt; Symbol --&gt; weakMap --&gt; proxy --&gt; Ts</p> <h2 id="_23-es5实现继承的方法-构造继承-原型链继承-组合继承-寄生组合继承"><a href="#_23-es5实现继承的方法-构造继承-原型链继承-组合继承-寄生组合继承" class="header-anchor">#</a> 23.ES5实现继承的方法，构造继承，原型链继承，组合继承，寄生组合继承</h2> <p>https://juejin.cn/post/6844903617598603278</p> <h2 id="_24-怎么用正则判断当前域名是否为qq-com-或者xxx-qq-com"><a href="#_24-怎么用正则判断当前域名是否为qq-com-或者xxx-qq-com" class="header-anchor">#</a> 24.怎么用正则判断当前域名是否为qq.com，或者xxx.qq.com</h2> <h2 id="_25-try-catch-中如果异步代码出错怎么办"><a href="#_25-try-catch-中如果异步代码出错怎么办" class="header-anchor">#</a> 25.try…catch…中如果异步代码出错怎么办？</h2> <p>抛出错误</p> <h2 id="_26-js怎么删除cookie"><a href="#_26-js怎么删除cookie" class="header-anchor">#</a> 26.js怎么删除cookie</h2> <p>在javascript中想要删除cookie，首先需要找到cookie对应的name对应的值，将其设置为过期；然后设置expire属性的值为过期日期（即任何过去日期）即可，浏览器会自动删除cookie文件。</p> <h2 id="_27-cookie的几个字段的功能"><a href="#_27-cookie的几个字段的功能" class="header-anchor">#</a> 27.cookie的几个字段的功能</h2> <ol><li>name字段：名称</li> <li>value字段：cookie的值</li> <li>domain字段：为可以访问此cookie的域名，顶级域名只能设置domain为顶级域名，不能设置为二级域名或者三级域名，否则cookie无法生成。二级域名能读取设置了domain为顶级域名或者自身的cookie，不能读取其他二级域名domain的cookie。所以要想cookie在多个二级域名中共享，需要设置domain为顶级域名，这样就可以在所有二级域名里面或者到这个cookie的值了。</li> <li>path字段：为可以访问此cookie的页面路径。 比如domain是abc.com,path是/test，那么只有/test路径下的页面可以读取此cookie。</li> <li>Size字段：设置cookie的大小</li> <li>http字段：cookie的httponly属性。若为true，则只有在http请求头中会带有此cookie的信息，而不能通过document.cookie来访问此cookie</li> <li>expires/Max-Age字段：设置cookie的过期时间。不设置的话默认值是Session，意思是cookie会和session一起失效。当浏览器关闭(不是浏览器标签页，而是整个浏览器) 后，此cookie失效。</li> <li>secure字段：设置是否只能通过https来传递此条cookie</li></ol> <h2 id="_28-怎么创建一个promise-参数是什么-怎么中断一个promise"><a href="#_28-怎么创建一个promise-参数是什么-怎么中断一个promise" class="header-anchor">#</a> 28.怎么创建一个Promise，参数是什么，怎么中断一个promise，</h2> <p>new Promise((resolve,reject) =&gt; {</p> <p>})</p> <p>中断： 除了抛异常和return new Promise()，还有什么</p> <h2 id="_29-怎么判断一个空数组"><a href="#_29-怎么判断一个空数组" class="header-anchor">#</a> 29.怎么判断一个空数组</h2> <div class="language- line-numbers-mode"><pre class="language-text"><code>console.log(arr.length == 0);//true
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ol><li>将json对象转化为json字符串，再判断该字符串是否为&quot;[]&quot;</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>var arr = [];
var b = JSON.stringify(arr) === '[]';
console.log(b); //true
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_30-重点-箭头函数跟普通函数的区别-普通函数的作用域"><a href="#_30-重点-箭头函数跟普通函数的区别-普通函数的作用域" class="header-anchor">#</a> 30.(重点)箭头函数跟普通函数的区别，普通函数的作用域</h2> <p>ES6中允许使用“箭头”<code>（=&gt;）</code> 来定义函数。箭头函数相当于匿名函数，并且简化了函数定义</p> <p>https://juejin.cn/post/7069943937577779214</p> <p>我们可以通过打印箭头函数和普通函数来看看两者到底有什么区别：</p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/a3be5fc17f9149f5b0c4ce0f6119ccfa~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp" alt="箭头函数prototype.png"></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token parameter">name</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> <span class="token function-variable function">fn2</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span> <span class="token comment">// </span>
console<span class="token punctuation">.</span><span class="token function">dir</span><span class="token punctuation">(</span>fn2<span class="token punctuation">)</span> <span class="token comment">// </span>
复制代码
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li><p>声明方式不同，匿名函数</p></li> <li><p>**this指向不同，箭头函数内部的<code>this</code>指向是固定的，call、apply、bind也无法改变，**相比之下，普通函数的<code>this</code>指向是可变的。</p></li> <li><p>箭头函数没有原型prototype</p></li> <li><p>因为箭头函数没有原型，箭头函数不能当成一个构造函数</p></li> <li><p><strong>箭头函数没有自己的arguments</strong>，可以使用rest参数代替</p> <ul><li><strong>箭头函数处于全局作用域中，则没有arguments</strong></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token parameter">name</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> <span class="token function-variable function">fn2</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// Arguments [callee: ƒ, Symbol(Symbol.iterator): ƒ]</span>
<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// 报错 Uncaught ReferenceError: arguments is not defined</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>箭头函数处于普通函数的函数作用域中，arguments则是上层普通函数的arguments</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token function-variable function">fn2</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fn2:'</span><span class="token punctuation">,</span>arguments<span class="token punctuation">)</span>
    <span class="token keyword">let</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token parameter">name</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'fn:'</span><span class="token punctuation">,</span>arguments<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token function">fn2</span><span class="token punctuation">(</span><span class="token string">'nanjiu'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>可以使用rest参数代替</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token function-variable function">fn3</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span><span class="token operator">...</span>arr</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>arr<span class="token punctuation">)</span> <span class="token comment">//1, [2,3,4,5,6]</span>
<span class="token punctuation">}</span>

<span class="token function">fn3</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">)</span>
<span class="token comment">//rest参数只能作为函数的最后一个参数</span>
<span class="token comment">// 报错</span>
<span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> <span class="token operator">...</span>b<span class="token punctuation">,</span> c</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
rest参数与arguments的比较：

<span class="token number">1.</span>箭头函数和普通函数都可以使用rest参数，而arguments只能普通函数使用
<span class="token number">2.</span>接受参数rest比arguments更加灵活
<span class="token number">3</span><span class="token punctuation">.</span>rest参数是一个真正的数组，而arguments是一个类数组对象，不能直接使用数组方法
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></li> <li><p>不可以使用<code>yield</code>命令，因此箭头函数不能用作 Generator 函数。</p></li></ul> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230221160958592.png" alt="image-20230221160958592"></p> <h2 id="_31-let-const-babel-中的实现"><a href="#_31-let-const-babel-中的实现" class="header-anchor">#</a> 31.let const, babel 中的实现</h2> <h2 id="_32-fetch的使用-考察通信是否了解"><a href="#_32-fetch的使用-考察通信是否了解" class="header-anchor">#</a> 32.fetch的使用，考察通信是否了解</h2> <p>https://juejin.cn/post/6844903518000644109</p> <h2 id="_33-事件机制-捕获和冒泡-如何阻止冒泡"><a href="#_33-事件机制-捕获和冒泡-如何阻止冒泡" class="header-anchor">#</a> 33.事件机制，捕获和冒泡，如何阻止冒泡？</h2> <p>js，vue，小程序阻止事件冒泡：https://juejin.cn/post/6844903935644270605</p> <h2 id="_34-阻塞、非阻塞和异步同步是对应的吗-一样的吗"><a href="#_34-阻塞、非阻塞和异步同步是对应的吗-一样的吗" class="header-anchor">#</a> 34.阻塞、非阻塞和异步同步是对应的吗？一样的吗？</h2> <p>不是一回事，阻塞是会一直等待啥也不干</p> <p>异步是先去执行完另一件事</p> <p>https://blog.csdn.net/sj349781478/article/details/111651423</p> <h2 id="_35-window-onload和document-ready"><a href="#_35-window-onload和document-ready" class="header-anchor">#</a> 35.window.onload和document.ready，</h2> <p>https://blog.csdn.net/m0_52358470/article/details/122230661</p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/fe751f7ff1c8446ba298dbaa4c139112.png" alt="img"></p> <p>window.onload必须等到页面内包括图片的所有元素和资源加载完毕后才能执行，也就是上述图片的时间点2；</p> <p>$(document).ready()是DOM加载完毕后就执行，不必等到整个网页资源加载完毕，也就是在上述图片的时间点1。</p> <p>onload 是所有资源包括图片都加载完才执行</p> <h2 id="_36-如何给不存在的元素绑定事件监听"><a href="#_36-如何给不存在的元素绑定事件监听" class="header-anchor">#</a> 36.如何给不存在的元素绑定事件监听</h2> <p>事件委托，直接监听父元素来达到要求</p> <h2 id="_37-可以在捕获阶段实现事件代理吗-为什么业界都用冒泡"><a href="#_37-可以在捕获阶段实现事件代理吗-为什么业界都用冒泡" class="header-anchor">#</a> 37.可以在捕获阶段实现事件代理吗，为什么业界都用冒泡？</h2> <p>（原因应该是，捕获和冒泡没有明显的优劣之分，但是冒泡事件流模型被大多数浏览器支持，兼容性更好）</p> <h2 id="_38-promise的api-如果有10个调用请求-那么哪个api能查到最快调用的请求"><a href="#_38-promise的api-如果有10个调用请求-那么哪个api能查到最快调用的请求" class="header-anchor">#</a> 38.promise的api：如果有10个调用请求，那么哪个api能查到最快调用的请求</h2> <p>promise.race</p> <p>Promise.all() 并发处理多个异步任务，所有任务都执行完成才能得到结果（控制台输出一个数组）
Promise.race() 并发处理多个异步任务，只要有一个任务完成就能得到结果（控制台输出速度最快的结果）</p> <h2 id="_39-promise中不声明async-可以用await吗"><a href="#_39-promise中不声明async-可以用await吗" class="header-anchor">#</a> 39.promise中不声明async，可以用await吗</h2> <p><strong>await 也是</strong>一个修饰符，只能放在async定义的函数内。可以理解为等待。</p> <h2 id="_40-内存泄漏"><a href="#_40-内存泄漏" class="header-anchor">#</a> 40.内存泄漏</h2> <p>https://blog.csdn.net/weixin_44682587/article/details/122191888</p> <h2 id="_41-怎么判断一个元素有没有被引用"><a href="#_41-怎么判断一个元素有没有被引用" class="header-anchor">#</a> 41.怎么判断一个元素有没有被引用</h2> <h2 id="_42-全局变量为什么不会被垃圾处理"><a href="#_42-全局变量为什么不会被垃圾处理" class="header-anchor">#</a> 42.全局变量为什么不会被垃圾处理</h2> <p>全局变量 grobal 挂在全局对象上，除非你的全局对象销毁，否则不会被回收(比如关闭浏览器窗口)</p> <h2 id="_43-bom和dom的区别-bom的方法讲完整一点"><a href="#_43-bom和dom的区别-bom的方法讲完整一点" class="header-anchor">#</a> 43.BOM和DOM的区别,BOM的方法讲完整一点</h2> <p>区别https://juejin.cn/post/6964959428843929637</p> <p>常见BOM方法https://juejin.cn/post/6999817069692731423</p> <h2 id="_44-点击事件是宏任务还是微任务"><a href="#_44-点击事件是宏任务还是微任务" class="header-anchor">#</a> 44.点击事件是宏任务还是微任务</h2> <p><code>click</code>事件是宏任务，</p> <p>click是异步回调，点击之后事件循环进入执行栈，此时执行click里的同步代码，</p> <h2 id="_45-class定义类和function定义类的区别"><a href="#_45-class定义类和function定义类的区别" class="header-anchor">#</a> 45.class定义类和function定义类的区别</h2> <p>https://www.jianshu.com/p/decd80924d51</p> <p>当谈到继承时，JavaScript 只有一种结构：对象。每个实例对象（object ）都有一个私有属性（称之为 __ proto __ ）指向它的原型对象（prototype）。该原型对象也有一个自己的原型对象( __ proto __ ) ，层层向上直到一个对象的原型对象为 null。根据定义，null 没有原型，并作为这个原型链中的最后一个环节。</p> <p><code>function</code>和<code>class</code>的几点不同</p> <ol><li><code>class</code>没有变量提升，必须先声明后使用</li> <li><code>class</code>不能重复定义，会报语法错误</li> <li><code>class</code>定义的类没有私有方法和私有属性</li> <li><code>class</code>静态方法与静态属性</li></ol> <h2 id="_46-封装自定义事件-两种方法"><a href="#_46-封装自定义事件-两种方法" class="header-anchor">#</a> 46 封装自定义事件 两种方法</h2> <p>https://blog.csdn.net/lmm0513/article/details/89460447</p> <h2 id="_47-重点-解决定时器延迟问题"><a href="#_47-重点-解决定时器延迟问题" class="header-anchor">#</a> 47 (重点)解决定时器延迟问题</h2> <p>https://juejin.cn/post/6961673921150238751</p> <p>https://juejin.cn/post/7053989703883685901</p> <p><strong>关于setTimeout出现4ms的延迟</strong></p> <p>众所周知，setTimeout第二个参数<code>延迟时间</code>并不是浏览器渲染完毕后多少秒执行第一个参数回调，而是多少时间之后将回调放入执行栈。只要setTimeout形成的嵌套足够多，这样定时器线程来不及处理，执行栈就足够深，就会导致一定的延迟，延迟最终会稳定在4ms左右。</p> <p>使用postMessage解决定时器延迟问题</p> <p>requestAnimationFrame <code>//避免因为主线程执行时间太长导致计时短的计时器反而因为先定义而先执行了</code></p> <p>Web Worker <code>再开启一个线程</code></p> <h2 id="_48-重点-作用域和作用域链"><a href="#_48-重点-作用域和作用域链" class="header-anchor">#</a> 48 (重点)作用域和作用域链</h2> <h3 id="作用域"><a href="#作用域" class="header-anchor">#</a> 作用域</h3> <p>作用域的定义：作用域是在运行时代码中的某些特定部分中变量，函数和对象的可访问性。</p> <p><strong>全局作用域只有一个(注意，window对象可不是全局，当没用let，const，var声明变量时，变量会被挂载到window上)，每个函数又都有作用域（环境）</strong>。</p> <p>作用域链只向上查找，找到全局window即终止，应该尽量不要在全局作用域中添加变量。</p> <ul><li><strong>编译器运行时会将变量定义在所在作用域</strong> <ul><li>使用var定义的变量在预编译时会被声明提升</li> <li>使用let、const的变量会形成作用域死区</li></ul></li> <li>使用变量时会从当前作用域开始向上查找变量</li> <li>作用域就像攀亲亲一样，晚辈总是可以向上辈要些东西</li></ul> <h3 id="作用域链"><a href="#作用域链" class="header-anchor">#</a> 作用域链</h3> <p>作用域链就是作用域中所存储的执行期上下文对象的集合，这个集合呈链式链接，我们把这种链式链接叫做作用域链</p> <h2 id="重点-输出题"><a href="#重点-输出题" class="header-anchor">#</a> (重点)输出题</h2> <blockquote><p>.then .catch 只有不出错，都会返回resolved</p></blockquote> <h3 id="_1-重点-promise输出时机问题"><a href="#_1-重点-promise输出时机问题" class="header-anchor">#</a> 1：(重点)promise输出时机问题</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>	<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;promise1&quot;</span><span class="token punctuation">)</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//异步一</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">//then1</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;then11&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise2'</span><span class="token punctuation">)</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//异步2</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">//then2</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;then21&quot;</span><span class="token punctuation">)</span>
            <span class="token comment">//异步4</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">//then3</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;then23&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token comment">//异步3</span>
        <span class="token comment">//then会默认返回一个return new Promise((resolve, reject) =&gt; {})对象，</span>
        <span class="token comment">//相当于resolve()</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">//then4</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;then12&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><ul><li>个人疑惑就是<code>then12</code>为何在<code>then21</code>和<code>then23</code>之间，很奇怪。</li></ul> <p>答案：</p> <p><font color="red" size="3">重点一：</font><strong>一开始promise的状态都是pending，要记住的是<code>then</code>的参数方法执行时机是当前(属于本身的)promise状态改变才会执行</strong>， 所以是<strong>先将then方法加入微任务，等待resolve，reject异步方法（resolve和reject可能也是个微任务）执行完毕，才能去调用then方法</strong></p> <p><font color="red" size="3">重点二：</font>如果then内没有return语句，then会默认返回一个<code>return new Promise((resolve, reject) =&gt; {})</code>对象，相当于默认加了一个<code>resolve()</code>,</p> <p><font color="red" size="3">重点三：</font>要知道then内如果执行不出错，返回的promise状态都为fulfilled,只有内部执行出错返回状态为rejected,在没执行完前状态为pending</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>promise1
then11
promise2
then21
then12
then23
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>流程分析：</strong></p> <ul><li>先执行同步，输出<code>promise1</code></li> <li>遇到resolve()，记为异步方法一，先将then1加入微任务，此时promise1状态为pending，then1不执行</li> <li>异步方法一执行，promise1状态改变为fulfilled，执行then1</li> <li>then1输入<code>then11</code>，<code>promise2</code>，遇到异步方法二resolve()，先将then2加入微任务，此时promise2状态为pending，then2不执行</li> <li>继续往下，<strong>发现then1没有返回值</strong>，默认生成一个resolve()，记为异步方法三，此时then1返回的promise状态为pending，将then4加入微任务</li> <li>异步方法二resolve()执行完毕，promise2状态为fulfilled,then2执行，<code>输出then21</code>，<strong>发现then2内没有返回值</strong>，默认生成一个resolve()，记为异步方法四，将then3加入微任务</li> <li>异步方法三执行完毕，then4执行，输出then12</li> <li>异步方法四执行完毕，then3执行，输出then23</li></ul> <p><font color="blue" size="4">稍微改动题目，给第二个promise加return</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;promise1&quot;</span><span class="token punctuation">)</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//异步一</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token comment">//then1</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;then11&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">//看这里，加了return Promise, 相当于resolve() //异步二</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise2'</span><span class="token punctuation">)</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//异步三</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token comment">//then2</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;then21&quot;</span><span class="token punctuation">)</span>
            <span class="token comment">//异步四</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token comment">//then3</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;then23&quot;</span><span class="token punctuation">)</span>
            <span class="token comment">//异步五</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token comment">//then4</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;then12&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>答案</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>promise1
then11
promise2
then21
then23
then12
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>流程分析：</strong></p> <ul><li>先执行同步代码，输出<code>promise1</code></li> <li>遇到resolve，记为异步一，先将then1加入微任务，此时promise1的状态为pending，then1不执行</li> <li>异步一执行完毕，promise1的状态为fulfilled，then1执行，输出<code>then11</code></li> <li>继续往下，遇到return promise，相当于 resolve()，记为异步二，将then4加入微任务，此时promise2的状态为pending，then4不执行,输出<code>promise2</code>,</li> <li>promise2内的resolve记为异步三，此时then2对应的promise状态为pending, 异步三执行完毕后then2执行，输出<code>then21</code></li> <li>then2内没有return语句，默认生成个<code>resolve()</code>记为异步四，异步四执行完后then3执行，输出<code>then23</code></li> <li>then3内没有return语句，默认生成个<code>resolve()</code>记为异步五</li> <li>异步五执行完毕后，promise2的状态改变为fulfilled，此时then4很感动，他的promise状态终于改变了，他从微任务队列里跑出来，大喊一声: &quot;输出<code>then12</code>&quot;</li></ul> <p><font color="cornflowerblue" size="5">再添加一个promise</font></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>	<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;promise1&quot;</span><span class="token punctuation">)</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//异步一</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token comment">//then1</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;then11&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token comment">//异步三</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise2'</span><span class="token punctuation">)</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//异步四</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;then21&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;then23&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;then12&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    
    <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span>reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">//异步二</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token comment">//then2</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>答案</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>promise1
1
then11
promise2
2
then21
then23
then12
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>流程分析：</strong></p> <ul><li><p>同步任务输出<code>promise1</code>,记录异步一，<code>1</code>，记录异步二</p></li> <li><p>异步一执行完，输出<code>then11</code> <code>promise2</code>，记录异步三、异步四</p></li> <li><p>异步二执行完，输出<code>then2</code></p></li> <li><p>异步四执行完......和上面那道题流程一样了</p></li> <li><p>以下代码执行结果</p></li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>
var a = {b: 1, c: function(){console.log(this.b)}}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>输出for循环中定时器的输出语句结果</li> <li>打印结果是什么</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>
function test(a,b) {
    console.log(b)
    return {
        test:function(c){
        return test(c,a);
        }
    };
}
var retA = test(0);  retA.test(2);  retA.test(4);  retA.test(8);
var retB = test(0).test(2).test(4).test(8);
var retC = test('good').test('bad');  retC.test('good');  retC.test('bad');
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ul><li>问如何改造，才能实现真正的效果，闭包可以吗，然后用闭包实现一下这个效果</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>
for (var i = 0; i &lt; 4; i++) { setTimeout(function() { console.log(i); }, 300); }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_2-重点-async-await"><a href="#_2-重点-async-await" class="header-anchor">#</a> 2 （重点）async await</h3> <p>await的是个同步方法的话，会立刻执行，await后面的代码可以理解为是要异步执行的</p> <p>这里的async2()会立刻执行</p> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230218205702101.png" alt="image-20230218205702101" style="zoom:50%;"> <p>async返回的是一个promise，await相当于执行.then,下面a是promise(100),b是100</p> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230218214148823.png" alt="image-20230218214148823" style="zoom:50%;"> <p>下面代码 a是100，b是200，但是c因为await 是来执行.then的，这里要来执行catch，报错，后面都不执行了</p> <img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230218214523079.png" alt="image-20230218214523079" style="zoom:50%;"> <h3 id="_3-重点-for-of异步循环"><a href="#_3-重点-for-of异步循环" class="header-anchor">#</a> 3 （重点）for-of异步循环</h3> <p><strong>同步循环</strong></p> <p>下面代码会一次性打印出1,4,9</p> <p>因为forEach，for in这些会一次性把数组都遍历了，而不会因为async await就去等待前一个执行完</p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230218210332022.png" alt="image-20230218210332022"></p> <p><strong>异步循环</strong></p> <p>但是使用for of的话，会去等待前一个执行完再去遍历下一个，下面代码每隔一秒输出1、4、9</p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230218211010637.png" alt="image-20230218211010637"></p> <h1 id="网红题"><a href="#网红题" class="header-anchor">#</a> 网红题</h1> <h2 id="_1"><a href="#_1" class="header-anchor">#</a> 1</h2> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230219155104061.png" alt="image-20230219155104061"></p> <p><img src="https://cdn.jsdelivr.net/gh/KeXiaoZhan/Images/image-20230219155318932.png" alt="image-20230219155318932"></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/面经/腾讯面经/CSS.html" class="prev">
        CSS
      </a></span> <span class="next"><a href="/docs/面经/腾讯面经/TS.html">
        TS
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.9351438b.js" defer></script><script src="/docs/assets/js/2.4eec09cd.js" defer></script><script src="/docs/assets/js/1143.8950e995.js" defer></script>
  </body>
</html>
